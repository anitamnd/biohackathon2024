<?properties open_access?>
<?DTDIdentifier.IdentifierValue -//Springer-Verlag//DTD A++ V2.4//EN?>
<?DTDIdentifier.IdentifierType public?>
<?SourceDTD.DTDName A++V2.4.dtd?>
<?SourceDTD.Version 2.4?>
<?ConverterInfo.XSLTName springer2nlmx2.xsl?>
<?ConverterInfo.Version 1?>
<front>
  <journal-meta>
    <journal-id journal-id-type="nlm-ta">BMC Med Inform Decis Mak</journal-id>
    <journal-id journal-id-type="iso-abbrev">BMC Med Inform Decis Mak</journal-id>
    <journal-title-group>
      <journal-title>BMC Medical Informatics and Decision Making</journal-title>
    </journal-title-group>
    <issn pub-type="epub">1472-6947</issn>
    <publisher>
      <publisher-name>BioMed Central</publisher-name>
      <publisher-loc>London</publisher-loc>
    </publisher>
  </journal-meta>
  <article-meta>
    <article-id pub-id-type="pmcid">6511155</article-id>
    <article-id pub-id-type="publisher-id">806</article-id>
    <article-id pub-id-type="doi">10.1186/s12911-019-0806-z</article-id>
    <article-categories>
      <subj-group subj-group-type="heading">
        <subject>Research Article</subject>
      </subj-group>
    </article-categories>
    <title-group>
      <article-title>A mobile health monitoring-and-treatment system based on integration of the SSN sensor ontology and the HL7 FHIR standard</article-title>
    </title-group>
    <contrib-group>
      <contrib contrib-type="author">
        <name>
          <surname>El-Sappagh</surname>
          <given-names>Shaker</given-names>
        </name>
        <xref ref-type="aff" rid="Aff1">1</xref>
        <xref ref-type="aff" rid="Aff2">2</xref>
      </contrib>
      <contrib contrib-type="author">
        <name>
          <surname>Ali</surname>
          <given-names>Farman</given-names>
        </name>
        <xref ref-type="aff" rid="Aff1">1</xref>
      </contrib>
      <contrib contrib-type="author">
        <name>
          <surname>Hendawi</surname>
          <given-names>Abdeltawab</given-names>
        </name>
        <xref ref-type="aff" rid="Aff3">3</xref>
        <xref ref-type="aff" rid="Aff4">4</xref>
      </contrib>
      <contrib contrib-type="author">
        <name>
          <surname>Jang</surname>
          <given-names>Jun-Hyeog</given-names>
        </name>
        <xref ref-type="aff" rid="Aff5">5</xref>
      </contrib>
      <contrib contrib-type="author" corresp="yes">
        <contrib-id contrib-id-type="orcid">http://orcid.org/0000-0002-9559-4352</contrib-id>
        <name>
          <surname>Kwak</surname>
          <given-names>Kyung-Sup</given-names>
        </name>
        <address>
          <email>kskwak@inha.ac.kr</email>
        </address>
        <xref ref-type="aff" rid="Aff1">1</xref>
      </contrib>
      <aff id="Aff1"><label>1</label><institution-wrap><institution-id institution-id-type="ISNI">0000 0001 2364 8385</institution-id><institution-id institution-id-type="GRID">grid.202119.9</institution-id><institution>Department of Information and Communication Engineering, </institution><institution>Inha University, </institution></institution-wrap>Incheon, South Korea </aff>
      <aff id="Aff2"><label>2</label><institution-wrap><institution-id institution-id-type="ISNI">0000 0004 0621 2741</institution-id><institution-id institution-id-type="GRID">grid.411660.4</institution-id><institution>Information Systems Department, Faculty of Computer and Informatics, </institution><institution>Benha University, </institution></institution-wrap>Banha, Egypt </aff>
      <aff id="Aff3"><label>3</label><institution-wrap><institution-id institution-id-type="ISNI">0000 0000 9136 933X</institution-id><institution-id institution-id-type="GRID">grid.27755.32</institution-id><institution>Computer Science, </institution><institution>University of Virginia, </institution></institution-wrap>Charlottesville, USA </aff>
      <aff id="Aff4"><label>4</label><institution-wrap><institution-id institution-id-type="ISNI">0000 0004 0639 9286</institution-id><institution-id institution-id-type="GRID">grid.7776.1</institution-id><institution>Faculty of Computers and Information, </institution><institution>Cairo University, </institution></institution-wrap>Giza, Egypt </aff>
      <aff id="Aff5"><label>5</label><institution-wrap><institution-id institution-id-type="ISNI">0000 0001 2364 8385</institution-id><institution-id institution-id-type="GRID">grid.202119.9</institution-id><institution>Department of Biochemistry, School of Medicine, </institution><institution>Inha University, </institution></institution-wrap>Incheon, 400-712 South Korea </aff>
    </contrib-group>
    <pub-date pub-type="epub">
      <day>10</day>
      <month>5</month>
      <year>2019</year>
    </pub-date>
    <pub-date pub-type="pmc-release">
      <day>10</day>
      <month>5</month>
      <year>2019</year>
    </pub-date>
    <pub-date pub-type="collection">
      <year>2019</year>
    </pub-date>
    <volume>19</volume>
    <elocation-id>97</elocation-id>
    <history>
      <date date-type="received">
        <day>17</day>
        <month>1</month>
        <year>2019</year>
      </date>
      <date date-type="accepted">
        <day>31</day>
        <month>3</month>
        <year>2019</year>
      </date>
    </history>
    <permissions>
      <copyright-statement>© The Author(s). 2019</copyright-statement>
      <license license-type="OpenAccess">
        <license-p><bold>Open Access</bold>This article is distributed under the terms of the Creative Commons Attribution 4.0 International License (<ext-link ext-link-type="uri" xlink:href="http://creativecommons.org/licenses/by/4.0/">http://creativecommons.org/licenses/by/4.0/</ext-link>), which permits unrestricted use, distribution, and reproduction in any medium, provided you give appropriate credit to the original author(s) and the source, provide a link to the Creative Commons license, and indicate if changes were made. The Creative Commons Public Domain Dedication waiver (<ext-link ext-link-type="uri" xlink:href="http://creativecommons.org/publicdomain/zero/1.0/">http://creativecommons.org/publicdomain/zero/1.0/</ext-link>) applies to the data made available in this article, unless otherwise stated.</license-p>
      </license>
    </permissions>
    <abstract id="Abs1">
      <sec>
        <title>Background</title>
        <p id="Par1">Mobile health (MH) technologies including clinical decision support systems (CDSS) provide an efficient method for patient monitoring and treatment. A mobile CDSS is based on real-time sensor data and historical electronic health record (EHR) data. Raw sensor data have no semantics of their own; therefore, a computer system cannot interpret these data automatically. In addition, the interoperability of sensor data and EHR medical data is a challenge. EHR data collected from distributed systems have different structures, semantics, and coding mechanisms. As a result, building a transparent CDSS that can work as a portable plug-and-play component in any existing EHR ecosystem requires a careful design process. Ontology and medical standards support the construction of semantically intelligent CDSSs.</p>
      </sec>
      <sec>
        <title>Methods</title>
        <p id="Par2">This paper proposes a comprehensive MH framework with an integrated CDSS capability. This cloud-based system monitors and manages type 1 diabetes mellitus. The efficiency of any CDSS depends mainly on the quality of its knowledge and its semantic interoperability with different data sources. To this end, this paper concentrates on constructing a semantic CDSS based on proposed FASTO ontology.</p>
      </sec>
      <sec>
        <title>Results</title>
        <p id="Par3">This realistic ontology is able to collect, formalize, integrate, analyze, and manipulate all types of patient data. It provides patients with complete, personalized, and medically intuitive care plans, including insulin regimens, diets, exercises, and education sub-plans. These plans are based on the complete patient profile. In addition, the proposed CDSS provides real-time patient monitoring based on vital signs collected from patients’ wireless body area networks. These monitoring include real-time insulin adjustments, mealtime carbohydrate calculations, and exercise recommendations. FASTO integrates the well-known standards of HL7 fast healthcare interoperability resources (FHIR), semantic sensor network (SSN) ontology, basic formal ontology (BFO) 2.0, and clinical practice guidelines. The current version of FASTO includes 9577 classes, 658 object properties, 164 data properties, 460 individuals, and 140 SWRL rules. FASTO is publicly available through the National Center for Biomedical Ontology BioPortal at <ext-link ext-link-type="uri" xlink:href="https://bioportal.bioontology.org/ontologies/FASTO"><italic>https://bioportal.bioontology.org/ontologies/FASTO</italic></ext-link>.</p>
      </sec>
      <sec>
        <title>Conclusions</title>
        <p id="Par4">The resulting CDSS system can help physicians to monitor more patients efficiently and accurately. In addition, patients in rural areas can depend on the system to manage their diabetes and emergencies.</p>
      </sec>
      <sec>
        <title>Electronic supplementary material</title>
        <p>The online version of this article (10.1186/s12911-019-0806-z) contains supplementary material, which is available to authorized users.</p>
      </sec>
    </abstract>
    <kwd-group xml:lang="en">
      <title>Keywords</title>
      <kwd>Clinical decision support system</kwd>
      <kwd>Semantic interoperability</kwd>
      <kwd>Ontology</kwd>
      <kwd>Mobile health</kwd>
      <kwd>Diabetes treatment</kwd>
    </kwd-group>
    <funding-group>
      <award-group>
        <funding-source>
          <institution>National Research Foundation of Korea-Grant funded by the Korean Government (Ministry of Science and ICT)</institution>
        </funding-source>
        <award-id>NRF-2017R1A2B2012337</award-id>
        <principal-award-recipient>
          <name>
            <surname>Kwak</surname>
            <given-names>Kyung-Sup</given-names>
          </name>
        </principal-award-recipient>
      </award-group>
    </funding-group>
    <custom-meta-group>
      <custom-meta>
        <meta-name>issue-copyright-statement</meta-name>
        <meta-value>© The Author(s) 2019</meta-value>
      </custom-meta>
    </custom-meta-group>
  </article-meta>
</front>
<body>
  <sec id="Sec1">
    <title>Background</title>
    <p id="Par43">The number of people suffering from chronic health conditions is increasing. In 2008, non-communicable diseases like diabetes were responsible for 63% of all deaths all over the world [<xref ref-type="bibr" rid="CR1">1</xref>]. Chronic disease management places considerable pressure on patients, healthcare systems, and communities worldwide [<xref ref-type="bibr" rid="CR2">2</xref>]. Treatment of these diseases usually takes long time and costs a lot of money. Because of societal aging and the increased number of patients with chronic conditions, more and more people will require long-term personalized medical care. Diabetes mellitus (DM) is a chronic metabolic disease. It is a major healthcare problem even among the most developed countries. In 2015, an estimated 1.6 million deaths were directly caused by DM, and it is expected to be the seventh leading cause of death in 2030 (<ext-link ext-link-type="uri" xlink:href="http://www.who.int/news-room/fact-sheets/detail/diabetes"><italic>http://www.who.int/news-room/fact-sheets/detail/diabetes</italic></ext-link>). If the current trend continues, one in three Americans will have diabetes by 2050 (<ext-link ext-link-type="uri" xlink:href="http://www.diabetes.org"><italic>http://www.diabetes.org</italic></ext-link>).</p>
    <p id="Par44">The most serious type of DM is type 1 (T1D). It is an autoimmune disease where the body destroys the insulin-producing <italic>β</italic> cells in the pancreas. Patients with T1D do not produce any insulin, and must exogenously inject this hormone four to six times per day to keep blood glucose levels under control [<xref ref-type="bibr" rid="CR3">3</xref>]. People with T1D need to check their glucose level several times per day, called continuous glucose monitoring (CGM) [<xref ref-type="bibr" rid="CR4">4</xref>]. Based on these monitoring data, as well as other factors (e.g. meals and exercise), they can decide what types of insulin they need, when to inject them, and how much; what types of food to eat, and in what quantities; and what types and intensities of exercise to engage in. Insulin may be combined with other medications, such as metformin, pramlintide, blood pressure drugs, cholesterol drugs, aspirin, and other medications related to the patient’s complications. These medications have side effects, and they can conflict with each other, with diseases, or with foods. As a result, creating a customized treatment plan (TP) is a complex process, and if not done carefully will result in serious short-term and long-term complications [<xref ref-type="bibr" rid="CR5">5</xref>]. Short-term complications include hypoglycemia and hyperglycemia; long-term complications include autoimmune diseases, dyslipidemia, retinopathy, cardiovascular diseases, nephropathy, and neuropathy. Patients cannot make these crucial decisions solely, and always need to consult healthcare professionals. The healthcare team (ophthalmologist, endocrinologist, dietitian, pharmacist, dentist, and educator) studies the entire patient profile and suggests tailored TPs for specific periods.</p>
    <p id="Par45">Handling this challenge requires a medical expert to be reachable to the patient constantly, or the patient has to be hospitalized at all times. Neither of these options is practical. With the ever-increasing world population, the conventional patient–doctor appointment has lost its effectiveness because resources are not available for such monitoring and hospitalization. To overcome the limitations of existing hospitals and doctors, technology can play a vital role. An artificial pancreas can be utilized by diabetics aged 14 or older. It is a closed-loop control system composed of a CGM device checking the patient’s glucose level in real time (e.g. every 5 min) and injecting insulin accordingly [<xref ref-type="bibr" rid="CR6">6</xref>]. Although this device monitors some biometrics in the patient’s body, considering other features (including complications, medications, demographics, and symptoms) is critical. For correct interpretation of monitored vital signs, they must be understood in the context of the entire patient profile [<xref ref-type="bibr" rid="CR7">7</xref>, <xref ref-type="bibr" rid="CR8">8</xref>]. For example, the sensed blood glucose (BG) level is sometimes high, but the patient may take drugs that are the main cause of this rise such as <italic>steroids</italic>, <italic>anti-psychotics</italic>, <italic>corticosteroids</italic>, <italic>statins</italic>, <italic>niacin</italic>, <italic>antipsychotics</italic>, and <italic>decongestants</italic> [<xref ref-type="bibr" rid="CR9">9</xref>]. In addition, the patient may suffer from other diseases that increase BG levels, such as <italic>pancreatitis</italic>, <italic>hypercortisolism</italic>, <italic>pancreatic cancer</italic>, <italic>gingival disease</italic>, and <italic>stroke</italic> [<xref ref-type="bibr" rid="CR10">10</xref>]. As a result, making insulin-injection decisions based only on sensed blood glucose level is not sufficient.</p>
    <p id="Par46">A new approach that demonstrates improved well-being and quality of life is mobile health (MH) [<xref ref-type="bibr" rid="CR11">11</xref>]. MH supports continuous remote monitoring of blood glucose, which is essential for an insulin therapy regimen [<xref ref-type="bibr" rid="CR12">12</xref>]. There are many choices when implementing MH for continuous patient monitoring [<xref ref-type="bibr" rid="CR13">13</xref>]. Patients can be monitored 24 h a day by manually entering biomedical parameters; the collected data are sent to medical experts who provide advice regarding treatment. However, this approach is not suitable because asking patients to enter many values is not convenient and is error prone. Furthermore, this process increases the medical expert’s workload, and he or she may not reply to the patient on time. A clinical decision support system (CDSS) is a knowledge-based system that can mimic medical experts in data analysis and decision-making. It can automate the monitoring process, reduce medication errors, and improve quality of care. Mobile patient-monitoring CDSSs based on medical sensors, mobile, and wearable devices support the implementation of this solution [<xref ref-type="bibr" rid="CR14">14</xref>, <xref ref-type="bibr" rid="CR15">15</xref>]. The mobile phone becomes a ubiquitous tool with nearly 100% availability in developed countries [<xref ref-type="bibr" rid="CR12">12</xref>]. These devices have recently gained powerful computing capabilities and enable open application development. Klasnja and Pratt [<xref ref-type="bibr" rid="CR16">16</xref>] discussed the factors that make the mobile phone a promising platform for health interventions. In addition, the recent advances in information and communications technology infrastructures, including wireless communications, cloud computing, and big data analytics provide promising techniques for developing MH systems. They transform healthcare ecosystems from hospital-centered to patient-centered, and remotely involve patients in their health monitoring process. Mobile patient monitoring was defined by Pawar et al. [<xref ref-type="bibr" rid="CR17">17</xref>] as “<italic>the continuous or periodic measurement and analysis of a mobile patient’s bio-signals from a distance by employing mobile computing, wireless communications, and networking technologies</italic>.” With this major shift, MH systems detect, monitor, prevent, and control chronic diseases by providing “<italic>anywhere and anytime</italic>” healthcare scenarios. However, to this date, most clinical care continues to be provided without the aids of CDSSs [<xref ref-type="bibr" rid="CR18">18</xref>] because patients and medical experts do not believe in CDSS decisions.</p>
    <p id="Par47">A comprehensive MH CDSS should be based on two main sources of data: real-time sensor data and historical electronic health record (EHR) data [<xref ref-type="bibr" rid="CR15">15</xref>]. Current MH studies for diabetes management are based on monitored vital signs [<xref ref-type="bibr" rid="CR19">19</xref>] solely without giving attention to the complete EHR [<xref ref-type="bibr" rid="CR15">15</xref>]. Consequently, the decisions resulting from these studies are misleading and not medically acceptable. That is because raw vital-sign observations do not provide the context required for interpreting those observations properly. Vital-sign observations have different meanings depending on the context, i.e., the historical conditions of the patient collected from distributed EHR systems [<xref ref-type="bibr" rid="CR7">7</xref>]. Collecting, modeling, and reasoning with sensor data in the context of the EHR play critical roles in tackling the MH CDSS challenges. However, integration of heterogeneous sensor and historical medical data is a complex task [<xref ref-type="bibr" rid="CR8">8</xref>, <xref ref-type="bibr" rid="CR18">18</xref>]. In addition, integration of CDSS knowledge with the EHR ecosystem is another burdensome.</p>
    <p id="Par48">Having said that, our pursuit in this project is to devise an interoperable MH framework suitable for mobile diabetes monitoring and to provide customized, long-term, and real-time treatment plans (TPs). These plans are created according to integrated real-time patient vital-sign data with collected historical profile. <italic>No study in the literature propose complete TPs for T1D including insulin, diet, exercise, education, and emergencies.</italic> To guarantee the plug-and-play capability, semantic interoperability is handled based on the HL7 fast healthcare interoperability resources (FHIR) standard for data storage and communications and for knowledge representation. The framework has four different modules, namely <italic>patient module, cloud-based CDSS module, backend EHR systems module, and mobile health services module</italic>. <italic>The patient module</italic> is for mobile monitoring of the patient based on a set of sensors. Every patient has a wireless body area network (WBAN) to collect biomedical signs. These data are integrated with distributed historical EHR data stored in the cloud, based on the FHIR standard. <italic>The cloud-based CDSS module</italic> collects, integrates, and interprets patient data and proposes TPs. The integration of different data formats is based on semantic annotation of sensor data based on the semantic sensor network (SSN) and basic formal ontology (BFO) ontologies, standardization of medical data based on the FHIR standard, and binding with standard medical terminologies. <italic>The backend EHR systems module</italic> is responsible for collecting the patient’s historical data from distributed EHR systems. <italic>The services module</italic> provides a collection of services for patients and physicians including real time guidance, provision of TPs, and emergencies. Building a representative, accurate, and complete CDSS knowledge base is the most important step toward generating a medically acceptable CDSS. We describe in full details the development process of a unified semantic model called FHIR and SSN-based T1D Ontology (FASTO), which is a standard, modularized, interoperable, and comprehensive OWL 2 medical ontology. FASTO integrates the semantic capabilities of the SSN, BFO, FHIR, clinical practice guideline (CPG), and medical terminologies in a unified, homogeneous, and intelligent manner. All FASTO knowledge is collected from the most recent CPGs [<xref ref-type="bibr" rid="CR20">20</xref>]. Combination of FASTO and OWL 2 reasoner such as Pellet implements the semantically intelligent CDSS. Thanks to the FHIR standard, ontology semantics, and medical terminology, we believe the proposed MH framework can enable broader adoption of and transparent integration with already implemented EHR systems.</p>
    <p id="Par49">In the rest of this paper, we review the related work in Section 2. We then briefly present the proposed MH framework in Section 3. In Section 4, we discuss the patient and services modules. Section 5 discusses the CDSS module and the FASTO construction process. Section 6 details the backend systems of the proposed CDSS. Section 7 evaluates the proposed semantic ontology, and Section 8 provides a discussion about the paper findings and limitations. Finally, Section 9 concludes the paper with a discussion of future work.</p>
  </sec>
  <sec id="Sec2">
    <title>Literature review</title>
    <sec id="Sec3">
      <title>Diabetes and mobile health</title>
      <p id="Par50">The majority of chronic disease CPGs recommend the inclusion of self-management programs in routine disease management [<xref ref-type="bibr" rid="CR11">11</xref>, <xref ref-type="bibr" rid="CR20">20</xref>]. However, limited research has been done in this domain. Brzan et al. [<xref ref-type="bibr" rid="CR21">21</xref>] evaluated 65 apps based on four measures: [<xref ref-type="bibr" rid="CR1">1</xref>] monitoring blood glucose levels and medications, [<xref ref-type="bibr" rid="CR2">2</xref>] nutrition, [<xref ref-type="bibr" rid="CR3">3</xref>] physical exercise, and [<xref ref-type="bibr" rid="CR4">4</xref>] body weight. They concluded that 56 of these apps did not meet even minimal requirements, or did not work properly. They concluded that only nine apps could be versatile and useful enough for successful self-management of diabetes. They asserted that a CDSS app must be connected to an EHR system, and it must support interoperability. Basilico et al. [<xref ref-type="bibr" rid="CR22">22</xref>] evaluated 952 mobile apps for diabetes management and concluded that none of them provided complete TPs, or even insulin calculators. As a result, their adoption in the real world is limited. Rose et al. [<xref ref-type="bibr" rid="CR23">23</xref>] asserted that existing diabetes monitoring studies have not provided DM management in a standard manner. Fatehi et al. [<xref ref-type="bibr" rid="CR24">24</xref>] concluded that existing MH apps provide fragments of care plans for diabetes, and asserted that the roles of a CDSS and an EHR are needed to facilitate accurate care. Recently, Caballero-Ruizet al. [<xref ref-type="bibr" rid="CR5">5</xref>] asserted that the current limitations in telemedicine systems for diabetes include usability, real-time feedback, and decision support capabilities. Cappon et al. [<xref ref-type="bibr" rid="CR4">4</xref>] reviewed the wearable CGM sensor technologies including commercial devices and research prototypes. They discussed the role of CGM to improve CDSSs and big data analytics for personalized medicine. They asserted that the integration of CGM massive data collected by low cost sensors with EHR historical data would be essential to develop new strategies for personalized diabetes management. Quinn et al. [<xref ref-type="bibr" rid="CR25">25</xref>] proposed a glucose-monitoring system called WellDoc. This system only collects glucose readings and physical activity data from type 2 diabetics, and uploads them to a server where a physician can give feedback by email. There are no CDSS features in WellDoc; as a result, we cannot consider it as a MH system. In the absence of a CDSS, the clinician must [<xref ref-type="bibr" rid="CR1">1</xref>] study patients’ big data, [<xref ref-type="bibr" rid="CR2">2</xref>] identify trends and correlate related changes in these data for all patients with failing health, and [<xref ref-type="bibr" rid="CR3">3</xref>] contact those patients who possibly need intervention. Existing T1D MH approaches are standalone applications that provide partial capabilities that are not sufficient [<xref ref-type="bibr" rid="CR24">24</xref>]. Some studies concentrated on the collected glucose data from sensors only to determine new insulin doses and types of insulin; other studies concentrated on lifestyle programs. In the following, we discuss some of these studies. COMMODITY12 is the most famous multi-agent CDSS for diabetes treatment [<xref ref-type="bibr" rid="CR26">26</xref>]. The system provides treatment for type 2 diabetics, but we will concentrate on type 1 diabetics. COMMODITY12 has not handled the semantic interoperability between different system’s components including backend database and sensor data. In addition, the quality of its proposed TPs is not acceptable in medical domain because the system has not considered the whole patient’s medical history [<xref ref-type="bibr" rid="CR27">27</xref>]. Keith-Hynes et al. [<xref ref-type="bibr" rid="CR28">28</xref>] proposed DiAs, a smartphone-based system for T1D monitoring. However, this research is very abstract and only discusses the structure of the proposed framework. Kan et al. [<xref ref-type="bibr" rid="CR11">11</xref>] proposed the ubiquitous health management system for diet (UHMS-HDC), which includes a diet diary and nutritional guidance. This system is based on a relational database (RDB), and there are no semantic inferences. In addition, this system only works as a standalone application because it does not handle interoperability. Su et al. [<xref ref-type="bibr" rid="CR29">29</xref>] proposed a CDSS to generate personalized exercise plans based on an ontology and HL7 v3. However, they ignored the related issues of diet and medicine. Schmidt and Norgaard [<xref ref-type="bibr" rid="CR30">30</xref>] proposed a bolus calculator app that determines a bolus dose based on an equation. These types of system are not medically acceptable because bolus dose must be part of a chronic and continuous plan. All of the discussed studies proposed partial solutions to the MH challenge, and all have critical limitations. Some studies have not handled interoperability such as COMMODITY12, UHMS-HDC, and DiAs. Others have handled only parts of the problem such as Su et al. for exercise plan management. In addition, most of these studies proposed systems for type 2 diabetes, which is very different from type 1. As a result, Greenes et al. [<xref ref-type="bibr" rid="CR31">31</xref>] concluded that wide adoption and broad use of a CDSS in clinical practice has not been achieved.</p>
      <p id="Par51">The more suitable solution is to automate the treatment process based on a CDSS, which reduces face-to-face visits, and keeps patients from unnecessary displacements. This way, medical experts optimize their time, and can concurrently manage hundreds of patients in a more efficient way [<xref ref-type="bibr" rid="CR5">5</xref>]. There are two options for implementing this solution. <italic>In the first option</italic>, the patient continuously collects WBAN biometrics on a mobile device and uses a local CDSS for direct monitoring and suggesting of TPs. However, smart phones do not have enough storage, processing, memory, and battery resources to process the data generated from sensors, and to give real-time decisions. In addition, a real CDSS needs other patient data from an EHR, where interoperability is a major problem. <italic>In the second option</italic>, all patient data are collected in the cloud from heterogeneous sources and are integrated with distributed hospital EHR ecosystems. Cappon et al. [<xref ref-type="bibr" rid="CR4">4</xref>] asserted the role of data integration to implement accurate CDSSs. The resulting model can provide timely assistance, supports scalability of data storage and processing power, and supports global accessibility by any number of patients and physicians at any time and from any place.</p>
      <p id="Par52">A WBAN is a special-purpose wireless sensor network that incorporates different networks and wireless devices to enable remote monitoring in various environments. Internet of Things (IoT) based systems have been used in different fields in the medical domain. Szydło and Konieczny [<xref ref-type="bibr" rid="CR14">14</xref>] proposed a system for cardiovascular diseases; however, this system takes decisions based on the sensed data only, and does not take the full patient history into account. The WANDA. B monitoring system [<xref ref-type="bibr" rid="CR32">32</xref>] provides an integrated architecture to monitor heart failure patients in real time. Unfortunately, it does not provide support for medication dosages and individual health plans. The MyHeart Project [<xref ref-type="bibr" rid="CR33">33</xref>] is a mobile system to remotely monitor heart failure patients based on wireless sensor networks. However, the system does not support medicine intake management and sophisticated treatment plans. Regarding diabetes, a review of smartphone, IoT, cloud, and WBAN applications designed to help in diabetes management was presented in [<xref ref-type="bibr" rid="CR34">34</xref>]. The IoT was proposed as a good environment for diabetes management in [<xref ref-type="bibr" rid="CR35">35</xref>]. Cloud computing systems for diabetes control were discussed in [<xref ref-type="bibr" rid="CR36">36</xref>]. However, we can see that, so far, applications are limited, and they focus on some specific part of management (tracking physical activity, glycemic control, etc.), but there is no complete perspective on the problem [<xref ref-type="bibr" rid="CR27">27</xref>].</p>
    </sec>
    <sec id="Sec4">
      <title>The ontology and mobile health</title>
      <p id="Par53">Ontology plays an important role in building intelligent, distributed, and interoperable CDSSs because it provides explicitly formal and uniform semantic models [<xref ref-type="bibr" rid="CR2">2</xref>, <xref ref-type="bibr" rid="CR29">29</xref>, <xref ref-type="bibr" rid="CR31">31</xref>, <xref ref-type="bibr" rid="CR37">37</xref>]. The ontology is a knowledge representation formalism, where the resulting knowledge is sharable, manageable, accessible, understandable, and processable by machine [<xref ref-type="bibr" rid="CR8">8</xref>]. It is based on formal description logic such as SROIQ (D), an ontology language such as OWL 2, a rule language such as SWRL, and a query language such as SPARQL. Its semantic reasoning process is based on semantic reasoners such as Pellet, Fact++, and Hermit [<xref ref-type="bibr" rid="CR38">38</xref>]. A standard ontology supports personalized reasoning, knowledge sharing, automatic reasoning, and semantic interoperability between heterogeneous sources [<xref ref-type="bibr" rid="CR39">39</xref>]. Personalized service is the provision of the “<italic>right</italic>” information for the “<italic>right</italic>” user at the “<italic>right</italic>” time and in the “<italic>right</italic>” way. It provides evolving and tailored assistance to a user based on her/his unique medical profile. Kan et al. [<xref ref-type="bibr" rid="CR11">11</xref>] proposed a ubiquitous health management system for healthy diets without using ontology, so the proposed system suffered from interoperability issues as asserted by the authors in their study. There are limited diabetes ontologies in the literature. Our DDO [<xref ref-type="bibr" rid="CR9">9</xref>] and DMTO [<xref ref-type="bibr" rid="CR10">10</xref>] are most complete and medically intuitive diabetes ontologies in the literature. They are designed with the interoperability in mind. As a result, we extend the knowledge of these two ontologies in our current study. Esposito et al. [<xref ref-type="bibr" rid="CR2">2</xref>] proposed a four-tier smart mobile and context-aware architecture to support the rapid prototyping of MH applications for different scenarios; the system is mainly based on the processing capabilities of the mobile phone. For interoperability, Esposito et al. depended on a local data model based on an ontology. Although the ontology can support semantic interoperability, careful design is critical where the ontology must be based on standards [<xref ref-type="bibr" rid="CR40">40</xref>]. There are considerable challenges facing the useful implementation of a successful ontology-based CDSS for mobile patient monitoring [<xref ref-type="bibr" rid="CR41">41</xref>]. These challenges include how to extract medical knowledge from CPGs, how to formalize this knowledge as OWL2 axioms and rules, how to integrate sensor data standards with EHR data modeling standards, how to collect patient profile from distributed hospitals in a standard form, and how to build complete TPs that can provide real-time and long-term assistance. Lanzola et al. summarized the relevant approaches in this field [<xref ref-type="bibr" rid="CR42">42</xref>]. Esposito et al. [<xref ref-type="bibr" rid="CR2">2</xref>] asserted that existing mobile health proposals do not handle the real MH challenges, and they listed some of them as semantic interoperability and integration challenges. The integration challenges of heterogeneity in EHR systems and IoT data in a cloud environment were explained in [<xref ref-type="bibr" rid="CR43">43</xref>]. None of the current studies provides a complete platform for T1D management [<xref ref-type="bibr" rid="CR27">27</xref>].</p>
    </sec>
    <sec id="Sec5">
      <title>Interoperability and mobile health</title>
      <p id="Par54">To monitor patients more accurately, sensor-based vital signs must be interpreted in the context of the entire patient profile. Patient data are always distributed, encoded with different medical terminologies, and structured with different “standard” data models [<xref ref-type="bibr" rid="CR39">39</xref>]. Interoperability techniques can help to integrate and share these heterogeneous data sources. Please notice that interoperability is not the main focus of this paper; however, we believe it is a main requirement to develop an acceptable CDSS. Most mobile app studies propose standalone frameworks, and this is one of the main reasons for their limitations and medical rejection [<xref ref-type="bibr" rid="CR7">7</xref>]. Standards have been developed to define how EHR data should be structured, semantically described, and communicated. These standards include openEHR, HL7 (v2, v3, and FHIR), ASTM E1384, CEN’s TC 251, and ISO TC 215 [<xref ref-type="bibr" rid="CR39">39</xref>]. They are often relay on medical terminologies such as SNOMED CT (SCT), LOINC, ICD, RxNorm, and UMLS. HL7 (<ext-link ext-link-type="uri" xlink:href="http://www.hl7.org"><italic>www.hl7.org</italic></ext-link>) is a standardization organization that provides about 90% of healthcare services [<xref ref-type="bibr" rid="CR39">39</xref>, <xref ref-type="bibr" rid="CR44">44</xref>]. Recently, HL7 proposed the FHIR standard based on HTTP and RESTful services. It is a global standard, which combines the best characteristics of HL7’s v2, v3, and clinical document architecture (CDA). It provides a rich and extensible information model based on the concept of a modular <italic>resource</italic>. FHIR defines around 116 generic types (i.e. form templates) of interconnecting resources for all types of clinical information. It defines four paradigms for interfacing between systems, including RESTful API, documents, messages, and services [<xref ref-type="bibr" rid="CR45">45</xref>]. FHIR is expected to achieve interoperability faster, easier, and cheaper than other standards. Leroux et al. [<xref ref-type="bibr" rid="CR46">46</xref>] asserted that the adoption of a single format for data storage and exchange decreases the development and data exchange time, and the FHIR model has the potential to manage clinical data in its own right. FHIR received increased attention from the Harvard SMART project (<ext-link ext-link-type="uri" xlink:href="https://smarthealthit.org/"><italic>https://smarthealthit.org/</italic></ext-link>) and other public initiatives such as <ext-link ext-link-type="uri" xlink:href="http://opencimi.org"><italic>Opencimi.org</italic></ext-link>. Gøeg et al. [<xref ref-type="bibr" rid="CR47">47</xref>] asserted the priority of FHIR because it is based on web technologies, which ease implementation; in addition, FHIR is more suitable for mobile applications because it is based on a RESTfull service-oriented architecture. Using this HTTP-based paradigm, mobile problems such as short battery life are less likely to occur. Although this standard supports interoperability, an ontology can enhance semantic interoperability between different systems, especially between WBAN and EHR data [<xref ref-type="bibr" rid="CR48">48</xref>]. “<italic>A solid ontology-based analysis with a rigorous formal mapping for correctness</italic>” is one of the 10 reasons why FHIR is better than other standards [<xref ref-type="bibr" rid="CR49">49</xref>]. As a result, integrating FHIR-based EHR data with a CDSS knowledge base ontology can improve the seamless integration and interoperability of decision support features in an EHR ecosystem. No studies in the literature have discussed this issue. In addition, FHIR was modelled as an OWL 2 ontology (<ext-link ext-link-type="uri" xlink:href="http://wiki.hl7.org/index.php?title="><italic>http://wiki.hl7.org/index.php?title=</italic></ext-link>
<italic>RDF_for_Semantic_Interoperability</italic>). It has not been connected to any formal top-level ontologies like BFO, and it has not been utilized in real applications yet, especially in the medical domain.</p>
    </sec>
    <sec id="Sec6">
      <title>Study objectives</title>
      <p id="Par55">In light of the above, we propose an ontology-based mobile health CDSS for type 1 diabetes monitoring and treatment. This cloud-based and comprehensive architecture allows patients to be connected with different service providers as well as different sources of medical data. The system is based on a set of standards to handle interoperability challenges. Integration of these standards is based on ontology representation and reasoning. To support transparent integration and semantic interoperability between the CDSS and distributed EHRs, this proposal is based on the most recent HL7 interoperability standard of FHIR. The SSN is utilized to integrate sensor data with historical EHR data. To unify the semantic meaning of all used terminologies and knowledge, all terms used are understood and embedded under BFO universals. We collected medical knowledge from the most recent T1D CPGs, scientific research, and official web sites [<xref ref-type="bibr" rid="CR20">20</xref>]. CPGs are documents that collect all the available medical evidence with regard to a particular disease. They support the evidence based medicine paradigm. Knowledge of CPGs is implemented as OWL 2 axioms and SWRL rules to build and infer tailored TPs and to provide real-time monitoring for diabetics. Security and privacy issues, however, are outside the scope of this paper. Specifically, this proposal makes the following major contributions, compared with previous methods.<list list-type="bullet"><list-item><p id="Par56">We propose an interoperable, expandable, and cloud-based mobile CDSS framework for T1D management. This CDSS can remotely monitor diabetics according to their real-time WBAN metrics, and suggests adjustments in insulin dosages, exercise plans, and diet plans. The CDSS can discover critical situations, including hypoglycemia and hyperglycemia, and can suggest emergency procedures. In addition, it is able to propose actionable, evidence-based, standard, accurate, and medically complete TPs based on patient conditions and preferences collected from real-time data and historical EHR profiles.</p></list-item><list-item><p id="Par57">Effective CDSS depends mainly on the quality of its knowledge base. As a result, we propose a real, holistic, global, and extensible T1D-treatment OWL 2 ontology (FASTO) based on SHOIQ (D) description logic. This ontology is the core knowledge base of the proposed CDSS. It supports temporal reasoning about patient observations and TPs. FASTO is built using the Protégé 5.1 ontology editor.</p></list-item><list-item><p id="Par58">This CDSS suggests plans that include critical treatment components of insulin monitoring and management, lifestyle (i.e. diet and exercise), and education. To support evidence-based medicine, the TP-formulated treatment rules are extracted from the most recent standard diabetes CPGs. We employ SWRL rules to represent CPG knowledge, and we use ontology reasoners to implement the CDSS inference engine.</p></list-item><list-item><p id="Par59">We propose a method to collect and integrate all patient data from heterogeneous sources in a centralized cloud-based EHR database based on the most recent HL7 standards (i.e. FHIR). This database is used to instantiate FASTO. In addition, this database can be utilized by machine learning techniques to enrich CDSS knowledge.</p></list-item><list-item><p id="Par60">The majority of the system processes are executed in the cloud. FASTO and an ontology reasoner provide real-time <italic>knowledge-as-a-service</italic> to patients and physicians. As a result, the resources (i.e. memory, battery, and processor) of a patient’s mobile device will be preserved for monitoring.</p></list-item><list-item><p id="Par61">The FASTO novel knowledge model reuses several standard ontologies, including the BFO 2.0 top-level ontology, vital-sign ontology, medical terminologies, and SSN sensor ontology. To support effective and efficient data exchanges between distributed and heterogeneous system modules (i.e. CDSSs, WBANs, and EHR distributed systems), we created our proposed system based on the most recent and publicly acceptable interoperability standard of HL7 FHIR. All FASTO concepts are unified with FHIR resources. The utilized SSN concepts are implemented according to the semantics and structures of FHIR resources, and all ontology classes are modeled as subclasses of BFO universals. The data are exchanged between modules based on FHIR servers and in JSON format.</p></list-item><list-item><p id="Par62">The resulting fully-fledged FASTO ontology is transparent and independent from EHR systems’ different data formats and different sensor data standards, thanks to the FHIR standard. As a result, our CDSS is portable, offering a plug-and-play capability with any EHR ecosystem after little configurations.</p></list-item></list></p>
      <p id="Par63">The quality of the proposed CDSS framework is based totally on the design quality of FASTO. As a result and due to space restrictions, we provide an overview of the whole CDSS framework, and then focus more on the development and testing of the CDSS ontology.</p>
    </sec>
  </sec>
  <sec id="Sec7">
    <title>Methods</title>
    <p id="Par64">This section discusses the proposed mobile patient monitoring framework (see Fig. <xref rid="Fig1" ref-type="fig">1</xref>). This framework supports the continuous and mobile monitoring of T1D patients based on cloud computing solutions, which provides accessibility, extensibility, flexibility, cost savings, and deployment speed. Our framework has four main modules: the patient module, the services module, the cloud-based CDSS module, and the backend EHR systems module. Each module provides a particular set of functionalities. These modules are integrated in a standard way based on ontology and FHIR. HL7 FHIR servers are responsible for collecting data from distributed hospital information systems to be stored in a cloud-based EHR. As a result, these modules are loosely coupled. Therefore, change in one module does not alter the whole architecture. The system mainly depends on ontology semantics, standard terminologies, and HL7 FHIR to solve the major challenges of syntax and semantic interoperability.<fig id="Fig1"><label>Fig. 1</label><caption><p>The architecture of the proposed CDSS framework at high-level of description. This is the proposed framework modules including patient module, the mobile health services module, the cloud-based CDSS module, and the backend EHR systems module</p></caption><graphic xlink:href="12911_2019_806_Fig1_HTML" id="MO1"/></fig></p>
    <p id="Par65">Different from the state-of-the-art systems, we integrate low-level sensor data and EHR data with high-level ontology knowledge in a standard way to make accurate and medically acceptable decisions. Our main goal is to produce a global data model and a standard knowledge base, which decreases system development time and data transformation errors. To achieve this goal, the logical data models of all designed databases and FASTO semantics are based on the FHIR resource information model. We reviewed the emerging FHIR model definitions to identify resources appropriate for modeling of basic clinical contents (e.g. medications, care plans, observations). In a parallel process, some common data models, such as Open mHealth (<ext-link ext-link-type="uri" xlink:href="http://www.openmhealth.org"><italic>http://www.openmhealth.org</italic></ext-link>) standard schemas and clinical element models (<ext-link ext-link-type="uri" xlink:href="http://www.opencem.org"><italic>http://www.opencem.org</italic></ext-link>), are reviewed to build a medically complete system. Standard medical terminologies are used for encoding the used terms. Numerical values are encoded with standard units of measurement. The resulting system supports seamless and transparent interoperability between a CDSS and an EHR. In the following sections, we will discuss each module in detail.</p>
  </sec>
  <sec id="Sec8">
    <title>Patient and Mobile health services modules</title>
    <p id="Par66">The patient module is responsible for collecting a patient’s WBAN sensed data and dispatching them for further processing. It is based on a set of heterogeneous off-the-shelf biosensors that monitor and communicate physiological parameters of the individual, including physical activity, blood glucose level, and vital signs. These sensing devices have interface (APIs) that allow access to the collected data. The time-stamped, streamed data are automatically transmitted to a wireless base unit (WBU) (i.e. a mobile phone) via Bluetooth for further preprocessing and formatting. To achieve end-to-end semantic interoperability, the ISO/IEEE 11073 family of standards is used as an open standard for message formatting and as communication protocol between the WBAN and the WBU. The messages are built by applying ISO/IEEE 11073-104zz device specifications to the observed data according to sensor type (e.g. blood pressure, weighting scale, glucose level, heart rate). Furthermore, real-time data can be manually entered by the patient, like the intent to eat <italic>x</italic> grams of carbohydrates (carbs) for every meal, the height, the intent to play exercises, etc. These data are sent to the cloud-based EHR database based on specific criteria (e.g. during a specific event, at a specific time, or manually).</p>
    <p id="Par67">The mobile phone acts as an aggregation manager, where data are collected, preprocessed, standardized, and stored in a personal health record (PHR). The PHR is implemented as a SQLite RDB (<ext-link ext-link-type="uri" xlink:href="http://www.sqlite.org"><italic>http://www.sqlite.org</italic></ext-link>). Raw, real time sensor data have no semantics, which cannot be used collaboratively with hospital EHR data. As a result, the received sensor data based on ISO/IEEE 11073 are mapped or converted into FHIR resource formats and collected in the PHR. Suitable resources for a PHR include <italic>observation</italic> (for sensor data, amount of carbs, height, BMI, and exercises), <italic>patient</italic> (for age, name, address, gender, contacts, etc.), <italic>device</italic> (for sensor devices), and <italic>carePlan</italic> (for current care plan). As a result, the WBU has three functions executed sequentially. The first is a message receiver function that is responsible for collecting data from the WBAN. The second is a message transformer function, which converts ISO/IEEE 11073 messages into FHIR resources using JSON format and stores them in PHR. Interoperability between FHIR and IEEE 11073 is well established. The third function is a message sender, which sends the patient’s sensed and non-sensed data from the WBU to the cloud as inter-linked JSON documents. To easily map PHR data to cloud EHR data, all system databases are designed based on FHIR resources.</p>
    <p id="Par68">Selected resources are formatted as JSON RESTful messages because they are widely used and have a relatively small overall data size. Resources can be posted individually, or a <italic>Bundle</italic> resource could be used as a container for a collection of inter-linked resources and transmit them at one time. These messages are sent via WIFI wireless connection to the nearest access point, and then via 3G/4G/5G to be integrated into a centralized cloud-based EHR. The collected cloud data are utilized as the ABOX of FASTO. The list of the system’s services is implemented in the services module.</p>
  </sec>
  <sec id="Sec9">
    <title>Cloud-based CDSS module</title>
    <p id="Par69">This module is the core of the proposed architecture. It provides <italic>knowledge as a service</italic> approach to deal with the heterogeneity, distribution, and scalability of medical data. It is responsible to gather patient data from different sources (sensors and EHRs) and standardize, process, analyze, and visualize them in accordance with knowledge extracted from CPGs [<xref ref-type="bibr" rid="CR20">20</xref>]. This module has two main components, namely CDSS engine and FHIR-based EHR database.</p>
    <sec id="Sec10">
      <title>The CDSS engine</title>
      <p id="Par70">The CDSS engine is based on ontology and its reasoner capabilities. The ontology provides a formal, sharable, reusable, machine readable, interpretable, structured, extensible, and semantically intelligent representation of knowledge. The input to the reasoner is the complete patient profile of real-time continuously sensed data plus historical EHR data. The output is the continuous monitoring of the patient by providing real-time blood glucose monitoring and complete T1D TPs. The ontology reasoning process personalizes the available medical knowledge according to the patient’s individual conditions. Accordingly, it provides a customized action plan suitable for the specific patient. Note that the ontology contains only the data required to make a decision at one concrete moment, but the complete patient medical record remains in the cloud-based EHR.</p>
      <p id="Par71">In this section, we describe the detailed process for creating the FHIR and SSN-based mobile ontology for T1D treatment (i.e. FASTO). The main steps are depicted in Fig. <xref rid="Fig2" ref-type="fig">2</xref>. We depend on many sources to create a medically accurate and complete ontology. These sources include existing ontologies and medical terminologies, domain expert knowledge, the most recent research, and official web sites. In addition, we study the most recent CPGs to extract treatment knowledge and convert it into SWRL rules and ontology axioms. We pay a close attention to interoperability in the construction process to support the creation of a sharable, reusable, and publically acceptable knowledge base. The collected data are aggregated from heterogeneous sources encoded with heterogeneous medical terminologies and designed by heterogeneous data models. As a result, all ontology knowledge is standardized according to the HL7 FHIR standard. In addition, all used terms are based on standard terminologies, which deeply support the enrichment of the ontology as well.<fig id="Fig2"><label>Fig. 2</label><caption><p>The FASTO construction steps. These are eight sequential steps for building the proposed FASTO ontology from defining diabetes treatment elements up to instantiation and validation</p></caption><graphic xlink:href="12911_2019_806_Fig2_HTML" id="MO2"/></fig></p>
      <p id="Par72">FASTO is designed in modules to support extensibility and reusability. Each module handles a specific dimension of the modeling process. Some modules are imported from standard ontologies, and other modules are built from scratch to add T1D treatment knowledge. We employed a top-down strategy to define the proposed ontology, which is based on BFO 2.0 as the upper-level foundational ontology to unify the meanings of used terminology. BFO is a domain-independent and comprehensive ontology; it has rigorous conceptualization, and hence, supports reusability, modularity, extensibility, and interoperability. First, we defined the top-level classes in our ontology, and then, we semantically aligned them with BFO universals. Ontology alignment can be defined as a set of correspondences or relations (e.g. equivalence ≡, subsumption ⊑, and disjointness ⊥) between two ontologies [<xref ref-type="bibr" rid="CR50">50</xref>]. Next, we deeply modeled the semantics for each of these classes as a sub-ontology designed for a specific purpose. We based this mainly on reusing existing standard ontologies when possible.</p>
      <p id="Par73">We collected these ontologies from BioPortal (e.g. diabetes mellitus diagnosis ontology [DDO], DMTO, RxNorm, SCT, LOINC, and BFO) and from the W3C (e.g. the SSN and the FHIR ontology: <ext-link ext-link-type="uri" xlink:href="http://w3c.github.io/hcls-fhir-rdf/spec/ontology.html"><italic>http://w3c.github.io/hcls-fhir-rdf/spec/ontology.html</italic></ext-link>). The treatment decision is based on two main sources of data, namely WBANs and EHR systems. Some classes and properties were added to integrate the sensed data with data extracted from hospital EHR systems. In addition, treatment knowledge extracted from CPGs (<ext-link ext-link-type="uri" xlink:href="http://www.nice.org.uk"><italic>www.nice.org.uk</italic></ext-link>, <ext-link ext-link-type="uri" xlink:href="http://www.guideline.gov"><italic>www.guideline.gov</italic></ext-link><italic>,</italic> the American diabetes association: <ext-link ext-link-type="uri" xlink:href="http://www.diabetes.org"><italic>www.diabetes.org</italic></ext-link>, and Canadian diabetes: <ext-link ext-link-type="uri" xlink:href="http://www.diabetes.ca"><italic>www.diabetes.ca</italic></ext-link>), professional web sites (e.g. <ext-link ext-link-type="uri" xlink:href="http://www.medscape.com"><italic>www.medscape.com</italic></ext-link>, <ext-link ext-link-type="uri" xlink:href="http://www.drugs.com"><italic>www.drugs.com</italic></ext-link>, <ext-link ext-link-type="uri" xlink:href="http://www.medicinenet.com"><italic>www.medicinenet.com</italic></ext-link>, <ext-link ext-link-type="uri" xlink:href="http://www.uptodate.com"><italic>www.uptodate.com</italic></ext-link>, <ext-link ext-link-type="uri" xlink:href="http://www.fda.gov"><italic>www.fda.gov</italic></ext-link><italic>,</italic> and <ext-link ext-link-type="uri" xlink:href="http://sideeffects.embl.de/"><italic>http://sideeffects.embl.de/</italic></ext-link>), and scientific research [<xref ref-type="bibr" rid="CR11">11</xref>, <xref ref-type="bibr" rid="CR51">51</xref>–<xref ref-type="bibr" rid="CR56">56</xref>] is manually modeled as axioms and rules.</p>
      <p id="Par74">To automate the ontology population process and patient data aggregation, it is urgent to maintain bi-directional and one-to-one mapping between FHIR resource messages, cloud database constructs, and FASTO constructs. In other words, resources are “<italic>losslessly round-trippable</italic>” between different formats. Our cloud database is designed based on an FHIR resource schema to easily transform resource instances to RBD instances. Every FASTO class is manually translated into a specific FHIR RDF resource. Please note that FHIR resources are modeled with different formats, such as JSON, XML, and RDF. Constraints and data types of FHIR resources are mapped to OWL 2 constructs, axioms, data types, and SWRL rules by using the Protégé 5.1 ontology editor (<ext-link ext-link-type="uri" xlink:href="https://protege.stanford.edu"><italic>https://protege.stanford.edu</italic></ext-link>). Extensions to and customizations of selected resources are implemented as needed for the T1D domain.</p>
      <p id="Par75"><italic>First</italic>, we formally defined the data elements that are required to represent T1D treatment. This step was informed by our previous work for type 2 diabetes diagnosis (i.e. DDO) and treatment (i.e. DMTO), and SCT modeling (SCTO). <italic>Second</italic>, to standardize this knowledge based on the FHIR resource format, we manually browsed and analyzed these resources to identify needed resources. Note that we depend on the FHIR standard for trial use (STU 3) specification. <italic>Third</italic>, we profiled selected resources to customize them according to our CDSS requirements. <italic>Fourth</italic>, we determined the SSN ontology classes required to represent our domain and mapped these classes to BFO universals. <italic>Fifth</italic>, we mapped some of the selected resources to the SSN ontology classes and modeled the rest of the resources as subclasses of BFO universals. These mappings depend on a deep understanding of the used ontologies and lengthy discussions with experts, such as BFO authors. <italic>Sixth</italic>, elements and constraints of the resources were modeled as ontology classes, properties, axioms, and SWRL rules. <italic>Seventh</italic>, we added T1D treatment knowledge in the form of relations, properties, axioms, and SWRL rules. FASTO follows the principles of ontology development established by the OBO Foundry (<ext-link ext-link-type="uri" xlink:href="http://www.obofoundry.org"><italic>http://www.obofoundry.org</italic></ext-link>).</p>
      <sec id="Sec11">
        <title>Define T1D treatment elements</title>
        <p id="Par76">We tried to minimize manual data input from patients. As a result, critical patient data are collected automatically from three main sources, thanks to the FHIR standard interface. The first source is the patient WBAN, which includes sensors’ real-time vital signs, glucose levels, and weights. The second source is the patient profile collected from distributed EHR systems. These data include the patient’s demographics (weight, age, gender, smoking status, and height), BMI, preferences, symptoms, lab tests (e.g. HbA1c, LDL, etc.), allergies, complications, previous plans, family history, and medications. The third source is the data manually sent by the patient as real-time non-sensed data, such as an intent to eat carbohydrates, an intent to play exercises, and other emergency consultation data. Another type of knowledge modeled in the ontology is the TP components, which include the care team, the care plan, treatment goals, food and dietary meals, exercises, insulin, and education. The ontology includes additional semantic knowledge regarding units of measurement, interactions (drug-drug, drug-disease, and drug-food), allergies, drug side effects, etc.</p>
      </sec>
      <sec id="Sec12">
        <title>Identify FHIR resources and profiling</title>
        <p id="Par77">Table <xref rid="Tab1" ref-type="table">1</xref> describes medical data elements representing T1D treatment and their mappings to a set of interlinked FHIR resources. A custom TP suggests actions to handle specific conditions for a specific patient. Most features required to build custom treatment plans are imported from an FHIR model, including <italic>who</italic> (e.g. patient, physician, care team, or relative), <italic>why</italic> (e.g. goals and risks), <italic>what</italic> (e.g. medications, medication allergies, vital signs, lab tests, diet, and exercise), and <italic>where</italic> (e.g. location). We utilize about 23 resources to build complete plans. Each resource has a unique ID, connected based on patient identifiers. Profiling is a required step because FHIR is a generic model. We added and/or removed some fields in some resources; in addition, we changed some field constraints. For example, the <italic>category</italic> field from <italic>CarePlan</italic> is removed because we only consider CarePlan.category = 698,360,004|Diabetes self management plan. We depend on the FHIR <italic>vital sign</italic>, <italic>BMI</italic>, and <italic>blood glucose</italic> profiling. To preserve the monotonicity of FASTO, we considered the final state for all resources (e.g. Observation.status = “final” and Condition.verificationStatus = “confirmed”). Background knowledge such as <italic>foods</italic> and <italic>interactions</italic> (e.g. <italic>food-drug</italic>, <italic>food-disease</italic>, <italic>drug-drug</italic>, and <italic>drug-disease</italic>), and drug side effects are modeled away from FHIR but are used in a standard way with resources such as <italic>NutritionOrder</italic> and <italic>Detectedissue</italic>, respectively<italic>.</italic> Remote-monitoring resources (e.g. observation) are mapped to SSN classes, and all classes are mapped to BFO universals. All references are modeled as object properties.<table-wrap id="Tab1"><label>Table 1</label><caption><p>T1D treatment essential data elements</p></caption><table frame="hsides" rules="groups"><thead><tr><th>TP data element</th><th>HL7 FHIR resource</th><th>Description</th><th>SSN class</th><th>SSN Mapping</th><th>Cloud database table</th><th>BFO universal</th></tr></thead><tbody><tr><td>Patient + demographic</td><td>Patient</td><td>Person who plays the patient role (e.g. age, address, gender)</td><td>–</td><td>–</td><td>Patient</td><td>⊑BFO: BFO_0000023</td></tr><tr><td>Physician</td><td>Practitioner</td><td>Person who plays the role of physician, nutritionist, etc.</td><td>–</td><td>–</td><td>Practitioner</td><td>⊑BFO: BFO_0000023</td></tr><tr><td>Relative</td><td>Related person</td><td>Person who plays the patient’s family member role</td><td>–</td><td>–</td><td>Related person</td><td>⊑BFO: BFO_0000023</td></tr><tr><td>Vital sign</td><td>Observation</td><td>Vital signs such as blood pressure, temperature</td><td>observationValue</td><td>Exact</td><td>Observation</td><td>⊑BFO: OBI_0000027</td></tr><tr><td>Blood glucose level</td><td>Observation</td><td>Patient blood glucose level from sensor</td><td>observationValue</td><td>Exact</td><td>Observation</td><td>⊑BFO: OBI_0000027</td></tr><tr><td>Lab test result</td><td>Observation</td><td>Lab test result (e.g. HbA1c, LDL, and RPG)</td><td>–</td><td/><td>Observation</td><td>⊑BFO: OBI_0000027</td></tr><tr><td>Physical examination</td><td>Observation</td><td>Such as height, weight, BMI, and level of activity</td><td>observationValue</td><td>Exact</td><td>Observation</td><td>⊑BFO: OBI_0000027</td></tr><tr><td>Social history</td><td>Observation</td><td>Patient medical history (e.g. smoking history, alcohol intake)</td><td>–</td><td>–</td><td>Observation</td><td>⊑BFO: OBI_0000027</td></tr><tr><td>Patient symptom</td><td>Condition</td><td>Persistent patient symptoms that need long term management</td><td>–</td><td>–</td><td>Condition</td><td>⊑BFO: BFO_0000019</td></tr><tr><td>Complication</td><td>Condition</td><td>Pregnancy and current and previous diseases or diagnoses</td><td>–</td><td>–</td><td>Condition</td><td>⊑BFO: BFO_0000019</td></tr><tr><td>Body site of sensor</td><td>BodySite</td><td>Describe sensor place</td><td>platform</td><td>Partial match</td><td>BodySite</td><td>⊑BFO: BFO_0000006</td></tr><tr><td>Adverse even</td><td>AdverseEvent</td><td>Events occur during the course of patient medical care</td><td>–</td><td>–</td><td>AdverseEvent</td><td>⊑BFO: BFO_0000016</td></tr><tr><td>Patient allergy</td><td>AllergyIntolerance</td><td>Description of patient allergies</td><td>–</td><td>–</td><td>AllergyIntolerance</td><td>⊑BFO: BFO_0000016</td></tr><tr><td>Patient location</td><td>Location</td><td>Location of the patient</td><td>–</td><td>Exact</td><td>Location</td><td>⊑BFO: BFO_0000006</td></tr><tr><td>Family history</td><td>FamilyMemberHistory</td><td>Medical history of patient’s family members</td><td>–</td><td>–</td><td>FamilyMemberHistory</td><td>⊑BFO: BFO_0000182</td></tr><tr><td>Treatment plan</td><td>CarePlan</td><td>Define patient’s future, current, or past custom care plan</td><td>–</td><td>–</td><td>CarePlan</td><td>⊑BFO: OBI_0000011</td></tr><tr><td>Goal</td><td>Goal</td><td>Define the medical goal of a care plan</td><td>–</td><td>–</td><td>Goal</td><td>⊑BFO: BFO_0000019</td></tr><tr><td>Diet</td><td>NutritionOrder</td><td>Describe ordered diet</td><td>–</td><td>–</td><td>NutritionOrder</td><td>⊑BFO: BFO_0000019</td></tr><tr><td>Drug</td><td>Medication</td><td>Define a drug such as insulin</td><td>–</td><td>–</td><td>Medication</td><td>⊑BFO: BFO_0000040</td></tr><tr><td>Plan medication</td><td>MedicationRequest</td><td>Medication prescription for patient</td><td>–</td><td>–</td><td>MedicationRequest</td><td>⊑BFO: IAO_0000030</td></tr><tr><td>Medication dosage</td><td>Dosage</td><td>Dosage instruction information</td><td>–</td><td>–</td><td>Dosage</td><td>⊑BFO: BFO_0000019</td></tr><tr><td>Taken medications</td><td>MedicationStatement</td><td>Patient’s current medications list</td><td>–</td><td>–</td><td>MedicationStatement</td><td>⊑BFO: IAO_0000030</td></tr><tr><td>WBAN sensors</td><td>Device</td><td>Describes WBAN components (e.g. sensor)</td><td>sensing device</td><td>Exact</td><td>Device</td><td>⊑BFO: BFO_0000040</td></tr><tr><td>Patient-physician</td><td>Encounter</td><td>Interaction between a patient and healthcare provider</td><td>–</td><td>–</td><td>Encounter</td><td>⊑BFO: OBI_0000011</td></tr><tr><td>Patient-physician</td><td>EpisodeOfCare</td><td>Track provider for ongoing care of the patient</td><td>–</td><td>–</td><td>EpisodeOfCare</td><td>⊑BFO: OBI_0000011</td></tr><tr><td>Care team</td><td>CareTeam</td><td>Group of practitioners responsible for patient monitoring</td><td>–</td><td>–</td><td>CareTeam</td><td>⊑BFO: BFO_0000023</td></tr><tr><td>Exercise</td><td>Procedure</td><td>A procedure done by patient as a part of treatment plan</td><td>–</td><td>–</td><td>Procedure</td><td>⊑BFO: BFO_0000019</td></tr><tr><td>UoM</td><td>Element</td><td>Units of measurement</td><td>–</td><td>–</td><td>–</td><td>⊑BFO: IAO_0000030</td></tr><tr><td>Education</td><td>Procedure</td><td>Patient education as a part of the treatment plan</td><td>–</td><td>–</td><td>Procedure</td><td>⊑BFO: OBI_0000011</td></tr></tbody></table></table-wrap></p>
        <p id="Par78">For extensibility reasons, all FHIR primitive and complex data types are implemented as OWL 2 classes with appropriate cardinality restrictions. All primitive data types (e.G. <italic>integer</italic>, data, URI, etc.) are defined as subclasses of the fhir:primitiveDatatype class, which is defined as: fhir:primitiveDatatype ⊑ {(fhir:element ⊑ ‘BFO:information content entity’)⊓(fhir:hasValue max 1 rdfs:literal)}. We implemented 16 primitive types, and each one of them is mapped to one or more XSD types by putting constraints to literal values. Complex data types are modeled with a specific name for each property. We implemented 14 complex types. For example, the fhir:timing class is defined as:</p>
        <graphic position="anchor" xlink:href="12911_2019_806_Figa_HTML" id="MO3"/>
        <p id="Par79">Units of measurement (UoMs) are implemented in SCT under the (282372007) concept, and UO OWL 2 ontology (<ext-link ext-link-type="uri" xlink:href="https://bioportal.bioontology.org/ontologies/UO"><italic>https://bioportal.bioontology.org/ontologies/UO</italic></ext-link>) provides another design method. However, we depend on the standard selected by HL7, i.e. the unified code for units of measurement (UCUM: <ext-link ext-link-type="uri" xlink:href="http://unitsofmeasure.org/ucum.html"><italic>http://unitsofmeasure.org/ucum.html</italic></ext-link>). The unitOfMeasure class is defined as ⊑(∃hasUoMCode.xsd:string)⊓ ∃hasUoMDisplay.xsd:string), where both display and code are imported from UCUM.</p>
      </sec>
      <sec id="Sec13">
        <title>Determine SSN classes and map them to BFO</title>
        <p id="Par80">This knowledge is related to modeling WBAN components and the biomedical parameters they measure. Sensors in a patient’s WBAN have heterogeneous types and data formats. Recently, there has been rising interest in ontologies to improve integration of and communication with sensor networks. The main idea is to annotate sensor data with spatial, temporal, and thematic semantic metadata to achieve interoperability and provide contextual information. The ontology supports the connection of sensor data and other sources of data. In addition, it provides semantic reasoning capabilities. The SSN (<ext-link ext-link-type="uri" xlink:href="http://purl.oclc.org/NET/ssnx/ssn"><italic>http://purl.oclc.org/NET/ssnx/ssn</italic></ext-link>) is an OWL 2 ontology created by W3C [<xref ref-type="bibr" rid="CR57">57</xref>]. It is a general sensor ontology based on the DOLCE (<ext-link ext-link-type="uri" xlink:href="http://www.loa.istc.cnr.it/old/DOLCE.html"><italic>http://www.loa.istc.cnr.it/old/DOLCE.html</italic></ext-link>) upper-level ontology to support reuse and semantic interoperability. The SSN leverages the Sensor Web Enablement (SWE) standard. In this paper, we extend the SSN to be used for T1D treatment. On the other hand, FASTO is based on BFO as the top-level ontology in order to support semantic interoperability between distributed systems. BFO (<ext-link ext-link-type="uri" xlink:href="http://basic-formal-ontology.org"><italic>http://basic-formal-ontology.org</italic></ext-link>) is a realistic ontology, and many medical ontologies are based on it [<xref ref-type="bibr" rid="CR9">9</xref>, <xref ref-type="bibr" rid="CR10">10</xref>]. In addition, the ontology for general medical science (<ext-link ext-link-type="uri" xlink:href="https://bioportal.bioontology.org/ontologies/OGMS"><italic>https://bioportal.bioontology.org/ontologies/OGMS</italic></ext-link>), which is the most high-level ontology in the medical domain, is based on BFO. The semantic alignment of SSN top-level concepts with BFO universals is based on detailed discussions with the authors of BFO and on existing research [<xref ref-type="bibr" rid="CR58">58</xref>], see Fig. <xref rid="Fig3" ref-type="fig">3</xref>. This alignment is described in the following description logic axioms, where <italic>ssn</italic>, <italic>bfo</italic>, <italic>fasto</italic>, and <italic>sban</italic> namespaces are used.<fig id="Fig3"><label>Fig. 3</label><caption><p>The basic SSN concepts and BFO universals associations. These are the main mapping classes between SSN ontology and the upper level ontology of BFO</p></caption><graphic xlink:href="12911_2019_806_Fig3_HTML" id="MO4"/></fig></p>
        <graphic position="anchor" xlink:href="12911_2019_806_Figb_HTML" id="MO5"/>
        <p id="Par81">We used prefixes to indicate the sources of knowledge (e.g. <italic>fasto</italic> for FASTO). The previous subsumption axioms are extended by other anonymous classes for each class. For example, ssn:sensingDevice is defined as follows:</p>
        <graphic position="anchor" xlink:href="12911_2019_806_Figc_HTML" id="MO6"/>
        <p id="Par82">The SSN ontology has 10 main modules. We will not import all of them into the current version of FASTO. We concentrate on the sensors, their sensed objects, and resulting observations. For example, no classes related to the physical characteristics of the sensors and the WBAN are imported, such as batteryLifetime, Latency, Manufacture, MaintenanceSchedule, Security, Processor, OperatingPowerRange, ResponseTime, SystemLiveTime, Frequency, Resolution, DetectionLimit, and Sensitivity. Most of these classes are in the MeasuringCapability and OperatingRestriction modules. The other classes and their related properties are imported with the same semantics. A total of 10 classes, 26 object properties, and 5 data properties are imported from the SSN ontology. The data are collected in the ontology based on the HL7 FHIR standard format and vital sign ontology (<ext-link ext-link-type="uri" xlink:href="http://purl.bioontology.org/ontology/VSO"><italic>http://purl.bioontology.org/ontology/VSO</italic></ext-link>) terminology. All patient vital sign classes are subclasses of OGMS_0000029 or the vital sign class; in addition, these classes and bloodGlucoseLevel are subsumed by featureOfInterest. The process of transforming raw sensor data into JSON format is done on the WBU (i.e. the mobile phone). Collected data from WBANs has temporal and location dimensions. The temporal dimension is modeled by the SWRL TO ontology (<ext-link ext-link-type="uri" xlink:href="http://swrl.stanford.edu/ontologies/built-ins/3.3/temporal.owl"><italic>http://swrl.stanford.edu/ontologies/built-ins/3.3/temporal.owl</italic></ext-link>). The SWRL TO ontology is lighter than the W3C Time ontology (<italic>https://</italic><ext-link ext-link-type="uri" xlink:href="http://www.w3.org/TR/owl-time"><italic>www.w3.org/TR/owl-time</italic></ext-link>) and, at the same time, is sufficient. It has four main classes (STO:validTime, STO:granularity, STO:validInstant, and STO:validPeriod), two object properties (STO:hasGranularity and STO:hasValidTime), and three data properties (STO:hasFinishTime, STO:hasStartTime, and STO:hasTime). In addition, it provides some temporal capabilities using SWRL buildins. The SSN is extended by some knowledge from the SmartBAN ontology (<ext-link ext-link-type="uri" xlink:href="https://www.etsi.org/technologies-clusters/technologies/smart-body-area-networks"><italic>https://www.etsi.org/technologies-clusters/technologies/smart-body-area-networks</italic></ext-link>) including fasto: Node⊑ssn:physicalObject and fasto: WBAN⊑ssn:system⊑ssn:physicalObject classes, and SBAN:hasContact object property. We defined two new classes of fasto:wearableSystem and fasto:wearableSensorPlatform to extend the definition of ssn:system and ssn:platform, respectively, for sensors located on the patient’s body, respectively.</p>
        <p id="Par83">In addition, a new object property, fasto:placedOn, is defined for the axiom of (wearableSensorPlatform⊑∀ placedOn.humanBodyPart), and body parts can be defined according to the foundational model of anatomy (<ext-link ext-link-type="uri" xlink:href="https://bioportal.bioontology.org/ontologies/FMA"><italic>https://bioportal.bioontology.org/ontologies/FMA</italic></ext-link>). According to the recent CPGs, blood glucose, not HbA1c, must be used to monitor T1D patients [<xref ref-type="bibr" rid="CR20">20</xref>]. In addition, to build an accurate and continuing TP, a complete medical evaluation should be conducted based on a complete patient profile. Raw data collected from different sensors cannot easily work together owing to the lack of semantic interoperability. SSN converts these data to semantic data, but integrating sensors data with EHR data is another challenge. To handle this challenge, collected knowledge needs to be standardized to achieve semantic interoperability among its sources. As a result, we will extend the previously modeled knowledge by FHIR resources.</p>
      </sec>
      <sec id="Sec14">
        <title>Map resources to SSN and BFO</title>
        <p id="Par84">According to Table <xref rid="Tab1" ref-type="table">1</xref>, all selected resources are modeled as subclasses or equivalent classes to either SSN classes or BFO universals. This mapping is based on a deep study of these ontologies and long discussions with BFO authors. The resulting mapping helps to unify the meaning of ontology knowledge, which improves the portability, shareability, reusability, and customizability of the resulting knowledge.</p>
      </sec>
      <sec id="Sec15">
        <title>Model resources knowledge with OWL constructs</title>
        <p id="Par85">In this step, we extend the semantics of SSN in a standard way based on FHIR semantics. Medical, location, and temporal concepts are linked to SSN knowledge. In addition, we model the FHIR semantics for the other non-sensor EHR data and relate this knowledge to SSN concepts. The implementation of resource knowledge is achieved according to the official resource schemas. HL7 FHIR provides the basic forms for each resource. To be applicable in our domain, all resources are profiled according to our domain. All classes in Table <xref rid="Tab1" ref-type="table">1</xref> were modeled by first profiling the FHIR resources and then extending these resources with some knowledge required for our problem domain. Resources are modeled as FASTO classes, and each resource element is modeled as an object property using the pattern [<italic>ResourceName.ElementName</italic>]. The following are the semantics for some classes based on FHIR resources described in description logic syntax. We extended the medication resource as follows:</p>
        <graphic position="anchor" xlink:href="12911_2019_806_Figd_HTML" id="MO7"/>
        <p id="Par86">In addition, the insulin class is subsumed by the medication class as follows:</p>
        <graphic position="anchor" xlink:href="12911_2019_806_Fige_HTML" id="MO8"/>
        <p id="Par87">The class person≡{patient⊔practitioner⊔relative} is defined as follows:</p>
        <graphic position="anchor" xlink:href="12911_2019_806_Figf_HTML" id="MO9"/>
        <p id="Par88">The patient class is extended to capture the sensor and WBAN knowledge as follows.</p>
        <graphic position="anchor" xlink:href="12911_2019_806_Figg_HTML" id="MO10"/>
        <p id="Par89">The observation resource is used to model all types of observations including <italic>sensor observations</italic> (e.g. vital signs and blood glucose level) and <italic>non-sensor observations</italic> (e.g. lab tests and physical examinations results). All temporary patient characteristics are collected in the patientProfile class including observations (i.e. observationValue), complications (i.e. condition), symptoms (i.e. condition), adverse events (i.e. adverseEvent), medications (i.e. medicationStatement), encounters (i.e. encounter), food (i.e. food), care plans (i.e. carePlan), etc.</p>
        <graphic position="anchor" xlink:href="12911_2019_806_Figh_HTML" id="MO11"/>
        <p id="Par90">We preserve the flexibility of FASTO, where the same piece of knowledge can be accessed in different ways. For example, patient complications can be collected according to encounters or from the profile. To achieve interoperability and completeness, the SSN’s observationValue class was extended according to the Observation FHIR resource, which defines its observed quantity, coding, and UoM as follows:</p>
        <graphic position="anchor" xlink:href="12911_2019_806_Figi_HTML" id="MO12"/>
        <p id="Par91">Figure <xref rid="Fig4" ref-type="fig">4</xref> depicts the observationValue class in its context with sensor, WBAN, patient profile, and carePlan classes. Many classes, and many class properties, were removed to keep the figure simple. The Condition class is used to model patient’s pregnancy, current or historical symptoms, diagnoses, and complications based on the Condition.category object property. We imported the possible diabetes symptoms from our DDO, and possible diagnosis and complications from our DMTO. The condition class is used to define specific conditions for specific patient to be considered in TP instantiation.<fig id="Fig4"><label>Fig. 4</label><caption><p>The observationValue class in its context. These are the main classes related to the observationValue class including the patient, sensor, and patientProfile classes</p></caption><graphic xlink:href="12911_2019_806_Fig4_HTML" id="MO13"/></fig></p>
        <graphic position="anchor" xlink:href="12911_2019_806_Figj_HTML" id="MO14"/>
        <p id="Par92">FHIR has two classes to define medications in general: medication class and the patient’s specific medications (medicationStatement). However, it has no equivalent logic for diseases. It has the condition class for patient-specific conditions, but there is no resource for modeling diseases in general. For each disease, this class is critical in order to define its code and contradicted drugs, foods, and exercises. We introduced a disease class as follows:</p>
        <graphic position="anchor" xlink:href="12911_2019_806_Figk_HTML" id="MO15"/>
        <p id="Par93">Standard medication adverse effects are imported from the ontology of adverse events (OAE: <ext-link ext-link-type="uri" xlink:href="http://purl.bioontology.org/ontology/OAE"><italic>http://purl.bioontology.org/ontology/OAE</italic></ext-link>) ontology, and every medication has its list of adverse effects. The binding of a patient with specific adverse events, (i.e. taking an incorrect drug or an incorrect dose of a drug) is defined by the adverseEvent class. Patient context, including current conditions or treatments, is essential in establishing a cause-and-effect relationship for an adverse event. As a result, we relate adverseEvent and patient profile classes with the hasAdverseEvent object property. In addition, the patient’s allergy and intolerance to foods and other substances is modeled in the allergyIntolerance class. Because allergies may not depend on the context as adverse events, this class is directly related to the patient class. The MedicationRequest class is used to prescribe insulin for the patient, and medicationStatement is used to collect the medication history of the patient.</p>
        <graphic position="anchor" xlink:href="12911_2019_806_Figl_HTML" id="MO16"/>
        <p id="Par94">Treatment plan modeling is one of the main targets of our ontology. The carePlan class collects the semantics of the TP. Every care plan should have medication, diet, exercise, and education activities. In addition, real-time insulin dosage consultations according to changes in carbohydrates consumption and exercises are modeled.</p>
        <graphic position="anchor" xlink:href="12911_2019_806_Figm_HTML" id="MO17"/>
        <p id="Par95">We extended carePlan to define the type of insulin regimen by using the <italic>hasInsulinRegimen</italic> object property. The insulinRegimen ≡{FixedRegimen⊔intensiveInsulinTherapy} class is defined as follows:</p>
        <graphic position="anchor" xlink:href="12911_2019_806_Fign_HTML" id="MO18"/>
        <p id="Par96">In addition, carePlan has six specific, measurable, achievable, realistic, time-oriented (SMART) goals of blood glucose goal, daily per-meal glucose goal, blood pressure goal, HbA1c goal, weight goal, and other customizable goal.</p>
        <graphic position="anchor" xlink:href="12911_2019_806_Figo_HTML" id="MO19"/>
        <p id="Par97">The carePlanActivityComponent class defines the long-term parts of the plan in the form of activities by using medicationRequest for insulin, nutritionOrder for diet, and procedureRequest for education, as illustrated in Fig. <xref rid="Fig5" ref-type="fig">5</xref>. For real-time adjustment of insulin dosage and carb grams, the patient class has three properties linked with the breakfast, lunch, and dinner classes. These classes are subclasses of the meal class, which is defined as (∃hasTotalCarbsInGrams.xsd:integer)⊓(∃hasFood.food) ⊓(∃hasValidTime.validInstant)⊓(∃hasCorrectionInsulinUnits.xsd:integer)⊓(∃ hasCarbsInsulinUnits.xsd:integer)⊓(∃hasTotalInsulin.xsd:integer). The patient monitoring process depends on data collected from hospitals. As a result, the <italic>Organization</italic> resource is required. The proposed system suggests TPs for physicians to approve, and the final decision is from physicians. There must be a specific party responsible for the monitoring process. As a result, the <italic>Practitioner</italic>, <italic>CareTeam</italic>, and <italic>Relative</italic> resources are used. To organize the monitoring process, <italic>Encounter</italic> and <italic>EpisodeOfCare</italic> are utilized. Each of these resources was designed as an OWL 2 class with suitable properties. For space restrictions, readers can find their DL definitions in the ontology.<fig id="Fig5"><label>Fig. 5</label><caption><p>The carePlan class in its context. These are the main classes related to the carePlan class including the goal, and carePlanActivity classes</p></caption><graphic xlink:href="12911_2019_806_Fig5_HTML" id="MO20"/></fig></p>
      </sec>
      <sec id="Sec16">
        <title>Model T1D treatment knowledge with FHIR resources</title>
        <p id="Par98">The resulting FASTO ontology is rich enough to define any type of TP for diabetics. In this section, we extensively define T1D treatment knowledge according to available CPGs, expert knowledge, and online resources [<xref ref-type="bibr" rid="CR11">11</xref>, <xref ref-type="bibr" rid="CR51">51</xref>–<xref ref-type="bibr" rid="CR56">56</xref>]. Creating a TP for T1D patients is a complex process because it requires the customization of many parameters. A TP has three main sub-plans: <italic>medication</italic> for insulin prescription, <italic>lifestyle</italic> for diet and exercise definitions, and <italic>education</italic> for defining custom learning topics. We simulate the operation of <italic>β</italic> cells. These cells sense the BG level, analyze the collected data, and deliver insulin accordingly. The WBAN senses the patient’s vital signs; the ontology collects these data, combines them with the EHR profile, and makes a semantic analysis; finally, a customized plan is given to the patient with details on insulin management, lifestyle, and education. This knowledge is implemented as SWRL rules and OWL 2 axioms. FASTO manages three main situations, as shown in Fig. <xref rid="Fig6" ref-type="fig">6</xref>.<fig id="Fig6"><label>Fig. 6</label><caption><p>Diabetes treatment main tasks. These are the main components of diabetes carePlan including initial care plan, real time monitoring, emergency handling, and plan maintenance</p></caption><graphic xlink:href="12911_2019_806_Fig6_HTML" id="MO21"/></fig></p>
        <p id="Par99"><italic>The first situation</italic> is to create long-term TPs according to the entire patient profile, previous TPs, and temporal abstraction of sensor data (if any). All of the cloud-based EHR data are instantiated in the ontology as standard FHIR resources. The <italic>second situation</italic> is real-time patient guidance to adjust insulin doses, carb amounts, and exercises according to dynamic patient needs and sensor readings. This step is based on real-time observations collected from the WBAN plus some calculated factors, such as insulin sensitivity factor (ISF) and insulin-to-carbs ratio (ICR) [<xref ref-type="bibr" rid="CR59">59</xref>]. <italic>The third situation</italic> is handling emergencies, where the patient in danger of hypoglycemia (blood glucose &lt;3.6 mmol/L) or hyperglycemia (blood glucose &gt;9.0 mmol/L). These situations are kept away from long-term TPs because they require special procedures for diagnoses and handling. In this version of FASTO, we will implement the first two situations.</p>
        <sec id="FPar57">
          <title>Initial care plan construction</title>
          <p id="Par100">This plan tries to manage the balance between things that increase BG (e.g. food, illness, emotion, etc.) and things that decrease BG (e.g. insulin, exercise, diet, etc.)</p>
          <p id="Par101"><bold><italic>Insulin prescription</italic></bold> This step determines the types of insulin, the number of units, and the frequency needed to control patient glucose. Insulin is a hormone. If administered by mouth, it is digested like other proteins. Therefore, injection is the primary method of administration. It mainly depends on patient weight in order to determine the starting dose or total daily dose (TDD). Age, diabetes duration, other complications, and other medications are also considered. There are only two main regimens, i.e. intensive insulin therapy (IIT) and daily fixed (DF). IIT (basal-bolus, prandial, or multiple daily injections) is the most popular and flexible regimen. However, it is sometimes not suitable, especially for children, because it is more complex. IIT is based on selecting one basal insulin (e.g. 50% of TDD) that works as a background long-acting or intermediate-acting insulin such as <italic>Detemir</italic> or <italic>Lantus</italic>. Based on the patient’s choice, the basal dose can be taken as one shot at bedtime or divided into two (one in the morning and one in the evening). In addition, IIT selects one rapid-acting insulin (bolus or pre-meal), such as <italic>Aspart</italic> or <italic>Novolog</italic>, to be used to cover food. The other 50% of the TDD is divided into three injections per day (e.g. 15 min before each of the three meals). Measuring blood glucose before meals is critical. If it is lower or greater than the target BG, then the meal’s predefined dosage must change accordingly. If the patient skips a meal then he/she must skip the bolus dose. On the other hand, the DF regimen is easier to administer, but less flexible. It is created based on the usual carbs taken per meal and the usual exercises per day. DF does not take into consideration any changed amounts of carbs and exercise during the day. As a result, the patient must stick with a specific predefined diet and exercise pattern to avoid hypoglycemia. There are two main types of DF regimen. The once-daily regimen is when the patient takes one shot in the morning or in the evening via long-acting insulin (e.g. <italic>detemir</italic>). The twice-daily regimen is when the patient takes two shots (i.e. 2/3 of TDD as the morning dose and 1/3 of TDD as the evening dose). The morning dose is divided again into 2/3 in an intermediate-acting dose (e.g. <italic>NPH insulin</italic>), and 1/3 in a short-acting dose (e.g. <italic>regular insulin</italic>). The evening dose is also divided, but in half, with 1/2 in an intermediate-acting dose, and 1/2 in a short-acting dose. The patient mixes the two types of insulin in one syringe for morning and evening doses. There are premixed insulins such as the 70/30 preparation, which is suitable for morning shots, and a 50/50 preparation, which is suitable for evening shots. They are based on premixed insulins (e.g. <italic>Novolin 70/30</italic>, <italic>Humalog Mix 50/50</italic>) administered in one or two shots per day. For this version of the ontology, we assume the patient will not take any snacks between meals just to simplify the calculations.</p>
          <p id="Par102">To create a customized plan, the selected insulin regimen must first be approved by the patient, and second be checked for compatibility with patient conditions. To personalize the treatment plans, we must check the drug-drug, drug-disease, and drug-food interactions. A patient currently taken drugs, including insulin, can conflict with other drugs, diseases, or foods. For example, <italic>Novolog (insulin aspart)</italic> is contradicting with more than 125 drugs (e.g. <italic>gatifloxacin, macimorelin</italic>) and some diseases (e.g. <italic>hypokalemia</italic>). In addition, many drugs affect the blood glucose level or the body’s sensitivity to insulin. Drugs such as <italic>corticosteroid</italic>, <italic>octreotide</italic>, <italic>beta-blockers</italic>, <italic>epinephrine</italic>, <italic>thiazide diuretics</italic>, <italic>statins</italic>, <italic>niacin</italic>, <italic>pentamidine</italic>, <italic>protease inhibitors</italic>, <italic>L-asparaginase</italic>, <italic>antipsychotics</italic>, <italic>cortisone</italic>, <italic>Seroquel</italic>, <italic>niacin</italic>, <italic>beta 2 agonists</italic>, and <italic>diuretics</italic> cause hyperglycemia, but drugs such as <italic>quinine</italic> cause hypoglycemia. Diseases such as <italic>metabolic syndrome</italic> and <italic>acromegaly</italic> cause hyperglycemia, but pregnancy and disorders that affect the liver, heart, or kidney can cause hypoglycemia. All of these factors must be taken into consideration to create a real customized plan. To support interoperability, accuracy, and medical acceptance, we employed many sources to build the TP knowledge including standard CPGs, medical experts, and official websites. We use SWRL to represent monitoring and treatment knowledge in the form of rules.</p>
          <p id="Par103">As shown in Fig. <xref rid="Fig7" ref-type="fig">7</xref> (a), the creation of an insulin plan has a set of steps starting with setting goals for HbA1c, weight, and BG levels and ending in a standardization process. We faced many challenges to prepare the medical knowledge implemented in this ontology. As a result, the TPs implemented in this version of the ontology do not show the full representation and reasoning capabilities of our proposal. Based on the patient’s age, we determine whether the patient is a <italic>child</italic>, <italic>adolescent</italic>, <italic>adult</italic>, or <italic>oldAdult</italic>. FASTO has 140 SWRL rules. The list of SWRL rules is disclosed in the Additional file <xref rid="MOESM1" ref-type="media">1</xref>. We will give some examples to illustrate the idea. For example, Rule 1 identifies adult patients.<fig id="Fig7"><label>Fig. 7</label><caption><p>Initial care plan components. These are the detailed modules of the initial care plan including insulin, diet, exercise, and education modules</p></caption><graphic xlink:href="12911_2019_806_Fig7_HTML" id="MO22"/></fig><graphic position="anchor" xlink:href="12911_2019_806_Figp_HTML" id="MO23"/></p>
          <p id="Par104">Results of these rules with the patient’s pregnancy status are used to define plan goals, as shown in the Rule 2 example. In addition, if the patient has some <italic>cardiovascular diseases</italic> or experienced <italic>hypoglycemia</italic>, they will also affect the goals definition.<graphic position="anchor" xlink:href="12911_2019_806_Figq_HTML" id="MO24"/></p>
          <p id="Par105">Rule 2 determines the TP goals as “<italic>IF patient is adult AND pregnant THEN goals are HbA1c&lt;6.5% AND pre-meal BG &gt;=90mg/dL and &lt;=100mg/dL</italic>”. These values can easily be changed based on new evidence. This knowledge is standardized according to FHIR, and its UoMs are based on UCUM.</p>
          <p id="Par106">Selection of a regimen is based on patient preferences if the patient is an adult, but for pregnant and child, IIT is medically the best choice. For example, Rule 3 decides the regimen for an adult pregnant patient.<graphic position="anchor" xlink:href="12911_2019_806_Figr_HTML" id="MO25"/></p>
          <p id="Par107">According to the selected regimen, we calculate the TDD and divide it into shots for the entire day. Patient weight is an SSN ontology observation, and its value is represented as the FHIR ObservationValue instance. As a result, the ontology will accept sensor observations and standardize them according to FHIR. In this version of our ontology, we depend mainly on patient weight (W) to determine TDD, as shown in Eq. <xref rid="Equ1" ref-type="">1</xref>. For DF regimen, the resulting TDD is divided into the morning dose (MD) and evening dose (ED), as shown in Eq. <xref rid="Equ2" ref-type="">2</xref>. The morning dose is divided into long or intermediate-acting insulin (MD<sub>L</sub>) and short-acting insulin (MD<sub>s</sub>), as shown in Eq. <xref rid="Equ3" ref-type="">3</xref>. The evening dose is divided into long or intermediate-acting insulin (ED<sub>L</sub>) and short-acting insulin (ED<sub>S</sub>), as shown in Eq. <xref rid="Equ4" ref-type="">4</xref>.<disp-formula id="Equ1"><label>1</label><alternatives><tex-math id="M1">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym} 
				\usepackage{amsfonts} 
				\usepackage{amssymb} 
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \mathrm{TDD}=0.6\ast \mathrm{W}\ \mathrm{unit}/\mathrm{day} $$\end{document}</tex-math><mml:math id="M2" display="block"><mml:mi>TDD</mml:mi><mml:mo>=</mml:mo><mml:mn>0.6</mml:mn><mml:mo>∗</mml:mo><mml:mi mathvariant="normal">W</mml:mi><mml:mspace width="0.25em"/><mml:mtext>unit</mml:mtext><mml:mo>/</mml:mo><mml:mi>day</mml:mi><mml:mspace width="0.25em"/></mml:math><graphic xlink:href="12911_2019_806_Article_Equ1.gif" position="anchor"/></alternatives></disp-formula><disp-formula id="Equ2"><label>2</label><alternatives><tex-math id="M3">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym} 
				\usepackage{amsfonts} 
				\usepackage{amssymb} 
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \mathrm{MD}=\frac{2}{3}\ast \mathrm{TDD},\mathrm{ED}=\frac{1}{3}\ast \mathrm{TDD} $$\end{document}</tex-math><mml:math id="M4" display="block"><mml:mi>MD</mml:mi><mml:mo>=</mml:mo><mml:mfrac><mml:mn>2</mml:mn><mml:mn>3</mml:mn></mml:mfrac><mml:mo>∗</mml:mo><mml:mi>TDD</mml:mi><mml:mo>,</mml:mo><mml:mi>ED</mml:mi><mml:mo>=</mml:mo><mml:mfrac><mml:mn>1</mml:mn><mml:mn>3</mml:mn></mml:mfrac><mml:mo>∗</mml:mo><mml:mi>TDD</mml:mi></mml:math><graphic xlink:href="12911_2019_806_Article_Equ2.gif" position="anchor"/></alternatives></disp-formula><disp-formula id="Equ3"><label>3</label><alternatives><tex-math id="M5">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym} 
				\usepackage{amsfonts} 
				\usepackage{amssymb} 
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \mathrm{M}{\mathrm{D}}_{\mathrm{L}}=\frac{2}{3}\ast \mathrm{M}\mathrm{D}=\frac{2.4}{9}\ast W\  units,\mathrm{M}{\mathrm{D}}_{\mathrm{S}}=\frac{1}{3}\ast \mathrm{M}\mathrm{D}=\frac{1.2}{9}\ast \mathrm{W}\ \mathrm{units} $$\end{document}</tex-math><mml:math id="M6" display="block"><mml:mi mathvariant="normal">M</mml:mi><mml:msub><mml:mi mathvariant="normal">D</mml:mi><mml:mi mathvariant="normal">L</mml:mi></mml:msub><mml:mo>=</mml:mo><mml:mfrac><mml:mn>2</mml:mn><mml:mn>3</mml:mn></mml:mfrac><mml:mo>∗</mml:mo><mml:mi>MD</mml:mi><mml:mo>=</mml:mo><mml:mfrac><mml:mn>2.4</mml:mn><mml:mn>9</mml:mn></mml:mfrac><mml:mo>∗</mml:mo><mml:mi>W</mml:mi><mml:mspace width="0.25em"/><mml:mtext mathvariant="italic">units</mml:mtext><mml:mo>,</mml:mo><mml:mi mathvariant="normal">M</mml:mi><mml:msub><mml:mi mathvariant="normal">D</mml:mi><mml:mi mathvariant="normal">S</mml:mi></mml:msub><mml:mo>=</mml:mo><mml:mfrac><mml:mn>1</mml:mn><mml:mn>3</mml:mn></mml:mfrac><mml:mo>∗</mml:mo><mml:mi>MD</mml:mi><mml:mo>=</mml:mo><mml:mfrac><mml:mn>1.2</mml:mn><mml:mn>9</mml:mn></mml:mfrac><mml:mo>∗</mml:mo><mml:mi mathvariant="normal">W</mml:mi><mml:mspace width="0.25em"/><mml:mtext>units</mml:mtext><mml:mspace width="0.25em"/></mml:math><graphic xlink:href="12911_2019_806_Article_Equ3.gif" position="anchor"/></alternatives></disp-formula><disp-formula id="Equ4"><label>4</label><alternatives><tex-math id="M7">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym} 
				\usepackage{amsfonts} 
				\usepackage{amssymb} 
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \mathrm{E}{\mathrm{D}}_{\mathrm{L}}=\frac{1}{2}\ast \mathrm{E}\mathrm{D}=0.1\ast W\  units,\mathrm{E}{\mathrm{D}}_{\mathrm{S}}=\frac{1}{2}\ast \mathrm{E}\mathrm{D}=0.1\ast \mathrm{W}\ \mathrm{units} $$\end{document}</tex-math><mml:math id="M8" display="block"><mml:mi mathvariant="normal">E</mml:mi><mml:msub><mml:mi mathvariant="normal">D</mml:mi><mml:mi mathvariant="normal">L</mml:mi></mml:msub><mml:mo>=</mml:mo><mml:mfrac><mml:mn>1</mml:mn><mml:mn>2</mml:mn></mml:mfrac><mml:mo>∗</mml:mo><mml:mi>ED</mml:mi><mml:mo>=</mml:mo><mml:mn>0.1</mml:mn><mml:mo>∗</mml:mo><mml:mi>W</mml:mi><mml:mspace width="0.25em"/><mml:mtext mathvariant="italic">units</mml:mtext><mml:mo>,</mml:mo><mml:mi mathvariant="normal">E</mml:mi><mml:msub><mml:mi mathvariant="normal">D</mml:mi><mml:mi mathvariant="normal">S</mml:mi></mml:msub><mml:mo>=</mml:mo><mml:mfrac><mml:mn>1</mml:mn><mml:mn>2</mml:mn></mml:mfrac><mml:mo>∗</mml:mo><mml:mi>ED</mml:mi><mml:mo>=</mml:mo><mml:mn>0.1</mml:mn><mml:mo>∗</mml:mo><mml:mi mathvariant="normal">W</mml:mi><mml:mspace width="0.25em"/><mml:mtext>units</mml:mtext><mml:mspace width="0.25em"/></mml:math><graphic xlink:href="12911_2019_806_Article_Equ4.gif" position="anchor"/></alternatives></disp-formula></p>
          <p id="Par108">Rule 4 calculates the TDD of any insulin regimen based on patient weight.<graphic position="anchor" xlink:href="12911_2019_806_Figs_HTML" id="MO26"/></p>
          <p id="Par109">Rule 5 divides TDD of a fixed regimen into four parts according to the previous equations.<graphic position="anchor" xlink:href="12911_2019_806_Figt_HTML" id="MO27"/></p>
          <p id="Par110">After calculating dosages, we select the most appropriate insulin depending on the patient’s current complications and currently taken drugs. This check prevents contradictions with the patient’s current state. For example, Rule 6 checks if the patient is currently taking a drug that is contradicted with insulin <italic>detemir</italic> (e.g. <italic>testosterone</italic>, <italic>beta-blockers</italic>, <italic>decongestants</italic>, and <italic>hydrochlorothiazide</italic>)</p>
          <p>
            <graphic position="anchor" xlink:href="12911_2019_806_Figu_HTML" id="MO28"/>
          </p>
          <p id="Par111">These contradictions are used to select the suitable insulins. For example, Rule 7 select <italic>glargine</italic> long acting insulin if patient contradicts with <italic>detemir</italic> insulin.<graphic position="anchor" xlink:href="12911_2019_806_Figv_HTML" id="MO29"/></p>
          <p id="Par112">Each DF regimen is assigned two insulins (i.e. long acting and rapid acting), and each one has two dosages. For example, if W = 30 kg, then MD<sub>L</sub> = 8 <italic>units</italic>,MD<sub>s</sub> = 4 <italic>units</italic>, ED<sub>L</sub> = 3 <italic>units</italic>, and ED<sub>s</sub> = 3 <italic>units</italic>. The patient mixes the morning dose in one syringe and the evening dose in another. Premixed insulins are not considered in this version of the ontology. This plan will be maintained every 3 months based on HbA1c and weight goals. The initial IIT insulin regimen divides TDD into basal dose (BA) and bolus dose BO, as shown in Eq. <xref rid="Equ5" ref-type="">5</xref>, Eq. <xref rid="Equ6" ref-type="">6</xref>, and Eq. <xref rid="Equ7" ref-type="">7</xref>:<disp-formula id="Equ5"><label>5</label><alternatives><tex-math id="M9">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym} 
				\usepackage{amsfonts} 
				\usepackage{amssymb} 
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \mathrm{BA}=\mathrm{f}\ast \mathrm{TDD} $$\end{document}</tex-math><mml:math id="M10" display="block"><mml:mi>BA</mml:mi><mml:mo>=</mml:mo><mml:mi mathvariant="normal">f</mml:mi><mml:mo>∗</mml:mo><mml:mi>TDD</mml:mi><mml:mspace width="0.25em"/></mml:math><graphic xlink:href="12911_2019_806_Article_Equ5.gif" position="anchor"/></alternatives></disp-formula><disp-formula id="Equ6"><label>6</label><alternatives><tex-math id="M11">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym} 
				\usepackage{amsfonts} 
				\usepackage{amssymb} 
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \mathrm{BO}=\left(1-\mathrm{f}\right)\ast \mathrm{TDD} $$\end{document}</tex-math><mml:math id="M12" display="block"><mml:mi>BO</mml:mi><mml:mo>=</mml:mo><mml:mfenced close=")" open="("><mml:mrow><mml:mn>1</mml:mn><mml:mo>−</mml:mo><mml:mi mathvariant="normal">f</mml:mi></mml:mrow></mml:mfenced><mml:mo>∗</mml:mo><mml:mi>TDD</mml:mi><mml:mspace width="0.25em"/></mml:math><graphic xlink:href="12911_2019_806_Article_Equ6.gif" position="anchor"/></alternatives></disp-formula><disp-formula id="Equ7"><label>7</label><alternatives><tex-math id="M13">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym} 
				\usepackage{amsfonts} 
				\usepackage{amssymb} 
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ Premeal\ dose=\frac{BO}{3} $$\end{document}</tex-math><mml:math id="M14" display="block"><mml:mtext mathvariant="italic">Premeal dose</mml:mtext><mml:mo>=</mml:mo><mml:mfrac><mml:mi mathvariant="italic">BO</mml:mi><mml:mn>3</mml:mn></mml:mfrac><mml:mspace width="0.25em"/></mml:math><graphic xlink:href="12911_2019_806_Article_Equ7.gif" position="anchor"/></alternatives></disp-formula>where f is a factor with values 0.3, 0.4, 0.5, or 0.6, based on patient conditions. Current medical literature does not clearly define when to use each factor, but most CPGs use 0.5. The BA dose is given as one shot taken in the morning or evening, or divided into two shots. Rule 8 determines the basal dose using UCUM, its route of administration according to SCT, and its timing according to SCT.<graphic position="anchor" xlink:href="12911_2019_806_Figw_HTML" id="MO30"/></p>
          <p id="Par113">In the same way, the BO dose is divided into three shots to be taken before the three meals. These shots will change according to the patient’s real-time BG, meal carbs, and exercise. As modeled in the DP regimen, names of basal and bolus insulins are determined according to patient’s current medications and complications.</p>
          <p id="Par114">The last step is the standardization of the resulting knowledge. This straightforward step is achieved by mapping the modeled knowledge to a medicationRequest object. This class is connected to the carePlan’s carePlanActivityComponent by <italic>reference</italic> object property, as show in Fig. <xref rid="Fig5" ref-type="fig">5</xref>.</p>
          <p id="Par115"><bold><italic>Diet plan definition</italic></bold> Diet is critically related to T1D TPs because patients on insulin therapy always gain weight [<xref ref-type="bibr" rid="CR60">60</xref>]. Obesity is associated with insulin resistance and cardiovascular diseases, where patients are considered to have “double diabetes.” As a result, diet and insulin sub-plans are tightly linked. Sometimes, we adjust insulin regimens to facilitate weight management; other times, we adjust insulin dosages to cover changing meal carbs. Diet is the meal planning process. The diet plan defines what to eat, in what quantities, and when [<xref ref-type="bibr" rid="CR54">54</xref>], in order to maintain a near normal BG level, blood pressure, lipid level, and body weight. This is known as medical nutrition therapy. Total meal carbs has the greatest effect on glycemic control (more than proteins and fats), and this fact has been confirmed in all CPGs. As a result, we depend on the amount of carbs to create the diet plan. Mainly, the plan has three meals, and each meal has a specific amount of carbs. The plan does not determine specific foods for each meal, but it provides basic food groups according to the patient’s preferences, activity level, food-drug and food-disease contradictions, age, and weight. In addition, the diet plan determines the weight goal of carePlan. The diet plan is defined in five steps, as shown in Fig. <xref rid="Fig7" ref-type="fig">7</xref> (b).</p>
          <p id="Par116"><italic>First</italic>, we calculate the patient basal metabolic rate (BMR) based on the Harris-Benedict Equation [<xref ref-type="bibr" rid="CR61">61</xref>]. It depends on the patient’s weight (in pounds or kilograms), height (in inches or centimeters), and age (in years). BMR is calculated for men and women using the metric system (cm/kg) by using Eq. <xref rid="Equ8" ref-type="">8</xref> and Eq. <xref rid="Equ9" ref-type="">9</xref>, respectively. Using imperial measurements (inches/pounds), it is calculated for men and women by using Eq. <xref rid="Equ10" ref-type="">10</xref> and Eq. <xref rid="Equ11" ref-type="">11</xref>, respectively.<disp-formula id="Equ8"><label>8</label><alternatives><tex-math id="M15">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym} 
				\usepackage{amsfonts} 
				\usepackage{amssymb} 
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \mathrm{BMR}=\left(13.75\ast \mathrm{weight}\ \mathrm{in}\ \mathrm{kg}\right)+\left(\mathrm{5,003}\ast \mathrm{height}\ \mathrm{in}\ \mathrm{cm}\right)-\left(6.755\ast \mathrm{age}\ \mathrm{in}\ \mathrm{years}\right)+66.5 $$\end{document}</tex-math><mml:math id="M16" display="block"><mml:mi>BMR</mml:mi><mml:mo>=</mml:mo><mml:mfenced close=")" open="("><mml:mrow><mml:mn>13.75</mml:mn><mml:mo>∗</mml:mo><mml:mtext>weight in</mml:mtext><mml:mspace width="0.25em"/><mml:mi>kg</mml:mi></mml:mrow></mml:mfenced><mml:mo>+</mml:mo><mml:mfenced close=")" open="("><mml:mrow><mml:mn>5,003</mml:mn><mml:mo>∗</mml:mo><mml:mtext>height in</mml:mtext><mml:mspace width="0.25em"/><mml:mi>cm</mml:mi></mml:mrow></mml:mfenced><mml:mo>−</mml:mo><mml:mfenced close=")" open="("><mml:mrow><mml:mn>6.755</mml:mn><mml:mo>∗</mml:mo><mml:mi>age</mml:mi><mml:mspace width="0.25em"/><mml:mtext>in years</mml:mtext></mml:mrow></mml:mfenced><mml:mo>+</mml:mo><mml:mn>66.5</mml:mn><mml:mspace width="0.25em"/></mml:math><graphic xlink:href="12911_2019_806_Article_Equ8.gif" position="anchor"/></alternatives></disp-formula><disp-formula id="Equ9"><label>9</label><alternatives><tex-math id="M17">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym} 
				\usepackage{amsfonts} 
				\usepackage{amssymb} 
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \mathrm{BMR}=\left(9.563\ast \mathrm{weight}\ \mathrm{in}\ \mathrm{kg}\right)+\left(1.85\ast \mathrm{height}\ \mathrm{in}\ \mathrm{cm}\right)-\left(4.676\ast \mathrm{age}\ \mathrm{in}\ \mathrm{year}\right)+655.1 $$\end{document}</tex-math><mml:math id="M18" display="block"><mml:mi>BMR</mml:mi><mml:mo>=</mml:mo><mml:mfenced close=")" open="("><mml:mrow><mml:mn>9.563</mml:mn><mml:mo>∗</mml:mo><mml:mtext>weight in</mml:mtext><mml:mspace width="0.25em"/><mml:mi>kg</mml:mi></mml:mrow></mml:mfenced><mml:mo>+</mml:mo><mml:mfenced close=")" open="("><mml:mrow><mml:mn>1.85</mml:mn><mml:mo>∗</mml:mo><mml:mtext>height in</mml:mtext><mml:mspace width="0.25em"/><mml:mi>cm</mml:mi></mml:mrow></mml:mfenced><mml:mo>−</mml:mo><mml:mfenced close=")" open="("><mml:mrow><mml:mn>4.676</mml:mn><mml:mo>∗</mml:mo><mml:mi>age</mml:mi><mml:mspace width="0.25em"/><mml:mtext>in year</mml:mtext></mml:mrow></mml:mfenced><mml:mo>+</mml:mo><mml:mn>655.1</mml:mn><mml:mspace width="0.25em"/></mml:math><graphic xlink:href="12911_2019_806_Article_Equ9.gif" position="anchor"/></alternatives></disp-formula><disp-formula id="Equ10"><label>10</label><alternatives><tex-math id="M19">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym} 
				\usepackage{amsfonts} 
				\usepackage{amssymb} 
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \mathrm{BMR}=\left(6.2\ast \mathrm{weight}\ \mathrm{in}\ \mathrm{pounds}\right)+\left(12.7\ast \mathrm{height}\ \mathrm{in}\ \mathrm{in}\mathrm{ches}\right)-\left(6.76\ast \mathrm{age}\ \mathrm{in}\ \mathrm{years}\right)+66 $$\end{document}</tex-math><mml:math id="M20" display="block"><mml:mi>BMR</mml:mi><mml:mo>=</mml:mo><mml:mfenced close=")" open="("><mml:mrow><mml:mn>6.2</mml:mn><mml:mo>∗</mml:mo><mml:mtext>weight in pounds</mml:mtext></mml:mrow></mml:mfenced><mml:mo>+</mml:mo><mml:mfenced close=")" open="("><mml:mrow><mml:mn>12.7</mml:mn><mml:mo>∗</mml:mo><mml:mtext>height in inches</mml:mtext></mml:mrow></mml:mfenced><mml:mo>−</mml:mo><mml:mfenced close=")" open="("><mml:mrow><mml:mn>6.76</mml:mn><mml:mo>∗</mml:mo><mml:mi>age</mml:mi><mml:mspace width="0.25em"/><mml:mtext>in years</mml:mtext></mml:mrow></mml:mfenced><mml:mo>+</mml:mo><mml:mn>66</mml:mn><mml:mspace width="0.25em"/></mml:math><graphic xlink:href="12911_2019_806_Article_Equ10.gif" position="anchor"/></alternatives></disp-formula><disp-formula id="Equ11"><label>11</label><alternatives><tex-math id="M21">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym} 
				\usepackage{amsfonts} 
				\usepackage{amssymb} 
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \mathrm{BMR}=\left(4.35\ast \mathrm{weight}\ \mathrm{in}\ \mathrm{pounds}\right)+\left(4.7\ast \mathrm{height}\ \mathrm{in}\ \mathrm{in}\mathrm{ches}\right)-\left(4.7\ast \mathrm{age}\ \mathrm{in}\ \mathrm{years}\right)+655.1 $$\end{document}</tex-math><mml:math id="M22" display="block"><mml:mi>BMR</mml:mi><mml:mo>=</mml:mo><mml:mfenced close=")" open="("><mml:mrow><mml:mn>4.35</mml:mn><mml:mo>∗</mml:mo><mml:mtext>weight in pounds</mml:mtext></mml:mrow></mml:mfenced><mml:mo>+</mml:mo><mml:mfenced close=")" open="("><mml:mrow><mml:mn>4.7</mml:mn><mml:mo>∗</mml:mo><mml:mtext>height in inches</mml:mtext></mml:mrow></mml:mfenced><mml:mo>−</mml:mo><mml:mfenced close=")" open="("><mml:mrow><mml:mn>4.7</mml:mn><mml:mo>∗</mml:mo><mml:mi>age</mml:mi><mml:mspace width="0.25em"/><mml:mtext>in years</mml:mtext></mml:mrow></mml:mfenced><mml:mo>+</mml:mo><mml:mn>655.1</mml:mn><mml:mspace width="0.25em"/></mml:math><graphic xlink:href="12911_2019_806_Article_Equ11.gif" position="anchor"/></alternatives></disp-formula></p>
          <p id="Par117">A diet sub-plan is implemented with the FHIR nutritionOrder class, and BMR is added to the plan as supplementary knowledge using the nutritionOrderSupplementComponent class (see Fig. <xref rid="Fig5" ref-type="fig">5</xref>). We created SWRL rules to calculate BMR for male and female patients according to the used UoM. The FHIR patient’s age and SSN weight and height observations are applied based on Eqs. <xref rid="Equ8" ref-type="">8</xref>, <xref rid="Equ9" ref-type="">9</xref>, <xref rid="Equ10" ref-type="">10</xref> and <xref rid="Equ11" ref-type="">11</xref>. Rule 9 gives an example for calculating the BMR of a female by using the metric system (cm/kg). The resulting BMR has a UoM from the UCUM, and the value has the SCT code “<italic>165,109,007</italic>.”<graphic position="anchor" xlink:href="12911_2019_806_Figx_HTML" id="MO31"/></p>
          <p id="Par118"><italic>Second</italic>, we determine the patient’s activity level (AL) based on lifestyle (Table <xref rid="Tab2" ref-type="table">2</xref>); then, we multiply AL with the BMR to get the number of calories to maintain the current patient weight (MC), as shown in Eq. <xref rid="Equ12" ref-type="">12</xref>.<disp-formula id="Equ12"><label>12</label><alternatives><tex-math id="M23">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym} 
				\usepackage{amsfonts} 
				\usepackage{amssymb} 
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \mathrm{MC}=\mathrm{AL}\ast \mathrm{BMR} $$\end{document}</tex-math><mml:math id="M24" display="block"><mml:mi>MC</mml:mi><mml:mo>=</mml:mo><mml:mi>AL</mml:mi><mml:mo>∗</mml:mo><mml:mi>BMR</mml:mi><mml:mspace width="0.25em"/></mml:math><graphic xlink:href="12911_2019_806_Article_Equ12.gif" position="anchor"/></alternatives></disp-formula><table-wrap id="Tab2"><label>Table 2</label><caption><p>Activity levels of patients</p></caption><table frame="hsides" rules="groups"><thead><tr><th>Life style</th><th>Activity level value</th></tr></thead><tbody><tr><td>Sedentary (little or no exercise)</td><td>1.2</td></tr><tr><td>Lightly active (light exercise/sports 1–3 days/week)</td><td>1.375</td></tr><tr><td>Moderately active (moderate exercise/sports 3–5 days/week)</td><td>1.55</td></tr><tr><td>Very active (hard exercise/sports 6–7 days a week)</td><td>1.725</td></tr><tr><td>Extra active (very hard exercise/sports &amp; physical job or 2x training)</td><td>1.9</td></tr></tbody></table></table-wrap></p>
          <p id="Par119">For example, Rule 10 determines the AL of the patient, and Rule 11 calculates his/her MC.<graphic position="anchor" xlink:href="12911_2019_806_Figy_HTML" id="MO32"/><graphic position="anchor" xlink:href="12911_2019_806_Figz_HTML" id="MO33"/></p>
          <p id="Par120"><italic>Third</italic>, we calculate the patient ideal weight (IW) because the current weight may not be the healthier weight. We follow the WHO, where the healthy BMI range is: 18.5 to 25 for both men and women. BMI can be calculated according to Eq. <xref rid="Equ13" ref-type="">13</xref>. As a result, the IW is in the range calculated by Eq. <xref rid="Equ14" ref-type="">14</xref> and Eq.<xref rid="Equ15" ref-type="">15</xref>.<disp-formula id="Equ13"><label>13</label><alternatives><tex-math id="M25">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym} 
				\usepackage{amsfonts} 
				\usepackage{amssymb} 
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \mathrm{BMI}\left(\mathrm{kg}/{\mathrm{m}}^2\right)=\mathrm{Weight}\ \mathrm{in}\ \mathrm{kg}/{\left(\mathrm{Height}\ \mathrm{in}\ \mathrm{m}\right)}^2 $$\end{document}</tex-math><mml:math id="M26" display="block"><mml:mi>BMI</mml:mi><mml:mfenced close=")" open="("><mml:mrow><mml:mi>kg</mml:mi><mml:mo>/</mml:mo><mml:msup><mml:mi mathvariant="normal">m</mml:mi><mml:mn>2</mml:mn></mml:msup></mml:mrow></mml:mfenced><mml:mo>=</mml:mo><mml:mtext>Weight in</mml:mtext><mml:mspace width="0.25em"/><mml:mi>kg</mml:mi><mml:mo>/</mml:mo><mml:msup><mml:mfenced close=")" open="("><mml:mrow><mml:mtext>Height in</mml:mtext><mml:mspace width="0.25em"/><mml:mi mathvariant="normal">m</mml:mi></mml:mrow></mml:mfenced><mml:mn>2</mml:mn></mml:msup><mml:mspace width="0.25em"/></mml:math><graphic xlink:href="12911_2019_806_Article_Equ13.gif" position="anchor"/></alternatives></disp-formula><disp-formula id="Equ14"><label>14</label><alternatives><tex-math id="M27">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym} 
				\usepackage{amsfonts} 
				\usepackage{amssymb} 
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \mathrm{Lowest}\ \mathrm{IW}\ \mathrm{in}\ \mathrm{kg}\ \left(\mathrm{LIW}\right)=18.5\ast {\left(\mathrm{Height}\ \mathrm{in}\ \mathrm{m}\right)}^2 $$\end{document}</tex-math><mml:math id="M28" display="block"><mml:mtext>Lowest</mml:mtext><mml:mspace width="0.25em"/><mml:mi>IW</mml:mi><mml:mspace width="0.25em"/><mml:mtext>in</mml:mtext><mml:mspace width="0.25em"/><mml:mi>kg</mml:mi><mml:mspace width="0.25em"/><mml:mfenced close=")" open="("><mml:mi>LIW</mml:mi></mml:mfenced><mml:mo>=</mml:mo><mml:mn>18.5</mml:mn><mml:mo>∗</mml:mo><mml:msup><mml:mfenced close=")" open="("><mml:mrow><mml:mtext>Height in</mml:mtext><mml:mspace width="0.25em"/><mml:mi mathvariant="normal">m</mml:mi></mml:mrow></mml:mfenced><mml:mn>2</mml:mn></mml:msup><mml:mspace width="0.25em"/></mml:math><graphic xlink:href="12911_2019_806_Article_Equ14.gif" position="anchor"/></alternatives></disp-formula><disp-formula id="Equ15"><label>15</label><alternatives><tex-math id="M29">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym} 
				\usepackage{amsfonts} 
				\usepackage{amssymb} 
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \mathrm{Highest}\ \mathrm{IW}\ \mathrm{in}\ \mathrm{kg}\ \left(\mathrm{HIW}\right)=25\ast {\left(\mathrm{Height}\ \mathrm{in}\ \mathrm{m}\right)}^2 $$\end{document}</tex-math><mml:math id="M30" display="block"><mml:mtext>Highest</mml:mtext><mml:mspace width="0.25em"/><mml:mi>IW</mml:mi><mml:mspace width="0.25em"/><mml:mtext>in</mml:mtext><mml:mspace width="0.25em"/><mml:mi>kg</mml:mi><mml:mspace width="0.25em"/><mml:mfenced close=")" open="("><mml:mi>HIW</mml:mi></mml:mfenced><mml:mo>=</mml:mo><mml:mn>25</mml:mn><mml:mo>∗</mml:mo><mml:msup><mml:mfenced close=")" open="("><mml:mrow><mml:mtext>Height in</mml:mtext><mml:mspace width="0.25em"/><mml:mi mathvariant="normal">m</mml:mi></mml:mrow></mml:mfenced><mml:mn>2</mml:mn></mml:msup><mml:mspace width="0.25em"/></mml:math><graphic xlink:href="12911_2019_806_Article_Equ15.gif" position="anchor"/></alternatives></disp-formula></p>
          <p id="Par121">SWRL rules are tailored to calculate previous equations. For example, Rule 12 calculates LIW and HIW weight values.<graphic position="anchor" xlink:href="12911_2019_806_Figaa_HTML" id="MO34"/></p>
          <p id="Par122"><italic>Fourth</italic>, by comparing the IW range with the current weight (W), we determine how many calories the patient needs in order to maintain, gain, or lose. In addition, we determine the carePlan’s weight goal (WG). If W ∈ [LIW, HIW], patient has normal weight. In this case, the patient has to maintain his/her weight, and the WG should equal W. If W &lt; LIW, the patient is underweight; he/she needs to gain weight of at least LIW − W kg. To gain this weight, the patient needs extra (LIW − W) ∗ 7700 calories. The WG should be at least W + (LIW − W) kg. If W &gt; HIW, the patient is overweight or obese; he/she needs to lose weight of <italic>W</italic> − HIW kg. To lose this weight, patient needs to reduce calories by (W − HIW) ∗ 7700, or he/she will have to depend on the exercise plan. In this case, WG is at most W − (HIW − W) kg. We must define the period in days (d) required to lose or gain weight of (OW) and then determine the number of calories to reduce or add per day with (OW ∗ 7700)/d. The number of calories per day (CpD) is calculated as follows. CpD = MC, and if W ∈ [LIW, HIW]; CpD = MC + (OW ∗ 7700)/d, if W &lt; LIW; and CpD = MC − (OW ∗ 7700)/d, if W &gt; HIW. The grams of carbs are equal to CpD/4, which are distributed in meals at 30% for breakfast, 35% for lunch, and 35% for dinner. For example, Rule 13 determines the weight goal and the total daily calories for a patient who is of overweight. In addition, it codes the results using SCT and UCUM.<graphic position="anchor" xlink:href="12911_2019_806_Figab_HTML" id="MO35"/></p>
          <p id="Par123"><italic>Fifth</italic>, we determine the number of meals (i.e. three meals for this version of FASTO), the number of calories for each meal, and the types of food that are allowed and forbidden. This step depends mainly on the patient’s preferences, on WG, and on current medications and complications. According to the selected regimen, the patient may or may not be able to change the meal carbs, as will be shown next.</p>
          <p id="Par124">The nutritionOrder class supports general knowledge about diet objects, including the diet’s <italic>patient</italic>, <italic>dateTime</italic>, <italic>encounter</italic>, <italic>allergies</italic>, <italic>preferred and excluded foods</italic>, <italic>nutrients</italic>, etc. (see Fig. <xref rid="Fig5" ref-type="fig">5</xref>). However, we have to specifically determine each meal’s carbs and calories to be able to perform real-time monitoring. As a result, we extend the nutritionOrder resource to incorporate meal knowledge.<graphic position="anchor" xlink:href="12911_2019_806_Figac_HTML" id="MO36"/></p>
          <p id="Par125">We add to nutritionOrder the object properties of <italic>NutritionOrder.meal</italic> and <italic>NutritionOrder.dailyCalories</italic> to define the order’s meal and the total daily calories, respectively. Every order is linked to a single meal. As a result, we connect a meal class to the nutritionOrder class, which is critical for insulin, diet, and exercise management. In this version of FASTO, we concentrate on whole calories and carbs per meals. The ontology defines the recommended foods, but it does not define specific foods and specific quantities. Please note, the required knowledge to implement specific foods is defined in FASTO, but the required SWRL was not added. For example, Rule 14 determines forbidden foods based on the patient’s current medications.<graphic position="anchor" xlink:href="12911_2019_806_Figad_HTML" id="MO37"/></p>
          <p id="Par126"><bold><italic>Exercise plan definition</italic></bold> The exercise plan is a vital component of T1D management. Exercises improve insulin sensation. As a result, the combination of regular exercise with diet is critical for a successful care plan in order to prevent cardiovascular diseases and maintain normal BG levels. This plan defines the type of activities suitable for the patient, their timing and intensity, and their periods to avoid hypoglycemia. Patients on the DF regimen are not allowed to change their ALs as defined according to their lifestyles. On the other hand, patients on IIT can change exercises, and in real-time monitoring, FASTO adjusts the carb grams and insulin dosages accordingly. In this step, we define only the basic exercise sub-plan for both IIT and DF regimens, as shown in Fig. <xref rid="Fig7" ref-type="fig">7</xref> (c). We extend FHIR resources by adding the exercisePlan class based on the <ext-link ext-link-type="uri" xlink:href="http://schema.org">Schema.org</ext-link> (<ext-link ext-link-type="uri" xlink:href="https://schema.org"><italic>https://schema.org</italic></ext-link>) standard. To define the patient’s exercise sub-plan, we connect the exercisePlan class to the carePlanActivity class by using its <italic>reference</italic> object property.<graphic position="anchor" xlink:href="12911_2019_806_Figae_HTML" id="MO38"/></p>
          <p id="Par127">This design supports the assignment of many exercise components to the same exercise plan, and each component has its own <italic>frequency</italic>, <italic>intensity</italic>, <italic>repetition</italic>, <italic>exercises</italic>, and <italic>duration</italic>.<graphic position="anchor" xlink:href="12911_2019_806_Figaf_HTML" id="MO39"/></p>
          <p id="Par128">In addition, each exercise has its own properties, including <italic>contradictions</italic>, <italic>code</italic>, <italic>metabolic equivalent of task (MET) value</italic>, <italic>total weekly duration</italic>, etc.</p>
          <p>
            <graphic position="anchor" xlink:href="12911_2019_806_Figag_HTML" id="MO40"/>
          </p>
          <p id="Par129">Please note, unplanned exercises and their associated changing procedures in insulin dosages and carb grams are handled in the real-time monitoring phase. <italic>First</italic>, we determine the patients who are forbidden from doing exercises according to their current conditions. For example, a pregnant woman is forbidden from exercises if she is [<xref ref-type="bibr" rid="CR1">1</xref>] extremely underweight (BMI &lt; 12 kg/m<sup>2</sup>), [<xref ref-type="bibr" rid="CR2">2</xref>] has <italic>hypertension (</italic>e.g. <italic>preeclampsia)</italic>, <italic>morbid obesity</italic>, <italic>placenta Previa</italic>, <italic>fetal anemia</italic>, or <italic>chronic bronchitis</italic>. Rule 15 identifies patients with <italic>hypertension</italic>, <italic>dyslipidemia</italic>, <italic>preproliferative retinopathy</italic>, <italic>nephropathy</italic>, <italic>cigarette smoking</italic>, and <italic>age &gt; 30</italic> as forbidden from doing exercises.<graphic position="anchor" xlink:href="12911_2019_806_Figah_HTML" id="MO41"/></p>
          <p id="Par130"><italic>Second</italic>, according to the previous step, we determine the forbidden and recommended exercises according to the patient conditions (e.g. complications and pregnancy) and preferences. For example, Rule 16 collects the exercises not allowed for a patient according to his/her diseases. Rule 17 determines the list of recommended exercises for patients if they are preferred and not forbidden. For example, if a patient has <italic>foot ulcers</italic>, then he/she must avoid <italic>jogging</italic>; a patient with <italic>cataracts</italic> should avoid <italic>cycling</italic>; a patient has <italic>severe nonproliferative retinopathy</italic> should avoid <italic>jumping</italic>, <italic>jarring</italic>, and <italic>breath-holding</italic> exercises. <italic>Finally</italic>, we define the regular exercise plans based on the selected exercises and patient’s age and conditions.<graphic position="anchor" xlink:href="12911_2019_806_Figai_HTML" id="MO42"/><graphic position="anchor" xlink:href="12911_2019_806_Figaj_HTML" id="MO43"/></p>
          <p id="Par131">For interoperability, each final planned exercise in the exercisePlan class can be mapped to the procedureRequest instance in a straightforward way.</p>
          <p id="Par132"><bold><italic>Education plans definition</italic></bold> Education is a crucial ongoing process to improve the patient’s decision-making ability, self-monitoring behaviors, problem solving ability, and active collaboration with the MH system. The main steps are shown in Fig. <xref rid="Fig7" ref-type="fig">7</xref> (d). The patient could be a child or an elder adult, so a specific family member (i.e. a relative if any) must be assigned as the coordinator for the delivery of training courses. <italic>First</italic>, according to the patient’s age, language, and education level, a suitable learning style (i.e. reading, visual, auditory, games, or case studies) is selected. For example, Rule 18 states that a visual learning style (e.g. video, images, etc.), and reading are suitable for highly educated adults.<graphic position="anchor" xlink:href="12911_2019_806_Figak_HTML" id="MO44"/></p>
          <p id="Par133"><italic>Second</italic>, the learning topics for the patient depend on his/her current conditions, including currently taken medications, complications, and insulin-monitoring history. The most common learning topics include <italic>insulin</italic>, <italic>medications</italic>, <italic>diet</italic>, <italic>monitoring</italic>, <italic>emergency</italic>, <italic>exercise</italic>, and <italic>complications</italic>. For example, Rule 19 asserts that if the patient is on IIT then he/she must take courses in glucose monitoring, insulin management, and diet management.<graphic position="anchor" xlink:href="12911_2019_806_Figal_HTML" id="MO45"/></p>
          <p id="Par134"><italic>Third</italic>, each learning topic has many associated courses. For example, the insulin topic needs many courses, including type 1 diabetes mellitus, what insulin is and its types, insulin regimens, ways to inject, dosing, storage, adverse effects, allergies, and contradictions. The medication topic needs courses in the administration, dosages, adverse effects, and contradictions. The diet topic requires courses in weight loss, gain, and maintain; nutrition and their carbs; and carb counting. The monitoring topic has courses in BG pattern management, blood pressure monitoring, weight monitoring, lipid monitoring, and for calculating ISF and ICR. The emergency topic has courses in hypo/hyperglycemia symptoms and ways for their management. The complications topic has many courses, depending on the current complications of the patient. For each complication, a course is required to describe what it is, ways to manage its medications, and its contradictions. Finally, the exercise topic has courses for selecting sports and calculating the needed calories.</p>
          <p id="Par135">FASTO defines a set of courses for each topic and selects a customized format for the patient’s courses according to his/her defined learning style and learning topics. For example, Rule 20 assigns a set of courses for patients having insulin topic and who prefer reading style. In this version of FASTO, we manually tailored a set of courses for the proposed styles and topics. In the future, we will link machine-learning techniques to select appropriate courses and customize these courses automatically.<graphic position="anchor" xlink:href="12911_2019_806_Figam_HTML" id="MO46"/></p>
          <p id="Par136"><italic>Finally</italic>, each course is mapped to a procedureRequest instance and sent to the patient’s mobile device (Rule 21).<graphic position="anchor" xlink:href="12911_2019_806_Figan_HTML" id="MO47"/></p>
        </sec>
        <sec id="FPar62">
          <title>Real time plan adjustment</title>
          <p id="Par137">Now, we concentrate on patients following the IIT regimen in order to adjust their insulin dosages in real time. Many situations necessitate adjustment in basal and bolus insulin dosages, including carb intake per meal, pre-meal glucose level, anticipated physical activities, weight changes, newly taken drugs, fasting blood glucose, and new complications (including surgeries and infections). Patients on IIT measure BG at least four times daily (e.g. before meals, at bedtime, prior to exercise, when suspecting low blood glucose, after hypoglycemia, and prior to driving). These sensor values are used to adjust the bolus insulin dosages. This adjustment is based on the two evaluation factors of ISF (i.e. correction factors) measured in millimoles per liter per unit (mmol/L/U) or milligrams per deciliter per unit (mg/dl/U) and ICR measured in carbs/U [<xref ref-type="bibr" rid="CR55">55</xref>]. The pre-meal and bedtime goals are used to manage BG in real time. On the other hand, temporal abstraction of collected sensor data is used to study the behavior of these observations and determine patterns of glucose management (e.g., weight increases, high glucose after every lunch, hypoglycemia every night, etc.). These patterns are used to adjust basal insulin dosages as follows.</p>
          <p id="Par138"><italic>First</italic>, we calculate the patient’s ISF. The ISF is the number of BG points that are reduced by one unit of bolus insulin. It depends on the UoM for BG. If BG is measured in <italic>mg/dl</italic> then we use the <italic>1800 rule</italic> (i.e. f = 1800 in Eq. <xref rid="Equ16" ref-type="">16</xref>), and if BG is measured in <italic>mmol/L</italic> then we use the <italic>100 rule</italic> (i.e. f = 100 in Eq. <xref rid="Equ16" ref-type="">16</xref>).<disp-formula id="Equ16"><label>16</label><alternatives><tex-math id="M31">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym} 
				\usepackage{amsfonts} 
				\usepackage{amssymb} 
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \mathrm{ISF}=\frac{\mathrm{f}}{\mathrm{TDD}} $$\end{document}</tex-math><mml:math id="M32" display="block"><mml:mi>ISF</mml:mi><mml:mo>=</mml:mo><mml:mfrac><mml:mi mathvariant="normal">f</mml:mi><mml:mi>TDD</mml:mi></mml:mfrac><mml:mspace width="0.25em"/></mml:math><graphic xlink:href="12911_2019_806_Article_Equ16.gif" position="anchor"/></alternatives></disp-formula></p>
          <p id="Par139">The ISF is used to adjust the bolus regimen based on the planned range for the target per-meal BG. For example, if the patient has a pre-meal BG goal of [100–150] mg/dl and ISF = 50, then based on his/her current BG level, the corrections to bolus doses can be described as shown in Table <xref rid="Tab3" ref-type="table">3</xref>.<table-wrap id="Tab3"><label>Table 3</label><caption><p>The role of ISF in the adjustment of meals’ bolus insulin dosage</p></caption><table frame="hsides" rules="groups"><thead><tr><th>Pre-meal blood glucose</th><th>Before breakfast</th><th>Before lunch</th><th>Before dinner</th></tr></thead><tbody><tr><td>&lt;  70</td><td>−1</td><td>-1</td><td>-1</td></tr><tr><td>100–150</td><td>Planned dose / carbs counting</td><td>Planned dose / carbs counting</td><td>Planned dose / carbs counting</td></tr><tr><td>150–200</td><td>+ 1</td><td>+ 1</td><td>+ 1</td></tr><tr><td>200–250</td><td>+ 2</td><td>+ 2</td><td>+ 2</td></tr><tr><td>250–300</td><td>+ 3</td><td>+ 3</td><td>+ 3</td></tr><tr><td>&gt;  300</td><td>+ 4</td><td>+ 4</td><td>+ 4</td></tr></tbody></table></table-wrap></p>
          <p id="Par140">Table <xref rid="Tab3" ref-type="table">3</xref> assumes that a patient consumes the same amount of carbs for every meal, but this is not realistic. As a result, ICR is used to manage the dynamic number of grams for every meal. Using this approach, we replace the planned dose in Table <xref rid="Tab3" ref-type="table">3</xref> by the dosage calculated in real time using ICR and the meal’s carb grams. <italic>Second</italic>, according to the TDD, a patient’s the ICR is calculated using the <italic>500 rule</italic>, as shown in Eq. <xref rid="Equ17" ref-type="">17</xref>.<disp-formula id="Equ17"><label>17</label><alternatives><tex-math id="M33">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym} 
				\usepackage{amsfonts} 
				\usepackage{amssymb} 
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \mathrm{ICR}=\frac{500}{\mathrm{TDD}} $$\end{document}</tex-math><mml:math id="M34" display="block"><mml:mi>ICR</mml:mi><mml:mo>=</mml:mo><mml:mfrac><mml:mn>500</mml:mn><mml:mi>TDD</mml:mi></mml:mfrac><mml:mspace width="0.25em"/></mml:math><graphic xlink:href="12911_2019_806_Article_Equ17.gif" position="anchor"/></alternatives></disp-formula></p>
          <p id="Par141">ICR is the number of carb grams that will be covered by one unit of bolus insulin. As a special case for children, if TDD &lt; 10 U, then we use the <italic>300 rule</italic> (i.e. ICR = 300/TDD). For example, Rule 22 determines the ICR for a child with TDD &lt; 10 U.<graphic position="anchor" xlink:href="12911_2019_806_Figao_HTML" id="MO48"/></p>
          <p id="Par142"><italic>Third</italic>, we put them all together to provide patients with real-time advice. Real-time advice can be “<italic>increase or decrease this meal bolus insulin dose by n units</italic>,” “<italic>eat m extra grams of carbs</italic>,” etc. FASTO tries to balance the basal insulin dosage with meal carbs and exercises. FASTO has all the needed semantics to implement this knowledge. We build a set of robust SWRL rules to make the most suitable decisions. Real-time monitoring has two branches of mealtime bolus insulin correction and pattern management of basal and bolus insulin dose adjustments.</p>
          <p id="Par143">For a specific meal, if FASTO only received the current BG sensor observation of (CBG) in mg/dl, and another observation for the needed-to-eat meal carbs (MC) in grams, then FASTO uses these two values and calculates the meal’s bolus insulin dosage as follows. Please note that the patient is not planning to do any exercises. For simplicity, we discuss the required calculations with an example. If patient X has TDD = 50 U, and is planning to take a meal with MC = 60 g of carbs, CBG = 210 mg/dl, and pre-meal BG (PBG) goal is 120 mg/dl. According to Eq. <xref rid="Equ16" ref-type="">16</xref> and Eq. <xref rid="Equ17" ref-type="">17</xref>, ICR = 500/50 = 10 carbs/U, and ISF = 1800/50 = 36 mg/dl/U.<list list-type="order"><list-item><p id="Par144">Calculate the difference in BG as DBG = CBG – PBG. If the current BG is the same as the target BG, there will be no effect from this BG observation. Regarding patient X, DBG = 210 − 120 = 90 mg/dl.</p></list-item><list-item><p id="Par145">Based on ISF, calculate the insulin units needed to correct BG level by using N1 = DBG/ISF. Regarding patient X, N1 = 90/36 = 2.5 U.</p></list-item><list-item><p id="Par146">Based on ICR, calculate the insulin units needed to cover MC carbs by using N2 = MC/ICR. Regarding patient X, N2 = 60/10 = 6 U.</p></list-item><list-item><p id="Par147">Calculate the meal bolus insulin dose using BD = N1 + N2. Regarding patient X, BD = 2.5 + 6.0 = 8.5 U.</p></list-item><list-item><p id="Par148">If BD is positive, then the patient needs to take BD units of insulin. If BD is zero, then this bolus dosage must be skipped. If BD is negative, then the patient must take some more carbs to increase the BG level. Regarding patient X, the bolus dosage needed to balance BG for this meal is 8.5 U.</p></list-item></list></p>
          <p id="Par149">All of the above calculations are done by Rule 23.<graphic position="anchor" xlink:href="12911_2019_806_Figap_HTML" id="MO49"/></p>
          <p id="Par150">FASTO could receive three observations for CBG, meal carbs for MC, and exercise. In this case, the patient is expected to exercise within 3 hours after taking the meal. If CBG &gt; 250 mg/dl, CBG &lt; 80 mg/dl, or the patient has <italic>diabetic ketoacidosis</italic>, then the patient is forbidden from exercising. Exercise is represented by its standard compcode [<xref ref-type="bibr" rid="CR62">62</xref>] and its duration in hours (h). The compcode associates an activity with its intensity and MET. We combine MET, patient weight (kg), and duration (h) to get the burned calories (BC) for this activity (see Eq. <xref rid="Equ18" ref-type="">18</xref>).<disp-formula id="Equ18"><label>18</label><alternatives><tex-math id="M35">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym} 
				\usepackage{amsfonts} 
				\usepackage{amssymb} 
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \mathrm{BC}=\mathrm{MET}\ast \mathrm{weight}\ \left(\mathrm{kg}\right)\ast \mathrm{duration}\ \left(\mathrm{h}\right) $$\end{document}</tex-math><mml:math id="M36" display="block"><mml:mi>BC</mml:mi><mml:mo>=</mml:mo><mml:mi>MET</mml:mi><mml:mo>∗</mml:mo><mml:mtext>weight</mml:mtext><mml:mspace width="0.25em"/><mml:mfenced close=")" open="("><mml:mi>kg</mml:mi></mml:mfenced><mml:mo>∗</mml:mo><mml:mtext>duration</mml:mtext><mml:mspace width="0.25em"/><mml:mfenced close=")" open="("><mml:mi mathvariant="normal">h</mml:mi></mml:mfenced><mml:mspace width="0.25em"/></mml:math><graphic xlink:href="12911_2019_806_Article_Equ18.gif" position="anchor"/></alternatives></disp-formula></p>
          <p id="Par151">The BC value is used to calculate the carb grams to be increased (BC/4). As the patient is already at the mealtime, the BC value is used to determine the need-to-reduce insulin units (BC/4)/ICR. As a result, the bolus BD is calculated as shown in Eq. <xref rid="Equ19" ref-type="">19</xref>. For space restrictions, we will not give examples of SWRL rules.<disp-formula id="Equ19"><label>19</label><alternatives><tex-math id="M37">\documentclass[12pt]{minimal}
				\usepackage{amsmath}
				\usepackage{wasysym} 
				\usepackage{amsfonts} 
				\usepackage{amssymb} 
				\usepackage{amsbsy}
				\usepackage{mathrsfs}
				\usepackage{upgreek}
				\setlength{\oddsidemargin}{-69pt}
				\begin{document}$$ \mathrm{BD}=\mathrm{N}1+\mathrm{N}2-\left(\left(\mathrm{BC}/4\right)/\mathrm{ICR}\right) $$\end{document}</tex-math><mml:math id="M38" display="block"><mml:mi>BD</mml:mi><mml:mo>=</mml:mo><mml:mi mathvariant="normal">N</mml:mi><mml:mn>1</mml:mn><mml:mo>+</mml:mo><mml:mi mathvariant="normal">N</mml:mi><mml:mn>2</mml:mn><mml:mo>-</mml:mo><mml:mfenced close=")" open="("><mml:mrow><mml:mfenced close=")" open="("><mml:mrow><mml:mi>BC</mml:mi><mml:mo>/</mml:mo><mml:mn>4</mml:mn></mml:mrow></mml:mfenced><mml:mo>/</mml:mo><mml:mi>ICR</mml:mi></mml:mrow></mml:mfenced><mml:mspace width="0.25em"/></mml:math><graphic xlink:href="12911_2019_806_Article_Equ19.gif" position="anchor"/></alternatives></disp-formula></p>
          <p id="Par152">If exercising is not within 3 hours of a meal, FASTO will receive the CBG and exercise only. The decision depends on the patient’s current condition, i.e. underweight, overweight, or obese. If the patient is underweight or at normal weight, then equivalent carb grams (BC/4) is needed, and its insulin units, (BC/4)/ICR, is added to N1. If he/she is overweight or obese, then the equivalent insulin units are only subtracted from N1.</p>
          <p id="Par153">Basal insulin changes according to the pattern management process. It is more suitable to apply some machine-learning algorithms to the cloud-based EHR data to discover these patterns. However, we can do it using FASTO semantics. To discover patterns in the BG or weight measurements, we must use data from at least three consecutive days, and the compared values must be for the same time of day. The dosage changes must be between 10% to 20% of the planned dosage. Table <xref rid="Tab4" ref-type="table">4</xref> illustrates 3 days of measurements for the BG of a patient with a goal BG of 70–140 mg/dl. These measurements show that all values are within the goal range except the before-breakfast values. As a result, bedtime basal insulin dose must be increased by at least 10%. Please note that the before dinner BG on May 6 was outside of the goal’s range, but we cannot make any decision based on this single value.<table-wrap id="Tab4"><label>Table 4</label><caption><p>Three consecutive days of BG measurements</p></caption><table frame="hsides" rules="groups"><thead><tr><th>BG</th><th rowspan="2">Before breakfast</th><th rowspan="2">Before lunch</th><th rowspan="2">Before dinner</th><th rowspan="2">Before bedtime</th></tr><tr><th>Date</th></tr></thead><tbody><tr><td>May 5</td><td>320</td><td>104</td><td>96</td><td>86</td></tr><tr><td>May 6</td><td>296</td><td>123</td><td>300</td><td>136</td></tr><tr><td>May 7</td><td>341</td><td>197</td><td>92</td><td>111</td></tr></tbody></table></table-wrap></p>
          <p id="Par154">The algorithm used to manage the discovered patterns is as follows. High/low before-lunch BG means increase/decrease the before-breakfast bolus dose. High/low before-dinner BG means increase/decrease the before-lunch bolus dose. High/low before-bedtime BG means increase/decrease the before-dinner bolus dose. High/low before-breakfast BG means increase/decrease the bedtime-basal dose.</p>
        </sec>
      </sec>
    </sec>
    <sec id="Sec23">
      <title>Cloud-based EHR database</title>
      <p id="Par155">The patient historical data from distributed EHRs and real-time observations from a WBAN are collected, integrated into, managed, and queried from a cloud-based EHR database in standardized form based on HL7 FHIR. It is convenient to use a NoSQL database like the MongoDB document database because a JSON document is equal to a database document, and less mapping is required. However, RDBs are more popular and more stable, and most of the current EHR databases are in RDB format. In addition, HL7 provides a standard RDB implementation (i.e. FHIRBase: <ext-link ext-link-type="uri" xlink:href="http://fhirbase.github.io"><italic>http://fhirbase.github.io</italic></ext-link><italic>)</italic> for FHIR resources. Therefore, it is inevitable to use a relational database to store data objects that are required, in order for all system modules to interoperate. We implemented and customized an RDB based on FHIR schema. Different from FHIRBase, this database is designed based on mapping FHIR resource to RDB table and resource elements to attributes, relations, or other tables. An FHIR resource can be mapped to multiple tables to generate a normalized RDB. The database was designed according to the previously selected resources and their designed profiles, as shown in Table <xref rid="Tab1" ref-type="table">1</xref>. Many FHIR elements (e.g. imaging elements) have been ignored from the selected resources to concentrate on our main target. Figure <xref rid="Fig8" ref-type="fig">8</xref> shows a fragment of the designed relational data model. Attribute data types are modeled in a high-level way to preserve the simplicity of the diagram. To populate this RDB, a cloud-based FHIR server sends RESTful requests to backend systems and to mobile devices to collect patient data, both of which reply by the required FHIR JSON resources. These JSON documents are mapped to their equivalent RDB elements in a straightforward way. Next, the database records are used to create FASTO’s ABOX individuals and assertions. In addition, this database stores the patient management history from the FASTO ontology, including patients’ previous TPs. The conversion among sensor raw data, EHR database records, and ontology instances is managed by the standard HL7 FHIR data model and standard terminologies (e.g. SCT, LOINC, etc.).<fig id="Fig8"><label>Fig. 8</label><caption><p>Cloud EHR database based on FHIR resources. This is a part of the created database from FHIR standard resource. This database is stored on the cloud to collect all of the patient profile data in a standard way</p></caption><graphic xlink:href="12911_2019_806_Fig8_HTML" id="MO50"/></fig></p>
    </sec>
  </sec>
  <sec id="Sec24">
    <title>Backend EHR systems module</title>
    <p id="Par156">To support interoperability and the seamless integration of collected data from sensors and EHR backend databases, we provide a common interface between sensors, aggregators (mobile phones), CDSSs, cloud-based storage environments, and backend hospital EHR systems. This interface is based on FHIR adapters, which transform among FHIR resources and internal data structures of all system modules. As shown in Fig. <xref rid="Fig9" ref-type="fig">9</xref>, RESTful FHIR servers need to be implemented in the cloud module and EHR systems. These servers are based on the DSTU3. The servers are responsible for mapping between local databases and RESTful queries. In addition, they transform sensor and EHR data to FHIR resources, which can be transmitted as HL7 JSON messages between system components. The collected messages are mapped to cloud-based EHR database records, which are used to instantiate the FASTO ontology. All transformation processes are implemented via FHIR transform engine (<ext-link ext-link-type="uri" xlink:href="http://www.openmapsw.com/products/FTE.htm"><italic>http://www.openmapsw.com/products/FTE.htm</italic></ext-link>). This engine does not make a hard structure-to-structure mapping, but maps both database structure and FHIR resources into one common logical model, i.e. the FHIR resource class model. The FHIR transform engine and FHIR servers are integrated based on the standard HL7 application-programming interface (HAPI: <ext-link ext-link-type="uri" xlink:href="http://hapifhir.io"><italic>http://hapifhir.io</italic></ext-link>) v 3.4.0. All Java implementations that support the proposed FHIR-based framework can be found in the FHIR official site (<ext-link ext-link-type="uri" xlink:href="http://hapifhir.io/index.html"><italic>http://hapifhir.io/index.html</italic></ext-link>).<fig id="Fig9"><label>Fig. 9</label><caption><p>Data transformation process in the proposed framework. These are the whole connections in the system among patient, backend hospitals, and the cloud based CDSS. The connections are based on FHIR standard adapters</p></caption><graphic xlink:href="12911_2019_806_Fig9_HTML" id="MO51"/></fig></p>
    <p id="Par157">To collect a patient’s historical profile, the cloud-based FHIR server sends HTTP-based RESTful search requests to the distributed hospital EHR systems to collect the patient history based on the patient’s medical ID. Each backend system has an implemented FHIR server, which translates the search string of the request into its internal search command (e.g. a SQL SELECT query), and runs this query. Query results are converted to FHIR’s JSON resources and are sent as HTTP response messages to the cloud. The cloud system translates the message into an INSERT SQL statement to manage the patient’s historical data. The structural and semantic mapping between FHIR resources and RDBs is handled by an object relational mapping (ORM) API. Oracle’s Java persistence API (JPA) standard with Hibernate is more suitable for implementing these mappings. This implementation is expected to handle interoperability challenges in an efficient and sufficient way. The data models of PHRs and backend EHRs are transparent to the CDSS, thanks to the FHIR servers implemented in these modules. This design supports extensibility of an EHR ecosystem without affecting the currently running modules. In our proposed system, we map FHIR resource instance elements to RDB tables and attributes, and RDB tables and attributes to FASTO instances and properties.</p>
  </sec>
  <sec id="Sec25">
    <title>Results</title>
    <p id="Par158">FASTO reuses the conceptual model provided by the BFO foundational ontology. As a result, it inherits all the modeling properties and expressivity characteristics of the upper-level model. The expressivity of FASTO falls under the SHOIN (D) description logic. The FASTO ontology was designed with extensibility in mind. Each phase of the development process is evaluated separately to measure its accuracy and completeness. The ontology can be adapted to other domains, and it can be extended by adding new knowledge for T1D management. The ontology evaluation comprises two stages: evaluation of intrinsic properties (i.e. a technical evaluation) and evaluation of its actual use (i.e. an application evaluation). In this section, we evaluate the FASTO semantic model by these stages.</p>
    <sec id="Sec26">
      <title>Ontology verification and metrics</title>
      <p id="Par159">The ontology is implemented using Protégé 5.1 (<ext-link ext-link-type="uri" xlink:href="https://protege.stanford.edu/"><italic>https://protege.stanford.edu/</italic></ext-link>) and rule-based reasoners (e.g. Pellet). The technical evaluation is verification and validation of the ontology, which assesses the consistency, correctness, and completeness of the ontology knowledge. A review of ontology metrics reveals a variety of metrics aiming to assess and qualify an ontology [<xref ref-type="bibr" rid="CR63">63</xref>]. An ontology evaluation has many different qualitative and quantitative criteria, which help to uncover errors in implementation and inefficiencies in the modeling. However, no evaluation techniques, alone or in combination, can guarantee high-quality ontologies. Every evaluation methodology partially addresses specific issues.</p>
      <p id="Par160">An ontology-level evaluation by Pellet and HermiT reasoners reported valid ontology consistency and ontology taxonomy. Every rule in the list of SWRL rules was also validated, and the list as a whole is homogeneous and has no conflicts or redundancies. As a result, we assert that the proposed FASTO ontology functions in a proper way. To verify the FASTO ontology, we selected three evaluation methods: (a) an automated ontology evaluation tool named OntOlogy Pitfall Scanner (OOPS!) [<xref ref-type="bibr" rid="CR64">64</xref>], (b) Protégé metrics, and (c) a manual evaluation. OOPS! is a web application that helps to detect some of the most common ontology development pitfalls such as cycles between classes in the hierarchy. The results of this evaluation suggested how the ontology could be manually modified to improve its quality. We evaluated FASTO by submitting it to OOPS!, which asserted that the ontology is free of any pitfalls. We used Protégé to collect the following fundamental metrics based on FASTO general structure:<list list-type="bullet"><list-item><p id="Par161"><italic>generic ontology metrics</italic> including the number of classes, properties, annotations, and instances;</p></list-item><list-item><p id="Par162"><italic>concept or class axioms</italic>, including subclass, equivalent, and disjoint axioms;</p></list-item><list-item><p id="Par163"><italic>object property axioms</italic>, including domain and range of properties. In addition, complex axioms regarding the equivalence, inverse, disjointness, functional, transitivity, symmetry, and reflexivity of properties have been collected;</p></list-item><list-item><p id="Par164"><italic>data property axioms</italic>, including domains and ranges properties. Further, similar to object properties, many complex axioms have been collected;</p></list-item><list-item><p id="Par165"><italic>instance axioms</italic>, including class assertions, same individual axioms, and different individual axioms; and</p></list-item><list-item><p id="Par166"><italic>annotation axioms</italic>, including domain and range annotations and annotation assertions.</p></list-item></list></p>
      <p id="Par167">Table <xref rid="Tab5" ref-type="table">5</xref> lists the FASTO ontology non-zero metrics, as provided by the “ontology metrics” view in Protégé. Our ontology is quite rich in classes, properties, axioms, and SWRL rules. This version of FASTO incorporates 9577 classes, 658 object properties, 164 data properties, and 460 individuals. In addition, 140 SWRL rules are added to implement the semantic logic of real-time monitoring and TPs. FASTO is publicly available, and can be freely downloaded from BioPortal (<ext-link ext-link-type="uri" xlink:href="https://bioportal.bioontology.org/ontologies/FASTO"><italic>https://bioportal.bioontology.org/ontologies/FASTO</italic></ext-link>).<table-wrap id="Tab5"><label>Table 5</label><caption><p>FASTO ontology metrics by Protégé</p></caption><table frame="hsides" rules="groups"><thead><tr><th>Metric</th><th>Count</th></tr></thead><tbody><tr><td>Classes</td><td char="." align="char">9577</td></tr><tr><td>Axioms</td><td char="." align="char">60,045</td></tr><tr><td>Logical axioms</td><td char="." align="char">13,637</td></tr><tr><td>Equivalent classes</td><td char="." align="char">7</td></tr><tr><td>Functional object properties</td><td char="." align="char">9</td></tr><tr><td>Inverse object properties</td><td char="." align="char">21</td></tr><tr><td>Data properties</td><td char="." align="char">164</td></tr><tr><td>Data property assertions</td><td char="." align="char">228</td></tr><tr><td>Object property assertions</td><td char="." align="char">341</td></tr><tr><td>Class assertions</td><td char="." align="char">457</td></tr><tr><td>Annotation properties</td><td char="." align="char">127</td></tr><tr><td>Number of SWRL rules</td><td char="." align="char">140</td></tr><tr><td>Individuals</td><td>460</td></tr><tr><td>Annotation assertion</td><td>35,335</td></tr><tr><td>SubClassOf</td><td>10,024</td></tr><tr><td>Object properties</td><td>658</td></tr><tr><td>Object property domain</td><td>627</td></tr><tr><td>Object property range</td><td>628</td></tr><tr><td>SubObjectPropertyOf</td><td>649</td></tr><tr><td>Data property domains</td><td>130</td></tr><tr><td>Data property range</td><td>155</td></tr><tr><td>SubDataPropertyOf</td><td>159</td></tr><tr><td>DisjointClasses axiom</td><td>49</td></tr><tr><td>Description logic expressivity</td><td>SHOIN (D)</td></tr></tbody></table></table-wrap></p>
      <p id="Par168">Manual evaluation by domain experts in medical practice and ontology engineering revealed a rational domain knowledge representation of FASTO. The major results are as follows. <italic>Correctness</italic>: our medical expert and ontology engineers asserted that the usage of classes, properties, axioms, and rules captures and accurately represents essential knowledge of real T1D treatment CDSS. This CPG based knowledge complies with the expertise of physicians. <italic>Completeness</italic>: FASTO is 100% complete regarding the coverage of medical knowledge. It is capable of representing all concepts, relationships, and rules constituting the patient profile, TPs, and real-time monitoring knowledge. In addition, it generates complete and medically acceptable TPs.</p>
      <p id="Par169"><italic>Extensibility</italic>: Based on the conceptual foundation of FHIR and the SSN, the FASTO generic ontology can be instantiated to represent complete diabetes cases. Furthermore, ontology modularization based on BFO offers monotonic extensibility to modify FASTO without violating the validity of the original ontology. <italic>Conciseness</italic>: The review process confirmed that FASTO does not include irrelevant or redundant knowledge. <italic>Organizational fitness</italic>: The ontology considered standards in every covered topic. It depends on the SSN to represent sensor data; it is based on FHIR to represent medical data and data types; it encodes medical data by standard terminologies; it utilizes standard CPGs to extract medical knowledge; and it is based on the BFO top-level ontology. Therefore, it supports the seamless integration of CDSS engines as transparent components in existing EHR ecosystems. It enables knowledge sharing and reuse without considerable reconfiguration of existing EHR systems.</p>
    </sec>
    <sec id="Sec27">
      <title>Comparison with existing ontologies</title>
      <p id="Par170">FASTO was developed to serve as a knowledge base for MH CDSSs. It is the most complete ontology for T1D management. To the best of our knowledge, there is no publicly available medical ontology for a mobile health CDSS that covers the medical domain and handles interoperability. The resulting medical knowledge is medically intuitive, and semantic interoperability is handled from all dimensions using standards (i.e. data models, terminologies, sensor data, upper-level ontologies, and communications). This ontology is more flexible and open, supporting extensions with new semantics. Table <xref rid="Tab6" ref-type="table">6</xref> provides a comparison between FASTO and six diabetes treatment ontologies based on 23 interrelated metrics. We checked if the ontology author has handled every metric or not. We used Yes/No to encode handled/not-handled metric, respectively.<table-wrap id="Tab6"><label>Table 6</label><caption><p>A comparison between DMTO and some existing diabetes treatment ontologies</p></caption><table frame="hsides" rules="groups"><thead><tr><th>Dimension</th><th>FASTO</th><th>DMTO [<xref ref-type="bibr" rid="CR10">10</xref>]</th><th>DKOs [<xref ref-type="bibr" rid="CR67">67</xref>]</th><th>Chen et al. [<xref ref-type="bibr" rid="CR68">68</xref>]</th><th>Chalortham et al. [<xref ref-type="bibr" rid="CR69">69</xref>]</th><th>Zhang et al. [<xref ref-type="bibr" rid="CR70">70</xref>]</th><th>OntoDiabetic [<xref ref-type="bibr" rid="CR71">71</xref>]</th></tr></thead><tbody><tr><td>Purpose</td><td>Treatment</td><td>Treatment</td><td>Treatment</td><td>Treatment</td><td>Treatment</td><td>Treatment</td><td>Treatment</td></tr><tr><td>Type of diabetes</td><td>T1D</td><td>T2D</td><td>NA</td><td>T2D</td><td>T2D</td><td>T2D</td><td>NA</td></tr><tr><td>Available for reuse</td><td>Yes</td><td>Yes</td><td>No</td><td>No</td><td>No</td><td>No</td><td>No</td></tr><tr><td>Based on a unified top-level ontology</td><td>Yes</td><td>Yes</td><td>No</td><td>No</td><td>No</td><td>No</td><td>No</td></tr><tr><td>Encoded using standardized terminology</td><td>Yes</td><td>Yes</td><td>No</td><td>No</td><td>No</td><td>Yes</td><td>No</td></tr><tr><td>Based on OWL 2 and SWRL</td><td>Yes</td><td>Yes</td><td>Yes</td><td>Yes</td><td>Yes</td><td>Yes</td><td>Yes</td></tr><tr><td>Can be utilized in MH environments</td><td>Yes</td><td>No</td><td>No</td><td>No</td><td>No</td><td>No</td><td>No</td></tr><tr><td>Based on an interoperability standard</td><td>Yes</td><td>No</td><td>No</td><td>No</td><td>No</td><td>No</td><td>No</td></tr><tr><td>Decisions based on the whole patient profile</td><td>Yes</td><td>Yes</td><td>Yes</td><td>Only 6 tests entered by user</td><td>No</td><td>Yes</td><td>Yes</td></tr><tr><td>Supports interoperability with EHR distributed systems</td><td>Yes</td><td>No</td><td>No</td><td>No</td><td>No</td><td>No</td><td>No</td></tr><tr><td>Supports real-time patient monitoring based on WBANs</td><td>Yes</td><td>No</td><td>No</td><td>No</td><td>No</td><td>No</td><td>No</td></tr><tr><td>Supports data communication by standards as RESTful API</td><td>Yes</td><td>No</td><td>No</td><td>No</td><td>No</td><td>No</td><td>No</td></tr><tr><td>Handles interoperability with sensor data</td><td>Yes</td><td>No</td><td>No</td><td>No</td><td>No</td><td>No</td><td>No</td></tr><tr><td>Based on standard knowledge (i.e. collected from CPGs)</td><td>Yes</td><td>Yes</td><td>No</td><td>Yes</td><td>No</td><td>Yes</td><td>Yes</td></tr><tr><td>Uses a systematic method for creation</td><td>Yes</td><td>Yes</td><td>No</td><td>No</td><td>Yes</td><td>No</td><td>No</td></tr><tr><td>Delivers complete TPs with drugs, lifestyle, and education</td><td>Yes</td><td>Yes</td><td>No</td><td>No</td><td>No</td><td>Yes</td><td>No</td></tr><tr><td>Models diabetes drugs</td><td>Yes</td><td>Yes</td><td>No</td><td>Yes</td><td>No</td><td>No</td><td>Yes</td></tr><tr><td>Models drugs affecting glucose level</td><td>Yes</td><td>Yes</td><td>No</td><td>No</td><td>No</td><td>No</td><td>No</td></tr><tr><td>Models drug properties</td><td>Yes</td><td>Yes</td><td>No</td><td>Yes</td><td>No</td><td>No</td><td>No</td></tr><tr><td>Models T1D comorbidities</td><td>Yes</td><td>Yes</td><td>Yes</td><td>No</td><td>No</td><td>No</td><td>Yes</td></tr><tr><td>Reuses existing ontologies</td><td>Yes</td><td>Yes</td><td>No</td><td>No</td><td>Yes</td><td>No</td><td>Yes</td></tr><tr><td>Ontology coverage</td><td>Table <xref rid="Tab5" ref-type="table">5</xref></td><td>[<xref ref-type="bibr" rid="CR10">10</xref>]</td><td>NA</td><td>18 drugs +6 rules</td><td>NA</td><td>NA</td><td>NA</td></tr><tr><td>Models temporal semantics</td><td>Yes</td><td>Yes</td><td>No</td><td>Yes</td><td>No</td><td>No</td><td>No</td></tr></tbody></table></table-wrap></p>
      <p id="Par171">As shown in the table, all of the compared ontologies have limited coverage and handle the problem from only narrow viewpoints. FASTO is the most complete of the seven compared ontologies. All other ontologies have serious limitations regarding MH applicability, and interoperability with EHR distributed systems and sensor data. Regarding the ontology coverage metric, FASTO is the most complete ontology in the literature for T1D mobile monitoring. The proposed ontology covers all of these limitations and provides a mature solution that can be applied in an accurate way in existing medical environments.</p>
    </sec>
    <sec id="Sec28">
      <title>Coverage level evaluation</title>
      <p id="Par172">In this section, we present several SPARQL queries to demonstrate the usefulness and richness of FASTO. We evaluated its coverage by using a set of competency questions represented as SPARQL queries. These queries were evaluated by Protégé. FASTO is the richest ontology for T1D. It can represent any patient condition and is able to collect all types of data from either sensors or hospital databases. In addition, all knowledge related to interoperability between CDSS, WBANs, and EHR systems is modeled in a complete and standard way. Due to space restrictions, Table <xref rid="Tab7" ref-type="table">7</xref> shows a very short list of 17 competency questions and their corresponding SPARQL semantic queries. No publicly available ontologies discuss chronic-disease TPs, mobile and real time patient monitoring, and semantic interoperability the way FASTO does. In addition, because it is based on the modularization concept, FASTO is more rich, flexible, and open in order to handle new semantics.<table-wrap id="Tab7"><label>Table 7</label><caption><p>Ontology evaluation using competency questions</p></caption><table frame="hsides" rules="groups"><thead><tr><th>Competency question</th><th>SPARQL query</th><th>Competency question</th><th>SPARQL query</th></tr></thead><tbody><tr><td>Q1. Find all patients who achieved their TP goals.</td><td><italic>SELECT DISTINCT</italic>? <italic>p WHERE {</italic><break/><italic>?p rdf:type fasto:patient;</italic><break/><italic>fasto:hasPatientProfile</italic>? <italic>prof.</italic><break/><italic>?prof fasto:hasCarePlan</italic>? <italic>plan.</italic><break/><italic>?plan fasto:isCurrent “true”^^xsd:Boolean;</italic><break/><italic>fasto:hasGoalAchieved “true”^^xsd:Boolean.</italic><break/><italic>}</italic></td><td>Q2. Who are the patients suffering from a specific disease with SNOMED CT code of X.</td><td><italic>SELECT DISTINCT</italic>? <italic>p WHERE {</italic><break/><italic>?p rdf:type fasto:patient;</italic><break/><italic>fasto:hasPatientProfile</italic>? <italic>prof.</italic><break/><italic>?prof fasto:hasComplication</italic>? <italic>cond.</italic><break/><italic>?cond fhir:Condition.code</italic>? <italic>code.</italic><break/><italic>?code fhir:Coding</italic>? <italic>coding.</italic><break/><italic>?coding fhir:Coding.code X;</italic><break/><italic>fhir:Coding.system “SNOMEDCT”.</italic><break/><italic>}</italic></td></tr><tr><td>Q3. What is the current pre-meal BG target for a patient with identifier X.</td><td><italic>SELECT</italic>? <italic>code,</italic>? <italic>system,</italic>? <italic>value WHERE {</italic><break/><italic>?p rdf:type fasto:patient;</italic><break/><italic>fhir:Resource.ID</italic>? <italic>id.</italic><break/><italic>?id fhir:Identifier.value X.</italic><break/><italic>?p fasto:hasPatientProfile</italic>? <italic>prof.</italic><break/><italic>?prof fasto:hasCarePlan</italic>? <italic>plan.</italic><break/><italic>?plan fasto:isCurrent “true”^^xsd:Boolean;</italic><break/><italic>fhir:DailyPerMealGlucoseLevel</italic>? <italic>goal.</italic><break/><italic>?goal fhir:Goal.target</italic>? <italic>target.</italic><break/><italic>?target fhir:Goal.target.detailQuantity</italic>? <italic>quant.</italic><break/><italic>?quant fhir:Quantity.code</italic>? <italic>code;</italic><break/><italic>fhir: Quantity.value</italic>? <italic>value;</italic><break/><italic>fhir: Quantity.system</italic>? <italic>system.</italic><break/><italic>}</italic></td><td>Q4. What is the current exercise plan for patient with identifier X.</td><td><italic>SELECT DISTINCT</italic>? <italic>exe WHERE {</italic><break/><italic>?p rdf:type fasto:patient;</italic><break/><italic>fhir:Resource.ID</italic>? <italic>id.</italic><break/><italic>?id fhir:Identifier.value X.</italic><break/><italic>?p fasto:hasPatientProfile</italic>? <italic>prof.</italic><break/><italic>?prof fasto:hasCarePlan</italic>? <italic>plan.</italic><break/><italic>?plan fasto:isCurrent “true”^^xsd:Boolean;</italic><break/><italic>fhir:CarePlan.activity</italic>? <italic>act.</italic><break/><italic>?act fhir:CarePlan.activity.reference</italic>? <italic>exe.</italic><break/><italic>?exe rdf:type fasto:exercisePlan.</italic><break/><italic>}</italic></td></tr><tr><td>Q5. Find all patients that are prevented from doing exercise with the compendium code of X.</td><td><italic>SELECT DISTINCT</italic>? <italic>p WHERE {</italic><break/><italic>?p rdf:type fasto:patient;</italic><break/><italic>fasto:hasPatientProfile</italic>? <italic>prof.</italic><break/><italic>?prof fasto:hasComplication</italic>? <italic>cond.</italic><break/><italic>?cond fhir:Condition.disease</italic>? <italic>d.</italic><break/><italic>?d fasto:diseaseContradictWithExercise</italic>? <italic>exe.</italic><break/><italic>?exe fasto:hasCompendiumCode X.</italic><break/><italic>}</italic></td><td>Q6. What is the insulin regimen defined for patient with identifier X.</td><td><italic>SELECT</italic>? <italic>ir WHERE {</italic><break/><italic>?p rdf:type fasto:patient;</italic><break/><italic>fhir:Resource.ID</italic>? <italic>id.</italic><break/><italic>?id fhir:Identifier.value X.</italic><break/><italic>?p fasto:hasPatientProfile</italic>? <italic>prof.</italic><break/><italic>?prof fasto:hasCarePlan</italic>? <italic>plan.</italic><break/><italic>?plan fasto:isCurrent “true”^^xsd:Boolean;</italic><break/><italic>fasto:hasInsulinRegimen</italic>? <italic>ir.</italic><break/><italic>}</italic></td></tr><tr><td>Q7. What are the current education materials assigned to the patient X.</td><td><italic>SELECT</italic>? <italic>rec,</italic>? <italic>topic,</italic>? <italic>course WHERE {</italic><break/><italic>?p rdf:type fasto:patient;</italic><break/><italic>fhir:Resource.ID</italic>? <italic>id.</italic><break/><italic>?id fhir:Identifier.value X.</italic><break/><italic>?p fasto:hasEducationRecord</italic>? <italic>rec.</italic><break/><italic>?rec fasto:hasLearningCourse</italic>? <italic>course;</italic><break/><italic>fasto:hasLearningTopic</italic>? <italic>topic.</italic><break/><italic>}</italic></td><td>Q8. Find intensive insulin regimens, which are based on the long acting insulin with SNOMED CT code of X.<break/>FASTO supports any standard coding terminology such as SNOMED CT, LOINC, RxNorm, ICD, etc. These standards support interoperability and improve the semantic meaning of medical terms.</td><td><italic>SELECT</italic>? <italic>ir WHERE {</italic><break/><italic>?ir rdf:type fasto:insulinRegimen;</italic><break/><italic>fasto:hasBasalInsulin</italic>? <italic>ba.</italic><break/><italic>?ba fhir:Medication.code</italic>? <italic>code;</italic><break/><italic>?code fhir:Coding</italic>? <italic>coding.</italic><break/><italic>?coding fhir:Coding.code X.</italic><break/><italic>}</italic></td></tr><tr><td rowspan="2">Q9. Find patients that are contradict with <italic>414,518,007|insulin detemir</italic>.<break/>A patient is prevented from taking insulin detemir in two cases: first, if he/she is currently taking a drug that contradicts with detemir, and second, if he/she has some diseases that is contradicting with detemir.</td><td rowspan="2"><italic>SELECT DISTINCT</italic>? <italic>p WHERE {</italic><break/><italic>?p rdf:type fasto:patient;</italic><break/><italic>fasto:hasPatientProfile</italic>? <italic>prof.</italic><break/><italic>?prof fasto:hasPatientMedication</italic>? <italic>medstat.</italic><break/><italic>?medstat fhir:MedicationReference</italic>? <italic>med.</italic><break/><italic>?med fasto:drugContradictWithDrug</italic>? <italic>med2.</italic><break/><italic>?med2 fhir:Medication.code</italic>? <italic>s;</italic><break/><italic>fhir:Coding</italic>? <italic>coding.</italic><break/><italic>?coding fhir:Coding.code “126,212,009”^^xsd:string;</italic><break/><italic>fhir:Coding.system “SNOMEDCT”.</italic><break/><italic>}</italic><break/><italic>UNION</italic><break/><italic>{</italic><break/><italic>?p rdf:type fasto:patient;</italic><break/><italic>fasto:hasPatientProfile</italic>? <italic>prof.</italic><break/><italic>?prof fasto:hasComplication</italic>? <italic>cond.</italic><break/><italic>?cond fhir:Condition.disease</italic>? <italic>d.</italic><break/><italic>?d fasto:diseaseContradictWithDrug</italic>? <italic>med2.</italic><break/><italic>?med2 fhir:Medication.code</italic>? <italic>s;</italic><break/><italic>fhir:Coding</italic>? <italic>coding.</italic><break/><italic>?coding fhir:Coding.code “126,212,009”^^xsd:string;</italic><break/><italic>fhir:Coding.system “SNOMEDCT”.</italic><break/><italic>}</italic></td><td>Q10. List all patient taking rapid acting insulin with SNOMED CT code of X.</td><td><italic>SELECT DISTINCT</italic>? <italic>p WHERE {</italic><break/><italic>?p rdf:type fasto:patient;</italic><break/><italic>fasto:hasPatientProfile</italic>? <italic>prof.</italic><break/><italic>?prof fasto:hasCarePlan</italic>? <italic>plan.</italic><break/><italic>?plan fasto:isCurrent “true”^^xsd:Boolean;</italic><break/><italic>fasto:hasInsulinRegimen</italic>? <italic>ir.</italic><break/><italic>?ir fasto:hasBolusInsulin</italic>? <italic>ins.</italic><break/><italic>?ins fasto:Medication.code</italic>? <italic>code;</italic><break/><italic>?code fhir:Coding</italic>? <italic>coding;</italic><break/><italic>?coding fhir:Coding.code X.</italic><break/><italic>Fhir:Coding.system “SNOMEDCT”.</italic><break/><italic>}</italic></td></tr><tr><td>Q11. Find child patients who have gotten in hypoglycemia before.</td><td><italic>SELECT DISTINCT</italic>? <italic>p WHERE {</italic><break/><italic>?p rdf:type fasto:patient;</italic><break/><italic>fhir:Person.age</italic>? <italic>a.</italic><break/><italic>FILTER (?a &lt; 10).</italic><break/><italic>?p fasto:hasHistoryOfHypoglycemia</italic>? <italic>h.</italic><break/><italic>FILTER (?h &gt; 0).</italic><break/><italic>}</italic></td></tr><tr><td>Q12. List all patient currently on fixed insulin regimen and suffered from hyperglycemia condition before.</td><td><italic>SELECT DISTINCT</italic>? <italic>p WHERE {</italic><break/><italic>?p rdf:type fasto:patient;</italic><break/><italic>fasto:hasPatientProfile</italic>? <italic>prof.</italic><break/><italic>fasto:hasHistoryOfHyperglycemia</italic>? <italic>i.</italic><break/><italic>FILTER (?i &gt; 0)</italic><break/><italic>?prof fasto:hasCarePlan</italic>? <italic>plan.</italic><break/><italic>?plan fasto:isCurrent “true”^^xsd:Boolean;</italic><break/><italic>fasto:hasInsulinRegimen</italic>? <italic>ir.</italic><break/><italic>?ir rdf:type fasto:fixedRegimen;</italic><break/><italic>}</italic></td><td>Q13. List all patient who have a history of “increasing before bedtime insulin.”<break/>This pattern is inferred using the temporal abstraction of previous sensor data of before bedtime insulin. This abstraction is based on at least the previous 3 consecutive days.</td><td><italic>SELECT DISTINCT</italic>? <italic>p WHERE {</italic><break/><italic>?p rdf:type fasto:patient;</italic><break/><italic>fasto:hasPatientProfile</italic>? <italic>prof.</italic><break/><italic>?prof fasto:GlucoseBefBT “increasing”^^xsd:string</italic><break/><italic>}</italic></td></tr><tr><td>Q14. List all patient having the symptom of <italic>shortness of breath</italic>.<break/>Symptoms are encoded in SNOMED CT standard terminology.</td><td><italic>SELECT DISTINCT</italic>? <italic>p WHERE {</italic><break/><italic>?p rdf:type fasto:patient;</italic><break/><italic>fasto:hasPatientProfile</italic>? <italic>prof.</italic><break/><italic>?prof fasto:hasSymptom</italic>? <italic>sym.</italic><break/><italic>?sym fhir:Condition.code</italic>? <italic>cd.</italic><break/><italic>?cd fhir:Coding</italic>? <italic>cding;</italic><break/><italic>?cding fhir:Coding.code “267,036,007”^^xsd:string.</italic><break/><italic>Fhir:Coding.display “dyspnea”^^xsd:string.</italic><break/><italic>}</italic></td><td>Q15. What are the characteristics of WBAN of patient with identifier X.</td><td><italic>SELECT</italic>? <italic>wban,</italic>? <italic>sub,</italic>? <italic>lot,</italic>? <italic>date,</italic>? <italic>man,</italic>? <italic>mod WHERE {</italic><break/><italic>?p rdf:type fasto:patient;</italic><break/><italic>fhir:Resource.ID</italic>? <italic>id.</italic><break/><italic>?id fhir:Identifier.value X.</italic><break/><italic>?p fasto:hasWBAN</italic>? <italic>wban;</italic><break/><italic>?wban ssn:hasSubSystem</italic>? <italic>sub;</italic><break/><italic>?sub fhir:Device.lotNumber</italic>? <italic>lot;</italic><break/><italic>fhir:Device.manufactureDate</italic>? <italic>date;</italic><break/><italic>fhir:Device.manufacturer</italic>? <italic>man;</italic><break/><italic>fhir:Device.model</italic>? <italic>mod.</italic><break/><italic>}</italic></td></tr><tr><td>Q16. List the current sensor observations for patient X and their values.</td><td><italic>SELECT</italic>? <italic>obs</italic>? <italic>code</italic>? <italic>quan WHERE {</italic><break/><italic>?p rdf:type fasto:patient;</italic><break/><italic>fhir:Resource.ID</italic>? <italic>id.</italic><break/><italic>?id fhir:Identifier.value X.</italic><break/><italic>?p fasto:hasPatientProfile</italic>? <italic>prof.</italic><break/><italic>?prof fasto:hasObservationValue</italic>? <italic>obs.</italic><break/><italic>?obs rdf:type sensedObservationValue;</italic><break/><italic>fhir:Observation.code</italic>? <italic>code;</italic><break/><italic>fhir:Observation.valueQuantity</italic>? <italic>quan;</italic><break/><italic>}</italic></td><td>Q17. Find adult patients that are currently on <italic>126,212,009|insulin glargine</italic>.</td><td><italic>SELECT DISTINCT</italic>? <italic>p WHERE {</italic><break/><italic>?p rdf:type fasto:patient;</italic><break/><italic>fhir:Person.age</italic>? <italic>a;</italic><break/><italic>fasto:hasPatientProfile</italic>? <italic>prof.</italic><break/><italic>?prof fasto:hasPatientMedication</italic>? <italic>med.</italic><break/><italic>?med fhir:MedicationCodeableConcept</italic>? <italic>s.</italic><break/><italic>?s fhir:Coding</italic>? <italic>coding.</italic><break/><italic>?coding fhir:Coding.code “126,212,009”^^xsd:string;</italic><break/><italic>fhir:Coding.system “SNOMEDCT”;</italic><break/><italic>Fhir:Coding.display “insulin glargine”^^xsd:string.</italic><break/><italic>FILTER (?a &gt; 19 &amp;&amp;</italic>? <italic>a &lt; 55)</italic><break/><italic>}</italic></td></tr></tbody></table></table-wrap></p>
    </sec>
    <sec id="Sec29">
      <title>Complete scenario</title>
      <p id="Par173">This section discusses one scenario inferring a patient’s TP and providing real-time monitoring, as shown in Fig. <xref rid="Fig10" ref-type="fig">10</xref>. In addition, this evaluation measures whether the ontology blends well with the rest of the system components, and if it interoperates with them seamlessly. A specific patient case is created by class instantiation, property assertions, and SWRL inferences based on the patient’s history received from EHRs and his/her current status received from sensors data.<fig id="Fig10"><label>Fig. 10</label><caption><p>Complete scenario for the inference process of patient TPs and real time monitoring. This scenario starts and ends at the patient. According to the patient real time monitoring, these data are sent to the cloud based CDSS, which check the whole profile of the patient collected in a standard way from distributed EHR systems. After that, the CDSS proposes a personalized treatment plan</p></caption><graphic xlink:href="12911_2019_806_Fig10_HTML" id="MO52"/></fig></p>
      <sec id="Sec30">
        <title>Sensor data collection</title>
        <p id="Par174">Each sensor in the patient’s WBAN has its own reading frequency. For example, readings from the BG sensor are taken at least four times (before bedtime and three meals) per day, and the weight sensor takes one reading per day. The general format of the senor messages is&lt; …  ∣ <italic>message ID</italic> ∣ <italic>sensor ID</italic> ∣ <italic>time stamp</italic> ∣ <italic>value</italic> ∣  … &gt;. These messages are mapped to FHIR resources and collected in the PHR database as resource instances. For example, a new reading from the BG sensor is mapped to an observation resource format. These instances are periodically combined as FHIR bundle resource and sent in JSON format to the cloud. Please note, sensor data are converted to standard FHIR resources; in addition, the contents of the resources are coded using standard terminology, e.g. LOINC, and standard UoM, e.g. kg.</p>
      </sec>
      <sec id="Sec31">
        <title>Data collection from EHR systems</title>
        <p id="Par175">The FHIR server in the cloud sends HTTP GET requests to the distributed EHR systems to collect the patient history as JSON-based resources. For example, the request “<italic>GET</italic>
<ext-link ext-link-type="uri" xlink:href="http://fhirtest.com/Condition?patient=168937"><italic>http://fhirtest.com/Condition?patient=168937</italic>”</ext-link> collects conditions of the patient with ID = 168,937 from the <ext-link ext-link-type="uri" xlink:href="http://fhirtest.com"><italic>fhirtest.com</italic></ext-link> server. These requests are received by FHIR servers in every hospital, which are responsible for preparing these resources from EHR systems. As a result, hospital systems are transparent to the CDSS.</p>
        <p id="Par176">EHR-based FHIR servers use the FHIR transform engine to map persistent EHR data to FHIR resources. All needed data for a CDSS (current drugs, diseases, allergies, symptoms, etc.) are requested from heterogeneous EHR systems. In Fig. <xref rid="Fig10" ref-type="fig">10</xref>, patient complications are collected as standard FHIR condition resources from two hospitals. For example, <italic>patient p</italic> has “<italic>diabetic coma</italic>” in <italic>Hospital 1</italic> and “<italic>hyperosmolar coma</italic>” in <italic>Hospital n</italic>. The collected resources are coded with standard terminologies, e.g. <italic>26,298,008|diabetic coma with ketoacidosis</italic> in SNOMED CT.</p>
      </sec>
      <sec id="Sec32">
        <title>Cloud-based CDSS</title>
        <p id="Par177">The patient profile is collected in the cloud and stored in the standard RDB (see Fig. <xref rid="Fig8" ref-type="fig">8</xref>). Mapping of collected FHIR resources to the RDB is a straightforward process because we used the same resource formats to design the database. In addition, RDB data are used to instantiate FASTO. To automate this process, we depend on the D2RQ Platform (<ext-link ext-link-type="uri" xlink:href="http://d2rq.org"><italic>http://d2rq.org</italic></ext-link>). D2RQ and its D2RQ mapping language, a declarative language to map RDB schema to an OWL ontology, are used to export the patient profiles from RDB to RDF format. The RDB tables, relations, records, and constraints are mapped to FASTO classes, object properties, data properties, and axioms, respectively. Figure <xref rid="Fig11" ref-type="fig">11</xref> shows an example of two class-mapping rules for the <italic>patient</italic> table to the <italic>patient</italic> class and the <italic>condition</italic> table to the <italic>condition</italic> class, and one property mapping of the <italic>hasCondition</italic> relationship to the <italic>hasCondition</italic> object property. Every mapping creates a new triple with a unique URL. These triples are asserted in FASTO ontology as instances or properties. For example, every observation is mapped to an SSN <italic>observationValue</italic> class, and every device is mapped to the <italic>sensingDevice</italic> class, etc.<fig id="Fig11"><label>Fig. 11</label><caption><p>D2RQ examples for connecting to RDB and mapping a table, class, and property. This is a set of mappings among RDB tables, FASTO concepts, and FASTO properties. This mapping is based on D2RQ APIs</p></caption><graphic xlink:href="12911_2019_806_Fig11_HTML" id="MO53"/></fig></p>
        <p id="Par178">FASTO represents all sensor data based on SSN semantics, standard terminologies as LOINC, and standard UoM. Furthermore, we represent all conditions, adverse events, symptoms, demographics, and drugs based on FHIR resources and standard terminologies, e.g. SNOMED CT. We added many other axioms to infer additional knowledge. For example, some axioms are used to infer contradictions between drugs, food, and diseases.</p>
        <p id="Par179">OWL 2 semantics enhance the inference capabilities of FASTO. For example, it can easily infer that the collected diseases in Fig. <xref rid="Fig10" ref-type="fig">10</xref> from hospitals 1 and 2 can be interpreted as one complication. Now, the 140 SWRL rules are used to instantiate TPs for patients according to their profiles (see Fig. <xref rid="Fig7" ref-type="fig">7</xref>). These plans are instances of the carePlan class, which was designed based on the carePlan resource. The resulting carePlan objects and their associated <italic>goal</italic> objects are mapped to FHIR resources and sent to the patient mobile device, as shown in Fig. <xref rid="Fig10" ref-type="fig">10</xref>.</p>
      </sec>
    </sec>
  </sec>
  <sec id="Sec33">
    <title>Discussion</title>
    <p id="Par180">We propose an ontology-based mobile health CDSS for type 1 diabetes monitoring and treatment. The study provides a patient-centric comprehensive architecture based on a set of standards to handle interoperability challenges. There is a critical need for standard-: [<xref ref-type="bibr" rid="CR1">1</xref>] data models for patient data representation, [<xref ref-type="bibr" rid="CR2">2</xref>] approaches for CDSS knowledge formalization, [<xref ref-type="bibr" rid="CR3">3</xref>] methods for data and knowledge sharing between distributed systems, [<xref ref-type="bibr" rid="CR4">4</xref>] sources of medical knowledge, and [<xref ref-type="bibr" rid="CR5">5</xref>] formats for sensor data representation. Ontology semantics and medical standards provide intelligent solutions to these needs.</p>
    <p id="Par181">Our previous studies demonstrated the benefits of using an ontology to build CDSSs [<xref ref-type="bibr" rid="CR9">9</xref>, <xref ref-type="bibr" rid="CR10">10</xref>, <xref ref-type="bibr" rid="CR65">65</xref>, <xref ref-type="bibr" rid="CR66">66</xref>]. The formal and explicit semantics facilitate knowledge representation, sharing, and reuse. The instantiated ontology model together with a set of semantic web rule language (SWRL) rules constitute the CDSS knowledge base, which can be interpreted by inference engines such as Pellet. However, without consistent and globally accepted standard data models, the generated ontologies are incompatible with each other in <italic>structure</italic> and <italic>semantics</italic>, making it difficult for their integration, reuse, and maintenance. To handle the structure-consistency challenge, standard data models such as openEHR, HL7 v2 messages, and HL7 V3 reference information model (RIM), can be utilized to build standard ontologies [<xref ref-type="bibr" rid="CR18">18</xref>]. Recently, HL7 proposed FHIR as an open standard, which concentrates on semantic interoperability [<xref ref-type="bibr" rid="CR45">45</xref>–<xref ref-type="bibr" rid="CR47">47</xref>, <xref ref-type="bibr" rid="CR49">49</xref>]. <italic>To the best of our knowledge, no studies used FHIR to build standard ontologies, especially for diabetes</italic> [<xref ref-type="bibr" rid="CR15">15</xref>]. In addition, building ontologies based on a unified upper-level ontology (e.g. BFO, general formal ontology [GFO], and descriptive ontology for linguistic and cognitive engineering [DOLCE]) improves the interoperability and understandability of the resulting ontologies [<xref ref-type="bibr" rid="CR9">9</xref>]. We employ BFO 2.0 to build our type 2 diabetes treatment ontology (DMTO) [<xref ref-type="bibr" rid="CR10">10</xref>], but we did not use any standard data models. <italic>No studies in the literature integrate BFO and FHIR to build a MH CDSS, especially for diabetes</italic> [<xref ref-type="bibr" rid="CR15">15</xref>]<italic>. To handle the semantic consistency challenge</italic>, the FHIR data model should be mapped to an OWL 2 ontology, and all of the ontology terminologies need to be bound with standard terminologies (e.g. systematized nomenclature of medicine – clinical terms [SNOMED CT], logical observation identifiers names and codes [LOINC], RxNorm, or the international classification of diseases [ICD]). Some of these terminologies have semantic problems, which can be solved by using more accurate description logic ontologies. We used OWL 2 ontology formalization to enhance SNOMED CT semantics [<xref ref-type="bibr" rid="CR65">65</xref>]; <italic>however, this type of integration has not been discussed in the literature</italic>. CDSS medical knowledge can be collected from the results of machine learning algorithms, medical experts, and CPGs. Efficiency of machine learning algorithms is based on the quality of the input medical data, which is always low. In addition, it is difficult to collect heuristic knowledge from domain experts. Moreover, the significant gap between evidence-based medicine and clinical practice can result in lower quality and increased costs for medical care. As a result, building CDSS knowledge based on the most recent and standard CPGs is the best choice. <italic>Finally</italic>, ontologies should be used to improve the semantic representation of sensor data. The semantic enrichment of sensor data is called the semantic sensor web. The resulting ontology enhances the smooth integration of sensor data with historical EHR data. Furthermore, utilizing a standard sensor ontology such as the W3C’s SSN extends the interoperability between CDSSs and EHR ecosystems [<xref ref-type="bibr" rid="CR57">57</xref>]. <italic>To the best of our knowledge, utilizing SSN with formalized EHR to build MH CDSS systems has not been discussed in the literature</italic> [<xref ref-type="bibr" rid="CR15">15</xref>]<italic>.</italic> All of the previous challenges have been handled in the proposed study. We have concentrated mainly on the development of the core of component of CDSS system, namely its knowledge base. The resulting knowledge base is the FASTO ontology, which can be easily integrated with inference engine as Pellet reasoner. The most interesting part of the proposed system is the compatibility and interoperability of its modules, which facilitate the development of a transparent and pluggable CDSS system. At the same time, the proposed ontology can suggest a medically acceptable and complete care plans for diabetes patients.</p>
    <p id="Par182">To the best of our knowledge, this is the first complete MH infrastructure that handles the interoperability issue based on the available standards of SSN, BFO, SNOMED CT, FHIR, CPGs, etc. In addition, FASTO is the first public repository systematically documenting type 1 diabetes management. It creates individualized and customized treatment plans. These plans have many parts including insulin, lifestyle, and education that are created based on real time vital signs and historical EHR data (i.e., lab tests, complications, currently or previously taken drugs, symptoms, family history, etc.)</p>
    <p id="Par183">The proposed MH CDSS discussed in details the knowledge base development process and proposed comprehensive solutions for most of the implementation decisions. However, it still has some limitations. <italic>First</italic>, although FASTO is the most comprehensive type 1 DM treatment ontology, it did not handle some important treatment situations including emergencies. The limited availability of detailed medical knowledge in the literature is the main reason of this limitation. We studied most of the existing treatment CPGs and pathways; however, they did not provide a clear, comprehensive, and implementable knowledge about diabetes emergencies. FASTO has been implemented in a modular form. It is easy to extend and maintain its knowledge. As a result, it will stay open for any new or altered knowledge about diabetes medications. <italic>Second</italic>, FASTO models diet plans based on the grams of carbohydrates. This is according to the most recent CPGs; however, proteins and fats must have a clear role in diet plans. There is less knowledge about how to formulate the role of proteins and fats in meal planning. In addition, future enhancements are needed to tailor diet plans with familiar and preferred foods and with acceptable measurement units, such as cup, piece, etc. <italic>Third</italic>, FASTO provides treatment plans for type 1 diabetes only; however, a major step in managing diabetes is to manage its complications. <italic>Fourth</italic>, in the future, we will build the complete FASTO-based MH CDSS as an embedded component in an EHR system. This step will help us to put FASTO in a real environment; as a result, it will be easy to evaluate the performance of the proposed system and the quality of the proposed TPs.</p>
  </sec>
  <sec id="Sec34">
    <title>Conclusion</title>
    <p id="Par184">In this paper, we proposed a distributed, semantically intelligent, cloud-based, and interoperable MH CDSS framework. It can be used to provide monitoring of T1D patients. In addition, it can provide customized TPs according to the patient’s complete history and current vital signs. The proposed CDSS is based on the novel FASTO, which is a comprehensive OWL 2 ontology created by using Protégé 5.1 for T1D patients. The current version of FASTO includes 9577 classes, 658 object properties, 164 data properties, 460 individuals, and 140 SWRL rules. This is the first ontology that can provide complete and medically acceptable TPs based on historical EHRs and real time sensor readings. FASTO can be used to monitor BG in real time based on vital signs collected from WBANs. According to these real-time readings, FASTO suggests accurate adjustments in insulin dosages, eating patterns, and exercise plans. In addition, FASTO provides patients with tailored and long-term TPs with four main parts: insulin regimen, diet plan, exercise plan, and educational courses. The ontology has been tested, and it is publicly available through the BioPortal at <ext-link ext-link-type="uri" xlink:href="https://bioportal.bioontology.org/ontologies/FASTO"><italic>https://bioportal.bioontology.org/ontologies/FASTO</italic></ext-link>. We discussed the detailed process for creating this ontology, which provides semantic interoperability among CDSS knowledge, WBAN platforms, and distributed EHR systems. FASTO integrates a collection of standards to build a complete patient profile before making treatment decisions. FASTO is based on the BFO 2.0 top-level ontology, SSN ontology, HL7 FHIR standard, medical terminology, and T1D treatment CPGs. FASTO was designed in a modular manner, which makes it extensible and reusable in other domains.</p>
    <p id="Par185">One of the most important evaluation techniques of an ontology is by using applications. In the future, we will build a complete mobile health application for T1D monitoring. FASTO and an ontology reasoner will play the role of a CDSS. To handle the uncertain nature of medical data, we will extend our classic ontology into fuzzy ontology. We expect that fuzzy ontology will make the resulting system more acceptable and accurate. Finally, we will employ recent deep learning techniques, such as recurrent neural network, to help in pattern detection and management of patient sensor data. Pattern management helps to adjust a meal’s insulin, exercise’s insulin and carbs, and bedtime insulin. Finally, we will extend FASTO to deal with emergencies, such as hypoglycemia and hyperglycemia situations.</p>
  </sec>
  <sec sec-type="supplementary-material">
    <title>Additional file</title>
    <sec id="Sec35">
      <p>
        <supplementary-material content-type="local-data" id="MOESM1">
          <media xlink:href="12911_2019_806_MOESM1_ESM.docx">
            <label>Additional file 1:</label>
            <caption>
              <p>The complete list of SWRL rules for type 1 diabetes mellitus treatment. This is a list of 140 SWRL rules that implement the semantics of the proposed CDSS. (DOCX 26 kb)</p>
            </caption>
          </media>
        </supplementary-material>
      </p>
    </sec>
  </sec>
</body>
<back>
  <glossary>
    <title>Abbreviations</title>
    <def-list>
      <def-item>
        <term>BFO</term>
        <def>
          <p id="Par5">Basic Formal Ontology</p>
        </def>
      </def-item>
      <def-item>
        <term>BG</term>
        <def>
          <p id="Par6">Blood glucose</p>
        </def>
      </def-item>
      <def-item>
        <term>CDA</term>
        <def>
          <p id="Par7">Clinical document architecture</p>
        </def>
      </def-item>
      <def-item>
        <term>CDSS</term>
        <def>
          <p id="Par8">Clinical Decision Support System</p>
        </def>
      </def-item>
      <def-item>
        <term>CGM</term>
        <def>
          <p id="Par9">Continuous glucose monitoring</p>
        </def>
      </def-item>
      <def-item>
        <term>CPG</term>
        <def>
          <p id="Par10">Clinical Practice Guideline</p>
        </def>
      </def-item>
      <def-item>
        <term>DDO</term>
        <def>
          <p id="Par11">Diabetes Diagnosis Ontology</p>
        </def>
      </def-item>
      <def-item>
        <term>DMTO</term>
        <def>
          <p id="Par12">Diabetes Mellitus Treatment Ontology</p>
        </def>
      </def-item>
      <def-item>
        <term>DOLCE</term>
        <def>
          <p id="Par13">Descriptive ontology for linguistic and cognitive engineering</p>
        </def>
      </def-item>
      <def-item>
        <term>EHR</term>
        <def>
          <p id="Par14">Electronic Health Record</p>
        </def>
      </def-item>
      <def-item>
        <term>FASTO</term>
        <def>
          <p id="Par15">FHIR and SSN-based T1D Ontology</p>
        </def>
      </def-item>
      <def-item>
        <term>FHIR</term>
        <def>
          <p id="Par16">Fast healthcare interoperability resources</p>
        </def>
      </def-item>
      <def-item>
        <term>GFO</term>
        <def>
          <p id="Par17">General formal ontology</p>
        </def>
      </def-item>
      <def-item>
        <term>HL7</term>
        <def>
          <p id="Par18">Health level seven</p>
        </def>
      </def-item>
      <def-item>
        <term>ICD</term>
        <def>
          <p id="Par19">International classification of disease</p>
        </def>
      </def-item>
      <def-item>
        <term>ICR</term>
        <def>
          <p id="Par20">Insulin-to-carbs ratio</p>
        </def>
      </def-item>
      <def-item>
        <term>IoT</term>
        <def>
          <p id="Par21">Internet of Things</p>
        </def>
      </def-item>
      <def-item>
        <term>ISF</term>
        <def>
          <p id="Par22">Insulin sensitivity factor</p>
        </def>
      </def-item>
      <def-item>
        <term>ISO TC</term>
        <def>
          <p id="Par23">International organization for standardization technical committees</p>
        </def>
      </def-item>
      <def-item>
        <term>LOINC</term>
        <def>
          <p id="Par24">Logical observation identifiers names and codes</p>
        </def>
      </def-item>
      <def-item>
        <term>MH</term>
        <def>
          <p id="Par25">Mobile health</p>
        </def>
      </def-item>
      <def-item>
        <term>OAE</term>
        <def>
          <p id="Par26">Ontology of adverse events</p>
        </def>
      </def-item>
      <def-item>
        <term>OOPS</term>
        <def>
          <p id="Par27">OntOlogy pitfall scanner</p>
        </def>
      </def-item>
      <def-item>
        <term>OWL</term>
        <def>
          <p id="Par28">Web Ontology Language</p>
        </def>
      </def-item>
      <def-item>
        <term>PHR</term>
        <def>
          <p id="Par29">Personal health record</p>
        </def>
      </def-item>
      <def-item>
        <term>RDB</term>
        <def>
          <p id="Par30">Relational database</p>
        </def>
      </def-item>
      <def-item>
        <term>SCT</term>
        <def>
          <p id="Par31">SNOMED CT</p>
        </def>
      </def-item>
      <def-item>
        <term>SCTO</term>
        <def>
          <p id="Par32">SNOMED CT standard ontology based on the ontology for general medical science</p>
        </def>
      </def-item>
      <def-item>
        <term>SNOMEDCT</term>
        <def>
          <p id="Par33">Systematized Nomenclature of Medicine—Clinical Terms</p>
        </def>
      </def-item>
      <def-item>
        <term>SSN</term>
        <def>
          <p id="Par34">Semantic sensor network</p>
        </def>
      </def-item>
      <def-item>
        <term>SWE</term>
        <def>
          <p id="Par35">Sensor web enablement</p>
        </def>
      </def-item>
      <def-item>
        <term>SWRL</term>
        <def>
          <p id="Par36">Semantic Web Rule Language</p>
        </def>
      </def-item>
      <def-item>
        <term>T1D</term>
        <def>
          <p id="Par37">Type 1 diabetes mellitus</p>
        </def>
      </def-item>
      <def-item>
        <term>TP</term>
        <def>
          <p id="Par38">Treatment plan</p>
        </def>
      </def-item>
      <def-item>
        <term>UMLS</term>
        <def>
          <p id="Par39">Unified medical language system</p>
        </def>
      </def-item>
      <def-item>
        <term>UoM</term>
        <def>
          <p id="Par40">Units of measurement</p>
        </def>
      </def-item>
      <def-item>
        <term>WBAN</term>
        <def>
          <p id="Par41">Wireless body area network</p>
        </def>
      </def-item>
      <def-item>
        <term>WBU</term>
        <def>
          <p id="Par42">Wireless base unit</p>
        </def>
      </def-item>
    </def-list>
  </glossary>
  <ack>
    <title>Acknowledgements</title>
    <p>Not applicable.</p>
    <sec id="FPar1">
      <title>Funding</title>
      <p id="Par186">This work was supported by National Research Foundation of Korea-Grant funded by the Korean Government (Ministry of Science and ICT)-NRF-2017R1A2B2012337). The funder had no direct influence in designing of the study and collection, analysis, and interpretation of data and in writing the manuscript.</p>
    </sec>
    <sec id="FPar2" sec-type="data-availability">
      <title>Availability of data and materials</title>
      <p id="Par187">Data sharing not applicable to this article, as no datasets were generated or analyzed during its creation.</p>
    </sec>
  </ack>
  <notes notes-type="author-contribution">
    <title>Authors’ contributions</title>
    <p>All authors participated equally in the design and implementation processes of this manuscript. They all participated in drafting the article or revising it critically for important intellectual content. Final approval of the version to be submitted was given by all authors. Author SE deeply studied the medical side of the diabetes treatment, proposed the mobile health framework, and participated with KK and JJ to design FASTO. Author FA critically reviewed the paper’s English and reviewed the paper for the final version. Author AH was responsible for the study of BFO and other reused ontologies, and the definition of FASTO upper-level classes. Author FA created the evaluation process of the ontology, and Author AH uploaded the ontology to the bioportal as a public and standard ontology. Authors SE designed the list of SWRL rules to implement the treatment ontologies. All authors read and approved the final manuscript.</p>
  </notes>
  <notes notes-type="COI-statement">
    <sec id="FPar3">
      <title>Ethics approval and consent to participate</title>
      <p>Not applicable.</p>
    </sec>
    <sec id="FPar4">
      <title>Consent for publication</title>
      <p>Not applicable.</p>
    </sec>
    <sec id="FPar5">
      <title>Competing interests</title>
      <p>The authors declare that they have no competing interests.</p>
    </sec>
    <sec id="FPar6">
      <title>Publisher’s Note</title>
      <p>Springer Nature remains neutral with regard to jurisdictional claims in published maps and institutional affiliations.</p>
    </sec>
  </notes>
  <ref-list id="Bib1">
    <title>References</title>
    <ref id="CR1">
      <label>1.</label>
      <mixed-citation publication-type="other">World Health Organization. Global status report on noncommunicable diseases 2010. Geneva: World Health.; Nonserial Publication Series; 2010. 176.</mixed-citation>
    </ref>
    <ref id="CR2">
      <label>2.</label>
      <mixed-citation publication-type="other">Esposito M, Minutolo A, Megna R, Forastiere M, Magliulo M, De Pietro G. A smart mobile, self-configuring, context-aware architecture for personal health monitoring. Eng Appl Artif Intell [internet]. 2018;67(may 2017):136–56. Available from: 10.1016/j.engappai.2017.09.019.</mixed-citation>
    </ref>
    <ref id="CR3">
      <label>3.</label>
      <mixed-citation publication-type="other">American Diabetes Association: Type 1 diabetes [Internet]. Available from: <ext-link ext-link-type="uri" xlink:href="http://www.diabetes.org/diabetes-basics/type-1/">http://www.diabetes.org/diabetes-basics/type-1/</ext-link></mixed-citation>
    </ref>
    <ref id="CR4">
      <label>4.</label>
      <element-citation publication-type="book">
        <person-group person-group-type="author">
          <name>
            <surname>Cappon</surname>
            <given-names>G</given-names>
          </name>
          <name>
            <surname>Acciaroli</surname>
            <given-names>G</given-names>
          </name>
          <name>
            <surname>Vettoretti</surname>
            <given-names>M</given-names>
          </name>
          <name>
            <surname>Facchinetti</surname>
            <given-names>A</given-names>
          </name>
          <name>
            <surname>Id</surname>
            <given-names>GS</given-names>
          </name>
        </person-group>
        <source>Wearable Continuous Glucose Monitoring Sensors : A Revolution in Diabetes Treatment</source>
        <year>2017</year>
        <fpage>1</fpage>
        <lpage>16</lpage>
      </element-citation>
    </ref>
    <ref id="CR5">
      <label>5.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Caballero-Ruiz</surname>
            <given-names>E</given-names>
          </name>
          <name>
            <surname>García-Sáez</surname>
            <given-names>G</given-names>
          </name>
          <name>
            <surname>Rigla</surname>
            <given-names>M</given-names>
          </name>
          <name>
            <surname>Villaplana</surname>
            <given-names>M</given-names>
          </name>
          <name>
            <surname>Pons</surname>
            <given-names>B</given-names>
          </name>
          <name>
            <surname>Hernando</surname>
            <given-names>ME</given-names>
          </name>
        </person-group>
        <article-title>A web-based clinical decision support system for gestational diabetes: automatic diet prescription and detection of insulin needs</article-title>
        <source>Int J Med Inform</source>
        <year>2017</year>
        <volume>102</volume>
        <fpage>35</fpage>
        <lpage>49</lpage>
        <pub-id pub-id-type="doi">10.1016/j.ijmedinf.2017.02.014</pub-id>
        <pub-id pub-id-type="pmid">28495347</pub-id>
      </element-citation>
    </ref>
    <ref id="CR6">
      <label>6.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Kovatchev</surname>
            <given-names>B</given-names>
          </name>
          <name>
            <surname>Renard</surname>
            <given-names>E</given-names>
          </name>
          <name>
            <surname>Cobelli</surname>
            <given-names>C</given-names>
          </name>
          <name>
            <surname>Zisser</surname>
            <given-names>HC</given-names>
          </name>
          <name>
            <surname>Keith-Hynes</surname>
            <given-names>P</given-names>
          </name>
          <name>
            <surname>Anderson</surname>
            <given-names>SM</given-names>
          </name>
          <etal/>
        </person-group>
        <article-title>Feasibility of outpatient fully integrated closed-loop control</article-title>
        <source>Diabetes Care</source>
        <year>2013</year>
        <volume>36</volume>
        <fpage>1851</fpage>
        <lpage>1858</lpage>
        <pub-id pub-id-type="doi">10.2337/dc12-1965</pub-id>
        <pub-id pub-id-type="pmid">23801798</pub-id>
      </element-citation>
    </ref>
    <ref id="CR7">
      <label>7.</label>
      <element-citation publication-type="book">
        <person-group person-group-type="author">
          <name>
            <surname>Pais</surname>
            <given-names>S</given-names>
          </name>
          <name>
            <surname>Parry</surname>
            <given-names>D</given-names>
          </name>
          <name>
            <surname>Huang</surname>
            <given-names>Y</given-names>
          </name>
        </person-group>
        <source>Suitability of Fast Healthcare Interoperability Resources (FHIR) for Wellness Data</source>
        <year>2017</year>
        <fpage>3499</fpage>
        <lpage>3505</lpage>
      </element-citation>
    </ref>
    <ref id="CR8">
      <label>8.</label>
      <element-citation publication-type="book">
        <person-group person-group-type="author">
          <name>
            <surname>Bonte</surname>
            <given-names>P</given-names>
          </name>
          <name>
            <surname>Ongenae</surname>
            <given-names>F</given-names>
          </name>
          <name>
            <surname>De Backere</surname>
            <given-names>F</given-names>
          </name>
          <name>
            <surname>Schaballie</surname>
            <given-names>J</given-names>
          </name>
          <name>
            <surname>Arndt</surname>
            <given-names>D</given-names>
          </name>
          <name>
            <surname>Verstichel</surname>
            <given-names>S</given-names>
          </name>
          <etal/>
        </person-group>
        <source>The MASSIF platform : a modular and semantic platform for the development of flexible IoT services. Vol. 51, Knowledge and Information Systems</source>
        <year>2017</year>
        <publisher-loc>London</publisher-loc>
        <publisher-name>Springer</publisher-name>
        <fpage>89</fpage>
        <lpage>126</lpage>
      </element-citation>
    </ref>
    <ref id="CR9">
      <label>9.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>El-Sappagh</surname>
            <given-names>S</given-names>
          </name>
          <name>
            <surname>Ali</surname>
            <given-names>F</given-names>
          </name>
        </person-group>
        <article-title>DDO: a diabetes mellitus diagnosis ontology</article-title>
        <source>Appl Informatics</source>
        <year>2016</year>
        <volume>3</volume>
        <issue>1</issue>
        <fpage>5</fpage>
        <pub-id pub-id-type="doi">10.1186/s40535-016-0021-2</pub-id>
      </element-citation>
    </ref>
    <ref id="CR10">
      <label>10.</label>
      <mixed-citation publication-type="other">El-Sappagh S, Kwak D, Ali F, Kwak K-S. DMTO: a realistic ontology for standard diabetes mellitus treatment. J Biomed Semantics. 2018;9(1):8.</mixed-citation>
    </ref>
    <ref id="CR11">
      <label>11.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Kan</surname>
            <given-names>YC</given-names>
          </name>
          <name>
            <surname>Chen</surname>
            <given-names>KH</given-names>
          </name>
          <name>
            <surname>Lin</surname>
            <given-names>HC</given-names>
          </name>
        </person-group>
        <article-title>Developing a ubiquitous health management system with healthy diet control for metabolic syndrome healthcare in Taiwan</article-title>
        <source>Comput Methods Programs Biomed</source>
        <year>2017</year>
        <volume>144</volume>
        <fpage>37</fpage>
        <lpage>48</lpage>
        <pub-id pub-id-type="doi">10.1016/j.cmpb.2017.02.027</pub-id>
        <pub-id pub-id-type="pmid">28495005</pub-id>
      </element-citation>
    </ref>
    <ref id="CR12">
      <label>12.</label>
      <mixed-citation publication-type="other">Goyal S, Morita P, Lewis GF, Yu C, Seto E, Cafazzo JA. The Systematic Design of a Behavioural Mobile Health Application for the Self-Management of Type 2 Diabetes. 2016;40(1):95–104. Available from: 10.1016/j.jcjd.2015.06.007</mixed-citation>
    </ref>
    <ref id="CR13">
      <label>13.</label>
      <mixed-citation publication-type="other">Fortino G, Parisi D, Pirrone V, Di Fatta G. BodyCloud: a SaaS approach for community body sensor networks. Futur Gener Comput Syst [Internet] 2014;35:62–79. Available from: 10.1016/j.future.2013.12.015</mixed-citation>
    </ref>
    <ref id="CR14">
      <label>14.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Szydło</surname>
            <given-names>T</given-names>
          </name>
          <name>
            <surname>Konieczny</surname>
            <given-names>M</given-names>
          </name>
        </person-group>
        <article-title>Mobile and wearable devices in an open and universal system for remote patient monitoring</article-title>
        <source>Microprocess Microsyst</source>
        <year>2016</year>
        <volume>46</volume>
        <fpage>44</fpage>
        <lpage>54</lpage>
        <pub-id pub-id-type="doi">10.1016/j.micpro.2016.07.006</pub-id>
      </element-citation>
    </ref>
    <ref id="CR15">
      <label>15.</label>
      <mixed-citation publication-type="other">El-Sappagh S, Ali F, El-Masri S, Kim K, Ali A, Kwak KS. Mobile Health Technologies for Diabetes Mellitus: Current State and Future Challenges. IEEE Access. 2018;PP(c):1.</mixed-citation>
    </ref>
    <ref id="CR16">
      <label>16.</label>
      <mixed-citation publication-type="other">Klasnja P, Pratt W. Healthcare in the pocket: mapping the space of mobile-phone health interventions. J Biomed Inform [Internet] 2012;45(1):184–98. Available from: 10.1016/j.jbi.2011.08.017</mixed-citation>
    </ref>
    <ref id="CR17">
      <label>17.</label>
      <mixed-citation publication-type="other">Pawar P, Jones V, van Beijnum BJF, Hermens H. A framework for the comparison of mobile patient monitoring systems. J Biomed Inform [Internet]. 2012;45(3):544–56. Available from: 10.1016/j.jbi.2012.02.007</mixed-citation>
    </ref>
    <ref id="CR18">
      <label>18.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Zhang</surname>
            <given-names>Y-F</given-names>
          </name>
          <name>
            <surname>Gou</surname>
            <given-names>L</given-names>
          </name>
          <name>
            <surname>Tian</surname>
            <given-names>Y</given-names>
          </name>
          <name>
            <surname>Li</surname>
            <given-names>T-C</given-names>
          </name>
          <name>
            <surname>Zhang</surname>
            <given-names>M</given-names>
          </name>
          <name>
            <surname>Li</surname>
            <given-names>J-S</given-names>
          </name>
        </person-group>
        <article-title>Design and development of a sharable clinical decision support system based on a semantic web service framework</article-title>
        <source>J Med Syst</source>
        <year>2016</year>
        <volume>40</volume>
        <issue>5</issue>
        <fpage>118</fpage>
        <pub-id pub-id-type="doi">10.1007/s10916-016-0472-y</pub-id>
        <pub-id pub-id-type="pmid">27002818</pub-id>
      </element-citation>
    </ref>
    <ref id="CR19">
      <label>19.</label>
      <mixed-citation publication-type="other">Finet P, Gibaud B, Dameron O, Le Bouquin Jeannès R. Interoperable infrastructure and implementation of a health data model for remote monitoring of chronic diseases with comorbidities. Irbm [internet]. 2018;39(3):151–9. Available from: 10.1016/j.irbm.2018.03.003.</mixed-citation>
    </ref>
    <ref id="CR20">
      <label>20.</label>
      <mixed-citation publication-type="other">American Diabetes Association (ADA). Standard of medical care in diabetes - 2017. Diabetes Care. 2017;40 (sup 1)(January):s4–128.</mixed-citation>
    </ref>
    <ref id="CR21">
      <label>21.</label>
      <mixed-citation publication-type="other">Brzan PP, Rotman E, Pajnkihar M, Klanjsek P. Mobile Applications for Control and Self Management of Diabetes: A Systematic Review. J Med Syst [Internet]. 2016;40(9). Available from: 10.1007/s10916-016-0564-8</mixed-citation>
    </ref>
    <ref id="CR22">
      <label>22.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Basilico</surname>
            <given-names>A</given-names>
          </name>
          <name>
            <surname>Marceglia</surname>
            <given-names>S</given-names>
          </name>
          <name>
            <surname>Bonacina</surname>
            <given-names>S</given-names>
          </name>
          <name>
            <surname>Pinciroli</surname>
            <given-names>F</given-names>
          </name>
        </person-group>
        <article-title>Advising patients on selecting trustful apps for diabetes self-care</article-title>
        <source>Comput Biol Med</source>
        <year>2016</year>
        <volume>71</volume>
        <fpage>86</fpage>
        <lpage>96</lpage>
        <pub-id pub-id-type="doi">10.1016/j.compbiomed.2016.02.005</pub-id>
        <pub-id pub-id-type="pmid">26897071</pub-id>
      </element-citation>
    </ref>
    <ref id="CR23">
      <label>23.</label>
      <mixed-citation publication-type="other">Jacques Rose K, Petrut C, L’Heveder R, de Sabata S. IDF Europe position on mobile applications in diabetes. Diabetes Res Clin Pract [Internet]. 2017; Available from: <ext-link ext-link-type="uri" xlink:href="http://linkinghub.elsevier.com/retrieve/pii/S0168822717313566">http://linkinghub.elsevier.com/retrieve/pii/S0168822717313566</ext-link></mixed-citation>
    </ref>
    <ref id="CR24">
      <label>24.</label>
      <mixed-citation publication-type="other">Fatehi F, Menon A, Bird D. Diabetes Care in the Digital Era: a Synoptic Overview. Curr Diab Rep. 2018;18(7).</mixed-citation>
    </ref>
    <ref id="CR25">
      <label>25.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Quinn</surname>
            <given-names>CC</given-names>
          </name>
          <name>
            <surname>Clough</surname>
            <given-names>SS</given-names>
          </name>
          <name>
            <surname>Minor</surname>
            <given-names>JM</given-names>
          </name>
          <name>
            <surname>Lender</surname>
            <given-names>D</given-names>
          </name>
          <name>
            <surname>Okafor</surname>
            <given-names>MC</given-names>
          </name>
          <name>
            <surname>Gruber-Baldini</surname>
            <given-names>A</given-names>
          </name>
        </person-group>
        <article-title>WellDoc ™ Mobile diabetes management randomized controlled trial: change in clinical and behavioral outcomes and patient and physician satisfaction</article-title>
        <source>Diabetes Technol Ther</source>
        <year>2008</year>
        <volume>10</volume>
        <issue>3</issue>
        <fpage>160</fpage>
        <lpage>168</lpage>
        <pub-id pub-id-type="doi">10.1089/dia.2008.0283</pub-id>
        <pub-id pub-id-type="pmid">18473689</pub-id>
      </element-citation>
    </ref>
    <ref id="CR26">
      <label>26.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Kardas</surname>
            <given-names>P</given-names>
          </name>
          <name>
            <surname>Lewandowski</surname>
            <given-names>K</given-names>
          </name>
          <name>
            <surname>Bromuri</surname>
            <given-names>S</given-names>
          </name>
        </person-group>
        <article-title>Type 2 Diabetes Patients Benefit from the COMODITY12 mHealth System: Results of a Randomised Trial</article-title>
        <source>J Med Syst</source>
        <year>2016</year>
        <volume>40</volume>
        <fpage>12</fpage>
        <pub-id pub-id-type="doi">10.1007/s10916-016-0619-x</pub-id>
        <pub-id pub-id-type="pmid">26573649</pub-id>
      </element-citation>
    </ref>
    <ref id="CR27">
      <label>27.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Rodriguez Rodriguez</surname>
            <given-names>I</given-names>
          </name>
          <name>
            <surname>Zamora Izquierdo</surname>
            <given-names>MA</given-names>
          </name>
          <name>
            <surname>Rodriguez</surname>
            <given-names>JV</given-names>
          </name>
        </person-group>
        <article-title>Towards an ICT-based platform for type 1 diabetes mellitus management</article-title>
        <source>Appl Sci</source>
        <year>2018</year>
        <volume>8</volume>
        <fpage>1</fpage>
        <lpage>15</lpage>
      </element-citation>
    </ref>
    <ref id="CR28">
      <label>28.</label>
      <mixed-citation publication-type="other">Keith-hynes P, Mize B, Robert A, Place J. The Diabetes Assistant: A Smartphone-Based System for Real-Time Control of Blood Glucose. 2014;(Clc):609–23.</mixed-citation>
    </ref>
    <ref id="CR29">
      <label>29.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Su</surname>
            <given-names>CJ</given-names>
          </name>
          <name>
            <surname>Chiang</surname>
            <given-names>CY</given-names>
          </name>
          <name>
            <surname>Chih</surname>
            <given-names>MC</given-names>
          </name>
        </person-group>
        <article-title>Ontological knowledge engine and health screening data enabled ubiquitous personalized physical fitness (UFIT)</article-title>
        <source>Sensors (Switzerland)</source>
        <year>2014</year>
        <volume>14</volume>
        <issue>3</issue>
        <fpage>4560</fpage>
        <lpage>4584</lpage>
        <pub-id pub-id-type="doi">10.3390/s140304560</pub-id>
      </element-citation>
    </ref>
    <ref id="CR30">
      <label>30.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Schmidt</surname>
            <given-names>S</given-names>
          </name>
          <name>
            <surname>Norgaard</surname>
            <given-names>K</given-names>
          </name>
        </person-group>
        <article-title>Bolus calculators</article-title>
        <source>J Diabetes Sci Technol</source>
        <year>2014</year>
        <volume>8</volume>
        <issue>5</issue>
        <fpage>1035</fpage>
        <lpage>1041</lpage>
        <pub-id pub-id-type="doi">10.1177/1932296814532906</pub-id>
        <pub-id pub-id-type="pmid">24876436</pub-id>
      </element-citation>
    </ref>
    <ref id="CR31">
      <label>31.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Greenes</surname>
            <given-names>RA</given-names>
          </name>
          <name>
            <surname>Bates</surname>
            <given-names>DW</given-names>
          </name>
          <name>
            <surname>Kawamoto</surname>
            <given-names>K</given-names>
          </name>
          <name>
            <surname>Middleton</surname>
            <given-names>B</given-names>
          </name>
          <name>
            <surname>Osheroff</surname>
            <given-names>J</given-names>
          </name>
          <name>
            <surname>Shahar</surname>
            <given-names>Y</given-names>
          </name>
        </person-group>
        <article-title>Clinical decision support models and frameworks: seeking to address research issues underlying implementation successes and failures</article-title>
        <source>J Biomed Inform</source>
        <year>2018</year>
        <volume>78</volume>
        <issue>July 2017</issue>
        <fpage>134</fpage>
        <lpage>143</lpage>
        <pub-id pub-id-type="doi">10.1016/j.jbi.2017.12.005</pub-id>
        <pub-id pub-id-type="pmid">29246790</pub-id>
      </element-citation>
    </ref>
    <ref id="CR32">
      <label>32.</label>
      <element-citation publication-type="book">
        <person-group person-group-type="author">
          <name>
            <surname>Suh</surname>
            <given-names>M</given-names>
          </name>
          <name>
            <surname>Evangelista</surname>
            <given-names>LS</given-names>
          </name>
          <name>
            <surname>Chen</surname>
            <given-names>V</given-names>
          </name>
          <name>
            <surname>Hong</surname>
            <given-names>W</given-names>
          </name>
          <name>
            <surname>Nahapetian</surname>
            <given-names>A</given-names>
          </name>
          <name>
            <surname>Figueras</surname>
            <given-names>F</given-names>
          </name>
          <etal/>
        </person-group>
        <source>WANDA B.: Weight and Activity with Blood Pressure Monitoring System for Heart Failure Patients</source>
        <year>2011</year>
      </element-citation>
    </ref>
    <ref id="CR33">
      <label>33.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Villalba</surname>
            <given-names>E</given-names>
          </name>
          <name>
            <surname>Salvi</surname>
            <given-names>D</given-names>
          </name>
          <name>
            <surname>Ottaviano</surname>
            <given-names>M</given-names>
          </name>
          <name>
            <surname>Peinado</surname>
            <given-names>I</given-names>
          </name>
          <name>
            <surname>Arredondo</surname>
            <given-names>MT</given-names>
          </name>
          <name>
            <surname>Akay</surname>
            <given-names>A</given-names>
          </name>
        </person-group>
        <article-title>Wearable and mobile system to manage remotely heart failure</article-title>
        <source>IEEE Trans Inf Technol Biomed</source>
        <year>2009</year>
        <volume>13</volume>
        <issue>6</issue>
        <fpage>990</fpage>
        <lpage>996</lpage>
        <pub-id pub-id-type="doi">10.1109/TITB.2009.2026572</pub-id>
        <pub-id pub-id-type="pmid">19643715</pub-id>
      </element-citation>
    </ref>
    <ref id="CR34">
      <label>34.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Sieverdes</surname>
            <given-names>J</given-names>
          </name>
          <name>
            <surname>Treiber</surname>
            <given-names>F</given-names>
          </name>
          <name>
            <surname>Jenkins</surname>
            <given-names>C</given-names>
          </name>
          <name>
            <surname>Hermayer</surname>
            <given-names>K</given-names>
          </name>
        </person-group>
        <article-title>Improving diabetes management with Mobile health technology</article-title>
        <source>Am J Med Sci</source>
        <year>2013</year>
        <volume>345</volume>
        <issue>4</issue>
        <fpage>289</fpage>
        <lpage>295</lpage>
        <pub-id pub-id-type="doi">10.1097/MAJ.0b013e3182896cee</pub-id>
        <pub-id pub-id-type="pmid">23531961</pub-id>
      </element-citation>
    </ref>
    <ref id="CR35">
      <label>35.</label>
      <mixed-citation publication-type="other">Al-Taee MA, Al-Nuaimy W, Al-Ataby A, Muhsin ZJ, Abood SN. Mobile health platform for diabetes management based on the Internet-of-Things. 2015 IEEE Jordan Conf Appl Electr Eng Comput Technol AEECT 2015. 2015;0–4.</mixed-citation>
    </ref>
    <ref id="CR36">
      <label>36.</label>
      <mixed-citation publication-type="other">Hsu WC, Hei K, Lau K, Ghiloni S, Le H, Gilroy S, et al. Utilization of a Cloud-Based Diabetes Management Program for Insulin Initiation and Titration Enables Collaborative Decision Making Between Healthcare 2016;18(2):59–67.</mixed-citation>
    </ref>
    <ref id="CR37">
      <label>37.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Alirezaie</surname>
            <given-names>M</given-names>
          </name>
          <name>
            <surname>Renoux</surname>
            <given-names>J</given-names>
          </name>
          <name>
            <surname>Köckemann</surname>
            <given-names>U</given-names>
          </name>
          <name>
            <surname>Kristoffersson</surname>
            <given-names>A</given-names>
          </name>
          <name>
            <surname>Karlsson</surname>
            <given-names>L</given-names>
          </name>
          <name>
            <surname>Blomqvist</surname>
            <given-names>E</given-names>
          </name>
          <etal/>
        </person-group>
        <article-title>An ontology-based context-aware system for smart homes: E-care@home</article-title>
        <source>Sensors (Switzerland).</source>
        <year>2017</year>
        <volume>17</volume>
        <issue>7</issue>
        <fpage>1</fpage>
        <lpage>23</lpage>
        <pub-id pub-id-type="doi">10.3390/s17071586</pub-id>
      </element-citation>
    </ref>
    <ref id="CR38">
      <label>38.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Khamparia</surname>
            <given-names>A</given-names>
          </name>
          <name>
            <surname>Pandey</surname>
            <given-names>B</given-names>
          </name>
        </person-group>
        <article-title>Comprehensive analysis of semantic web reasoners and tools: a survey</article-title>
        <source>Educ Inf Technol</source>
        <year>2017</year>
        <volume>22</volume>
        <issue>6</issue>
        <fpage>3121</fpage>
        <lpage>3145</lpage>
        <pub-id pub-id-type="doi">10.1007/s10639-017-9574-5</pub-id>
      </element-citation>
    </ref>
    <ref id="CR39">
      <label>39.</label>
      <mixed-citation publication-type="other">Roehrs A, da Costa CA, Righi RDR, Rigo SJ, Wichman M. Toward a Model for Personal Health Records Interoperability. IEEE J Biomed Heal Informatics. 2019;23(2):867-73.</mixed-citation>
    </ref>
    <ref id="CR40">
      <label>40.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Zini</surname>
            <given-names>EM</given-names>
          </name>
          <name>
            <surname>Lanzola</surname>
            <given-names>G</given-names>
          </name>
          <name>
            <surname>Quaglini</surname>
            <given-names>S</given-names>
          </name>
          <name>
            <surname>Cornet</surname>
            <given-names>R</given-names>
          </name>
        </person-group>
        <article-title>Standardization of immunotherapy adverse events in patient information leaflets and development of an interface terminology for outpatients’ monitoring</article-title>
        <source>J Biomed Inform</source>
        <year>2018</year>
        <volume>77</volume>
        <issue>September 2017</issue>
        <fpage>133</fpage>
        <lpage>144</lpage>
        <pub-id pub-id-type="doi">10.1016/j.jbi.2017.12.009</pub-id>
        <pub-id pub-id-type="pmid">29269275</pub-id>
      </element-citation>
    </ref>
    <ref id="CR41">
      <label>41.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Basilakis</surname>
            <given-names>J</given-names>
          </name>
          <name>
            <surname>Lovell</surname>
            <given-names>NH</given-names>
          </name>
          <name>
            <surname>Redmond</surname>
            <given-names>SJ</given-names>
          </name>
          <name>
            <surname>Celler</surname>
            <given-names>BG</given-names>
          </name>
        </person-group>
        <article-title>Design of a decision-support architecture for management of remotely monitored patients</article-title>
        <source>IEEE Trans Inf Technol Biomed</source>
        <year>2010</year>
        <volume>14</volume>
        <issue>5</issue>
        <fpage>1216</fpage>
        <lpage>1226</lpage>
        <pub-id pub-id-type="doi">10.1109/TITB.2010.2055881</pub-id>
        <pub-id pub-id-type="pmid">20615815</pub-id>
      </element-citation>
    </ref>
    <ref id="CR42">
      <label>42.</label>
      <mixed-citation publication-type="other">Lanzola G, Losiouk E, Del Favero S, Facchinetti A, Galderisi A, Quaglini S, Magni L, Cobelli C. Remote blood glucose monitoring in mHealth scenarios: A review. Sensors. 2016;16(12):1983.</mixed-citation>
    </ref>
    <ref id="CR43">
      <label>43.</label>
      <mixed-citation publication-type="other">Botta A, De Donato W, Persico V, Pescapé A. Integration of cloud computing and internet of things: a survey. Futur Gener Comput Syst [Internet]. 2016;56:684–700. Available from: 10.1016/j.future.2015.09.021</mixed-citation>
    </ref>
    <ref id="CR44">
      <label>44.</label>
      <mixed-citation publication-type="other">Hennessy M, Oentojo C, Ray S. A framework and ontology for mobile sensor platforms in home health management. 2013 1st Int Work Eng Mobile-Enabled Syst MOBS 2013 - Proc. 2013;31–5.</mixed-citation>
    </ref>
    <ref id="CR45">
      <label>45.</label>
      <element-citation publication-type="book">
        <person-group person-group-type="author">
          <name>
            <surname>Benson</surname>
            <given-names>T</given-names>
          </name>
          <name>
            <surname>Grieve</surname>
            <given-names>G</given-names>
          </name>
        </person-group>
        <source>Principles of Health Interoperability SNOMED CT, HL7 and FHIR. Third edit</source>
        <year>2016</year>
        <publisher-loc>London</publisher-loc>
        <publisher-name>Springer-Verlag</publisher-name>
      </element-citation>
    </ref>
    <ref id="CR46">
      <label>46.</label>
      <element-citation publication-type="book">
        <person-group person-group-type="author">
          <name>
            <surname>Leroux</surname>
            <given-names>H</given-names>
          </name>
          <name>
            <surname>Metke-jimenez</surname>
            <given-names>A</given-names>
          </name>
          <name>
            <surname>Lawley</surname>
            <given-names>MJ</given-names>
          </name>
        </person-group>
        <source>Towards achieving semantic interoperability of clinical study data with FHIR</source>
        <year>2017</year>
        <fpage>1</fpage>
        <lpage>14</lpage>
      </element-citation>
    </ref>
    <ref id="CR47">
      <label>47.</label>
      <mixed-citation publication-type="other">Gøeg KR, Rasmussen RK, Jensen L, Wollesen CM, Larsen S, Pape-Haugaard LB. A future-proof architecture for telemedicine using loose-coupled modules and HL7 FHIR. Comput Methods Programs Biomed. 2018;160:95–101. Available from: 10.1016/j.cmpb.2018.03.010.</mixed-citation>
    </ref>
    <ref id="CR48">
      <label>48.</label>
      <mixed-citation publication-type="other">Brandt P, Basten T, Stuiik S, Bui V, De Clercq P, Pires LF, et al. Semantic interoperability in sensor applications making sense of sensor data. Proc 2013 IEEE Symp Comput Intell Healthc e-Health, CICARE 2013–2013 IEEE Symp Ser Comput Intell SSCI 2013. 2013;5:34–41.</mixed-citation>
    </ref>
    <ref id="CR49">
      <label>49.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Martinez-Costa</surname>
            <given-names>C</given-names>
          </name>
          <name>
            <surname>Schulz</surname>
            <given-names>S</given-names>
          </name>
        </person-group>
        <article-title>HL7 FHIR: ontological reinterpretation of medication resources</article-title>
        <source>Stud Health Technol Inform</source>
        <year>2017</year>
        <volume>235</volume>
        <fpage>451</fpage>
        <lpage>455</lpage>
        <?supplied-pmid 28423833?>
        <pub-id pub-id-type="pmid">28423833</pub-id>
      </element-citation>
    </ref>
    <ref id="CR50">
      <label>50.</label>
      <mixed-citation publication-type="other">Roda F, Musulin E. An ontology-based framework to support intelligent data analysis of sensor measurements. Expert Syst Appl [Internet]. 2014;41(17):7914–26. Available from: 10.1016/j.eswa.2014.06.033</mixed-citation>
    </ref>
    <ref id="CR51">
      <label>51.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Dhaliwal</surname>
            <given-names>R</given-names>
          </name>
          <name>
            <surname>Weinstock</surname>
            <given-names>RS</given-names>
          </name>
        </person-group>
        <article-title>Management of type 1 diabetes in older adults</article-title>
        <source>Diabetes Spectr</source>
        <year>2014</year>
        <volume>27</volume>
        <issue>1</issue>
        <fpage>9</fpage>
        <lpage>20</lpage>
        <pub-id pub-id-type="doi">10.2337/diaspect.27.1.9</pub-id>
        <pub-id pub-id-type="pmid">26246751</pub-id>
      </element-citation>
    </ref>
    <ref id="CR52">
      <label>52.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Wherrett</surname>
            <given-names>DK</given-names>
          </name>
          <name>
            <surname>Ho</surname>
            <given-names>J</given-names>
          </name>
        </person-group>
        <article-title>2018 clinical practice guidelines type 1 diabetes in children and adolescents diabetes Canada clinical practice guidelines expert committee</article-title>
        <source>Can J Diabetes</source>
        <year>2018</year>
        <volume>42</volume>
        <fpage>S234</fpage>
        <lpage>S246</lpage>
        <pub-id pub-id-type="doi">10.1016/j.jcjd.2017.10.036</pub-id>
        <pub-id pub-id-type="pmid">29650103</pub-id>
      </element-citation>
    </ref>
    <ref id="CR53">
      <label>53.</label>
      <element-citation publication-type="book">
        <person-group person-group-type="author">
          <name>
            <surname>King</surname>
            <given-names>AB</given-names>
          </name>
        </person-group>
        <source>Reassessment of insulin dosing guidelines in continuous subcutaneous insulin infusion treated type 1 diabetes</source>
        <year>2014</year>
      </element-citation>
    </ref>
    <ref id="CR54">
      <label>54.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Tascini</surname>
            <given-names>G</given-names>
          </name>
          <name>
            <surname>Berioli</surname>
            <given-names>MG</given-names>
          </name>
          <name>
            <surname>Cerquiglini</surname>
            <given-names>L</given-names>
          </name>
          <name>
            <surname>Santi</surname>
            <given-names>E</given-names>
          </name>
          <name>
            <surname>Mancini</surname>
            <given-names>G</given-names>
          </name>
          <name>
            <surname>Rogari</surname>
            <given-names>F</given-names>
          </name>
          <etal/>
        </person-group>
        <article-title>Carbohydrate counting in children and adolescents with type 1 diabetes</article-title>
        <source>Nutrients.</source>
        <year>2018</year>
        <volume>10</volume>
        <issue>1</issue>
        <fpage>1</fpage>
        <lpage>11</lpage>
        <pub-id pub-id-type="doi">10.3390/nu10010109</pub-id>
      </element-citation>
    </ref>
    <ref id="CR55">
      <label>55.</label>
      <mixed-citation publication-type="other">Walsh J, Roberts R, Varma C, Bailey T. Using Insulin: Everything You Need for Success with Insulin. 1st edition. San Diego, California: Torrey Pines Press; 2003.</mixed-citation>
    </ref>
    <ref id="CR56">
      <label>56.</label>
      <mixed-citation publication-type="other">King AB, Kuroda A, Matsuhisa M, Hobbs T. A Review of Insulin-Dosing Formulas for Continuous Subcutaneous Insulin Infusion (CSII) for Adults with Type 1 Diabetes. Curr Diab Rep [Internet]. 2016;16(9). Available from: 10.1007/s11892-016-0772-0</mixed-citation>
    </ref>
    <ref id="CR57">
      <label>57.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Compton</surname>
            <given-names>M</given-names>
          </name>
          <name>
            <surname>Barnaghi</surname>
            <given-names>P</given-names>
          </name>
          <name>
            <surname>Bermudez</surname>
            <given-names>L</given-names>
          </name>
          <name>
            <surname>García-Castro</surname>
            <given-names>R</given-names>
          </name>
          <name>
            <surname>Corcho</surname>
            <given-names>O</given-names>
          </name>
          <name>
            <surname>Cox</surname>
            <given-names>S</given-names>
          </name>
          <etal/>
        </person-group>
        <article-title>The SSN ontology of the W3C semantic sensor network incubator group</article-title>
        <source>J Web Semant</source>
        <year>2012</year>
        <volume>17</volume>
        <fpage>25</fpage>
        <lpage>32</lpage>
        <pub-id pub-id-type="doi">10.1016/j.websem.2012.05.003</pub-id>
      </element-citation>
    </ref>
    <ref id="CR58">
      <label>58.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Temal</surname>
            <given-names>L</given-names>
          </name>
          <name>
            <surname>Rosier</surname>
            <given-names>A</given-names>
          </name>
          <name>
            <surname>Dameron</surname>
            <given-names>O</given-names>
          </name>
          <name>
            <surname>Burgun</surname>
            <given-names>A</given-names>
          </name>
        </person-group>
        <article-title>Mapping BFO and DOLCE</article-title>
        <source>Stud Health Technol Inform</source>
        <year>2010</year>
        <volume>160</volume>
        <issue>PART 1</issue>
        <fpage>1065</fpage>
        <lpage>1069</lpage>
        <?supplied-pmid 20841847?>
        <pub-id pub-id-type="pmid">20841847</pub-id>
      </element-citation>
    </ref>
    <ref id="CR59">
      <label>59.</label>
      <element-citation publication-type="book">
        <person-group person-group-type="author">
          <name>
            <surname>Huckvale</surname>
            <given-names>K</given-names>
          </name>
          <name>
            <surname>Adomaviciute</surname>
            <given-names>S</given-names>
          </name>
          <name>
            <surname>Prieto</surname>
            <given-names>JT</given-names>
          </name>
          <name>
            <surname>Leow</surname>
            <given-names>MK</given-names>
          </name>
          <name>
            <surname>Car</surname>
            <given-names>J</given-names>
          </name>
        </person-group>
        <source>Smartphone apps for calculating insulin dose : a systematic assessment</source>
        <year>2015</year>
        <fpage>1</fpage>
        <lpage>10</lpage>
      </element-citation>
    </ref>
    <ref id="CR60">
      <label>60.</label>
      <element-citation publication-type="book">
        <person-group person-group-type="author">
          <name>
            <surname>Mottalib</surname>
            <given-names>A</given-names>
          </name>
          <name>
            <surname>Kasetty</surname>
            <given-names>M</given-names>
          </name>
          <name>
            <surname>Mar</surname>
            <given-names>JY</given-names>
          </name>
          <name>
            <surname>Elseaidy</surname>
            <given-names>T</given-names>
          </name>
          <name>
            <surname>Ashrafzadeh</surname>
            <given-names>S</given-names>
          </name>
          <name>
            <surname>Hamdy</surname>
            <given-names>O</given-names>
          </name>
          <etal/>
        </person-group>
        <source>Weight Management in Patients with type 1 diabetes and obesity</source>
        <year>2017</year>
      </element-citation>
    </ref>
    <ref id="CR61">
      <label>61.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Harris</surname>
            <given-names>JA</given-names>
          </name>
          <name>
            <surname>Benedict</surname>
            <given-names>FG</given-names>
          </name>
        </person-group>
        <article-title>A biometric study of human basal metabolism</article-title>
        <source>Proc Natl Acad Sci U S A</source>
        <year>1918</year>
        <volume>4</volume>
        <fpage>370</fpage>
        <lpage>373</lpage>
        <pub-id pub-id-type="doi">10.1073/pnas.4.12.370</pub-id>
        <pub-id pub-id-type="pmid">16576330</pub-id>
      </element-citation>
    </ref>
    <ref id="CR62">
      <label>62.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Ainsworth</surname>
            <given-names>BE</given-names>
          </name>
          <name>
            <surname>Haskell</surname>
            <given-names>WL</given-names>
          </name>
          <name>
            <surname>Herrmann</surname>
            <given-names>SD</given-names>
          </name>
          <name>
            <surname>Meckes</surname>
            <given-names>N</given-names>
          </name>
          <name>
            <surname>Bassett</surname>
            <given-names>DR</given-names>
          </name>
          <name>
            <surname>Tudor-Locke</surname>
            <given-names>C</given-names>
          </name>
          <etal/>
        </person-group>
        <article-title>2011 compendium of physical activities: a second update of codes and MET values</article-title>
        <source>Med Sci Sports Exerc</source>
        <year>2011</year>
        <volume>43</volume>
        <issue>8</issue>
        <fpage>1575</fpage>
        <lpage>1581</lpage>
        <pub-id pub-id-type="doi">10.1249/MSS.0b013e31821ece12</pub-id>
        <pub-id pub-id-type="pmid">21681120</pub-id>
      </element-citation>
    </ref>
    <ref id="CR63">
      <label>63.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Hlomani</surname>
            <given-names>H</given-names>
          </name>
          <name>
            <surname>Stacey</surname>
            <given-names>D</given-names>
          </name>
        </person-group>
        <article-title>Approaches, methods, metrics, measures, and subjectivity in ontology evaluation: a survey</article-title>
        <source>Semant Web J</source>
        <year>2014</year>
        <volume>1</volume>
        <fpage>1</fpage>
        <lpage>11</lpage>
      </element-citation>
    </ref>
    <ref id="CR64">
      <label>64.</label>
      <mixed-citation publication-type="other">OntOlogy Pitfall Scanner! [cited 2019 Mar 27]. Available from: <ext-link ext-link-type="uri" xlink:href="http://oops.linkeddata.es/">http://oops.linkeddata.es/</ext-link></mixed-citation>
    </ref>
    <ref id="CR65">
      <label>65.</label>
      <element-citation publication-type="book">
        <person-group person-group-type="author">
          <name>
            <surname>El-sappagh</surname>
            <given-names>S</given-names>
          </name>
          <name>
            <surname>Franda</surname>
            <given-names>F</given-names>
          </name>
          <name>
            <surname>Ali</surname>
            <given-names>F</given-names>
          </name>
          <name>
            <surname>Kwak</surname>
            <given-names>K</given-names>
          </name>
        </person-group>
        <source>SNOMED CT standard ontology based on the ontology for general medical science</source>
        <year>2018</year>
        <fpage>1</fpage>
        <lpage>19</lpage>
      </element-citation>
    </ref>
    <ref id="CR66">
      <label>66.</label>
      <mixed-citation publication-type="other">El-Sappagh S, Alonso JM, Ali F, Ali A, Jang JH, Kwak KS. An ontology-based interpretable fuzzy decision support system for diabetes diagnosis. IEEE Access. 2018;6:37371-94.</mixed-citation>
    </ref>
    <ref id="CR67">
      <label>67.</label>
      <mixed-citation publication-type="other">Ef E. Information Science and Applications 2015;339:3–10. Available from: <ext-link ext-link-type="uri" xlink:href="http://link.springer.com/10.1007/978-3-662-46578-3">http://link.springer.com/10.1007/978-3-662-46578-3</ext-link></mixed-citation>
    </ref>
    <ref id="CR68">
      <label>68.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Chen</surname>
            <given-names>RC</given-names>
          </name>
          <name>
            <surname>Huang</surname>
            <given-names>YH</given-names>
          </name>
          <name>
            <surname>Bau</surname>
            <given-names>CT</given-names>
          </name>
          <name>
            <surname>Chen</surname>
            <given-names>SM</given-names>
          </name>
        </person-group>
        <article-title>A recommendation system based on domain ontology and SWRL for anti-diabetic drugs selection</article-title>
        <source>Expert Syst Appl</source>
        <year>2012</year>
        <volume>39</volume>
        <issue>4</issue>
        <fpage>3995</fpage>
        <lpage>4006</lpage>
        <pub-id pub-id-type="doi">10.1016/j.eswa.2011.09.061</pub-id>
      </element-citation>
    </ref>
    <ref id="CR69">
      <label>69.</label>
      <mixed-citation publication-type="other">Chalortham N, Buranarach M, Supnithi T. Ontology Development for Type II Diabetes Mellitus Clinical Support System. Proc 4th Int Conf Knowl Inf Creat Support Syst [Internet]. 2009; Available from: <ext-link ext-link-type="uri" xlink:href="https://pdfs.semanticscholar.org/26b6/7be68766b6edcc6d154f8177c9827b1a8581.pdf">https://pdfs.semanticscholar.org/26b6/7be68766b6edcc6d154f8177c9827b1a8581.pdf</ext-link></mixed-citation>
    </ref>
    <ref id="CR70">
      <label>70.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Fan</surname>
            <given-names>ZY</given-names>
          </name>
          <name>
            <surname>Gou</surname>
            <given-names>L</given-names>
          </name>
          <name>
            <surname>T shu</surname>
            <given-names>Z</given-names>
          </name>
          <name>
            <surname>D nan</surname>
            <given-names>L</given-names>
          </name>
          <name>
            <surname>Zheng</surname>
            <given-names>J</given-names>
          </name>
          <name>
            <surname>Li</surname>
            <given-names>Y</given-names>
          </name>
          <etal/>
        </person-group>
        <article-title>An ontology-based approach to patient follow-up assessment for continuous and personalized chronic disease management</article-title>
        <source>J Biomed Inform</source>
        <year>2017</year>
        <volume>72</volume>
        <issue>2017</issue>
        <fpage>45</fpage>
        <lpage>59</lpage>
        <pub-id pub-id-type="pmid">28676255</pub-id>
      </element-citation>
    </ref>
    <ref id="CR71">
      <label>71.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Sherimon</surname>
            <given-names>PC</given-names>
          </name>
          <name>
            <surname>Krishnan</surname>
            <given-names>R</given-names>
          </name>
        </person-group>
        <article-title>OntoDiabetic: an ontology-based clinical decision support system for diabetic patients</article-title>
        <source>Arab J Sci Eng</source>
        <year>2016</year>
        <volume>41</volume>
        <issue>3</issue>
        <fpage>1145</fpage>
        <lpage>1160</lpage>
        <pub-id pub-id-type="doi">10.1007/s13369-015-1959-4</pub-id>
      </element-citation>
    </ref>
  </ref-list>
</back>
