<?properties open_access?>
<?DTDIdentifier.IdentifierValue -//NLM//DTD JATS (Z39.96) Journal Publishing DTD v1.1 20151215//EN?>
<?DTDIdentifier.IdentifierType public?>
<?SourceDTD.DTDName JATS-journalpublishing1.dtd?>
<?SourceDTD.Version 1.1?>
<?ConverterInfo.XSLTName jp2nlmx2.xsl?>
<?ConverterInfo.Version 1?>
<front>
  <journal-meta>
    <journal-id journal-id-type="nlm-ta">Nucleic Acids Res</journal-id>
    <journal-id journal-id-type="iso-abbrev">Nucleic Acids Res</journal-id>
    <journal-id journal-id-type="publisher-id">nar</journal-id>
    <journal-title-group>
      <journal-title>Nucleic Acids Research</journal-title>
    </journal-title-group>
    <issn pub-type="ppub">0305-1048</issn>
    <issn pub-type="epub">1362-4962</issn>
    <publisher>
      <publisher-name>Oxford University Press</publisher-name>
    </publisher>
  </journal-meta>
  <article-meta>
    <article-id pub-id-type="pmcid">5605237</article-id>
    <article-id pub-id-type="pmid">28100700</article-id>
    <article-id pub-id-type="doi">10.1093/nar/gkw1358</article-id>
    <article-id pub-id-type="publisher-id">gkw1358</article-id>
    <article-categories>
      <subj-group subj-group-type="heading">
        <subject>Methods Online</subject>
      </subj-group>
    </article-categories>
    <title-group>
      <article-title>PBrowse: a web-based platform for real-time collaborative exploration of genomic data</article-title>
    </title-group>
    <contrib-group>
      <contrib contrib-type="author">
        <name>
          <surname>Szot</surname>
          <given-names>Peter S.</given-names>
        </name>
        <xref ref-type="aff" rid="AFF1">1</xref>
        <xref ref-type="aff" rid="AFF2">2</xref>
        <xref ref-type="corresp" rid="COR2"/>
      </contrib>
      <contrib contrib-type="author">
        <name>
          <surname>Yang</surname>
          <given-names>Andrian</given-names>
        </name>
        <xref ref-type="aff" rid="AFF1">1</xref>
        <xref ref-type="aff" rid="AFF3">3</xref>
        <xref ref-type="corresp" rid="COR2"/>
      </contrib>
      <contrib contrib-type="author">
        <name>
          <surname>Wang</surname>
          <given-names>Xin</given-names>
        </name>
        <xref ref-type="aff" rid="AFF1">1</xref>
        <xref ref-type="aff" rid="AFF3">3</xref>
      </contrib>
      <contrib contrib-type="author">
        <name>
          <surname>Parsania</surname>
          <given-names>Chirag</given-names>
        </name>
        <xref ref-type="aff" rid="AFF4">4</xref>
      </contrib>
      <contrib contrib-type="author">
        <name>
          <surname>Röhm</surname>
          <given-names>Uwe</given-names>
        </name>
        <xref ref-type="aff" rid="AFF2">2</xref>
      </contrib>
      <contrib contrib-type="author">
        <name>
          <surname>Wong</surname>
          <given-names>Koon Ho</given-names>
        </name>
        <xref ref-type="aff" rid="AFF4">4</xref>
      </contrib>
      <contrib contrib-type="author">
        <name>
          <surname>Ho</surname>
          <given-names>Joshua W. K.</given-names>
        </name>
        <!--<email>j.ho@victorchang.edu.au</email>-->
        <xref ref-type="aff" rid="AFF1">1</xref>
        <xref ref-type="aff" rid="AFF3">3</xref>
        <xref ref-type="corresp" rid="COR1"/>
      </contrib>
    </contrib-group>
    <aff id="AFF1"><label>1</label>Victor Chang Cardiac Research Institute, Darlinghurst, NSW 2010, Australia</aff>
    <aff id="AFF2"><label>2</label>School of Information Technologies, University of Sydney, NSW 2006, Australia</aff>
    <aff id="AFF3"><label>3</label>St. Vincent's Clinical School, University of New South Wales, Darlinghurst, NSW 2010, Australia</aff>
    <aff id="AFF4"><label>4</label>Faculty of Health Sciences, University of Macau, Macau SAR, China</aff>
    <author-notes>
      <corresp id="COR1"><label>*</label>To whom correspondence should be addressed. Tel: +61 2 9295 8645; Fax: +61 2 9295 8601; Email: <email>j.ho@victorchang.edu.au</email></corresp>
      <corresp id="COR2"><label>†</label>These authors have contributed equally to this work as the first authors.</corresp>
    </author-notes>
    <pub-date pub-type="ppub">
      <day>19</day>
      <month>5</month>
      <year>2017</year>
    </pub-date>
    <pub-date pub-type="epub" iso-8601-date="2017-01-18">
      <day>18</day>
      <month>1</month>
      <year>2017</year>
    </pub-date>
    <pub-date pub-type="pmc-release">
      <day>18</day>
      <month>1</month>
      <year>2017</year>
    </pub-date>
    <!-- PMC Release delay is 0 months and 0 days and was based on the <pub-date pub-type="epub"/>. -->
    <volume>45</volume>
    <issue>9</issue>
    <fpage>e67</fpage>
    <lpage>e67</lpage>
    <history>
      <date date-type="accepted">
        <day>29</day>
        <month>12</month>
        <year>2016</year>
      </date>
      <date date-type="rev-recd">
        <day>23</day>
        <month>12</month>
        <year>2016</year>
      </date>
      <date date-type="received">
        <day>04</day>
        <month>5</month>
        <year>2016</year>
      </date>
    </history>
    <permissions>
      <copyright-statement>© The Author(s) 2017. Published by Oxford University Press on behalf of Nucleic Acids Research.</copyright-statement>
      <copyright-year>2017</copyright-year>
      <license license-type="cc-by-nc" xlink:href="http://creativecommons.org/licenses/by-nc/4.0/">
        <license-p>This is an Open Access article distributed under the terms of the Creative Commons Attribution License (<uri xlink:href="http://creativecommons.org/licenses/by-nc/4.0/">http://creativecommons.org/licenses/by-nc/4.0/</uri>), which permits non-commercial re-use, distribution, and reproduction in any medium, provided the original work is properly cited. For commercial re-use, please contact <email>journals.permissions@oup.com</email></license-p>
      </license>
    </permissions>
    <self-uri xlink:href="gkw1358.pdf"/>
    <abstract>
      <title>Abstract</title>
      <p>Genome browsers are widely used for individually exploring various types of genomic data. A handful of genome browsers offer limited tools for collaboration among multiple users. Here, we describe PBrowse, an integrated real-time collaborative genome browser that enables multiple users to simultaneously view and access genomic data, thereby harnessing the wisdom of the crowd. PBrowse is based on the Dalliance genome browser and has a re-designed user and data management system with novel collaborative functionalities, including real-time collaborative view, track comment and an integrated group chat feature. Through the Distributed Annotation Server protocol, PBrowse can easily access a wide range of publicly available genomic data, such as the ENCODE data sets. We argue that PBrowse represents a paradigm shift from using a genome browser as a static data visualization tool to a platform that enables real-time human–human interaction and knowledge exchange in a collaborative setting. PBrowse is available at <ext-link ext-link-type="uri" xlink:href="http://pbrowse.victorchang.edu.au">http://pbrowse.victorchang.edu.au</ext-link>, and its source code is available via an open source BSD 3 license at <ext-link ext-link-type="uri" xlink:href="http://github.com/VCCRI/PBrowse">http://github.com/VCCRI/PBrowse</ext-link>.</p>
    </abstract>
    <counts>
      <page-count count="8"/>
    </counts>
  </article-meta>
</front>
<body>
  <sec sec-type="intro" id="SEC1">
    <title>INTRODUCTION</title>
    <p>Consider the following scenario: a group of scientists from various institutions around the world participate in a project that involves generating new genome-wide ChIP-seq, RNA-seq and whole genome sequencing data. The scientists involved in data generation and data analysis are located in different countries. At regular intervals, meetings are held to discuss the data and share analysis results. To help visualize the data, a bioinformatician may either take screenshots of the genome browser view at many different resolutions and email them to their colleagues, or load their data to a web-based genome browser, such as Ensembl or UCSC, before emailing their colleagues the URL to the view or session. In this common situation, collaborative analysis is carried out through assessing static images or shared screen sessions, typically driven by a single member of the team. The setup time for such events is not trivial and is not conducive for collaborative exploration of the data.</p>
    <p>Many current genome browsers were developed to facilitate exploration of genome-scale data by individual researchers. Nonetheless, as illustrated in the above example, an isolated exploration of data may not be fully harnessing the wisdom of the crowd within a research consortium. As these types of collaborative projects are becoming more commonplace, it is increasingly important to facilitate real-time collaborative exploration of genome-scale data. The central goal of PBrowse is to provide an intuitive web-based platform where genome-scale data can be shared and visualized collaboratively in real-time with minimal setup costs. In this paper, we discuss how we implement a real-time collaborative genome browser that fulfils this need.</p>
    <sec id="SEC1-1">
      <title>Evolution of genome browser technology</title>
      <p>Genome browsers were developed out of a need to simplify the visualization and analysis of an increasingly vast amount of genomic data. Many public genome browsers also provide data access for the research community. The first generation of genome browsers followed the dynamic-server static-client model of content delivery (Figure <xref ref-type="fig" rid="F1">1A</xref>), based on the assumption that the client is a slow machine, incapable of performing complex operations. Thus, the server would prepare and pre-render all elements of a page before delivering it to the client, which then displays it as static content. The human genome browser at the University of California at Santa Cruz (UCSC) (<xref rid="B1" ref-type="bibr">1</xref>) was one of the first browsers implementing this model. It allows for reliable display of any portion of the genome, at any scale. It also enables a simple form of collaboration by allowing the upload of annotation tracks to be viewed by other research groups. While it was originally designed as a ‘human’ genome browser, it has over the years been upgraded to enable visualization of data from various species. Another major system is the Ensembl project (<xref rid="B2" ref-type="bibr">2</xref>), which was designed to offer an integrated, extensible and reusable framework for generating, storing, retrieving and displaying genomic annotation data. Like the UCSC genome browser, it has since received a multitude of updates and has grown dramatically. G-Compass (<xref rid="B3" ref-type="bibr">3</xref>) is another browser following the client-server model that attempts to specifically resolve the problem of comparing multiple disparate genomes simultaneously in a meaningful way. The goal of their browser is to provide effective comparisons between human and selected model organisms, promoting the exchange of functional information between different organisms.</p>
      <fig id="F1" orientation="portrait" position="float">
        <label>Figure 1.</label>
        <caption>
          <p>Comparison of different system architecture of web-based genome browsers.</p>
        </caption>
        <graphic xlink:href="gkw1358fig1"/>
      </fig>
      <p>With the advent of better client-side technologies for retrieving and processing data through in-browser javascript programming language, the client is no longer completely reliant on the web-server to pre-process data. This effectively frees the server from a significant burden of work thus reducing the server overhead, while utilizing the enhanced power of the client computers to achieve greater responsiveness (Figure <xref ref-type="fig" rid="F1">1B</xref>). JBrowse (<xref rid="B4" ref-type="bibr">4</xref>) is one such genome browser that enables smooth animated panning, zooming, navigation and track selection. This important feature preserves the user's sense of location by avoiding discontinuous transitions.</p>
      <p>While a dynamic client can perform a great deal of processing, it is limited in what it can achieve alone. The use of a dynamic server allows for the implementation of significantly more complex functionalities and persistent cross-session interactions between multiple clients (Figure <xref ref-type="fig" rid="F1">1C</xref>). Developers of ABrowse (<xref rid="B5" ref-type="bibr">5</xref>) adopted this model, extending the efficient browser framework established by JBrowse, by enhancing interactivity, opening access to more data sources and providing support for inter-user collaboration in terms of enabling non-real-time commenting and annotation. Genome Maps (<xref rid="B6" ref-type="bibr">6</xref>) is another such system, designed specifically to address the browser efficiency issues under increasing data loads brought about by high-throughput sequencing technology. It aims to provide a near seamless browsing experience through real-time navigation along chromosomes, all the way down to individual base pairs. GBrowse (<xref rid="B7" ref-type="bibr">7</xref>), like Genome Maps, was designed specifically to handle the large scale of next generation sequencing (NGS) data sets. ChromoZoom (<xref rid="B8" ref-type="bibr">8</xref>) is yet another browser that handles high volume NGS data with a focus on using modern web technologies to improve user experience. It facilitates the exploration of experimental data by researchers, enabling the visualization of custom results alongside a dynamic representation of curated genomic information.</p>
      <p>With the ever increasing power of client side rendering technologies, the role of the web-server as a central point for accessing data is becoming increasingly redundant. As data sets continue to grow, storage of genomic data on a single server becomes problematic. One solution is to distribute the load. An example of this is depicted in Figure <xref ref-type="fig" rid="F1">1D</xref>. The Dalliance browser (<xref rid="B9" ref-type="bibr">9</xref>) addresses these concerns, opting for a completely self-contained and embeddable module approach, offering high levels of interactivity which is competitive with specialized desktop applications such as the integrative genomics viewer (IGV) (<xref rid="B10" ref-type="bibr">10</xref>), all while running entirely within the web browser. Other examples of client side genome browsers include IGV.js (<ext-link ext-link-type="uri" xlink:href="https://github.com/igvteam/igv.js">https://github.com/igvteam/igv.js</ext-link>), a web-based implementation of the standalone IGV application and WashU Epigenome Browser (<xref rid="B11" ref-type="bibr">11</xref>).</p>
    </sec>
    <sec id="SEC1-2">
      <title>Design of a real-time collaborative genome browser</title>
      <p>Many genome browsers mentioned previously have some elements of collaboration integrated, though they are always limited in some regards. In some systems, it may be possible to share a view via URL or upload an annotation track for other users to make use of; none of which can be considered as ‘real-time’ collaboration. These options also require multiple collaborators to upload or configure their browsers.</p>
      <p>The concept of distributed real-time editing has existed for many years and numerous algorithms have since been proposed as solutions to the three primary problems: causality preservation, user intention preservation and convergence. In the case of a collaborative genome browser, we assume the need of users to edit the raw data is limited. Instead, only the viewpoint and superficial changes to tracks are allowed. This reduces the complexity of the operation space which we must consider; in particular, insertion or deletion will have no effect and can be totally ignored.</p>
      <p>To address the requirements of high-responsiveness given non-deterministic latency, Sun <italic>et al.</italic> (<xref rid="B12" ref-type="bibr">12</xref>) have proposed a multi-versioning approach. Multiple conflicting operations are made permissible by allowing the creation of branching ‘copies’. This preserves the intention of all participating collaborators while providing optional consistency. In a browser context, shifting views while collaborating in different directions is a conflicting operation that will produce two diverged states. Each user will see the position of the others and can resynchronize themselves at will.</p>
      <p>An alternative is to utilize the idea of user-roles and access rights (<xref rid="B13" ref-type="bibr">13</xref>). In this way, the session owner is considered to have administrator privileges and can grant permissions to other participants, allowing or disallowing them to perform specific operations. This can prevent conflicts from happening so long as users are permitted to only perform certain compatible operations concurrently. In the genome browser context, however, there are too few valid operations to require such restrictions.</p>
      <p>The recently developed collaborative web-based Java IDE (CoRED) (<xref rid="B14" ref-type="bibr">14</xref>) utilizes many of the aforementioned techniques. CoRED implement differential synchronization whereby the server stores the shared document, and each client has a separate shadow copy of the document both on server and client side, along with the copy they are editing. When edits are made, the changes are processed into a patch that is merged and redistributed by the server. Patches are small as they contain only the modified data, keeping a high responsiveness as well as enabling high concurrency. CoRED as a whole, serves as a useful example of the essential technologies utilized in a modern collaborative editor.</p>
      <p>PBrowse is an amalgamation of the best features of many widely used genome browsers and the latest technology for real-time collaboration (Figure <xref ref-type="fig" rid="F1">1E</xref>). It effectively addresses most of the weaknesses of previous genome browsers, combining highly responsive and flexible collaborative features, with a completely transition free and intuitive browsing experience. Sharing and exploring data collaboratively has been streamlined so that researchers can spend more time finding new insights.</p>
    </sec>
  </sec>
  <sec sec-type="materials|methods" id="SEC2">
    <title>MATERIALS AND METHODS</title>
    <sec id="SEC2-1">
      <title>PBrowse genome browser implementation</title>
      <p>The client side web front-end of PBrowse is written in javascript utilizing the Bootstrap and jQuery libraries, on top of the javascript-based Dalliance genome browser. On the server side, PBrowse is implemented using Java, with Jetty Web Server for deploying web archive (war) file. PBrowse makes use of a MySQL database instance to store a range of persistent data, including meta-data for tracks, with the track files themselves being saved to disk in a predetermined location.</p>
      <p>PBrowse uses secure WebSocket connections rather than the RESTful web service for server-client communication as it allows for the server to communicate to the client without the need for the client to request updated data. This provides real-time communication between the server and client and is the basis for the real-time collaborative feature of PBrowse. The information flow between client and server is depicted in Figure <xref ref-type="fig" rid="F2">2</xref>. PBrowse also provides a single REST endpoint for delivering data to the Dalliance genome browser as Dalliance currently has no support for WebSocket connections. Further details of the PBrowse architecture are described in <xref ref-type="supplementary-material" rid="sup1">Supplementary Note 1</xref>.</p>
      <fig id="F2" orientation="portrait" position="float">
        <label>Figure 2.</label>
        <caption>
          <p>User login workflow. Transition from HTTP transfers to WebSocket SSL communication.</p>
        </caption>
        <graphic xlink:href="gkw1358fig2"/>
      </fig>
    </sec>
  </sec>
  <sec id="SEC3">
    <title>RESULTS AND DISCUSSION</title>
    <sec id="SEC3-1">
      <title>The PBrowse genome browser</title>
      <p>The front-end of PBrowse is based on the Dalliance genome browser (<xref rid="B9" ref-type="bibr">9</xref>). It is embedded and fully contained within a single webpage, with all browsing actions performable without the need for any extra navigation or refreshing of the view. The interface is designed with responsiveness in mind, allowing simultaneous and asynchronous loading of multiple data sources, ensuring transitions to different regions of the genome are as seamless as possible. Data for regions upstream or downstream of the viewed genomic region are loaded pre-emptively in anticipation of a user panning the view. An example of the PBrowse collaborative view can be seen in Figure <xref ref-type="fig" rid="F3">3</xref>.</p>
      <fig id="F3" orientation="portrait" position="float">
        <label>Figure 3.</label>
        <caption>
          <p>PBrowse collaborative session screenshot. Session management panel (right panel) shows information about the current collaborative session, such as the session ID, users in session and location status. Leader's session management panel has extra functionality such as blacklisting user, inviting user and changing privacy of session. Session chat (bottom panel) allows user in the collaborative session to communicate with each other.</p>
        </caption>
        <graphic xlink:href="gkw1358fig3"/>
      </fig>
      <p>Individual tracks can be configured within the browser, depending on their type, allowing for customization of coloration, size, restrictions on the number of displayed features, among numerous other options. The genome browser stores all track configuration information in the web-browser's local storage, allowing past browsing sessions to be seamlessly resumed if the page is closed. Custom tracks are also restored to their last known state, including any style changes made by the user.</p>
    </sec>
    <sec id="SEC3-2">
      <title>Real-time collaboration</title>
      <p>The primary purpose of this browser is to enable real-time collaboration among multiple users to improve the efficiency of data exploration tasks. This is achieved by having multiple users connected while viewing a data set, as part of a parallel session. All the users in the session can see the real-time status of all other users, which is updated whenever a user performs an action that modifies their view. This process is depicted in Figure <xref ref-type="fig" rid="F4">4</xref>. A user can subscribe to the updates of other participants in the same session. Any updates to the current genomic position of the user will cause the other participants who have subscribed to the user to automatically synchronize their view to the new position. Otherwise, the other participants will only see an update to the user's record of the position in their status.</p>
      <fig id="F4" orientation="portrait" position="float">
        <label>Figure 4.</label>
        <caption>
          <p>Collaborative synchronization flowchart. Propagation of changes made by leader in their genome browser to follower's genome browser.</p>
        </caption>
        <graphic xlink:href="gkw1358fig4"/>
      </fig>
      <p>When creating a new parallel session, the creator is assigned the role of leader and as such, has more privileges than any other users, i.e. followers. The leader can perform a number of actions affecting other users in the session, including: modifying the session's public status, inviting new users to join or temporarily removing (kicking out) existing users, blocking other users from joining or re-joining the session, preventing follower interaction, selecting a new replacement leader or even terminating the session entirely. If the current leader leaves the session, the leadership position will be passed onto a random follower. However, if all users leave the session, the session will immediately be terminated and cannot be re-joined.</p>
      <p>By default, the session leader is not subscribed to the updates of any user although they may choose to do so. A newly connected user, however, will initially be subscribed to updates from the leader, though they may also modify their subscription set at will. Subscriptions affect only view changes; track modifications affect every user in the session equally and cannot be ignored. This covers all instances whereby the set of visible tracks in the genome browser are modified, including the reordering, removing or adding of new tracks.</p>
      <p>The visibility of a session is controlled by its privacy status. If marked public, the session will appear as a listing available to all PBrowse users. They will see its identifier and whether the session requires a passcode to join. Private marked sessions are not listed, requiring a user to know both the identifier and passcode – if required. Users invited to join a session need only to accept the invitation.</p>
      <p>In addition to synchronizing views, all the members of a collaborative session are granted temporary access to files uploaded by all other group members. This includes those who were part of the session but since left it. It affects all user uploaded files, except those explicitly marked ‘only-me’ – which as the name indicates, are visible only to the uploader. This facilitates the quick sharing of new data, requiring the file to be uploaded only once before it is viewable by multiple collaborators. While participating in a collaborative session, the users may also communicate directly via the session chat feature. It allows them to send short text messages to all other participants instantaneously. Users also receive session status updates as special messages, i.e. when users join, leave, are kicked out, etc. This can be useful for communicating intent or discussing collaborative tasks.</p>
      <p>A software usability study was conducted where 14 volunteer testers with varying experience in using genome browser were asked to evaluate the usefulness of the real-time collaboration feature (see <xref ref-type="supplementary-material" rid="sup1">Supplementary Note 2</xref> for details). The testers reported that the collaborative functionality of PBrowse had helped them to save time in reaching consensus decisions as a group and that the real-time collaborative functionality worked as expected without delay (<xref ref-type="supplementary-material" rid="sup1">Supplementary Tables S1 and S2</xref>). Furthermore, the testers indicated that they will recommend PBrowse to their collaborators, especially if they plan on working collaboratively (<xref ref-type="supplementary-material" rid="sup1">Supplementary Tables S1 and S2</xref>).</p>
    </sec>
    <sec id="SEC3-3">
      <title>Track comments</title>
      <p>The ability of users to leave comments on data tracks is another core feature of the collaborative framework of PBrowse. In this case, however, it is both real-time and deferred. When a user adds a custom track, they unlock the option to register a new, persistent comment on the currently viewed genomic region. The commenter can specify any message to accompany it, or simply leave it blank – in which case it may serve as a convenient bookmark to a specific region of interest. The commenter can also specify to make the comment public, private, or visible only to the author. If public, when the comment is made, all users currently viewing the track, regardless of whether they share a collaborative session, will be notified of its existence. If private, the comment will only ever be visible to the author, or those within the same collaborative session. Finally, if the comment is marked ‘only-me’, it will only ever be visible to the author. Consequently, public comments made on private tracks will only be visible to users with the permission to view the track, i.e. those within the same collaborative session.</p>
      <p>Comments are displayed in a tree-like view, with a single root node having a branch for each currently loaded track. Under each track node, comments are further grouped by the chromosome under which they appear. At the lowest level, the full comment details are visible, including its author, its exact location and any textual annotation. Clicking on any node will expand or contract it, while clicking on a comment node will open a menu allowing for further operations. All users can use this to immediately navigate to the region of interest, while only the comment author can delete it. When a user loads a track for the first time, all the public comments on that track are retrieved from the database and rendered. Removing the track from view will subsequently hide its associated comment branch.</p>
    </sec>
    <sec id="SEC3-4">
      <title>Custom tracks</title>
      <p>The Dalliance browser alone offers some means of managing data tracks, including adding tracks from external sources, primarily via the Distributed Annotation Server (DAS) protocol. These data are served as XML to the client, which processes and renders it as a track within the browser. Dalliance can additionally render tracks from indexed binary data files served directly from HTTP, supporting the 2bit, bigWig, bam and bigBed formats (<xref rid="B15" ref-type="bibr">15</xref>) with the possibility for random access via range queries. The BED, WIG and VCF formats are also accessible in this way, but they must be loaded in their entirety into memory before particular regions can be retrieved. This is undesirable as the client must waste bandwidth transferring all non-essential parts of the file. A solution is to convert the data into its associated binary form, (i.e. WIG to bigwig, BED to bigBED) or to provide a tabix index along with the compressed data file. The binary conversion approach is made easily possible by a number of publicly available utilities provided by UCSC and is the recommended approach when visualising such data in PBrowse.</p>
      <p>A number of different genomes are made available for browsing within PBrowse, the default being the GRCh37 / hg19 human genome, which has been preloaded with a large data set (2,485 tracks) from the ENCODE project (<xref rid="B16" ref-type="bibr">16</xref>), ready for immediate viewing. In addition, PBrowse currently also provides the hg18, and GRCh38 / hg38 human genomes, the Zv9 zebrafish genome, the GRCm37 / mm9 and GRCm38 / mm10 mouse genomes and the WS220 worm genome.</p>
      <p>New genomes may be added by users through a simple, two-step procedure. First, a 2bit file containing sequence information for the particular genome must be uploaded. Then the user changes the active genome to ‘generic’ via the drop-down menu, and follows the prompts, providing a name, as well as the sequence file ID and an optional gene file ID. The new genome exists temporarily but can be preserved by saving the current track configuration. The saved configurations are stored by PBrowse and recalled for each user, who can have multiple save states. They can also be shared with other users who are in the same collaborative session.</p>
    </sec>
    <sec id="SEC3-5">
      <title>Data upload and sharing</title>
      <p>In addition to collaboration, PBrowse provides an efficient means for users to upload and share custom track data files. When initiating an upload, users can specify: a track-name – the primary means of identifying the data file; a description – which can contain any extra relevant information relating to the annotation; a study ID – which allows for easy grouping of related data files; the genome tag – which states the data's associated genome assembly (e.g. hg38), and finally the track's public status – which determines its visibility to other users of PBrowse. The file metadata is tabulated and presented to the user who can sort entries based on the contents of particular columns, or perform keyword searches to locate specific tracks, as depicted in Figure <xref ref-type="fig" rid="F5">5</xref>.</p>
      <fig id="F5" orientation="portrait" position="float">
        <label>Figure 5.</label>
        <caption>
          <p>File management interface. User is able to access their uploaded files (My Data set) and files made public by other user, such as the ENCODE data set, (Public Data set) and add them as tracks to PBrowse.</p>
        </caption>
        <graphic xlink:href="gkw1358fig5"/>
      </fig>
      <p>The visibility of an uploaded file can have one of three distinct values: ‘only-me’, private or public. If a file is set to ‘only-me’, only its owner can see it. The same applies to the private setting, except during a collaborative session where all users share their privately accessible files automatically with other members of the session. Publicly accessible files, on the other hand, are always visible to every user of PBrowse and can be visualized without needing to log in. Any changes affecting a file's visibility are propagated in real-time, with all affected users being notified as well.</p>
      <p>As an alternative to uploading files to the PBrowse server, it is possible to register the location of a remotely-hosted file. The user can still provide meta-information for the source and a corresponding file listing will be produced and displayed within the file manager. All standard file management options can be applied to a remotely registered file, including privacy settings and search filtering, with the obvious exception that deleting the entry will not destroy the remote source.</p>
      <p>Once uploaded or registered, clicking on a listing within the file manager will present the user with the available options for the file. Multiple files can also be selected at once to perform batch operations. However, this requires the user to have the correct privilege to perform the action for all selected files, otherwise, the operation will fail. The batch management feature is particularly useful for adding multiple related tracks to the browser at once.</p>
    </sec>
    <sec id="SEC3-6">
      <title>Case study: collaborative exploration of human cardiac enhancers with ENCODE data</title>
      <p>To demonstrate how PBrowse enables collaborative exploration of genome-wide data, we constructed a case study involving the sharing and exploration of EP300 ChIP-seq data set from foetal and adult human heart tissues (<xref rid="B16" ref-type="bibr">16</xref>). We have created a short video of this demonstration (<xref ref-type="supplementary-material" rid="sup1">Supplementary Material S1</xref>).</p>
      <p>In the case study, we have a leader (Xin) who has loaded a few EP300 tracks from human and foetal heart in his genome browser. The user then starts a new collaborative session and invites his collaborator (Andrian) to join the session. Upon joining the collaborative session, the collaborator's genome browser view is synchronized to the view of the leader's genome browser, allowing the collaborator to view the same EP300 tracks at the same view. Changes made by the leader on their genome browser, such as scrolling to a different region and an addition of the H3K27ac tracks from a local computer and the ENCODE DAS server, are reflected on the collaborator's genome browser instantly, demonstrating the real-time nature of the collaborative session. The case study also demonstrates the other collaborative features of PBrowse, such as instant messaging—allowing the users to communicate in real-time—and comments – which allows users to share regions of interest between themselves.</p>
    </sec>
  </sec>
  <sec sec-type="conclusions" id="SEC4">
    <title>CONCLUSION</title>
    <p>The technology of web-based genome browsers has evolved significantly over the last decade. Nonetheless, the focus of these browsers has been largely around personal exploration of data. To fully harness the collective wisdom of a collaborative group, PBrowse places a strong emphasis on real-time human–human interactions through the medium of the genome browser. As illustrated in our case study, PBrowse enables a level of real-time knowledge exchange between multiple users that is not currently achievable by other browsers. Thus, we argue that PBrowse represents a paradigm shift in the way we see and use genome browsers.</p>
  </sec>
  <sec id="SEC5">
    <title>AVAILABILITY</title>
    <p>A public demonstration version is available at <ext-link ext-link-type="uri" xlink:href="http://pbrowse.victorchang.edu.au">http://pbrowse.victorchang.edu.au</ext-link>, while the source code is available at GitHub, <ext-link ext-link-type="uri" xlink:href="http://github.com/VCCRI/PBrowse">http://github.com/VCCRI/PBrowse</ext-link>, under BSD 3 license.</p>
  </sec>
  <sec sec-type="supplementary-material">
    <title>Supplementary Material</title>
    <supplementary-material content-type="local-data" id="sup1">
      <label>Supplementary Data</label>
      <media xlink:href="gkw1358_supp.zip">
        <caption>
          <p>Click here for additional data file.</p>
        </caption>
      </media>
    </supplementary-material>
  </sec>
</body>
<back>
  <ack>
    <title>ACKNOWLEDGEMENTS</title>
    <p>The authors thank the IT department of the Victor Chang Cardiac Research Institute for providing technical support. The authors also thank the Information and Communication Technology Office (ICTO) at the University of Macau for providing access to and support on a High-Performance Computer, and Jacky Chan and William Pang for their expert technical support. The authors thank Djordje Djordjevic, David Humphreys and Tomasz Szczesnik for their critical evaluation of the manuscript. The authors also thank all the volunteer testers who participated in the software usability study.</p>
  </ack>
  <sec id="SEC6">
    <title>SUPPLEMENTARY DATA</title>
    <p><xref ref-type="supplementary-material" rid="sup1">Supplementary Data</xref> are available at NAR Online.</p>
  </sec>
  <sec id="SEC7">
    <title>FUNDING</title>
    <p>New South Wales Ministry of Health; National Health and Medical Research Council/National Heart Foundation Career Development Fellowship [1105271]; Ramaciotti Establishment [ES2014/010]; Amazon Web Services (AWS) Credits for Research; Australian Postgraduate Award; Science and Technology Development Fund of Macau S.A.R [(FDCT) (085/2014/A2)]. Funding for open access charge: Victor Chang Cardiac Research Institute.</p>
    <p><italic>Conflict of interest statement</italic>. None declared.</p>
  </sec>
  <ref-list>
    <title>REFERENCES</title>
    <ref id="B1">
      <label>1.</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Kent</surname><given-names>W.J.</given-names></name>, <name name-style="western"><surname>Sugnet</surname><given-names>C.W.</given-names></name>, <name name-style="western"><surname>Furey</surname><given-names>T.S.</given-names></name>, <name name-style="western"><surname>Roskin</surname><given-names>K.M.</given-names></name>, <name name-style="western"><surname>Pringle</surname><given-names>T.H.</given-names></name>, <name name-style="western"><surname>Zahler</surname><given-names>A.M.</given-names></name>, <name name-style="western"><surname>Haussler</surname><given-names>D.</given-names></name></person-group><article-title>The human genome browser at UCSC</article-title>. <source>Genome Res.</source><year>2002</year>; <volume>12</volume>:<fpage>996</fpage>–<lpage>1006</lpage>.<pub-id pub-id-type="pmid">12045153</pub-id></mixed-citation>
    </ref>
    <ref id="B2">
      <label>2.</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Stalker</surname><given-names>J.</given-names></name></person-group><article-title>The Ensembl Website: mechanics of a genome browser</article-title>. <source>Genome Res.</source><year>2004</year>; <volume>14</volume>:<fpage>951</fpage>–<lpage>955</lpage>.<pub-id pub-id-type="pmid">15123591</pub-id></mixed-citation>
    </ref>
    <ref id="B3">
      <label>3.</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Kawahara</surname><given-names>Y.</given-names></name>, <name name-style="western"><surname>Sakate</surname><given-names>R.</given-names></name>, <name name-style="western"><surname>Matsuya</surname><given-names>A.</given-names></name>, <name name-style="western"><surname>Murakami</surname><given-names>K.</given-names></name>, <name name-style="western"><surname>Sato</surname><given-names>Y.</given-names></name>, <name name-style="western"><surname>Zhang</surname><given-names>H.</given-names></name>, <name name-style="western"><surname>Gojobori</surname><given-names>T.</given-names></name>, <name name-style="western"><surname>Itoh</surname><given-names>T.</given-names></name>, <name name-style="western"><surname>Imanishi</surname><given-names>T.</given-names></name></person-group><article-title>G-compass: a web-based comparative genome browser between human and other vertebrate genomes</article-title>. <source>Bioinformatics</source>. <year>2009</year>; <volume>25</volume>:<fpage>3321</fpage>–<lpage>3322</lpage>.<pub-id pub-id-type="pmid">19846439</pub-id></mixed-citation>
    </ref>
    <ref id="B4">
      <label>4.</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Skinner</surname><given-names>M.E.</given-names></name>, <name name-style="western"><surname>Uzilov</surname><given-names>A.V.</given-names></name>, <name name-style="western"><surname>Stein</surname><given-names>L.D.</given-names></name>, <name name-style="western"><surname>Mungall</surname><given-names>C.J.</given-names></name>, <name name-style="western"><surname>Holmes</surname><given-names>I.H.</given-names></name></person-group><article-title>JBrowse: a next-generation genome browser</article-title>. <source>Genome Res.</source><year>2009</year>; <volume>19</volume>:<fpage>1630</fpage>–<lpage>1638</lpage>.<pub-id pub-id-type="pmid">19570905</pub-id></mixed-citation>
    </ref>
    <ref id="B5">
      <label>5.</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Kong</surname><given-names>L.</given-names></name>, <name name-style="western"><surname>Wang</surname><given-names>J.</given-names></name>, <name name-style="western"><surname>Zhao</surname><given-names>S.</given-names></name>, <name name-style="western"><surname>Gu</surname><given-names>X.</given-names></name>, <name name-style="western"><surname>Luo</surname><given-names>J.</given-names></name>, <name name-style="western"><surname>Gao</surname><given-names>G.</given-names></name></person-group><article-title>ABrowse–a customizable next-generation genome browser framework</article-title>. <source>BMC Bioinformatics</source>. <year>2012</year>; <volume>13</volume>:<fpage>2</fpage><pub-id pub-id-type="pmid">22222089</pub-id></mixed-citation>
    </ref>
    <ref id="B6">
      <label>6.</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Medina</surname><given-names>I.</given-names></name>, <name name-style="western"><surname>Salavert</surname><given-names>F.</given-names></name>, <name name-style="western"><surname>Sanchez</surname><given-names>R.</given-names></name>, <name name-style="western"><surname>de Maria</surname><given-names>A.</given-names></name>, <name name-style="western"><surname>Alonso</surname><given-names>R.</given-names></name>, <name name-style="western"><surname>Escobar</surname><given-names>P.</given-names></name>, <name name-style="western"><surname>Bleda</surname><given-names>M.</given-names></name>, <name name-style="western"><surname>Dopazo</surname><given-names>J.</given-names></name></person-group><article-title>Genome Maps, a new generation genome browser</article-title>. <source>Nucleic Acids Res.</source><year>2013</year>; <volume>41</volume>:<fpage>W41</fpage>–<lpage>W46</lpage>.<pub-id pub-id-type="pmid">23748955</pub-id></mixed-citation>
    </ref>
    <ref id="B7">
      <label>7.</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Stein</surname><given-names>L.D.</given-names></name></person-group><article-title>Using GBrowse 2.0 to visualize and share next-generation sequence data</article-title>. <source>Brief. Bioinform.</source><year>2013</year>; <volume>14</volume>:<fpage>162</fpage>–<lpage>171</lpage>.<pub-id pub-id-type="pmid">23376193</pub-id></mixed-citation>
    </ref>
    <ref id="B8">
      <label>8.</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Pak</surname><given-names>T.R.</given-names></name>, <name name-style="western"><surname>Roth</surname><given-names>F.P.</given-names></name></person-group><article-title>ChromoZoom: a flexible, fluid, web-based genome browser</article-title>. <source>Bioinformatics</source>. <year>2013</year>; <volume>29</volume>:<fpage>384</fpage>–<lpage>386</lpage>.<pub-id pub-id-type="pmid">23220575</pub-id></mixed-citation>
    </ref>
    <ref id="B9">
      <label>9.</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Down</surname><given-names>T.A.</given-names></name>, <name name-style="western"><surname>Piipari</surname><given-names>M.</given-names></name>, <name name-style="western"><surname>Hubbard</surname><given-names>T.J.P.</given-names></name></person-group><article-title>Dalliance: interactive genome viewing on the web</article-title>. <source>Bioinformatics</source>. <year>2011</year>; <volume>27</volume>:<fpage>889</fpage>–<lpage>890</lpage>.<pub-id pub-id-type="pmid">21252075</pub-id></mixed-citation>
    </ref>
    <ref id="B10">
      <label>10.</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Robinson</surname><given-names>J.T.</given-names></name>, <name name-style="western"><surname>Thorvaldsdóttir</surname><given-names>H.</given-names></name>, <name name-style="western"><surname>Winckler</surname><given-names>W.</given-names></name>, <name name-style="western"><surname>Guttman</surname><given-names>M.</given-names></name>, <name name-style="western"><surname>Lander</surname><given-names>E.S.</given-names></name>, <name name-style="western"><surname>Getz</surname><given-names>G.</given-names></name>, <name name-style="western"><surname>Mesirov</surname><given-names>J.P.</given-names></name></person-group><article-title>Integrative genomics viewer</article-title>. <source>Nat. Biotechnol.</source><year>2011</year>; <volume>29</volume>:<fpage>24</fpage>–<lpage>26</lpage>.<pub-id pub-id-type="pmid">21221095</pub-id></mixed-citation>
    </ref>
    <ref id="B11">
      <label>11.</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Zhou</surname><given-names>X.</given-names></name>, <name name-style="western"><surname>Maricque</surname><given-names>B.</given-names></name>, <name name-style="western"><surname>Xie</surname><given-names>M.</given-names></name>, <name name-style="western"><surname>Li</surname><given-names>D.</given-names></name>, <name name-style="western"><surname>Sundaram</surname><given-names>V.</given-names></name>, <name name-style="western"><surname>Martin</surname><given-names>E. a</given-names></name>, <name name-style="western"><surname>Koebbe</surname><given-names>B.C.</given-names></name>, <name name-style="western"><surname>Nielsen</surname><given-names>C.</given-names></name>, <name name-style="western"><surname>Hirst</surname><given-names>M.</given-names></name>, <name name-style="western"><surname>Farnham</surname><given-names>P.</given-names></name><etal/></person-group><article-title>The human epigenome browser at Washington University</article-title>. <source>Nat. Methods</source>. <year>2011</year>; <volume>8</volume>:<fpage>989</fpage>–<lpage>990</lpage>.<pub-id pub-id-type="pmid">22127213</pub-id></mixed-citation>
    </ref>
    <ref id="B12">
      <label>12.</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Sun</surname><given-names>C.</given-names></name>, <name name-style="western"><surname>Chen</surname><given-names>D.</given-names></name></person-group><article-title>Consistency maintenance in real-time collaborative graphics editing systems</article-title>. <source>ACM Trans. Comp. Hum. Interact.</source><year>2002</year>; <volume>9</volume>:<fpage>1</fpage>–<lpage>41</lpage>.</mixed-citation>
    </ref>
    <ref id="B13">
      <label>13.</label>
      <mixed-citation publication-type="book"><person-group person-group-type="author"><name name-style="western"><surname>Imine</surname><given-names>A.</given-names></name>, <name name-style="western"><surname>Cherif</surname><given-names>A.</given-names></name>, <name name-style="western"><surname>Rusinowitch</surname><given-names>M.</given-names></name></person-group><person-group person-group-type="editor"><name name-style="western"><surname>Jonker</surname><given-names>W</given-names></name>, <name name-style="western"><surname>Petković</surname><given-names>M</given-names></name></person-group><article-title>A flexible access control model for distributed collaborative editors</article-title>. <source>Secure Data Management</source>. <year>2009</year>; <publisher-loc>Berlin Heidelberg</publisher-loc>: <publisher-name>Lecture Notes in Computer Science, Springer</publisher-name><fpage>89</fpage>–<lpage>106</lpage>.</mixed-citation>
    </ref>
    <ref id="B14">
      <label>14.</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Lautamäki</surname><given-names>J.</given-names></name>, <name name-style="western"><surname>Nieminen</surname><given-names>A.</given-names></name>, <name name-style="western"><surname>Koskinen</surname><given-names>J.</given-names></name>, <name name-style="western"><surname>Aho</surname><given-names>T.</given-names></name>, <name name-style="western"><surname>Mikkonen</surname><given-names>T.</given-names></name>, <name name-style="western"><surname>Englund</surname><given-names>M.</given-names></name></person-group><article-title>CoRED: browser-based collaborative real-time editor for Java web applications</article-title>. <source>Proc. ACM 2012 Conf. Comp. Supported Cooperative Work</source>. <year>2012</year>; <fpage>1307</fpage>–<lpage>1316</lpage>.</mixed-citation>
    </ref>
    <ref id="B15">
      <label>15.</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Kent</surname><given-names>W.J.</given-names></name>, <name name-style="western"><surname>Zweig</surname><given-names>A.S.</given-names></name>, <name name-style="western"><surname>Barber</surname><given-names>G.</given-names></name>, <name name-style="western"><surname>Hinrichs</surname><given-names>A.S.</given-names></name>, <name name-style="western"><surname>Karolchik</surname><given-names>D.</given-names></name></person-group><article-title>BigWig and BigBed: enabling browsing of large distributed datasets</article-title>. <source>Bioinformatics</source>. <year>2010</year>; <volume>26</volume>:<fpage>2204</fpage>–<lpage>2207</lpage>.<pub-id pub-id-type="pmid">20639541</pub-id></mixed-citation>
    </ref>
    <ref id="B16">
      <label>16.</label>
      <mixed-citation publication-type="journal"><collab>The ENCODE Project Consortium</collab><article-title>An integrated encyclopedia of DNA elements in the human genome</article-title>. <source>Nature</source>. <year>2012</year>; <volume>489</volume>:<fpage>57</fpage>–<lpage>74</lpage>.<pub-id pub-id-type="pmid">22955616</pub-id></mixed-citation>
    </ref>
  </ref-list>
</back>
