<?properties open_access?>
<?DTDIdentifier.IdentifierValue -//NLM//DTD JATS (Z39.96) Journal Publishing DTD v1.1 20151215//EN?>
<?DTDIdentifier.IdentifierType public?>
<?SourceDTD.DTDName JATS-journalpublishing1.dtd?>
<?SourceDTD.Version 1.1?>
<?ConverterInfo.XSLTName jp2nlmx2.xsl?>
<?ConverterInfo.Version 1?>
<front>
  <journal-meta>
    <journal-id journal-id-type="nlm-ta">Database (Oxford)</journal-id>
    <journal-id journal-id-type="iso-abbrev">Database (Oxford)</journal-id>
    <journal-id journal-id-type="publisher-id">databa</journal-id>
    <journal-title-group>
      <journal-title>Database: The Journal of Biological Databases and Curation</journal-title>
    </journal-title-group>
    <issn pub-type="epub">1758-0463</issn>
    <publisher>
      <publisher-name>Oxford University Press</publisher-name>
    </publisher>
  </journal-meta>
  <article-meta>
    <article-id pub-id-type="pmcid">5727400</article-id>
    <article-id pub-id-type="doi">10.1093/database/bax092</article-id>
    <article-id pub-id-type="publisher-id">bax092</article-id>
    <article-categories>
      <subj-group subj-group-type="heading">
        <subject>Database Tool</subject>
      </subj-group>
    </article-categories>
    <title-group>
      <article-title>Extension modules for storage, visualization and querying of genomic, genetic and breeding data in Tripal databases</article-title>
    </title-group>
    <contrib-group>
      <contrib contrib-type="author" corresp="yes">
        <name>
          <surname>Jung</surname>
          <given-names>Sook</given-names>
        </name>
        <xref ref-type="aff" rid="bax092-aff1"/>
        <xref ref-type="corresp" rid="bax092-cor1"/>
        <!--<email>sook_jung@wsu.edu</email>-->
        <xref ref-type="author-notes" rid="bax092-FM1">
          <sup>†</sup>
        </xref>
      </contrib>
      <contrib contrib-type="author">
        <name>
          <surname>Lee</surname>
          <given-names>Taein</given-names>
        </name>
        <xref ref-type="author-notes" rid="bax092-FM1">
          <sup>†</sup>
        </xref>
        <xref ref-type="aff" rid="bax092-aff1"/>
      </contrib>
      <contrib contrib-type="author">
        <name>
          <surname>Cheng</surname>
          <given-names>Chun-Huai</given-names>
        </name>
        <xref ref-type="author-notes" rid="bax092-FM1">
          <sup>†</sup>
        </xref>
        <xref ref-type="aff" rid="bax092-aff1"/>
      </contrib>
      <contrib contrib-type="author">
        <name>
          <surname>Ficklin</surname>
          <given-names>Stephen</given-names>
        </name>
        <xref ref-type="aff" rid="bax092-aff1"/>
      </contrib>
      <contrib contrib-type="author">
        <name>
          <surname>Yu</surname>
          <given-names>Jing</given-names>
        </name>
        <xref ref-type="aff" rid="bax092-aff1"/>
      </contrib>
      <contrib contrib-type="author">
        <name>
          <surname>Humann</surname>
          <given-names>Jodi</given-names>
        </name>
        <xref ref-type="aff" rid="bax092-aff1"/>
      </contrib>
      <contrib contrib-type="author">
        <name>
          <surname>Main</surname>
          <given-names>Dorrie</given-names>
        </name>
        <xref ref-type="aff" rid="bax092-aff1"/>
      </contrib>
    </contrib-group>
    <aff id="bax092-aff1">Department of Horticulture, Washington State University, Pullman, WA, 99164, USA</aff>
    <author-notes>
      <corresp id="bax092-cor1">Corresponding author: Tel: 509-335-2774; Fax: 509-335-7969; Email: <email>sook_jung@wsu.edu</email></corresp>
      <fn id="bax092-FM1">
        <p>Sook Jung and Taein Lee and Chun-Huai Cheng contributed equally to this work. </p>
      </fn>
      <fn id="bax092-FM2">
        <p>Citation details: Jung,S., Lee,T., Cheng,C.-H. <italic>et al.</italic> Extension modules for storage, visualization and querying of genomic, genetic and breeding data in Tripal databases. <italic>Database</italic> (2017) Vol. 2017: article ID bax092; doi:10.1093/database/bax092</p>
      </fn>
    </author-notes>
    <pub-date pub-type="collection">
      <year>2017</year>
    </pub-date>
    <pub-date pub-type="epub" iso-8601-date="2017-12-09">
      <day>09</day>
      <month>12</month>
      <year>2017</year>
    </pub-date>
    <pub-date pub-type="pmc-release">
      <day>09</day>
      <month>12</month>
      <year>2017</year>
    </pub-date>
    <!-- PMC Release delay is 0 months and 0 days and was based on the <pub-date pub-type="epub"/>. -->
    <volume>2017</volume>
    <elocation-id>bax092</elocation-id>
    <history>
      <date date-type="received">
        <day>05</day>
        <month>9</month>
        <year>2017</year>
      </date>
      <date date-type="rev-recd">
        <day>11</day>
        <month>11</month>
        <year>2017</year>
      </date>
      <date date-type="accepted">
        <day>16</day>
        <month>11</month>
        <year>2017</year>
      </date>
    </history>
    <permissions>
      <copyright-statement>© The Author(s) 2017. Published by Oxford University Press.</copyright-statement>
      <copyright-year>2017</copyright-year>
      <license license-type="cc-by" xlink:href="http://creativecommons.org/licenses/by/4.0/">
        <license-p>This is an Open Access article distributed under the terms of the Creative Commons Attribution License (<ext-link ext-link-type="uri" xlink:href="http://creativecommons.org/licenses/by/4.0/">http://creativecommons.org/licenses/by/4.0/</ext-link>), which permits unrestricted reuse, distribution, and reproduction in any medium, provided the original work is properly cited.</license-p>
      </license>
    </permissions>
    <self-uri xlink:href="bax092.pdf"/>
    <abstract>
      <title>Abstract</title>
      <p>Tripal is an open-source database platform primarily used for development of genomic, genetic and breeding databases. We report here on the release of the Chado Loader, Chado Data Display and Chado Search modules to extend the functionality of the core Tripal modules. These new extension modules provide additional tools for (1) data loading, (2) customized visualization and (3) advanced search functions for supported data types such as organism, marker, QTL/Mendelian Trait Loci, germplasm, map, project, phenotype, genotype and their respective metadata. The Chado Loader module provides data collection templates in Excel with defined metadata and data loaders with front end forms. The Chado Data Display module contains tools to visualize each data type and the metadata which can be used as is or customized as desired. The Chado Search module provides search and download functionality for the supported data types. Also included are the tools to visualize map and species summary. The use of materialized views in the Chado Search module enables better performance as well as flexibility of data modeling in Chado, allowing existing Tripal databases with different metadata types to utilize the module. These Tripal Extension modules are implemented in the Genome Database for <italic>Rosaceae</italic> (rosaceae.org), CottonGen (cottongen.org), Citrus Genome Database (citrusgenomedb.org), Genome Database for Vaccinium (vaccinium.org) and the Cool Season Food Legume Database (coolseasonfoodlegume.org).</p>
      <p><bold>Database URL</bold>: <ext-link ext-link-type="uri" xlink:href="https://www.citrusgenomedb.org/">https://www.citrusgenomedb.org/</ext-link>, <ext-link ext-link-type="uri" xlink:href="https://www.coolseasonfoodlegume.org/">https://www.coolseasonfoodlegume.org/</ext-link>, <ext-link ext-link-type="uri" xlink:href="https://www.cottongen.org/">https://www.cottongen.org/</ext-link>, <ext-link ext-link-type="uri" xlink:href="https://www.rosaceae.org/">https://www.rosaceae.org/</ext-link>, <ext-link ext-link-type="uri" xlink:href="https://www.vaccinium.org/">https://www.vaccinium.org/</ext-link></p>
    </abstract>
    <funding-group>
      <award-group award-type="grant">
        <funding-source>
          <named-content content-type="funder-name">National Science Foundation</named-content>
          <named-content content-type="funder-identifier">10.13039/100000001</named-content>
        </funding-source>
        <award-id>#1444573</award-id>
      </award-group>
    </funding-group>
    <counts>
      <page-count count="11"/>
    </counts>
  </article-meta>
</front>
<body>
  <sec sec-type="intro">
    <title>Introduction</title>
    <p>Tripal (<xref rid="bax092-B1" ref-type="bibr">1</xref>, <xref rid="bax092-B2" ref-type="bibr">2</xref>), a toolkit for construction of online biological databases uses two open source tools, the Chado database schema (<xref rid="bax092-B3" ref-type="bibr">3</xref>) and Drupal (<ext-link ext-link-type="uri" xlink:href="https://www.drupal.org/">https://www.drupal.org/</ext-link>), an open source Content Management Systems (CMS). The unprecedented volume of large-scale data being generated for non-model species, has led to an increasing need for online community databases where these data can be stored, integrated, visualized and made available for further analyses in such a way that fits each community. Building biological databases is a non-trivial task, requiring extensive skills and time from experienced programmers and close collaboration with biological curators or scientists. Tripal significantly reduces the time and cost for database construction and management resulting in its increasing adoption by many communities. Some example databases using Tripal include GeneNetEngine (<xref rid="bax092-B4" ref-type="bibr">4</xref>), the Banana Genome Hub (<ext-link ext-link-type="uri" xlink:href="http://banana-genome.cirad.fr/">http://banana-genome.cirad.fr/</ext-link>) (<xref rid="bax092-B5" ref-type="bibr">5</xref>), CottonGen (<ext-link ext-link-type="uri" xlink:href="https://www.cottongen.org/">https://www.cottongen.org/</ext-link>) (<xref rid="bax092-B6" ref-type="bibr">6</xref>), the Genome Database for <italic>Rosaceae</italic> (GDR, <ext-link ext-link-type="uri" xlink:href="http://www.rosaceae.org">http://www.rosaceae.org</ext-link>) (<xref rid="bax092-B7" ref-type="bibr">7</xref>), Knowpulse: Pulse Crop Genomics &amp; Breeding (<ext-link ext-link-type="uri" xlink:href="http://knowpulse2.usask.ca/portal">http://knowpulse2.usask.ca/portal</ext-link>) (<xref rid="bax092-B8" ref-type="bibr">8</xref>), the Hardwood Genomics Database (<ext-link ext-link-type="uri" xlink:href="http://www.hardwoodgenomics.org/">http://www.hardwoodgenomics.org/</ext-link>) (<xref rid="bax092-B9" ref-type="bibr">9</xref>), the i5k Workspace (<ext-link ext-link-type="uri" xlink:href="https://i5k.nal.usda.gov/">https://i5k.nal.usda.gov/</ext-link>) (<xref rid="bax092-B10" ref-type="bibr">10</xref>), the Cool Season Food Legume Database (CSFL, <ext-link ext-link-type="uri" xlink:href="https://www.coolseasonfoodlegume.org">https://www.coolseasonfoodlegume.org</ext-link>) (<xref rid="bax092-B11" ref-type="bibr">11</xref>), the Legume Information System (<ext-link ext-link-type="uri" xlink:href="http://legumeinfo.org/">http://legumeinfo.org/</ext-link>) (<xref rid="bax092-B12" ref-type="bibr">12</xref>) and the Citrus Genome Database (CGD, <ext-link ext-link-type="uri" xlink:href="http://www.citrusgenomedb.org">http://www.citrusgenomedb.org</ext-link>) (<xref rid="bax092-B13" ref-type="bibr">13</xref>). For a more extensive list of databases currently using Tripal see <ext-link ext-link-type="uri" xlink:href="https://tripal.info">https://tripal.info</ext-link>.</p>
    <p>Drupal, an open source, popular and well-supported CMS, simplifies web site installation, web site development and content management and has been used to construct a wide variety of websites and applications. Drupal provides security, performance, account management and is extensible via an Application Programming Interface (API) that allows site developers to create new PHP modules. Drupal has one of the largest open-source communities in the world and maintains a repository of thousands of user-contributed modules and themes.</p>
    <p>Tripal is a suite of Drupal modules which allows management and display of biological data stored in the Chado database. Chado is a database schema and a member of GMOD, the Generic Model Organism Database project (<ext-link ext-link-type="uri" xlink:href="http://www.gmod.org">www.gmod.org</ext-link>), a collection of open source software tools for managing, visualizing, storing and disseminating genetic and genomic data. Tripal also provides an API for creation of custom functionality. As developers of community-databases require new functionality, they can create new Tripal compatible extension modules using both the Drupal and Tripal APIs. Tripal offers a list of many of these user-contributed extension modules on the Tripal website (<ext-link ext-link-type="uri" xlink:href="http://www.tripal.info">www.tripal.info</ext-link>).</p>
    <p>Chado is an open-source, community-derived database schema for PostgreSQL. It was originally developed by FlyBase (<xref rid="bax092-B14" ref-type="bibr">14</xref>) to house Drosophila data that integrates annotated genomic sequences, genetic, phenotypic and bibliographic data. The schema was developed to be generic, modular, ontology-driven and open source so that it can be used as common data store for databases and tools that need to store data for other organisms. Chado extensively uses ontologies and controlled vocabularies to describe data and their relationships. For example, features on a genome are described using the Sequence Ontology (SO) (<xref rid="bax092-B15" ref-type="bibr">15</xref>), such as ‘gene’ and ‘QTL.’ The relationship between different genomic features are described by terms such as ‘is_a’ and ‘located_in’ which are also present in the SO. The Relations Ontology (<ext-link ext-link-type="uri" xlink:href="http://www.obofoundry.org/ontology/ro.html">http://www.obofoundry.org/ontology/ro.html</ext-link>) contains terms for creating relationships between a varieties of data. One important characteristic of Chado is its modular design. Chado tables are organized into groups, called modules, such as sequence, genetic, phenotype, map, stock, organism, library, expression, controlled vocabulary and general modules. Each module represents distinct domains of data. This allows new modules to be added when sufficient need arises. In 2011, a Natural Diversity module was added to Chado through collaborative efforts by a consortium of representatives from several online genome database projects (<xref rid="bax092-B16" ref-type="bibr">16</xref>) to support data from multiple large-scale phenotypic and genotypic projects.</p>
    <p>The ontology-driven design of Chado allows database developers to store data for new biological concepts, and new experimental techniques without constantly changing the schema. The adoption of Chado, however, involves a steep learning curve due to this general and ontology-driven design. Best practices for storing genomic data are documented on the GMOD website (<ext-link ext-link-type="uri" xlink:href="http://gmod.org/wiki/Chado_Best_Practices">http://gmod.org/wiki/Chado_Best_Practices</ext-link>) as well as in the Chado manuscript (<xref rid="bax092-B3" ref-type="bibr">3</xref>) from FlyBase. Tripal has been mostly adopted by communities with newly generated large-scale genomic data and the documentation on how to store genetic, phenotypic and genotypic data along with genomic data has not been well documented except in a recent publication which describes case studies from GDR and CottonGen for storing genomic, genetic and breeding data (<xref rid="bax092-B17" ref-type="bibr">17</xref>). Despite these examples, it remains a necessity for site developers to program data loaders for data types such as markers, genetic maps, QTL/Mendelian Trait Loci (MTL), stocks, phenotypes and genotypes. Moreover, tools to display and search these data are also needed.</p>
    <p>In response to these needs, a set of Tripal extension modules have been created: the Mainlab Chado Loader (MCL), the Mainlab Data Display and the Mainlab Chado Search module. These modules provide site developers with tools to collect and upload data, to organize and display data and to enable advanced search functions. Supported data types include organism, marker, QTL, MTL, germplasm, map, project, phenotype, genotype and their associated metadata. Even though the types of metadata stored can be different from one community to another, these modules will provide a good starting point to build a community database with the possibility of modification to suit each community’s need. The MCL provides a set of data templates in Excel format to collect data and respective loaders to import them into Chado. The Mainlab Chado Search module provides an accompanying set of search tools and the Mainlab Data Display module provides the appropriate online data pages. These Tripal extension modules, along with the Tripal core module, have been used in the construction of the GDR, CottonGen, CSFL, CGD and the Genome Database for Vaccinium (<ext-link ext-link-type="uri" xlink:href="https://www.vaccinium.org/">https://www.vaccinium.org/</ext-link>). These open-source Tripal extension modules with usage documentation can be found in the Tripal organization’s GitHub repository. They can also be accessed from <ext-link ext-link-type="uri" xlink:href="http://tripal.info/extensions">http://tripal.info/extensions</ext-link>.</p>
  </sec>
  <sec>
    <title>Description</title>
    <sec>
      <title>Mainlab Chado Loader</title>
      <p>The MCL module supports uploading of various biological data types into a Chado database. MCL provides both a user interface and an admin interface. The admin interface is for the site developer and the user interface is for data curators. The user interface is composed of pages for downloading data templates and data loading. Data templates are Excel files that contain metadata type as headings where data curators or researchers can enter data to be loaded into the database. In the current version of MCL, templates are available for each of the following data types: db (database), cv (controlled vocabulary), library, trait, contact, dataset, image, descriptor, site, stock, cross, progeny, marker, MTL, QTL, map, map position, phenotype and genotype. There are multiple templates for some data types. Templates for the same data type are defined to have the same template type. In the template page of the user interface, which can be accessed at <ext-link ext-link-type="uri" xlink:href="https://yoursite.org/mcl/template_list">https://yoursite.org/mcl/template_list</ext-link> once installed, users can view the description of each template and download the templates (<xref ref-type="fig" rid="bax092-F1">Figure 1</xref>). The description of each template is available on the first sheet of each download file as well as on the template page of the user interface. As shown in <xref ref-type="fig" rid="bax092-F2">Figure 2A</xref>, the column headings with * prefix in the templates are required fields. <xref ref-type="fig" rid="bax092-F2">Figure 2B and C</xref> shows two templates that belong to the genotype template type, an example of template type that has multiple templates. In ‘genotype_snp_long_form’ (<xref ref-type="fig" rid="bax092-F2">Figure 2B</xref>), there is a marker column where the marker used for genotyping is entered. Right next to it is a genotype column where the genotype is entered. So each row contains one stock name, one marker name and the genotype for the marker and stock combination. In this way, the number of the rows is the product of number of markers and number of stocks. For example, if 3 markers are used for 2 stocks, a total of 6 rows are entered. In ‘genotype_snp_wide_form’ (<xref ref-type="fig" rid="bax092-F2">Figure 2C</xref>), marker names are entered as column headings with ‘$’ as a prefix. Each row contains one stock name and genotypes of all the markers used. In this way, the number of the rows is the same as the number of the stocks. For example, if 3 markers are used for 2 stocks, a total of 2 rows are entered. Having two different templates are convenient for users since the output of some genotyping software is similar to the wide form and others to the long form. When templates are needed for a new or existing template type or new metadata are needed for the existing template, a site developer can modify MCL to create a new template or columns for new metadata. The templates for the latest release of the module are also provided as a <xref ref-type="supplementary-material" rid="sup1">Supplementary Material</xref>.</p>
      <fig id="bax092-F1" orientation="portrait" position="float">
        <label>Figure 1.</label>
        <caption>
          <p>Data template page of the MCL user interface. Users can view the description of each data template or download the templates.</p>
        </caption>
        <graphic xlink:href="bax092f1"/>
      </fig>
      <fig id="bax092-F2" orientation="portrait" position="float">
        <label>Figure 2.</label>
        <caption>
          <p>Example templates downloaded from the MCL module. (<bold>A</bold>) A template for contact data type. Columns with a prefix ‘*’are required fields. (<bold>B</bold>) A template for genotype datatype, ‘genotype_snp_long_form.’ (<bold>C</bold>) A template for genotype datatype, ‘genotype_snp_wide_form.’ Users can enter marker names as column headings with a prefix ‘$.’</p>
        </caption>
        <graphic xlink:href="bax092f2"/>
      </fig>
      <p>Once data is entered in the template, data curators can upload data through the web interface (<xref ref-type="fig" rid="bax092-F3">Figure 3</xref>). The uploading page shows the status of all the submitted uploading jobs and provide link to a page where users can view the details of each uploading job (<xref ref-type="fig" rid="bax092-F4">Figure 4</xref>). The MCL module loads data into Chado in three phases. First, data entry errors are checked. Examples of data entry errors include missing columns, missing data on required columns and misspelled column names. Second, data integrity is checked. For example, the marker names in the map_position template should already exist in Chado. If not, the loader returns an appropriate error message in the error log file. During the uploading phases, MCL creates several different log files such as error log file, new data log file and duplicate data log file which can be viewed in the job detail page (<xref ref-type="fig" rid="bax092-F4">Figure 4</xref>). MCL terminates loading if it finds a data entry or integrity error and outputs an error log so the user can fix the data (<xref ref-type="fig" rid="bax092-F4">Figure 4B</xref>). Users can re-run the job after fixing the data by submitting a corrected data file in the job detail page (<xref ref-type="fig" rid="bax092-F4">Figure 4C</xref>). Finally, after data entry and integrity checks, the data in the template is loaded into Chado. A new data log file shows all the new data that has been loaded and the duplicate log file shows any data in the template that already exist in the database (<xref ref-type="fig" rid="bax092-F4">Figure 4C</xref>). In addition to the web interface, a command-line interface is provided for site curators to automate loading via scripting if desired.</p>
      <fig id="bax092-F3" orientation="portrait" position="float">
        <label>Figure 3.</label>
        <caption>
          <p>Data uploading page of the MCL user interface. The uploading page shows the status of all the submitted uploading jobs and provides links to each job details page.</p>
        </caption>
        <graphic xlink:href="bax092f3"/>
      </fig>
      <fig id="bax092-F4" orientation="portrait" position="float">
        <label>Figure 4.</label>
        <caption>
          <p>Sections of an uploading job detail page in MCL. (<bold>A</bold>) A table shows the details of the uploading job. (<bold>B</bold>) A window that shows error logs. (<bold>C</bold>) A section where users can re-run the job after fixing any errors. New data logs show any new data that have been uploaded and the duplicate logs show any data in the template that already exist in the database.</p>
        </caption>
        <graphic xlink:href="bax092f4"/>
      </fig>
      <p>The admin interface is composed of five tabs: template type, template, user, variables and configuration. The template type tab allows the administrator to add a new template type and assign a rank. The rank specifies the order of loading to maintain referential integrity in Chado. The pre-specified rank allows data curators to load an Excel file with multiple data templates (e.g. contact, marker, map and map_position) without concerning the order of loading since MCL loads data based on the rank. The template tab allows administrators to choose the templates to be displayed in the user interface since not all the templates may be needed. In the user tab, an administrator can specify which users of the Drupal site can access the user interface for loading of templates. The variables tab allows the administrator to modify or add the site-wide controlled vocabularies that are used in the data templates. The configuration tab lets the administrator specify the MCL working directory and MCL library directory where files will be stored on the server during loading. Detailed instructions are available in the README document that accompanies the module. This module is available for download at <ext-link ext-link-type="uri" xlink:href="https://github.com/tripal/mainlab_chado_loader/releases/latest">https://github.com/tripal/mainlab_chado_loader/releases/latest</ext-link>.</p>
    </sec>
    <sec>
      <title>Mainlab Chado Search module</title>
      <p>The Mainlab Chado Search module provides comprehensive search pages for various types of data: genes, sequences, markers, germplasm, germplasm images, QTL, haplotype blocks, genetic maps, SSR genotypes, SNP genotypes and phenotypes. Once installed, each search page can be enabled or disabled in the admin page (<xref ref-type="fig" rid="bax092-F5">Figure 5</xref>). These search pages allow end-users to find data using a series of data filters and then download the results in popular file formats such as CSV and FASTA as appropriate. <xref ref-type="fig" rid="bax092-F6">Figure 6</xref> shows one example of a search page for genes and transcripts available on GDR. Users can search genes and transcripts by genus, species, dataset, aligned genome location, name and keyword (e.g. function or imputed function). The results are returned in a table with gene or transcript name, organism, type, dataset and genome location. Users can download the table in a CSV file, compatible with Excel or the sequences in a FASTA file. <xref ref-type="fig" rid="bax092-F7">Figure 7</xref> shows the marker search page available on GDR. Users can search markers by name, type, species, aligned genome positions, genetic map positions and associated trait names (<xref ref-type="fig" rid="bax092-F7">Figure 7</xref>). There is a separate search page for SNP markers where users can search SNP markers by name, SNP array name, anchored genome position (<xref ref-type="fig" rid="bax092-F8">Figure 8A</xref>) and the returned search results include name, aliases, array name, alleles, genome location and flanking sequences (<xref ref-type="fig" rid="bax092-F8">Figure 8B</xref>). There are also various other marker search pages where users can search markers by nearby markers, marker source information or mapped positions and obtain only those relevant data as a result, implemented in CottonGEN. <xref ref-type="fig" rid="bax092-F9">Figure 9</xref> shows the QTL search page, available on GDR. Users can search QTL or MTL by type, species, trait category, trait name, published symbol and/or label (<xref ref-type="fig" rid="bax092-F9">Figure 9</xref>). In the SSR or SNP genotype search page, users can search for genotype data. <xref ref-type="fig" rid="bax092-F10">Figure 10</xref> shows a SNP genotype search page, where users can search SNP genotype by dataset name, species, germplasm name, SNP name and/or genome location of the SNP. The returned search results show dataset name, germplasm, marker name and genotype (<xref ref-type="fig" rid="bax092-F10">Figure 10B</xref>). <xref ref-type="fig" rid="bax092-F11">Figure 11</xref> shows the search page for phenotype data in CottonGen. There are two tabs, one for quantitative traits and the other for qualitative traits. In each page, users can choose up to three trait names and the range of phenotypic values to obtain germplasm that has the specified phenotype (<xref ref-type="fig" rid="bax092-F11">Figure 11A</xref>). The returned search results show dataset name, germplasm, species and the trait values for the traits chosen (<xref ref-type="fig" rid="bax092-F11">Figure 11B</xref>).</p>
      <fig id="bax092-F5" orientation="portrait" position="float">
        <label>Figure 5.</label>
        <caption>
          <p>Mainlab Chado Search Admin page.</p>
        </caption>
        <graphic xlink:href="bax092f5"/>
      </fig>
      <fig id="bax092-F6" orientation="portrait" position="float">
        <label>Figure 6.</label>
        <caption>
          <p>Search page for genes and transcripts in GDR. Users can search genes and transcripts using various filters such as genus, species, dataset, aligned genome location, name and keyword.</p>
        </caption>
        <graphic xlink:href="bax092f6"/>
      </fig>
      <fig id="bax092-F7" orientation="portrait" position="float">
        <label>Figure 7.</label>
        <caption>
          <p>Search page for markers in GDR. Users can search markers by name, type, species, aligned genome positions, genetic map positions and associated trait names.</p>
        </caption>
        <graphic xlink:href="bax092f7"/>
      </fig>
      <fig id="bax092-F8" orientation="portrait" position="float">
        <label>Figure 8.</label>
        <caption>
          <p>Search page for SNP markers in GDR. (<bold>A</bold>) SNP marker search page where users can search SNPs by name, SNP array name and anchored genome position. (<bold>B</bold>) The returned search results include name, SNP array name, SNP array ID, aliases, alleles, genome location and flanking sequences.</p>
        </caption>
        <graphic xlink:href="bax092f8"/>
      </fig>
      <fig id="bax092-F9" orientation="portrait" position="float">
        <label>Figure 9.</label>
        <caption>
          <p>Search page for QTL in GDR. Users can search QTL or MTL by type, species, trait category, trait name, published symbol and/or label.</p>
        </caption>
        <graphic xlink:href="bax092f9"/>
      </fig>
      <fig id="bax092-F10" orientation="portrait" position="float">
        <label>Figure 10.</label>
        <caption>
          <p>Search page for SNP genotype. (<bold>A</bold>) Users can search SNP genotype by dataset name, species, germplasm name, SNP name and/or genome location of the SNP. (<bold>B</bold>) The returned search results show dataset name, germplasm, marker name and genotype.</p>
        </caption>
        <graphic xlink:href="bax092f10"/>
      </fig>
      <fig id="bax092-F11" orientation="portrait" position="float">
        <label>Figure 11.</label>
        <caption>
          <p>Search page for phenotype in CottonGEN. (<bold>A</bold>) There are two tabs, one for quantitative trait and the other for qualitative traits. In each page, users can choose up to three trait names and the range of phenotypic values to obtain germplasm that has the specified phenotype. (<bold>B</bold>) The returned search results show dataset name, germplasm, species and the trait values for the traits chosen.</p>
        </caption>
        <graphic xlink:href="bax092f11"/>
      </fig>
      <p>The Mainlab Chado Search module uses materialized views to improve the performance of queries. Materialized views are database tables used for aggregating data that would otherwise be too slow to query from Chado’s highly normalized tables. A materialized view</p>
      <p>thus improves the search performance, but also allows the site developer to use the search module when data may be stored in slightly different ways in Chado. The site developer would need to modify the query that populates the view to match their data storage strategy. The customization of materialized views is performed using an existing Tripal interface. Instructions for creating a new custom search page are provided to the site developers in the README document that accompanies the module. This module and user documentation are available for download at <ext-link ext-link-type="uri" xlink:href="https://github.com/tripal/chado_search/releases/latest">https://github.com/tripal/chado_search/releases/latest</ext-link>.</p>
    </sec>
    <sec>
      <title>Mainlab Tripal Chado Data Display module</title>
      <p>The Mainlab Tripal Chado Data Display module contains a set of Drupal template files that customize any page on a Drupal site including those provided by Drupal and Tripal. By default, Tripal provides template files for many data type pages. However, the template files provided by the Mainlab Tripal Chado Data Display module provides improved displays for some existing data types already supported by Tripal as well as other data types not directly supported. In total, this module supports improved or novel display of organisms, markers, polymorphisms, alleles, QTL, MTLs, germplasms, maps and projects. These templates provide more informative pages, especially when used in conjunction with the Chado Loader module and support more refined classification of a data type. For example, the Tripal core module comes with a single data template to display any entry from the feature table, regardless of feature type (<xref ref-type="fig" rid="bax092-F12">Figure 12A and B</xref>). This custom module provides templates for specific feature types providing better contextual links in the left panel. An example result is shown in <xref ref-type="fig" rid="bax092-F12">Figure 12C and D</xref> for marker and QTL, respectively.</p>
      <fig id="bax092-F12" orientation="portrait" position="float">
        <label>Figure 12.</label>
        <caption>
          <p>Sample pages from the Tripal core module and the Mainlab Tripal Chado Data Display module. (<bold>A</bold>) A marker page using the feature template from the Tripal core module. (<bold>B</bold>) A QTL page using the feature template from the Tripal core module. (<bold>C</bold>) A marker page using the marker template from the custom module. (<bold>D</bold>) A QTL page using the QTL template from the custom module.</p>
        </caption>
        <graphic xlink:href="bax092f12"/>
      </fig>
      <p>Once installed, site developers can disable any of these templates as appropriate for their database in the admin page (<xref ref-type="fig" rid="bax092-F13">Figure 13</xref>). The module supports over-riding built-in templates so site-specific customization is also supported. For customization, the site developer can copy and modify any template provided by this module and enable over-riding default templates in the admin page (<xref ref-type="fig" rid="bax092-F13">Figure 13</xref>). Detailed instructions are available in the README document that accompanies the module. This module and user documentation are available for download at <ext-link ext-link-type="uri" xlink:href="https://github.com/tripal/mainlab_tripal/releases/latest">https://github.com/tripal/mainlab_tripal/releases/latest</ext-link>.</p>
      <fig id="bax092-F13" orientation="portrait" position="float">
        <label>Figure 13.</label>
        <caption>
          <p>Mainlab Tripal Data Display admin page. Users can enable any templates and choose to over-ride default templates after site-specific modification.</p>
        </caption>
        <graphic xlink:href="bax092f13"/>
      </fig>
    </sec>
  </sec>
  <sec sec-type="discussion">
    <title>Discussion</title>
    <p>We reported here our database construction tools for storage, visualization and querying of genomic, genetic and breeding data, Chado Loader, Chado Data Display and Chado Search, which are extension modules of Tripal, a platform for development of online biological databases.</p>
    <p>Several data loaders are available in Tripal, such as the GFF3, FASTA, OBO, GAF, NCBI Taxonomy, publication and phylogenetic trees (in Newick format) loaders. Using these loaders, genome data can be loaded relatively easily into Chado and the default Tripal display templates can be used to display these genome data. While these loaders fulfill the needs for many common file formats, the Mainlab modules described here fill an important niche for data that has no standard file format. One other loader of importance is the Tripal bulk loader. This loader allows the site developer to create new loaders for data that are stored in simple tab delimited files. The loader is created using a web interface with no programming required. The Tripal bulk loader is helpful for site developers that have a good understanding of tables in Chado, their foreign key relationship and best practices for storing data. For such users, it can be relatively quick to create a new data loader. However, many of the data templates and loaders provided by the MCL module support data that is often too complex for the bulk loader.</p>
    <p>While migrating databases such as GDR and CottonGen to Tripal, the data loaders, search pages and data display templates that handle non-sequence data were converted to be compatible with the Tripal platform. While all of the tools provided by these three modules are related in scope, they are released as three separate modules so that site developers can choose the modules that they need. Within the modules, users can also enable a subset based on the data type they have and also modify them as needed. Communities, labs or individuals that need to build a new online database for genomic, genetic and breeding data can use Tripal and improve its support for these data by downloading and installing the three modules described here. Once installed, these new sites will instantly have data templates for collecting data, loaders to import the templates, as well as improved and customizable search and display pages. The project databases that adopted these modules as well as the Tripal core module include CuttingClass (<ext-link ext-link-type="uri" xlink:href="https://cuttingclass.stowers.org/find/genes">https://cuttingclass.stowers.org/find/genes</ext-link>) (<xref rid="bax092-B18" ref-type="bibr">18</xref>), Planosphere (<ext-link ext-link-type="uri" xlink:href="https://planosphere.stowers.org/find/genes">https://planosphere.stowers.org/find/genes</ext-link>) (<xref rid="bax092-B19" ref-type="bibr">19</xref>) and a private project database SIMRbase (<ext-link ext-link-type="uri" xlink:href="https://genomes.stowers.org">https://genomes.stowers.org</ext-link>).</p>
    <p>Future development of these modules includes improvement to data templates for additional metadata, more data templates and loaders as needed, improving search pages, adding more search pages and improving data display templates. The three extension modules are compatible with Chado versions v1.1x, v1.2x and v1.3x and Tripal versions of v2.0 and v2.1. Currently the beta version of Tripal v3.0 is available and the extension modules reported in this paper will be updated when new Tripal versions are released.</p>
  </sec>
  <sec sec-type="supplementary-material">
    <title>Supplementary Material</title>
    <supplementary-material content-type="local-data" id="sup1">
      <label>Supplementary Data</label>
      <media xlink:href="bax092_supp.xlsx">
        <caption>
          <p>Click here for additional data file.</p>
        </caption>
      </media>
    </supplementary-material>
  </sec>
</body>
<back>
  <ack>
    <title>Acknowledgements</title>
    <p>The authors acknowledge with thanks the Tripal and GMOD developer communities; the <italic>Rosaceae</italic>, cotton, Citrus, CSFL and Vaccinium research communities; and our federal, industry and university funding sources.</p>
  </ack>
  <sec>
    <title>Funding</title>
    <p>This work was supported by the USDA Specialty Crop Research Initiative Program [#2009-51181-06036 to D.M and S.J and #2014-51181-22376 to D.M and S.J]; USDA NIFA [NRSP10 to D.M.] the National Science Foundation [#1444573 to D.M. S.J and S.F.], Cotton Incorporated, Washington Tree Fruit Research Commission, the USA Dry Pea and Lentil Council and Washington State University.</p>
  </sec>
  <sec>
    <title>Supplementary data</title>
    <p><xref ref-type="supplementary-material" rid="sup1">Supplementary data</xref> are available at <italic>Database</italic> Online.</p>
    <p><italic>Conflict of interest</italic>. None declared.</p>
  </sec>
  <ref-list>
    <title>References</title>
    <ref id="bax092-B1">
      <label>1</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Sanderson</surname><given-names>L.A.</given-names></name>, <name name-style="western"><surname>Ficklin</surname><given-names>S.P.</given-names></name>, <name name-style="western"><surname>Cheng</surname><given-names>C.H.</given-names></name></person-group><etal/> (<year>2013</year>) <article-title>Tripal v1.1: a standards-based toolkit for construction of online genetic and genomic databases</article-title>. <source>Database (Oxford)</source>, <volume>2013</volume>, bat075.</mixed-citation>
    </ref>
    <ref id="bax092-B2">
      <label>2</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Ficklin</surname><given-names>S.P.</given-names></name>, <name name-style="western"><surname>Sanderson</surname><given-names>L.A.</given-names></name>, <name name-style="western"><surname>Cheng</surname><given-names>C.H.</given-names></name></person-group><etal/> (<year>2011</year>) <article-title>Tripal: a construction toolkit for online genome databases</article-title>. <source>Database (Oxford)</source>, <volume>2011</volume>, <fpage>bar044</fpage>.<pub-id pub-id-type="pmid">21959868</pub-id></mixed-citation>
    </ref>
    <ref id="bax092-B3">
      <label>3</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Mungall</surname><given-names>C.J.</given-names></name>, <name name-style="western"><surname>Emmert</surname><given-names>D.B.</given-names></name></person-group> and <collab>FlyBase Consortium</collab>. (<year>2007</year>) <article-title>A Chado case study: an ontology-based modular schema for representing genome-associated biological information</article-title>. <source>Bioinformatics</source>, <volume>23</volume>, <fpage>i337</fpage>–<lpage>i346</lpage>.<pub-id pub-id-type="pmid">17646315</pub-id></mixed-citation>
    </ref>
    <ref id="bax092-B4">
      <label>4</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Ficklin</surname><given-names>S.P.</given-names></name>, <name name-style="western"><surname>Feltus</surname><given-names>F.A.</given-names></name>, <name name-style="western"><surname>Zhang</surname><given-names>J.</given-names></name></person-group> (<year>2013</year>) <article-title>A systems-genetics approach and data mining tool to assist in the discovery of genes underlying complex traits in oryza sativa</article-title>. <source>PLoS One</source>, <volume>8</volume>, <fpage>e68551.</fpage><pub-id pub-id-type="pmid">23874666</pub-id></mixed-citation>
    </ref>
    <ref id="bax092-B5">
      <label>5</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Droc</surname><given-names>G.</given-names></name>, <name name-style="western"><surname>Larivière</surname><given-names>D.</given-names></name>, <name name-style="western"><surname>Guignon</surname><given-names>V.</given-names></name></person-group><etal/> (<year>2013</year>) <article-title>The banana genome hub</article-title>. <source>Database (Oxford)</source>, <volume>2013</volume>, <fpage>bat035.</fpage><pub-id pub-id-type="pmid">23707967</pub-id></mixed-citation>
    </ref>
    <ref id="bax092-B6">
      <label>6</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Yu</surname><given-names>J.</given-names></name>, <name name-style="western"><surname>Jung</surname><given-names>S.</given-names></name>, <name name-style="western"><surname>Cheng</surname><given-names>C.H.</given-names></name></person-group><etal/> (<year>2014</year>) <article-title>CottonGen: a genomics, genetics and breeding database for cotton research</article-title>. <source>Nucleic Acids Res</source>., <volume>42</volume>, <fpage>D1229</fpage>–<lpage>D1236</lpage>.<pub-id pub-id-type="pmid">24203703</pub-id></mixed-citation>
    </ref>
    <ref id="bax092-B7">
      <label>7</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Jung</surname><given-names>S.</given-names></name>, <name name-style="western"><surname>Ficklin</surname><given-names>S.P.</given-names></name>, <name name-style="western"><surname>Lee</surname><given-names>T.</given-names></name></person-group><etal/> (<year>2014</year>) <article-title>The genome database for Rosaceae (GDR): year 10 update</article-title>. <source>Nucleic Acids Res</source>., <volume>42</volume>, <fpage>D1237</fpage>–<lpage>D1244</lpage>.<pub-id pub-id-type="pmid">24225320</pub-id></mixed-citation>
    </ref>
    <ref id="bax092-B8">
      <label>8</label>
      <mixed-citation publication-type="book"><person-group person-group-type="author"><name name-style="western"><surname>Sanderson</surname><given-names>L.</given-names></name>, <name name-style="western"><surname>Vandenberg</surname><given-names>A.</given-names></name>, <name name-style="western"><surname>Taran</surname><given-names>B.</given-names></name></person-group><etal/> (<year>2015</year>) <chapter-title>KnowPulse: a breeder-focused web portal that integrates genetics and genomics of pulse crops with model genomes</chapter-title> In: <source>Plant and Animal Genome Conference</source>. <publisher-loc>San Diego, CA, USA</publisher-loc>.</mixed-citation>
    </ref>
    <ref id="bax092-B9">
      <label>9</label>
      <mixed-citation publication-type="book"><person-group person-group-type="author"><name name-style="western"><surname>Staton</surname><given-names>M.E.</given-names></name>, <name name-style="western"><surname>Henry</surname><given-names>N.</given-names></name>, <name name-style="western"><surname>Cook</surname><given-names>M.</given-names></name></person-group><etal/> (<year>2015</year>) <article-title>The hardwood genomics database: current status and future directions after four years of development</article-title>. In: <source>Plant and Animal Genome Conference</source>. <publisher-loc>San Diego, CA, USA</publisher-loc>.</mixed-citation>
    </ref>
    <ref id="bax092-B10">
      <label>10</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Poelchau</surname><given-names>M.</given-names></name>, <name name-style="western"><surname>Childers</surname><given-names>C.</given-names></name>, <name name-style="western"><surname>Moore</surname><given-names>G.</given-names></name></person-group><etal/> (<year>2015</year>) <article-title>The i5k Workspace@NAL–enabling genomic data access, visualization and curation of arthropod genomes</article-title>. <source>Nucleic Acids Res</source>., <volume>43</volume>, <fpage>D714</fpage>–<lpage>D719</lpage>.<pub-id pub-id-type="pmid">25332403</pub-id></mixed-citation>
    </ref>
    <ref id="bax092-B11">
      <label>11</label>
      <mixed-citation publication-type="other"><person-group person-group-type="author"><name name-style="western"><surname>Humann</surname><given-names>J.L.</given-names></name>, <name name-style="western"><surname>Jung</surname><given-names>S.</given-names></name>, <name name-style="western"><surname>Zheng</surname><given-names>P.</given-names></name></person-group><etal/> (<year>2016</year>) Cool season food legume genome database: an up-to-date resource enabling genetics, genomics and breeding research in pea, lentil, faba bean and chickpea. In: <italic>Plant and Animal Genome Conference</italic>. San Diego, CA, USA.</mixed-citation>
    </ref>
    <ref id="bax092-B12">
      <label>12</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Dash</surname><given-names>S.</given-names></name>, <name name-style="western"><surname>Campbell</surname><given-names>J.D.</given-names></name>, <name name-style="western"><surname>Cannon</surname><given-names>E.K.</given-names></name></person-group><etal/> (<year>2016</year>) <article-title>Legume information system (LegumeInfo. org): a key component of a set of federated data resources for the legume family</article-title>. <source>Nucleic Acids Res</source>., <volume>44</volume>, <fpage>D1181</fpage>–<lpage>D1188</lpage>.<pub-id pub-id-type="pmid">26546515</pub-id></mixed-citation>
    </ref>
    <ref id="bax092-B13">
      <label>13</label>
      <mixed-citation publication-type="other"><person-group person-group-type="author"><name name-style="western"><surname>Humann</surname><given-names>J.L.</given-names></name>, <name name-style="western"><surname>Piaskowski</surname><given-names>J.</given-names></name>, <name name-style="western"><surname>Jung</surname><given-names>S.</given-names></name></person-group><etal/> (<year>2017</year>) Resources in the Citrus Genome Database that enable basic, translational, and applied research. In: <italic>5th International Research Conference on Huanglongbing.</italic> Orlando, FL, USA.</mixed-citation>
    </ref>
    <ref id="bax092-B14">
      <label>14</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Gramates</surname><given-names>L.S.</given-names></name>, <name name-style="western"><surname>Marygold</surname><given-names>S.J.</given-names></name>, <name name-style="western"><surname>Santos</surname><given-names>G.D.</given-names></name></person-group> and <collab>the FlyBase Consortium</collab>, <etal/> (<year>2017</year>) <article-title>FlyBase at 25: looking to the future</article-title>. <source>Nucleic Acids Res</source>., <volume>45</volume>, <fpage>D663</fpage>–<lpage>D671</lpage>.<pub-id pub-id-type="pmid">27799470</pub-id></mixed-citation>
    </ref>
    <ref id="bax092-B15">
      <label>15</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Eilbeck</surname><given-names>K.</given-names></name>, <name name-style="western"><surname>Lewis</surname><given-names>S.E.</given-names></name>, <name name-style="western"><surname>Mungall</surname><given-names>C.J.</given-names></name></person-group><etal/> (<year>2005</year>) <article-title>The sequence ontology: a tool for the unification of genome annotations</article-title>. <source>Genome Biol</source>., <volume>6</volume>, <fpage>R44.</fpage><pub-id pub-id-type="pmid">15892872</pub-id></mixed-citation>
    </ref>
    <ref id="bax092-B16">
      <label>16</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Jung</surname><given-names>S.</given-names></name>, <name name-style="western"><surname>Menda</surname><given-names>N.</given-names></name>, <name name-style="western"><surname>Redmond</surname><given-names>S.</given-names></name></person-group><etal/> (<year>2011</year>) <article-title>The Chado natural diversity module: a new generic database schema for large-scale phenotyping and genotyping data</article-title>. <source>Database (Oxford)</source>, <volume>2011</volume>, <fpage>bar051.</fpage><pub-id pub-id-type="pmid">22120662</pub-id></mixed-citation>
    </ref>
    <ref id="bax092-B17">
      <label>17</label>
      <mixed-citation publication-type="other"><person-group person-group-type="author"><name name-style="western"><surname>Jung</surname><given-names>S.</given-names></name>, <name name-style="western"><surname>Lee</surname><given-names>T.</given-names></name>, <name name-style="western"><surname>Ficklin</surname><given-names>S.P.</given-names></name></person-group><etal/> (<year>2016</year>) Chado use case: storing genomic, genetic and breeding data of rosaceae and gossypium crops in chado. <italic>Database (Oxford)</italic>, <bold>2016</bold>, baw010.</mixed-citation>
    </ref>
    <ref id="bax092-B18">
      <label>18</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Accorsi</surname><given-names>A.</given-names></name>, <name name-style="western"><surname>Williams</surname><given-names>M.M.</given-names></name>, <name name-style="western"><surname>Ross</surname><given-names>E.J.</given-names></name></person-group><etal/> (<year>2017</year>) <article-title>Hands-on classroom activities for exploring regeneration and stem cell biology with planarians</article-title>. <source>Am. Biol. Teacher</source>, <volume>79</volume>, <fpage>208</fpage>–<lpage>223</lpage>.</mixed-citation>
    </ref>
    <ref id="bax092-B19">
      <label>19</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name name-style="western"><surname>Davies</surname><given-names>E.L.</given-names></name>, <name name-style="western"><surname>Lei</surname><given-names>K.</given-names></name>, <name name-style="western"><surname>Seidel</surname><given-names>C.W.</given-names></name></person-group><etal/> (<year>2017</year>) <article-title>Embryonic origin of adult stem cells required for tissue homeostasis and regeneration</article-title>. <source>eLife</source>, <volume>6</volume>, <fpage>e21052.</fpage><pub-id pub-id-type="pmid">28072387</pub-id></mixed-citation>
    </ref>
  </ref-list>
</back>
