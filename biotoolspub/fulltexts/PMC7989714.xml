<?properties open_access?>
<?DTDIdentifier.IdentifierValue -//Springer-Verlag//DTD A++ V2.4//EN?>
<?DTDIdentifier.IdentifierType public?>
<?SourceDTD.DTDName A++V2.4.dtd?>
<?SourceDTD.Version 2.4?>
<?ConverterInfo.XSLTName springer2nlmx2.xsl?>
<?ConverterInfo.Version 1?>
<front>
  <journal-meta>
    <journal-id journal-id-type="nlm-ta">Can J Public Health</journal-id>
    <journal-id journal-id-type="iso-abbrev">Can J Public Health</journal-id>
    <journal-title-group>
      <journal-title>Canadian Journal of Public Health = Revue Canadienne de Santé Publique</journal-title>
    </journal-title-group>
    <issn pub-type="ppub">0008-4263</issn>
    <issn pub-type="epub">1920-7476</issn>
    <publisher>
      <publisher-name>Springer International Publishing</publisher-name>
      <publisher-loc>Cham</publisher-loc>
    </publisher>
  </journal-meta>
  <article-meta>
    <article-id pub-id-type="pmcid">7989714</article-id>
    <article-id pub-id-type="pmid">33761108</article-id>
    <article-id pub-id-type="publisher-id">470</article-id>
    <article-id pub-id-type="doi">10.17269/s41997-020-00470-8</article-id>
    <article-categories>
      <subj-group subj-group-type="heading">
        <subject>Innovations in Policy and Practice</subject>
      </subj-group>
    </article-categories>
    <title-group>
      <article-title><italic>cchsflow</italic>: an open science approach to transform and combine population health surveys</article-title>
    </title-group>
    <contrib-group>
      <contrib contrib-type="author" corresp="yes">
        <contrib-id contrib-id-type="orcid">http://orcid.org/0000-0001-5571-8122</contrib-id>
        <name>
          <surname>Yusuf</surname>
          <given-names>Warsame</given-names>
        </name>
        <address>
          <email>waryusuf@ohri.ca</email>
        </address>
        <xref ref-type="aff" rid="Aff1">1</xref>
      </contrib>
      <contrib contrib-type="author">
        <contrib-id contrib-id-type="orcid">https://orcid.org/0000-0002-6700-0991</contrib-id>
        <name>
          <surname>Vyuha</surname>
          <given-names>Rostyslav</given-names>
        </name>
        <xref ref-type="aff" rid="Aff1">1</xref>
      </contrib>
      <contrib contrib-type="author">
        <contrib-id contrib-id-type="orcid">https://orcid.org/0000-0002-3033-9860</contrib-id>
        <name>
          <surname>Bennett</surname>
          <given-names>Carol</given-names>
        </name>
        <xref ref-type="aff" rid="Aff1">1</xref>
      </contrib>
      <contrib contrib-type="author">
        <contrib-id contrib-id-type="orcid">https://orcid.org/0000-0001-7456-6427</contrib-id>
        <name>
          <surname>Sequeira</surname>
          <given-names>Yulric</given-names>
        </name>
        <xref ref-type="aff" rid="Aff1">1</xref>
      </contrib>
      <contrib contrib-type="author">
        <name>
          <surname>Maskerine</surname>
          <given-names>Courtney</given-names>
        </name>
        <xref ref-type="aff" rid="Aff1">1</xref>
        <xref ref-type="aff" rid="Aff2">2</xref>
      </contrib>
      <contrib contrib-type="author">
        <contrib-id contrib-id-type="orcid">https://orcid.org/0000-0003-0912-0845</contrib-id>
        <name>
          <surname>Manuel</surname>
          <given-names>Douglas G.</given-names>
        </name>
        <xref ref-type="aff" rid="Aff1">1</xref>
        <xref ref-type="aff" rid="Aff2">2</xref>
        <xref ref-type="aff" rid="Aff3">3</xref>
        <xref ref-type="aff" rid="Aff4">4</xref>
        <xref ref-type="aff" rid="Aff5">5</xref>
      </contrib>
      <aff id="Aff1"><label>1</label><institution-wrap><institution-id institution-id-type="GRID">grid.412687.e</institution-id><institution-id institution-id-type="ISNI">0000 0000 9606 5108</institution-id><institution>Ottawa Hospital Research Institute, </institution></institution-wrap>Civic Campus, ASB 2-012, 1053 Carling Avenue, Ottawa, ON K1Y 4E9 Canada </aff>
      <aff id="Aff2"><label>2</label><institution-wrap><institution-id institution-id-type="GRID">grid.28046.38</institution-id><institution-id institution-id-type="ISNI">0000 0001 2182 2255</institution-id><institution>Department of Family Medicine, </institution><institution>University of Ottawa, </institution></institution-wrap>Ottawa, Ontario Canada </aff>
      <aff id="Aff3"><label>3</label>ICES, Ottawa and Toronto, Ottawa, Ontario Canada </aff>
      <aff id="Aff4"><label>4</label><institution-wrap><institution-id institution-id-type="GRID">grid.413850.b</institution-id><institution-id institution-id-type="ISNI">0000 0001 2097 5698</institution-id><institution>Statistics Canada, </institution></institution-wrap>Ottawa, Ontario Canada </aff>
      <aff id="Aff5"><label>5</label><institution-wrap><institution-id institution-id-type="GRID">grid.28046.38</institution-id><institution-id institution-id-type="ISNI">0000 0001 2182 2255</institution-id><institution>School of Epidemiology, Public Health and Preventive Medicine, </institution><institution>University of Ottawa, </institution></institution-wrap>Ottawa, Ontario Canada </aff>
    </contrib-group>
    <pub-date pub-type="epub">
      <day>24</day>
      <month>3</month>
      <year>2021</year>
    </pub-date>
    <pub-date pub-type="pmc-release">
      <day>24</day>
      <month>3</month>
      <year>2021</year>
    </pub-date>
    <pub-date pub-type="collection">
      <month>8</month>
      <year>2021</year>
    </pub-date>
    <volume>112</volume>
    <issue>4</issue>
    <fpage>714</fpage>
    <lpage>721</lpage>
    <history>
      <date date-type="received">
        <day>7</day>
        <month>7</month>
        <year>2020</year>
      </date>
      <date date-type="accepted">
        <day>22</day>
        <month>12</month>
        <year>2020</year>
      </date>
    </history>
    <permissions>
      <copyright-statement>© The Author(s) 2021</copyright-statement>
      <license>
        <ali:license_ref specific-use="textmining" content-type="ccbylicense">https://creativecommons.org/licenses/by/4.0/</ali:license_ref>
        <license-p><bold>Open Access</bold> This article is licensed under a Creative Commons Attribution 4.0 International License, which permits use, sharing, adaptation, distribution and reproduction in any medium or format, as long as you give appropriate credit to the original author(s) and the source, provide a link to the Creative Commons licence, and indicate if changes were made. The images or other third party material in this article are included in the article's Creative Commons licence, unless indicated otherwise in a credit line to the material. If material is not included in the article's Creative Commons licence and your intended use is not permitted by statutory regulation or exceeds the permitted use, you will need to obtain permission directly from the copyright holder. To view a copy of this licence, visit <ext-link ext-link-type="uri" xlink:href="https://creativecommons.org/licenses/by/4.0/">http://creativecommons.org/licenses/by/4.0/</ext-link>.</license-p>
      </license>
    </permissions>
    <abstract id="Abs1">
      <sec>
        <title>Setting</title>
        <p id="Par1">The Canadian Community Health Survey (CCHS) is one of the world’s largest ongoing cross-sectional population health surveys, with over 130,000 respondents every two years or over 1.1 million respondents since its inception in 2001. While the survey remains relatively consistent over the years, there are differences between cycles that pose a challenge to analyze the survey over time.</p>
      </sec>
      <sec>
        <title>Intervention</title>
        <p id="Par2">A program package called <italic>cchsflow</italic> was developed to transform and harmonize CCHS variables to consistent formats across multiple survey cycles. An open science approach was used to maintain transparency, reproducibility and collaboration.</p>
      </sec>
      <sec>
        <title>Outcomes</title>
        <p id="Par3">The <italic>cchsflow</italic> R package uses CCHS survey data between 2001 and 2014. Worksheets were created that identify variables, their names in previous cycles, their category structure, and their final variable names. These worksheets were then used to recode variables in each CCHS cycle into consistently named and labelled variables. Following, survey cycles can be combined. The package was then added as a GitHub repository to encourage collaboration with other researchers.</p>
      </sec>
      <sec>
        <title>Implication</title>
        <p id="Par4">The <italic>cchsflow</italic> package has been added to the Comprehensive R Archive Network (CRAN) and contains support for over 160 CCHS variables, generating a combined data set of over 1 million respondents. By implementing open science practices, <italic>cchsflow</italic> aims to minimize the amount of time needed to clean and prepare data for the many CCHS users across Canada.</p>
      </sec>
    </abstract>
    <trans-abstract xml:lang="fr" id="Abs2">
      <title>Résumé</title>
      <sec>
        <title>Contexte</title>
        <p id="Par5">L’Enquête sur la santé dans les collectivités canadiennes (ESCC) est l’une des plus grandes enquêtes transversales sur la santé de la population, avec plus de 130 000 sondés tous les deux ans et plus de 1,1 million de sondés depuis son début en 2001. Tant que l’enquête reste relativement cohérent, il y a des différences entre des cycles qui posent une challenge majeure pour analyser l’enquête au fil du temps.</p>
      </sec>
      <sec>
        <title>Intervention</title>
        <p id="Par6">Un paquet de programme appelé <italic>cchsflow</italic> a été développé pour transformer et harmoniser les variables CCHS aux formats cohérents à travers plusieurs cycles de sondage. Une approche de science ouverte était utilisée pour maintenir la transparence, la reproductibilité et la collaboration.</p>
      </sec>
      <sec>
        <title>Résultats</title>
        <p id="Par7">Le paquet <italic>cchsflow</italic> R développé utilisait les données d’enquête de l’ESCC entre 2001 et 2014. Les feuilles de calcul ont été créées pour identifier des variables, leurs noms dans des cycles précédents, leurs structures de catégories et leurs noms de variables finales. Ces feuilles de calcul ont ensuite été utilisées pour recoder les variables dans chaque cycle de l’ESCC pour générer les ensembles de données harmonisés qui peuvent être combiner dans un ensemble de données constamment étiqueté pour l’analyse. Le paquet a ensuite été ajouté comme un entrepôt de GitHub pour encourager la collaboration avec les autres chercheurs.</p>
      </sec>
      <sec>
        <title>Implication</title>
        <p id="Par8">Le paquet <italic>cchsflow</italic> a été ajouté au Comprehensive R Archive Network (CRAN) et contient un appui pour plus de 160 variables de l’ESCC, générant un ensemble de données de plus d’un million de sondés. En exécutant les pratiques de sciences ouvertes, <italic>cchsflow</italic> vise à minimiser le temps requis pour nettoyer et préparer les données pour les plusieurs utilisateurs du CCHS à travers le Canada.</p>
      </sec>
    </trans-abstract>
    <kwd-group xml:lang="en">
      <title>Keywords</title>
      <kwd>Health surveys</kwd>
      <kwd>Data analysis</kwd>
      <kwd>Data science</kwd>
      <kwd>Population health</kwd>
    </kwd-group>
    <kwd-group xml:lang="fr">
      <title>Mots-clés</title>
      <kwd>Enquêtes de santé</kwd>
      <kwd>analyse des données</kwd>
      <kwd>science des données</kwd>
      <kwd>santé de la population</kwd>
    </kwd-group>
    <funding-group>
      <award-group>
        <funding-source>
          <institution-wrap>
            <institution-id institution-id-type="FundRef">http://dx.doi.org/10.13039/501100000024</institution-id>
            <institution>Canadian Institutes of Health Research</institution>
          </institution-wrap>
        </funding-source>
        <award-id>162222</award-id>
        <principal-award-recipient>
          <name>
            <surname>Manuel</surname>
            <given-names>Douglas G.</given-names>
          </name>
        </principal-award-recipient>
      </award-group>
    </funding-group>
    <custom-meta-group>
      <custom-meta>
        <meta-name>issue-copyright-statement</meta-name>
        <meta-value>© The Canadian Public Health Association 2021</meta-value>
      </custom-meta>
    </custom-meta-group>
  </article-meta>
</front>
<body>
  <sec id="Sec1">
    <title>Introduction</title>
    <p id="Par9"><disp-quote><p id="Par10">You are a public health epidemiologist who would like to report the change in body mass index (BMI) in your health unit over the past 15 years. You review the codebook for the Canadian Community Health Survey (CCHS) and note that BMI is collected. BMI <italic>seems</italic> like a straightforward measure that is routinely collected worldwide (Statistics Canada <xref ref-type="bibr" rid="CR27">2001</xref>). Indeed, BMI is included in all CCHS cycles. You examine the documentation and find the variable HWTAGBMI in the CCHS 2001 corresponds to body mass index, but that in other cycles, the variable name changes to HWTCGBMI, HWTDGBMI, HWTEGBMI, etc. On reading the documentation, you notice that some cycles round the value to one decimal, whereas other cycles round to two digits. Furthermore, some cycles don’t calculate BMI for respondents under the age of 20 or over the age of 64 years. Also, some cycles calculate BMI only if height and weight are within specific ranges.</p><p id="Par11">After spending hours on the task, you talk with a colleague in a neighbouring health unit. They did the same task a few years ago. You share your Stata code by email and compare notes, only to realize that you both had different approaches, each with errors.</p></disp-quote>A process called <italic>cchsflow</italic> was created to minimize the amount of time public health epidemiologists and others spend cleaning and transforming CCHS variables across multiple survey cycles. An open science approach was sought for the development of <italic>cchsflow</italic>. Open science is the movement to improve research reproducibility, accessibility, and collaboration (Ross and Krumholz <xref ref-type="bibr" rid="CR26">2013</xref>). Public health practice strives for these qualities and, therefore, the field can potentially benefit from the same tools that are used to support open science. An example of the open science toolkit is versioning software and cloud-based repositories such as GitHub and GitLab that allow people to collaborate and share programming code.</p>
    <p id="Par12">Currently, <italic>cchsflow</italic> harmonizes 160 variables for 1,092,951 survey respondents of the CCHS Public Use Microdata File (PUMF) from 2001 to 2014. <italic>cchsflow</italic> uses open science tools to allow users the ability to contribute to the package, including making suggestions and requests, and to identify errors. People can also “fork” the package, meaning they can use the <italic>cchsflow</italic> approach to harmonize other databases. <italic>cchsflow</italic> uses R language package since R is the most commonly used open statistical programming language. The core of <italic>cchsflow</italic>, however, are reference files that could be used in other programming languages.</p>
    <p id="Par13">Even this paper was created using the open science principles. This paper was written using R Markdown—a notebook that allows R code to be executed within a document. Both the <italic>cchsflow</italic> R package and this paper’s notebook are available on <ext-link ext-link-type="uri" xlink:href="https://github.com/Big-Life-Lab/cchsflow/blob/paper-writeups/papers/CJPH/cjph-paper.Rmd">GitHub</ext-link> which allows readers to make comments and suggestions or note errors. Readers can execute or modify all examples in this paper in R.</p>
  </sec>
  <sec id="Sec2">
    <title>Background</title>
    <sec id="Sec3">
      <title>Cleaning and transforming CCHS data</title>
      <p id="Par14">Data cleaning, including transforming variables into harmonized or common variables, is typically the most time-consuming part of data analyses. According to Dasu and Johnson, 80% of data analysis is spent on data cleaning (Dasu and Johnson <xref ref-type="bibr" rid="CR6">2003</xref>). With the CCHS, data cleaning and harmonization issues arise when combining CCHS surveys. Currently, there is no standardized method or tool used to combine CCHS survey cycles. Health units across Canada that use the CCHS do their own data cleaning and preparation, taking time away from other data analysis.</p>
    </sec>
    <sec id="Sec4">
      <title>Open science and its benefits to public health practice</title>
      <p id="Par15">Open science is defined as “transparent and accessible knowledge that is shared and developed through collaborative networks” (Vicente-Saez and Martinez-Fuentes <xref ref-type="bibr" rid="CR30">2018</xref>). Included in open science is: open data, data that are publicly accessible such as the CCHS with Statistics Canada’s new Open Licence (Statistics Canada <xref ref-type="bibr" rid="CR28">2020</xref>); open source, the use of open access programs such as data science languages including R, Python and Julia; and open methodology, program code that is publicly accessible and shared through online repositories (McKiernan et al. <xref ref-type="bibr" rid="CR20">2016</xref>; Stodden et al. <xref ref-type="bibr" rid="CR29">2013</xref>). In public health, there has been a marked trend toward open data and sharing code—notably during the COVID-19 pandemic (Moorthy et al. <xref ref-type="bibr" rid="CR21">2020</xref>).</p>
      <p id="Par16">Adopting open science practices comes with well-described benefits (Donoho <xref ref-type="bibr" rid="CR8">2017</xref>; Hicks and Irizarry <xref ref-type="bibr" rid="CR10">2018</xref>). McKiernan et al. found that open science is associated with increased research exposure in both media and in citations; and an increase in collaboration, funding, and job opportunities (McKiernan et al. <xref ref-type="bibr" rid="CR20">2016</xref>). For public health professionals, an open science approach and toolkit facilitates collaboration as it allows for data and coding methods to be shared between different health units. Additional benefits include improved transparency, accessibility, and efficiency, reduced coding errors, and faster analyses. As in other sectors, public health practitioners can use open science tools to potentially improve and compress many time-consuming, repetitive, and inconsistent analysis tasks. In light of the COVID-19 pandemic, open science allows public health researchers to quickly aggregate and analyze data across many health units to guide policy-makers in making informed public health decisions.</p>
    </sec>
  </sec>
  <sec id="Sec5">
    <title>Methods</title>
    <p id="Par17"><italic>cchsflow</italic> follows the approach of the Open Source Initiative and open software for research. The developers of <italic>cchsflow</italic> are public health researchers who collaborate with federal, provincial and local public health units. <italic>cchsflow </italic>was developed following publication of several peer-reviewed reports created with Public Health Ontario, ICES and the Ontario Public Health Association (Journal of Open Source Software <xref ref-type="bibr" rid="CR11">2018</xref>; Manuel et al. <xref ref-type="bibr" rid="CR13">2012</xref>; Open Source Initiative <xref ref-type="bibr" rid="CR24">2020</xref>). One of the developers of <italic>cchsflow</italic> (DGM) is a part-time employee at Statistics Canada. The <italic>cchsflow</italic> package is not a Statistics Canada product, nor is the package supported by Statistics Canada. However, analysts at Statistics Canada use <italic>cchsflow</italic> and have contributed to variable transformations.</p>
    <p id="Par18">The package currently supports the first 10 cycles of the CCHS PUMF surveys from 2001 to 2014, in which the variables of each were harmonized and transformed to use the same set of variables. In <italic>cchsflow</italic>, variables were renamed to the variable names used in CCHS cycles from 2007 to 2014.</p>
    <p id="Par19">Many variables in <italic>cchsflow</italic> are used in peer-reviewed studies of our development team and other researchers (Manuel et al., <xref ref-type="bibr" rid="CR13">2012</xref>, <xref ref-type="bibr" rid="CR14">2016</xref>, <xref ref-type="bibr" rid="CR15">2018</xref>, <xref ref-type="bibr" rid="CR16">2020a</xref>). Occupation variables, for example, were incorporated from peer-reviewed occupation studies (Nowrouzi-Kia et al. <xref ref-type="bibr" rid="CR22">2019</xref>). Depression variables are an example of variables for which there was not consistent use in peer-reviewed literature, but which were added in consultation with mental health researchers. Open discussion with the mental health researchers is included in the package development (<ext-link ext-link-type="uri" xlink:href="https://github.com/Big-Life-Lab/cchsflow/pull/64">https://github.com/Big-Life-Lab/cchsflow/pull/64</ext-link> ). Anyone can participate in the discussions when new variables are added. <italic>cchsflow</italic> was created in R with provisions to support other program languages such as Stata or SAS.</p>
    <sec id="Sec6">
      <title>Selection of variables</title>
      <p id="Par20">Variables included in <italic>cchsflow</italic> fall into three categories: health behaviours, socio-demographic information, and health status. At the time of writing, there are 160 variables, 30 subjects and 6 sections. There are provisions and instructions on how users can contribute or request the addition of new variables.</p>
      <p id="Par21">Health behaviours variables include smoking, alcohol, diet, and physical activity (Conner and Norman <xref ref-type="bibr" rid="CR4">2017</xref>). There are derived variables such as smoking pack-years (pack_years_der) that are not available in the original CCHS data files.</p>
      <p id="Par22">Socio-demographic variables include age, sex, immigration status, country of birth, time spent in Canada, ethnicity, education (individual and highest family), income (adjusted for province and inflation), home ownership, and marital status. Harmonized occupation variables were created (LBFA_31A, LBFA_31A_A and LBFA_31A_B) by reviewing studies that used the CCHS to study occupation (Nowrouzi-Kia et al. <xref ref-type="bibr" rid="CR22">2019</xref>). References to these papers are included in the notes section of the variable transformation.</p>
      <p id="Par23">Health status variables include chronic disease, the Health Utility Index, need for help for activities of daily living (ADL), mental health, and other measures. There is a new derived variable for the number of ADL requiring assistance (ADL_score_5) that is not available in the original CCHS data.</p>
    </sec>
    <sec id="Sec7">
      <title>Variable mapping</title>
      <p id="Par24">CCHS variables were transformed across 10 survey cycles. For many variables, the only difference between cycles was their variable name. As such, only a name change was required to standardize a variable across the 10 cycles.</p>
      <p id="Par25">Changes in the number and type of categories were also common. For example, in the 2001 and 2003 CCHS survey cycles, there were 15 age categories; while in CCHS survey cycles from 2005 to 2014, there were 16 age categories. There were two options for such variable category changes. The first option was to create a harmonized variable by collapsing categories into common forms. The second option was to maintain separate variables. For age, a third option was also added to maximize age information by deriving a new continuous age variable, one that takes the midpoint of each age category for all cycles.</p>
      <p id="Par26">There were also changes to question wording, missing categories, and inclusion and exclusion criteria. Variables were not included in all cycles or all health regions. Harmonized variables were included when there was a consensus among developers that the differences across cycles were small. <italic>Notes</italic> were included when any difference was identified, with a default to print all notes during transformations.</p>
    </sec>
    <sec id="Sec8">
      <title>Transformation of variables through specification worksheets</title>
      <p id="Par27">Two worksheets are included in the <italic>cchsflow</italic> packages that contain variable information and metadata: <italic>variables.csv</italic> specifies all the variables in the package and <italic>variable_details.csv</italic> specifies CCHS data that contain the variables, the variable type, and the category structure.</p>
      <p id="Par28"><italic>cchsflow</italic> was created using the <italic>recodeflow</italic> R package—also developed by the authors. Within <italic>recodeflow</italic>, the <italic>rec_with_table()</italic> function—short for “recode with table”—transforms variables. <italic>rec_with_table()</italic> uses the two worksheets to create a transformed data from a CCHS cycle. Once all CCHS survey cycles have been transformed, they can be combined to create one large transformed data set that spans across the 10 CCHS survey cycles. The two CSV worksheets also have variable labels and other metadata that can be added to the data using the <italic>rec_with_table()</italic> function.</p>
    </sec>
    <sec id="Sec9">
      <title>Derived variables</title>
      <p id="Par29">CCHS includes derived variables that were created using multiple responses and variables. BMI is an example of an original CCHS derived variable that was calculated using self-reported height and weight. Several new derived variables were included, such as smoking pack-years, binge drinking, and diet pattern (Manuel et al. <xref ref-type="bibr" rid="CR14">2016</xref>). There are provisions and instructions for adding additional derived variables.</p>
    </sec>
    <sec id="Sec10">
      <title>Documentation</title>
      <p id="Par30">Open source, web-based documentation is available at <ext-link ext-link-type="uri" xlink:href="https://big-life-lab.github.io/cchsflow/">https://big-life-lab.github.io/cchsflow/</ext-link>, and includes a searchable reference of all transformations, vignettes with examples of how to perform transformations, collaboration principles, and a development roadmap.</p>
    </sec>
  </sec>
  <sec id="Sec11">
    <title>Results</title>
    <p id="Par31">The <italic>cchsflow</italic> package is available on the Comprehensive R Archive Network (CRAN), a network of servers that contain documentation for R packages (Manuel et al. <xref ref-type="bibr" rid="CR18">2020c</xref>). The package contains the following items: the <italic>variables.csv</italic> worksheet, the <italic>variable_details.csv</italic> worksheet, the various functions, and subsets of 200 respondents for each CCHS cycle. Figure <xref rid="Fig1" ref-type="fig">1</xref> illustrates how variables were added to <italic>cchsflow</italic>, while Figure <xref rid="Fig2" ref-type="fig">2</xref> illustrates the homepage of the <italic>cchsflow</italic> package at <ext-link ext-link-type="uri" xlink:href="https://big-life-lab.github.io/cchsflow/">https://big-life-lab.github.io/cchsflow/</ext-link>. </p>
    <p id="Par32">Figure <xref rid="Fig3" ref-type="fig">3a</xref> illustrates the command line to install the CRAN version of <italic>cchsflow</italic>, while Figure <xref rid="Fig3" ref-type="fig">3b</xref> illustrates the command to install the development version of <italic>cchsflow</italic>, which is a more up-to-date version of the package.<fig id="Fig1"><label>Fig. 1</label><caption><p>Flowchart of how CCHS variables were added to <italic>cchsflow</italic>. Users can add variables using the same approach</p></caption><graphic xlink:href="41997_2020_470_Fig1_HTML" id="MO1"/></fig></p>
    <sec id="Sec12">
      <title>Recode with table</title>
      <p id="Par33">The <italic>rec_with_table()</italic> function is used to recode or transform variables based on the information from the two specification worksheets. The function has the ability to transform an entire data set, or a subset of variables. Figure <xref rid="Fig4" ref-type="fig">4a</xref> illustrates how to load the <italic>cchsflow</italic> package and the 2001 CCHS data, and then transform all variables in <italic>cchsflow</italic> to their harmonized version. The <italic>cchsflow</italic> package comes with a subsample of CCHS data for 2001 to 2014 versions, made possible with Statistics Canada new Open Licence (Statistics Canada <xref ref-type="bibr" rid="CR28">2020</xref>). Figure <xref rid="Fig4" ref-type="fig">4b</xref> illustrates how to transform a subset of variables from the 2001 survey cycle.<fig id="Fig2"><label>Fig. 2</label><caption><p>The homepage for the <italic>cchsflow</italic> website</p></caption><graphic xlink:href="41997_2020_470_Fig2_HTML" id="MO2"/></fig><fig id="Fig3"><label>Fig. 3</label><caption><p><bold>a</bold> The command line to install the <italic>cchsflow</italic> package that is currently saved on CRAN. <bold>b</bold> The command line to install the development version of <italic>cchsflow</italic> from GitHub</p></caption><graphic xlink:href="41997_2020_470_Fig3_HTML" id="MO3"/></fig><fig id="Fig4"><label>Fig. 4</label><caption><p><bold>a</bold> The command lines to load the <italic>cchsflow</italic> package, load the 2001 CCHS PUMF data and then transform all the variables in the worksheets using the <italic>rec_with_table()</italic> function. <bold>b</bold> The command lines to transform the sex &amp; age variables using the <italic>rec_with_table()</italic> function</p></caption><graphic xlink:href="41997_2020_470_Fig4_HTML" id="MO4"/></fig></p>
    </sec>
  </sec>
  <sec id="Sec13">
    <title>Discussion</title>
    <p id="Par34"><italic>cchsflow </italic>harmonizes and transforms CCHS data from 2001 to 2014 (Manuel et al. <xref ref-type="bibr" rid="CR18">2020c</xref>). <italic>cchsflow</italic> provides public health epidemiologists and others the ability to more robustly analyze over 1 million respondents across a 13-year period to examine trends in health indicators. The use of an open science approach improves collaboration, transparency, and efficiency when transforming variables. The package allows public health professionals who use CCHS to spend less time on data cleaning and spend more time on analysis such as surveillance and health status reporting.</p>
    <sec id="Sec14">
      <title>Comparison to other projects</title>
      <p id="Par35">A consistent approach to calculate health indicators is a long-standing public health goal. <italic>cchsflow</italic> uses an open science approach to build from and support several health-related indicator and harmonization projects that use CCHS data, including the Canadian Institute for Health Information indicator library, the Public Health Agency of Canada health inequality reports, and Ontario’s Public Health Indicator Working Group (Association of Public Health Epidemiologists in Ontario <xref ref-type="bibr" rid="CR1">2018</xref>; Canadian Institute for Health Information <xref ref-type="bibr" rid="CR3">2020</xref>; Pan-Canadian Public Health Network <xref ref-type="bibr" rid="CR25">2018</xref>). These initiatives typically include the definition of indicators, but it is uncommon to publish how to calculate indicators using CCHS data, especially across CCHS cycles.</p>
      <p id="Par36">Observational Health Data Sciences and Informatics (OHDSI) is an open science network that creates a common dictionary and software tools to support studies across different information systems (ODESI <xref ref-type="bibr" rid="CR23">2020</xref>). The focus of OHDSI is hospital data. Investigators in different hospitals generate their own code to harmonize their hospital data into common, standard definitions.</p>
      <p id="Par37"><italic>cchsflow</italic> facilitates the use of CCHS metadata that come with the survey but are not commonly used by public health practitioners (Manuel and Fisher <xref ref-type="bibr" rid="CR12">2019</xref>). The CCHS comes with Data Documentation Initiative (DDI) metadata. DDI metadata are used worldwide for over ten thousand different surveys and research projects (Data Documentation Initiative (DDI) <xref ref-type="bibr" rid="CR7">2020</xref>). There are also initiatives such as Maelstrom that are used by other Canadian health surveys to improve the use of metadata (Bergeron et al. <xref ref-type="bibr" rid="CR2">2018</xref>). Metadata are increasingly recognized as helpful data infrastructure to support open science and data harmonization. Metadata are “data about data” and include information about variable and category labels, variable types, and provenance (how the data were collected and transformed) (McGilvray <xref ref-type="bibr" rid="CR19">2008</xref>).</p>
      <p id="Par38">Barriers to using metadata in public health include the lack of well-organized metadata in public health data and the lack of metadata analysis tools such as <italic>cchsflow</italic>. It is commendable that DDI documents are included with CCHS, but not all metadata are included or consistent. Variable transformation is robustly supported in newer versions of DDI that are not yet available for the CCHS. <italic>cchsflow</italic> uses DDI documents to create the worksheets with the added benefit of harmonizing and transforming metadata across CCHS cycles. <italic>cchsflow</italic> also supports the use of Predictive Model Markup Language (PMML) (Grossman et al. <xref ref-type="bibr" rid="CR9">1999</xref>). The Project Big Life team uses <italic>cchsflow</italic>’s PMML metadata in public health planning tools (Manuel et al. <xref ref-type="bibr" rid="CR16">2020a</xref>).</p>
    </sec>
    <sec id="Sec15">
      <title>Limitations and challenges</title>
      <p id="Par39">While the CCHS has many consistent variables across survey cycles, there are differences between cycles that can be irreconcilable or difficult to harmonize. Within <italic>cchsflow</italic>, variables with irreconcilable differences were either transformed into a new derived variable or kept as separate variables that can only be used in select cycles. Along with variables with differences, there are variables in <italic>cchsflow</italic> that were not asked in all CCHS cycles. This means that for some variables, data do not span across the length of the CCHS cycles available in <italic>cchsflow</italic>. A possible solution is to impute missing variables, where missing data are replaced with values based on other respondents and responses to other variables.</p>
      <p id="Par40">Care must be taken to understand how specific variable transformation and harmonization with <italic>cchsflow</italic> affects each use of CCHS data. Across survey cycles, almost all CCHS variables have had at least some change in wording and category responses. Furthermore, there have been changes in survey sampling, response rates, weighting methods and other survey design changes that affect responses. Combining CCHS data across survey cycles will result in misclassification error and other forms of bias that affect studies in different ways.</p>
    </sec>
    <sec id="Sec16">
      <title>Collaboration with other users</title>
      <p id="Par41">Collaboration is facilitated using GitHub, the most popular online code repository with over 45 million users. GitHub is based on the Git version-control system which, in turn, is a cornerstone of open software development (Dabbish et al. <xref ref-type="bibr" rid="CR5">2012</xref>).</p>
      <p id="Par42">The open-access approach <italic>cchsflow</italic> allows users to add other CCHS variables that might benefit others. There is full transparency on how the package was developed with the entire source code for the package publicly accessible. Along with being transparent, sourcing the <italic>cchsflow</italic> package on GitHub offers users of the package the opportunity to provide feedback on how to further improve the package. In the <ext-link ext-link-type="uri" xlink:href="https://github.com/Big-Life-Lab/cchsflow/issues">issues section</ext-link> of the GitHub repository, users can submit bug reports where they can identify issues they are encountering while using the package. Users can also request variables to be added or add new variable transformations themselves. New variables are added using a “pull request” that is then reviewed by the package maintainers before being merged with the main <italic>cchsflow</italic> package. All <italic>cchsflow</italic> documentation (including this paper write-up) are also open access and available on the GitHub repository.</p>
      <p id="Par43">GitHub provides benefit to users in that it allows them an opportunity to implement better practices in their own code (Dabbish et al. <xref ref-type="bibr" rid="CR5">2012</xref>). The implementation of GitHub in the development of <italic>cchsflow</italic> allows public health professionals across Canada to collaborate and share potential variables that can be useful for health surveillance and health status reporting. Projects that examine health surveillance and health status reporting such as the Public Health Agency of Canada health inequality reports (Pan-Canadian Public Health Network <xref ref-type="bibr" rid="CR25">2018</xref>) can benefit from <italic>cchsflow</italic>’s repository of harmonized variables.</p>
    </sec>
    <sec id="Sec17">
      <title>Roadmap</title>
      <p id="Par44">A roadmap, also known as next steps or future plans, is recommended for open software projects. <italic>cchsflow</italic> includes a roadmap and milestones on the <ext-link ext-link-type="uri" xlink:href="https://github.com/Big-Life-Lab/cchsflow/projects">project website</ext-link>. At the time of writing, the roadmap includes adding the “share” version of CCHS that is used in Statistics Canada Regional Data Centres and other settings, the ability to compare variable frequency across survey cycles, and improved metadata support. <italic>cchsflow</italic> has been forked by related projects to support other data sets. The expanded use of <italic>cchsflow</italic> for related projects is a hallmark of open science and a demonstration of how open science leads to expanded science and public health resources.</p>
    </sec>
  </sec>
  <sec id="Sec18">
    <title>Conclusion</title>
    <p id="Par45"><italic>cchsflow</italic>’s open science approach allows public health professionals to collaborate and share their work with other colleagues, saving time spent on recoding and cleaning health data. By implementing open science practices, <italic>cchsflow</italic> aims to minimize the amount of time needed to clean and prepare CCHS data for the many CCHS users in health units across Canada.</p>
  </sec>
</body>
<back>
  <fn-group>
    <fn>
      <p>
        <bold>Publisher’s note</bold>
      </p>
      <p>Springer Nature remains neutral with regard to jurisdictional claims in published maps and institutional affiliations.</p>
    </fn>
  </fn-group>
  <notes notes-type="author-contribution">
    <title>Author contributions</title>
    <p>All authors contributed to the study conception and design. Data collection, variable selection, and software development were performed by Warsame Yusuf, Douglas G. Manuel, Rostyslav Vyuha, Carol Bennett, Yulric Sequeira, and Courtney Maskerine. The first draft of the manuscript was written by Warsame Yusuf and Douglas G. Manuel, and all authors commented on previous versions of the manuscript. All authors have read and approved the final manuscript.</p>
  </notes>
  <notes notes-type="funding-information">
    <title>Funding</title>
    <p>This study was funded by CIHR (FRN 162222).</p>
  </notes>
  <notes notes-type="ethics">
    <title>Compliance with ethical standards</title>
    <notes id="FPar1" notes-type="COI-statement">
      <title>Conflict of interest</title>
      <p id="Par46">The authors declare that they have no conflict of interest.</p>
    </notes>
  </notes>
  <ref-list id="Bib1">
    <title>References</title>
    <ref id="CR1">
      <mixed-citation publication-type="other">Association of Public Health Epidemiologists in Ontario. (2018). <italic>Core Indicators Work Group</italic>. <ext-link ext-link-type="uri" xlink:href="https://www.apheo.ca/core-indicators-work-group.">https://www.apheo.ca/core-indicators-work-group.</ext-link></mixed-citation>
    </ref>
    <ref id="CR2">
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Bergeron</surname>
            <given-names>J</given-names>
          </name>
          <name>
            <surname>Doiron</surname>
            <given-names>D</given-names>
          </name>
          <name>
            <surname>Marcon</surname>
            <given-names>Y</given-names>
          </name>
          <name>
            <surname>Ferretti</surname>
            <given-names>V</given-names>
          </name>
          <name>
            <surname>Fortier</surname>
            <given-names>I</given-names>
          </name>
        </person-group>
        <article-title>Fostering population-based cohort data discovery: The maelstrom research cataloguing toolkit</article-title>
        <source>PLoS One</source>
        <year>2018</year>
        <volume>13</volume>
        <issue>7</issue>
        <fpage>e0200926</fpage>
        <pub-id pub-id-type="doi">10.1371/journal.pone.0200926</pub-id>
        <?supplied-pmid 30040866?>
        <pub-id pub-id-type="pmid">30040866</pub-id>
      </element-citation>
    </ref>
    <ref id="CR3">
      <mixed-citation publication-type="other">Canadian Institute for Health Information. (2020). <italic>Indicator Library</italic>. <ext-link ext-link-type="uri" xlink:href="https://indicatorlibrary.cihi.ca/display/HSPIL/Indicator+Library?desktop=true&amp;_ga=2.214437141.328439497.1597831848-1908179218.1597831848">https://indicatorlibrary.cihi.ca/display/HSPIL/Indicator+Library?desktop=true&amp;_ga=2.214437141.328439497.1597831848-1908179218.1597831848</ext-link>.</mixed-citation>
    </ref>
    <ref id="CR4">
      <element-citation publication-type="book">
        <person-group person-group-type="author">
          <name>
            <surname>Conner</surname>
            <given-names>M</given-names>
          </name>
          <name>
            <surname>Norman</surname>
            <given-names>P</given-names>
          </name>
        </person-group>
        <source>Health behaviour: Current issues and challenges</source>
        <year>2017</year>
      </element-citation>
    </ref>
    <ref id="CR5">
      <mixed-citation publication-type="other">Dabbish, L., Stuart, C., Tsay, J., &amp; Herbsleb, J. (2012). <italic>Social coding in GitHub: transparency and collaboration in an open software repository</italic>. CSCW: Proceedings of the ACM 2012 conference on Computer Supported Cooperative Work. 10.1145/2145204.2145396.</mixed-citation>
    </ref>
    <ref id="CR6">
      <element-citation publication-type="book">
        <person-group person-group-type="author">
          <name>
            <surname>Dasu</surname>
            <given-names>T</given-names>
          </name>
          <name>
            <surname>Johnson</surname>
            <given-names>T</given-names>
          </name>
        </person-group>
        <source>Exploratory data mining and data cleaning</source>
        <year>2003</year>
      </element-citation>
    </ref>
    <ref id="CR7">
      <mixed-citation publication-type="other">Data Documentation Initiative (DDI). (2020). <italic>Document, Discover and Interoperate</italic>. <ext-link ext-link-type="uri" xlink:href="https://ddialliance.org/.">https://ddialliance.org/.</ext-link></mixed-citation>
    </ref>
    <ref id="CR8">
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Donoho</surname>
            <given-names>D</given-names>
          </name>
        </person-group>
        <article-title>50 years of data science</article-title>
        <source>J Comput Graph Stat</source>
        <year>2017</year>
        <volume>26</volume>
        <issue>4</issue>
        <fpage>745</fpage>
        <lpage>766</lpage>
        <pub-id pub-id-type="doi">10.1080/10618600.2017.1384734</pub-id>
      </element-citation>
    </ref>
    <ref id="CR9">
      <mixed-citation publication-type="other">Grossman, R., Bailey, S., Ramu, A., Malhi, B., Hallstrom, P., Pulleyn, I., &amp; Qin, X. (1999). Management and mining of multiple predictive models using the predictive modeling markup language. <italic>Inf Softw Technol</italic>. 10.1016/S0950-5849(99)00022-1.</mixed-citation>
    </ref>
    <ref id="CR10">
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Hicks</surname>
            <given-names>SC</given-names>
          </name>
          <name>
            <surname>Irizarry</surname>
            <given-names>RA</given-names>
          </name>
        </person-group>
        <article-title>A guide to teaching data science</article-title>
        <source>Am Stat</source>
        <year>2018</year>
        <volume>72</volume>
        <issue>4</issue>
        <fpage>382</fpage>
        <lpage>391</lpage>
        <pub-id pub-id-type="doi">10.1080/00031305.2017.1356747</pub-id>
        <pub-id pub-id-type="pmid">31105314</pub-id>
      </element-citation>
    </ref>
    <ref id="CR11">
      <mixed-citation publication-type="other">Journal of Open Source Software. (2018). <italic>Journal of Open Source Software</italic>. <ext-link ext-link-type="uri" xlink:href="https://joss.readthedocs.io/en/latest/index.html.">https://joss.readthedocs.io/en/latest/index.html.</ext-link></mixed-citation>
    </ref>
    <ref id="CR12">
      <mixed-citation publication-type="other">Manuel, D., &amp; Fisher, S. (2019). <italic>A toolkit has emerged to support open science for health service and policy research. </italic>Presented at the convention for Canadian Society for Epidemiology and Biostatistics. Ottawa, Canada.</mixed-citation>
    </ref>
    <ref id="CR13">
      <mixed-citation publication-type="other">Manuel, D. G., Perez, R., Bennett, C., Rosella, L., Taljaard, M., Roberts, M., … Manson, H. (2012). <italic>Seven more years: The impact of smoking, alcohol, diet, physical activity and stress on health and life expectancy in Ontario.</italic> [report]. Institute for Clinical Evaluative Sciences; Public Health Ontario. <ext-link ext-link-type="uri" xlink:href="https://www.ices.on.ca/Publications/Atlases-and-Reports/2012/Seven-More-Years.">https://www.ices.on.ca/Publications/Atlases-and-Reports/2012/Seven-More-Years.</ext-link></mixed-citation>
    </ref>
    <ref id="CR14">
      <mixed-citation publication-type="other">Manuel, D. G., Perez, R., Sanmartin, C., Taljaard, M., Hennessy, D., Wilson, K., et al. (2016). Measuring burden of unhealthy behaviours using a multivariable predictiveapproach: life expectancy lost in Canada attributable to smoking, alcohol, physical inactivity, and diet. <italic>PLoS Medicine</italic>. 10.1371/journal.pmed.1002082.</mixed-citation>
    </ref>
    <ref id="CR15">
      <mixed-citation publication-type="other">Manuel, D. G., Tuna, M., Bennett, C., Hennessy, D., Rosella, L., Sanmartin, C., et al. (2018). Development and validation of a cardiovascular disease risk-prediction model using population health surveys: the cardiovascular disease population risk tool (cvdport). <italic>CMAJ, 190</italic>(29), E871–e882. 10.1503/cmaj.170914.</mixed-citation>
    </ref>
    <ref id="CR16">
      <mixed-citation publication-type="other">Manuel, D. G., Wilton, A. S., Bennett, C., Dass, R., Laporte, A., &amp; Holford, T. R. (2020a). Smoking patterns based on birth-cohort-specific histories from 1965 to 2013, with projections to 2041. <italic>Health Rep, 31</italic>(11), 16–31.</mixed-citation>
    </ref>
    <ref id="CR17">
      <mixed-citation publication-type="other">Manuel, D. G., Bailey, L., Sequeria, Y., &amp; Bennett, C. (2020b). <italic>Project Biglife Planning Tool Guide</italic>. <ext-link ext-link-type="uri" xlink:href="https://big-life-lab.github.io/pbl-planning-tool-guide/.">https://big-life-lab.github.io/pbl-planning-tool-guide/.</ext-link></mixed-citation>
    </ref>
    <ref id="CR18">
      <mixed-citation publication-type="other">Manuel, D., Yusuf, W., Vyuha, R., &amp; Bennett, C. (2020c). <italic>cchsflow: Transforming and harmonizing cchs variables</italic>. <ext-link ext-link-type="uri" xlink:href="https://github.com/Big-Life-Lab/cchsflow.">https://github.com/Big-Life-Lab/cchsflow.</ext-link></mixed-citation>
    </ref>
    <ref id="CR19">
      <mixed-citation publication-type="other">McGilvray, D. (2008). <italic>Executing data quality projects: Ten steps to quality data and trusted information (tm)</italic>. Elsevier.</mixed-citation>
    </ref>
    <ref id="CR20">
      <element-citation publication-type="book">
        <person-group person-group-type="author">
          <name>
            <surname>McKiernan</surname>
            <given-names>EC</given-names>
          </name>
          <name>
            <surname>Bourne</surname>
            <given-names>PE</given-names>
          </name>
          <name>
            <surname>Brown</surname>
            <given-names>CT</given-names>
          </name>
          <name>
            <surname>Buck</surname>
            <given-names>S</given-names>
          </name>
          <name>
            <surname>Kenall</surname>
            <given-names>A</given-names>
          </name>
          <name>
            <surname>Lin</surname>
            <given-names>J</given-names>
          </name>
          <etal/>
        </person-group>
        <source>How open science helps researchers succeed</source>
        <year>2016</year>
      </element-citation>
    </ref>
    <ref id="CR21">
      <mixed-citation publication-type="other">Moorthy, V., Restrepo, A. M. H., Preziosi, M.-P., &amp; Swaminathan, S. (2020). Data sharing for novel coronavirus (Covid-19). <italic>Bull World Health Organ, 98</italic>(3), 150.</mixed-citation>
    </ref>
    <ref id="CR22">
      <mixed-citation publication-type="other">Nowrouzi-Kia, B., Baig, A., Li, A., Casole, J., &amp; Chai, E. (2019). Occupational injury trends in the Canadian workforce: An examination of the Canadian Community Health Survey. <italic>International Journal of Critical Illness and Injury Science, 9</italic>(1), 29.</mixed-citation>
    </ref>
    <ref id="CR23">
      <mixed-citation publication-type="other">ODESI. (2020). <italic>Ontario Data Documentation, Extraction Service and Infrastructure</italic>. <ext-link ext-link-type="uri" xlink:href="https://odesi.ca">https://odesi.ca</ext-link></mixed-citation>
    </ref>
    <ref id="CR24">
      <mixed-citation publication-type="other">Open Source Initiative. (2020). <italic>Open Source Initiative</italic>. <ext-link ext-link-type="uri" xlink:href="https://opensource.org/.">https://opensource.org/.</ext-link></mixed-citation>
    </ref>
    <ref id="CR25">
      <mixed-citation publication-type="other">Pan-Canadian Public Health Network. (2018). Key health inequalities in Canada: a national portrait.</mixed-citation>
    </ref>
    <ref id="CR26">
      <element-citation publication-type="book">
        <person-group person-group-type="author">
          <name>
            <surname>Ross</surname>
            <given-names>JS</given-names>
          </name>
          <name>
            <surname>Krumholz</surname>
            <given-names>HM</given-names>
          </name>
        </person-group>
        <source>Ushering in a new era of open science through data sharing: The wall must come down</source>
        <year>2013</year>
      </element-citation>
    </ref>
    <ref id="CR27">
      <mixed-citation publication-type="other">Statistics Canada. (2001). <italic>CCHS Cycle 1.1 (2000-2001), Public Use Microdata File Documentation</italic> (p. 77).</mixed-citation>
    </ref>
    <ref id="CR28">
      <mixed-citation publication-type="other">Statistics Canada. (2020). <italic>Statistics Canada Open Licence</italic>. <ext-link ext-link-type="uri" xlink:href="https://www.statcan.gc.ca/eng/reference/licence.">https://www.statcan.gc.ca/eng/reference/licence.</ext-link></mixed-citation>
    </ref>
    <ref id="CR29">
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Stodden</surname>
            <given-names>V</given-names>
          </name>
          <name>
            <surname>Guo</surname>
            <given-names>P</given-names>
          </name>
          <name>
            <surname>Ma</surname>
            <given-names>Z</given-names>
          </name>
        </person-group>
        <article-title>Toward reproducible computational research: An empirical analysis of data and code policy adoption by journals</article-title>
        <source>PLoS One</source>
        <year>2013</year>
        <volume>8</volume>
        <issue>6</issue>
        <fpage>2</fpage>
        <lpage>9</lpage>
        <pub-id pub-id-type="doi">10.1371/journal.pone.0067111</pub-id>
      </element-citation>
    </ref>
    <ref id="CR30">
      <mixed-citation publication-type="other">Vicente-Saez, R., &amp; Martinez-Fuentes, C. (2018). Open Science now: A systematic literature review for an integrated definition. <italic>J Bus Res</italic>. 10.1016/j.jbusres.2017.12.043.</mixed-citation>
    </ref>
  </ref-list>
</back>
