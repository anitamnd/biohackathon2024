<?DTDIdentifier.IdentifierValue http://null/schema/dtds/document/fulltext/xcr/xocs-article.xsd?>
<?DTDIdentifier.IdentifierType schema?>
<?SourceDTD.DTDName xocs-article.xsd?>
<?SourceDTD.Version 1.0?>
<?ConverterInfo.XSLTName ftrr2jats.xsl?>
<?ConverterInfo.Version 1?>
<?origin publisher?>
<processing-meta base-tagset="archiving" mathml-version="3.0" table-model="xhtml" tagset-family="jats">
  <restricted-by>pmc</restricted-by>
</processing-meta>
<front>
  <journal-meta>
    <journal-id journal-id-type="nlm-ta">Comput Methods Programs Biomed</journal-id>
    <journal-id journal-id-type="iso-abbrev">Comput Methods Programs Biomed</journal-id>
    <journal-title-group>
      <journal-title>Computer Methods and Programs in Biomedicine</journal-title>
    </journal-title-group>
    <issn pub-type="ppub">0169-2607</issn>
    <issn pub-type="epub">1872-7565</issn>
    <publisher>
      <publisher-name>The Author(s). Published by Elsevier B.V.</publisher-name>
    </publisher>
  </journal-meta>
  <article-meta>
    <article-id pub-id-type="pmcid">8420135</article-id>
    <article-id pub-id-type="pii">S0169-2607(21)00468-5</article-id>
    <article-id pub-id-type="doi">10.1016/j.cmpb.2021.106394</article-id>
    <article-id pub-id-type="publisher-id">106394</article-id>
    <article-categories>
      <subj-group subj-group-type="heading">
        <subject>Article</subject>
      </subj-group>
    </article-categories>
    <title-group>
      <article-title>A standardized analytics pipeline for reliable and rapid development and validation of prediction models using observational health data</article-title>
    </title-group>
    <contrib-group>
      <contrib contrib-type="author" id="au0001">
        <name>
          <surname>Khalid</surname>
          <given-names>Sara</given-names>
        </name>
        <xref rid="aff0001" ref-type="aff">a</xref>
        <xref rid="fn1" ref-type="fn">1</xref>
      </contrib>
      <contrib contrib-type="author" id="au0002">
        <name>
          <surname>Yang</surname>
          <given-names>Cynthia</given-names>
        </name>
        <xref rid="aff0002" ref-type="aff">b</xref>
        <xref rid="fn1" ref-type="fn">1</xref>
      </contrib>
      <contrib contrib-type="author" id="au0003">
        <name>
          <surname>Blacketer</surname>
          <given-names>Clair</given-names>
        </name>
        <xref rid="aff0003" ref-type="aff">c</xref>
      </contrib>
      <contrib contrib-type="author" id="au0004">
        <name>
          <surname>Duarte-Salles</surname>
          <given-names>Talita</given-names>
        </name>
        <xref rid="aff0004" ref-type="aff">d</xref>
      </contrib>
      <contrib contrib-type="author" id="au0005">
        <name>
          <surname>Fernández-Bertolín</surname>
          <given-names>Sergio</given-names>
        </name>
        <xref rid="aff0004" ref-type="aff">d</xref>
      </contrib>
      <contrib contrib-type="author" id="au0006">
        <name>
          <surname>Kim</surname>
          <given-names>Chungsoo</given-names>
        </name>
        <xref rid="aff0005" ref-type="aff">e</xref>
      </contrib>
      <contrib contrib-type="author" id="au0007">
        <name>
          <surname>Park</surname>
          <given-names>Rae Woong</given-names>
        </name>
        <xref rid="aff0005" ref-type="aff">e</xref>
        <xref rid="aff0006" ref-type="aff">f</xref>
      </contrib>
      <contrib contrib-type="author" id="au0008">
        <name>
          <surname>Park</surname>
          <given-names>Jimyung</given-names>
        </name>
        <xref rid="aff0005" ref-type="aff">e</xref>
      </contrib>
      <contrib contrib-type="author" id="au0009">
        <name>
          <surname>Schuemie</surname>
          <given-names>Martijn J.</given-names>
        </name>
        <xref rid="aff0003" ref-type="aff">c</xref>
      </contrib>
      <contrib contrib-type="author" id="au0010">
        <name>
          <surname>Sena</surname>
          <given-names>Anthony G.</given-names>
        </name>
        <xref rid="aff0002" ref-type="aff">b</xref>
        <xref rid="aff0003" ref-type="aff">c</xref>
      </contrib>
      <contrib contrib-type="author" id="au0011">
        <name>
          <surname>Suchard</surname>
          <given-names>Marc A.</given-names>
        </name>
        <xref rid="aff0007" ref-type="aff">g</xref>
      </contrib>
      <contrib contrib-type="author" id="au0012">
        <name>
          <surname>You</surname>
          <given-names>Seng Chan</given-names>
        </name>
        <xref rid="aff0008" ref-type="aff">h</xref>
      </contrib>
      <contrib contrib-type="author" id="au0013">
        <name>
          <surname>Rijnbeek</surname>
          <given-names>Peter R.</given-names>
        </name>
        <xref rid="aff0002" ref-type="aff">b</xref>
        <xref rid="PC_fn7nHNKTkK1g" ref-type="fn">2</xref>
      </contrib>
      <contrib contrib-type="author" id="au0014">
        <name>
          <surname>Reps</surname>
          <given-names>Jenna M.</given-names>
        </name>
        <xref rid="aff0003" ref-type="aff">c</xref>
        <xref rid="PC_fn7nHNKTkK1g" ref-type="fn">2</xref>
        <xref rid="cor0001" ref-type="corresp">⁎</xref>
      </contrib>
      <aff id="aff0001"><label>a</label>Botnar Research Centre, Centre for Statistics in Medicine, Nuffield Department of Orthopaedics Rheumatology and Musculoskeletal Sciences (NDORMS), University of Oxford, Oxford, UK.</aff>
      <aff id="aff0002"><label>b</label>Department of Medical Informatics, Erasmus University Medical Center, Rotterdam, the Netherlands</aff>
      <aff id="aff0003"><label>c</label>Observational Health Data Analytics, Janssen Research and Development, Titusville, NJ, USA</aff>
      <aff id="aff0004"><label>d</label>Fundació Institut Universitari per a la recerca a ľAtenció Primària de Salut Jordi Gol i Gurina (IDIAPJGol), Barcelona, Spain</aff>
      <aff id="aff0005"><label>e</label>Department of Biomedical Sciences, Ajou University Graduate School of Medicine, Suwon, Republic of Korea</aff>
      <aff id="aff0006"><label>f</label>Department of Biomedical Informatics, Ajou University School of Medicine, Suwon, Republic of Korea</aff>
      <aff id="aff0007"><label>g</label>Departments of Biomathematics, University of California, Los Angeles, USA</aff>
      <aff id="aff0008"><label>h</label>Department of Preventive Medicine and Public Health, Yonsei University College of Medicine, Republic of Korea</aff>
    </contrib-group>
    <author-notes>
      <corresp id="cor0001"><label>⁎</label>Corresponding author.</corresp>
      <fn id="fn1">
        <label>1</label>
        <p id="notep0001">These authors contributed equally to this work as co-first authors.</p>
      </fn>
      <fn id="PC_fn7nHNKTkK1g">
        <label>2</label>
        <p id="notep00021">These authors contributed equally to this work as co-last authors.</p>
      </fn>
    </author-notes>
    <pub-date pub-type="pmc-release">
      <day>6</day>
      <month>9</month>
      <year>2021</year>
    </pub-date>
    <!-- PMC Release delay is 0 months and 0 days and was based on <pub-date
						pub-type="epub">.-->
    <pub-date pub-type="ppub">
      <month>11</month>
      <year>2021</year>
    </pub-date>
    <pub-date pub-type="epub">
      <day>6</day>
      <month>9</month>
      <year>2021</year>
    </pub-date>
    <volume>211</volume>
    <fpage>106394</fpage>
    <lpage>106394</lpage>
    <history>
      <date date-type="received">
        <day>18</day>
        <month>3</month>
        <year>2021</year>
      </date>
      <date date-type="accepted">
        <day>30</day>
        <month>8</month>
        <year>2021</year>
      </date>
    </history>
    <permissions>
      <copyright-statement>© 2021 The Author(s). Published by Elsevier B.V.</copyright-statement>
      <copyright-year>2021</copyright-year>
      <copyright-holder/>
      <license>
        <license-p>Since January 2020 Elsevier has created a COVID-19 resource centre with free information in English and Mandarin on the novel coronavirus COVID-19. The COVID-19 resource centre is hosted on Elsevier Connect, the company's public news and information website. Elsevier hereby grants permission to make all its COVID-19-related research that is available on the COVID-19 resource centre - including this research content - immediately available in PubMed Central and other publicly funded repositories, such as the WHO COVID database with rights for unrestricted research re-use and analyses in any form or by any means with acknowledgement of the original source. These permissions are granted for free by Elsevier for as long as the COVID-19 resource centre remains active.</license-p>
      </license>
    </permissions>
    <abstract id="abs0002">
      <sec>
        <title>Background and objective</title>
        <p>As a response to the ongoing COVID-19 pandemic, several prediction models in the existing literature were rapidly developed, with the aim of providing evidence-based guidance. However, none of these COVID-19 prediction models have been found to be reliable. Models are commonly assessed to have a risk of bias, often due to insufficient reporting, use of non-representative data, and lack of large-scale external validation. In this paper, we present the Observational Health Data Sciences and Informatics (OHDSI) analytics pipeline for patient-level prediction modeling as a standardized approach for rapid yet reliable development and validation of prediction models. We demonstrate how our analytics pipeline and open-source software tools can be used to answer important prediction questions while limiting potential causes of bias (<italic>e.g.</italic>, by validating phenotypes, specifying the target population, performing large-scale external validation, and publicly providing all analytical source code).</p>
      </sec>
      <sec>
        <title>Methods</title>
        <p>We show step-by-step how to implement the analytics pipeline for the question: ‘In patients hospitalized with COVID-19, what is the risk of death 0 to 30 days after hospitalization?’. We develop models using six different machine learning methods in a USA claims database containing over 20,000 COVID-19 hospitalizations and externally validate the models using data containing over 45,000 COVID-19 hospitalizations from South Korea, Spain, and the USA.</p>
      </sec>
      <sec>
        <title>Results</title>
        <p>Our open-source software tools enabled us to efficiently go end-to-end from problem design to reliable Model Development and evaluation. When predicting death in patients hospitalized with COVID-19, AdaBoost, random forest, gradient boosting machine, and decision tree yielded similar or lower internal and external validation discrimination performance compared to L1-regularized logistic regression, whereas the MLP neural network consistently resulted in lower discrimination. L1-regularized logistic regression models were well calibrated.</p>
      </sec>
      <sec>
        <title>Conclusion</title>
        <p>Our results show that following the OHDSI analytics pipeline for patient-level prediction modelling can enable the rapid development towards reliable prediction models. The OHDSI software tools and pipeline are open source and available to researchers from all around the world.</p>
      </sec>
    </abstract>
    <kwd-group id="keys0001">
      <title>Keywords</title>
      <kwd>COVID-19</kwd>
      <kwd>Data harmonization</kwd>
      <kwd>Data quality control</kwd>
      <kwd>Distributed data network</kwd>
      <kwd>Machine learning</kwd>
      <kwd>Risk prediction</kwd>
    </kwd-group>
  </article-meta>
</front>
<body>
  <sec id="sec0001">
    <label>1</label>
    <title>Introduction</title>
    <p id="para0009"><sc>THE</sc> COVID-19 pandemic continues to cause unprecedented pressure on healthcare systems worldwide, and many casualties at a global scale <xref rid="bib0001" ref-type="bibr">[1]</xref>. Due to the urgency of the COVID-19 pandemic there was increased pressure to efficiently develop COVID-19 prediction models. Unfortunately, model reliability was often compromised in order to rapidly develop models. Despite guidelines on developing and reporting of prediction models <xref rid="bib0002" ref-type="bibr">[2]</xref>, there are several common problems identified in published COVID-19 prediction models including uncertain data quality, unclear target setting, lack of large-scale external validation, and insufficient reporting <xref rid="bib0003" ref-type="bibr">[3]</xref>, <xref rid="bib0004" ref-type="bibr">[4]</xref>, <xref rid="bib0005" ref-type="bibr">[5]</xref>, <xref rid="bib0006" ref-type="bibr">[6]</xref>.</p>
    <p id="para0010">This motivates the need for a standardized approach for rapid yet reliable development and validation of prediction models, one that allows researchers to address various sources of bias. For instance, such an approach should ensure that the data used are representative of the population for which the developed prediction model is intended to be used in clinical practice, and that the quality of the phenotypes used is investigated and transparently reported.</p>
    <p id="para0011">Observational Health Data Sciences and Informatics (OHDSI) is an international, multi-stakeholder collaboration that has developed open-source solutions for large-scale analytics <xref rid="bib0007" ref-type="bibr">[7]</xref>. The OHDSI community has used these open-source solutions to generate observational evidence for COVID-19 and has impacted international clinical guidelines <xref rid="bib0008" ref-type="bibr">[8]</xref>, <xref rid="bib0009" ref-type="bibr">[9]</xref>, <xref rid="bib0010" ref-type="bibr">[10]</xref>, <xref rid="bib0011" ref-type="bibr">[11]</xref>, <xref rid="bib0012" ref-type="bibr">[12]</xref>, <xref rid="bib0013" ref-type="bibr">[13]</xref>, <xref rid="bib0014" ref-type="bibr">[14]</xref>, <xref rid="bib0015" ref-type="bibr">[15]</xref>, <xref rid="bib0016" ref-type="bibr">[16]</xref>, <xref rid="bib0017" ref-type="bibr">[17]</xref>, <xref rid="bib0018" ref-type="bibr">[18]</xref>, <xref rid="bib0019" ref-type="bibr">[19]</xref>, <xref rid="bib0020" ref-type="bibr">[20]</xref>, <xref rid="bib0021" ref-type="bibr">[21]</xref>, <xref rid="bib0022" ref-type="bibr">[22]</xref>.</p>
    <p id="para0012">In this paper, we demonstrate the OHDSI analytics pipeline for patient-level prediction modeling (henceforth also referred to as “pipeline” or “prediction pipeline”) as a standardized approach for reliable and rapid development and validation of prediction models. We show that our pipeline makes it possible to develop prediction models rapidly without compromising model reliability. The main contributions of our work are summarized as follows:<list list-type="simple" id="celist0002"><list-item id="celistitem0004"><label>(1)</label><p id="para0013"><italic>Reliable and rapid research.</italic></p></list-item></list>
</p>
    <p id="para0014">OHDSI implements a distributed data network strategy where no patient-level data are shared. Instead, the analytical source code is shared publicly, run by data partners on their data, and only aggregated results are shared with the study coordinator. Such a strategy has proven to enable international collaborative research while providing various advantages <xref rid="bib0023" ref-type="bibr">[23]</xref>. Key advantages of OHDSI's distributed data network strategy that are particularly relevant for the current pandemic are:<list list-type="simple" id="celist0003"><list-item id="celistitem0005"><label>•</label><p id="para0016"><italic>Reliable research</italic> The use of open-source software tools and publicly shared analytical source code, along with extensive documentation makes studies conducted with the same analysis within this distributed data network fully <italic>reproducible</italic> (<italic>i.e.</italic>, same data, same results), as well as <italic>replicable</italic> (<italic>i.e.</italic>, similar data, similar results).</p></list-item><list-item id="celistitem0007"><label>•</label><p id="para0017"><italic>Rapid research</italic> To improve the interoperability of originally heterogenous observational data sources (<italic>e.g.</italic>, electronic healthcare records (EHRs), administrative claims), they are mapped to a common data model (CDM). The use of an established CDM enables standardized approaches for data curation and enables standardized analytics pipelines to generate results much faster [<xref rid="bib0014" ref-type="bibr">14</xref>,<xref rid="bib0024" ref-type="bibr">24</xref>,<xref rid="bib0025" ref-type="bibr">25</xref>]. In addition, the data standardization enables the ability to externally validate models at scale to investigate how reliable the models are across different case-mixes.</p></list-item><list-item id="celistitem0008"><label>(2)</label><p id="para0018"><italic>Analysis of COVID-19 data from multiple countries around the world.</italic></p></list-item></list>
</p>
    <p id="para0019">In March 2020, the OHDSI community began contributing to generating observational evidence for COVID-19 with data from around the world. By November 2020, there were 22 databases (including EHRs, administrative claims, primary and secondary care databases) in the OHDSI network that incorporated COVID-19 data - 11 from North America, 8 from Europe, and 3 representing Asia-Pacific (<xref rid="fig0001" ref-type="fig">Fig. 1</xref>
). In total, the mapped data included:<list list-type="simple" id="celist0005"><list-item id="celistitem0009"><label>•</label><p id="para0020">7.4 million patients tested for severe acute respiratory syndrome coronavirus 2 (SARS-CoV-2).</p></list-item><list-item id="celistitem0010"><label>•</label><p id="para0021">1.6 million patients diagnosed or tested positive for COVID-19.</p></list-item><list-item id="celistitem0011"><label>•</label><p id="para0022">300,000 patients hospitalized with COVID-19.</p></list-item></list>
<fig id="fig0001"><label>Fig. 1</label><caption><p>The OHDSI distributed data network. As of November 2020, it includes 22 sites spread across North America, Europe, and Asia that have COVID-19 patient data mapped to the Observational Medical Outcomes Partnership Common Data Model (OMOP CDM).</p></caption><alt-text id="alt0001">Fig 1</alt-text><graphic xlink:href="gr1_lrg"/></fig></p>
    <p id="para0023">We describe each stage of the prediction pipeline in the following section. We then demonstrate the use of the prediction pipeline for the problem of predicting COVID-19 death with results presented in section III. This work was reviewed by the New England Institutional Review Board (IRB) and was determined to be exempt from board IRB approval, as this research project did not involve human subject research.</p>
  </sec>
  <sec id="sec0002">
    <label>2</label>
    <title>Methods</title>
    <p id="para0024">OHDSI provides a library of open-source software tools for the process of developing and validating prediction models using observational data. The OHDSI analytics pipeline for patient-level prediction modeling that we demonstrate in this work can be summarized as follows (<xref rid="fig0002" ref-type="fig">Fig. 2</xref>
). As a required initial check before a database is added to the distributed data network and included in a study, <italic>Data Harmonization and Quality Control:</italic> source data are harmonized to the Observational Medical Outcomes Partnership (OMOP) CDM structure and coding system using an Extraction, Transformation and Load (ETL) design specification and quality control is performed. To conduct a prediction study, the following steps can be followed. <italic>(a) Study Protocol Development</italic>: we first develop a study protocol by specifying the prediction problem, assessing phenotypes using the OHDSI CohortDiagnostics tool, and specifying machine learning settings; then <italic>(b) Model Development and Internal Validation</italic>: we develop and internally validate the prediction models using the ‘Model Development’ <italic>R</italic> package, a wrapper of the OHDSI PatientLevelPrediction <italic>R</italic> package, that we generate via a user-friendly website interface called ATLAS; after which <italic>(c) External Validation:</italic> we distribute the automatically generated ‘Model Validation’ <italic>R</italic> package to participating data partners for external validation of the developed models; finally <italic>(d) Open Science and Evidence Sharing:</italic> we disseminate our collected results on the OHDSI Viewer Dashboard. All documentation including the study protocol, generated <italic>R</italic> packages, and OHDSI software tools, are publicly available on GitHub. In the rest of this section, we describe each stage of the pipeline in detail.<fig id="fig0002"><label>Fig. 2</label><caption><p>An overview of the OHDSI analytics pipeline for patient-level prediction modelling. Orange boxes represent study-specific input or output, blue boxes represent non-study-specific input, output, or OHDSI software tools.</p></caption><alt-text id="alt0002">Fig 2</alt-text><graphic xlink:href="gr2_lrg"/></fig></p>
    <sec id="sec0003">
      <label>2.1</label>
      <title>Data harmonization and quality control</title>
      <p id="para0025">OHDSI uses the OMOP CDM which transforms source data into a common format using a set of common terminologies, vocabularies, and coding schemes <xref rid="bib0026" ref-type="bibr">[26]</xref>. To support the ETL of the source data to the CDM, the OHDSI community has developed several open-source software tools (<xref rid="fig0003" ref-type="fig">Fig. 3</xref>
).<fig id="fig0003"><label>Fig. 3</label><caption><p>The step-by-step process for mapping data sources to the Observational Medical Outcomes Partnership Common Data Model (OMOP CDM), using OHDSI software tools. ETL: Extraction, Transformation and Load; DQD: Data Quality Dashboard.</p></caption><alt-text id="alt0003">Fig 3</alt-text><graphic xlink:href="gr3_lrg"/></fig></p>
      <p id="para0026">First, the WhiteRabbit tool produces a scan that summarizes every table, column, and value in a given source dataset <xref rid="bib0027" ref-type="bibr">[27]</xref>. This profiling step is important to understand the complexity of the source data.</p>
      <p id="para0027">Second, the Rabbit-in-a-hat tool is an application for interactive design of an ETL to the OMOP CDM <xref rid="bib0028" ref-type="bibr">[28]</xref>. It reads the WhiteRabbit scan report and displays a graphical user interface containing all the source and OMOP CDM tables which need to be connected by the user. The final product is a design specification document that is then used to guide the implementation.</p>
      <p id="para0028">Third, the Usagi tool supports the mapping of source vocabularies to the OMOP standardized vocabularies <xref rid="bib0029" ref-type="bibr">[29]</xref>. Based on the ETL design specification that is created in Rabbit-in-a-hat the code is written to transform the source data into the OMOP CDM format.</p>
      <p id="para0029">Finally, the Data Quality Dashboard (DQD) and the ACHILLES characterization tool are used to interrogate the quality of the resulting OMOP CDM-mapped dataset <xref rid="bib0030" ref-type="bibr">[30]</xref>. The DQD uses a systematic approach to run and evaluate over 3300 data quality checks. It assesses how well a dataset conforms with OMOP standards and how well source concepts are mapped to standard concepts. ACHILLES computes over 170 visualizations of the data and displays them in an open-source application designed to allow exploration and identification of potential anomalies and data outliers <xref rid="bib0031" ref-type="bibr">[31]</xref>.</p>
    </sec>
    <sec id="sec0004">
      <label>2.2</label>
      <title>Stages of the study</title>
      <p id="para9001">
        <list list-type="simple" id="celist0006">
          <list-item id="celistitem0012">
            <label>(a)</label>
            <p id="para0030">Study Protocol Development.</p>
          </list-item>
        </list>
      </p>
      <p id="para0031">Any research team from anywhere around the world can propose a study on the OHDSI Forum (<ext-link ext-link-type="uri" xlink:href="https://www.forums.ohdsi.org" id="interref0001">https://forums.ohdsi.org</ext-link>). Interested investigators co-design a study protocol. The study protocol must transparently specify the prediction problem of interest and study design choices such as sensitivity analysis, Model Development methods, and evaluation techniques. Next, the collaborators determine the feasibility of the study across the data network and the validity of the specified study design choices using various OHDSI software tools.<list list-type="simple" id="celist0007"><list-item id="celistitem0013"><label>(1)</label><p id="para0032"><italic>Specifying the prediction problem.</italic></p></list-item></list>
</p>
      <p id="para0033">The OHDSI community has standardized the prediction problem specification into three components <xref rid="bib0032" ref-type="bibr">[32]</xref>, which are shown in <xref rid="fig0004" ref-type="fig">Fig. 4:</xref>
<list list-type="simple" id="celist0008"><list-item id="celistitem0014"><label>•</label><p id="para0034"><italic>The target population</italic> This is the set of patients for whom we wish to predict the individual risk. The index date (<italic>t</italic> = 0) is the reference point in time for each patient in the target population. Only information from a specified observation window preceding the index date is used for engineering the candidate predictors.</p></list-item><list-item id="celistitem0015"><label>•</label><p id="para0035"><italic>The outcome</italic> This is the medical condition or event we wish to predict.</p></list-item><list-item id="celistitem0016"><label>•</label><p id="para0036"><italic>The time-at-risk</italic> This is a time interval on or after the index date, within which we wish to predict the outcome occurrence.</p></list-item></list>
<fig id="fig0004"><label>Fig. 4</label><caption><p>Prediction problem specification in OHDSI.</p></caption><alt-text id="alt0004">Fig 4</alt-text><graphic xlink:href="gr4_lrg"/></fig></p>
      <p id="para0037">For example, if we wanted to develop a model to predict death within 30 days in patients hospitalized with COVID-19, then a suitable target population could be patients with a hospital stay who have COVID-19. The index date would be the first day of the hospital stay. The outcome would be a patient's death, and the time-at-risk would be the period between index and 30 days after index.<list list-type="simple" id="celist0009"><list-item id="celistitem0017"><label>(2)</label><p id="para0038"><italic>Generating and assessing phenotypes.</italic></p></list-item></list>
</p>
      <p id="para0039">Improving the syntactic and semantic interoperability of the data through the CDM and the standardized vocabularies does not solve all interoperability issues. For instance, data may originate from different clinical settings and have different levels of granularity. As a consequence, identifying the target population and outcome in the data can still be a challenge, even in observational data that are mapped to the OMOP CDM.</p>
      <p id="para0040">Defining an algorithm to identify patients within a database who have a certain condition or medical event is known as ‘phenotyping’. In general, a phenotype can be defined as an index rule followed by inclusion/exclusion rules. The rules can use sets of OMOP-standardized concept IDs to identify certain conditions or events. For example, our target population phenotype could be defined as follows.</p>
      <p id="para0041">Patients with an inpatient visit (concept ID 9201 or 262) satisfying the following inclusion criteria:<list list-type="simple" id="celist0010"><list-item id="celistitem0018"><label>•</label><p id="para0042">COVID-19 positive test (concept ID 37310282) OR COVID-19 diagnosis (concept ID 439676, 37311061, 4100065 or 37311060) during the visit,</p></list-item><list-item id="celistitem0019"><label>•</label><p id="para0043">≥ 365 days of prior observation at index.</p></list-item></list>
</p>
      <p id="para0044">The index date is the date of the qualifying inpatient visit.</p>
      <p id="para0045">When developing a prediction model, it is important that the target population and outcome phenotypes correctly identify the desired individuals. A suitable phenotype is one that is highly sensitive (the majority of the patients in the database with the condition or event are correctly identified) and has a high positive predictive value (the majority of the patients identified by the phenotype have the condition or event). Mis-specifying the target population and/or outcome phenotype definitions is likely to lead to poor performance when implementing the prediction model in clinical practice. A significant amount of work is required to develop suitable phenotypes and expert knowledge of a specific database is required to guide this process.</p>
      <p id="para0046">The OHDSI community has developed a process to generate and assess suitable phenotypes. This process starts with a literature review of existing phenotype definitions for the target population and outcome. Commonly used phenotypes identified by the literature review are then identified as candidate phenotypes. If no phenotypes exist in the published literature, then a clinician and data expert collaborate to propose new candidate phenotypes. The candidate phenotypes need to be assessed to determine whether they are capturing the correct patients.</p>
      <p id="para0047">The OHDSI CohortDiagnostics tool creates descriptive results for each candidate phenotype such as the characteristics of the patients identified by the phenotype, the validity of the concept ID sets, and the number of patients identified by the phenotype across calendar time <xref rid="bib0033" ref-type="bibr">[33]</xref>. This is repeated across the OHDSI network of databases. The results are then inspected by a panel of clinicians to compare the characteristics of the patients identified by the phenotype, the temporal trend of the phenotype and the number of patients identified by the phenotype across numerous databases. The specific aspects of a phenotype that are inspected are:<list list-type="simple" id="celist0011"><list-item id="celistitem0020"><label>•</label><p id="para0048"><italic>Generalizability</italic> Do the patients captured by the phenotype appear to represent the real-world patients with the medical condition? This requires inspecting the characteristics of the patients identified by the phenotype in view of the literature and expert consensus.</p></list-item><list-item id="celistitem0021"><label>•</label><p id="para0049"><italic>Consistency across the network</italic> Is the phenotype identifying patients consistently across the network or does it seem to fail for one or more database? This may indicate an issue with the transportability of the definition. Common issues include unsuitable data or incorrect concept ID sets.</p></list-item><list-item id="celistitem0022"><label>•</label><p id="para0050"><italic>Correctness of concept ID sets</italic> Do we have the correct concept IDs for identifying inclusion/exclusion criteria used by the phenotype? OHDSI uses string similarity and associations to identify potential missing concept IDs.</p></list-item></list>
</p>
      <p id="para0051">If issues are identified with a candidate phenotype, then revisions to the phenotype are made and the process is repeated until no issues are observed.<list list-type="simple" id="celist0012"><list-item id="celistitem0023"><label>(3)</label><p id="para0052"><italic>Assessing suitability of source databases.</italic></p></list-item></list>
</p>
      <p id="para0053">Once the phenotypes are defined and validated, the next step is identifying whether each OHDSI observational database is suitable for Model Development and/or validation. This involves qualitative and quantitative assessment. If issues are identified, then other databases should be considered instead.</p>
      <p id="para0054"><italic>Initial feasibility assessment</italic> Consulting with a person who has expert knowledge of the database is important to determine any issues in the way the data are captured that may impact the phenotypes. For example, some databases lack older or younger patients or may not capture complete lab results or medication.</p>
      <p id="para0055">Databases that pass the initial feasibility assessment are then reviewed using the CohortDiagnostics tool. The results can be inspected to identify datasets that satisfy:<list list-type="simple" id="celist0013"><list-item id="celistitem0024"><label>•</label><p id="para0056"><italic>Adequate size</italic> Is the number of patients identified by the target population phenotype in a given database sufficient for developing a prediction model? Our recent but as yet unpublished study on generating learning curves to empirically assess the sample size at which convergence towards maximum achievable performance starts shows that, typically, more than 1000 patients with the outcome are needed for Model Development <xref rid="bib0034" ref-type="bibr">[34]</xref>. For accurate Model Validation, at least 100 patients with the outcome is recommended <xref rid="bib0035" ref-type="bibr">[35]</xref>.</p></list-item><list-item id="celistitem0025"><label>•</label><p id="para0057"><italic>Continuous observation time</italic> Are the patients identified by the target population phenotype in a given database observed long enough to have a sufficient lookback period to capture predictors, and enough follow-up time to cover the time-at-risk? The incidence rate should be inspected for sufficient outcomes during the time-at-risk.</p></list-item></list>
</p>
      <p id="para0058">If there is no suitable database across the network then it may be worth exploring alternative prediction specifications (e.g., use a proxy for the target population).<list list-type="simple" id="celist0014"><list-item id="celistitem0026"><label>(4)</label><p id="para0059"><italic>Model Development settings.</italic></p></list-item></list>
</p>
      <p id="para0060">The study protocol must specify the settings used for Model Development including <xref rid="bib0032" ref-type="bibr">[32]</xref>:<list list-type="simple" id="celist0015"><list-item id="celistitem0027"><label>•</label><p id="para0062">The candidate predictors to be included in the model, <italic>e.g.</italic>, drugs (at various ingredient and drug levels), diagnoses, procedures, measurements, as well as diagnostics and summary scores.</p></list-item><list-item id="celistitem0029"><label>•</label><p id="para0063">The train/test split design - by default a 25% test set and 75% train set is used, where k-fold cross-validation is applied on the train set to select optimal hyper-parameters <xref rid="bib0036" ref-type="bibr">[36]</xref>. The user can choose to divide patients into the train and test sets randomly (stratified by outcome) or based on time.</p></list-item><list-item id="celistitem0030"><label>•</label><p id="para0064">The set of classifiers to be used, including gradient boosting machine, random forest, regularized logistic regression, decision tree, AdaBoost, and multi-layer perceptron neural network.</p></list-item><list-item id="celistitem0031"><label>•</label><p id="para0065">The hyper-parameter search per selected classifier - if using a grid search the user can specify the values to investigate <xref rid="bib0036" ref-type="bibr">[36]</xref>.</p></list-item><list-item id="celistitem0032"><label>•</label><p id="para0066">Sensitivity analysis options - whether to include patients lost to follow-up or patients who had the outcome prior to index.</p></list-item><list-item id="celistitem0033"><label>(b)</label><p id="para0067"><italic>Model Development and internal validation.</italic></p></list-item></list>
</p>
      <p id="para0068">All model development settings can be specified <italic>via</italic> a user-friendly website interface called ATLAS <xref rid="bib0007" ref-type="bibr">[7]</xref>. This includes the prediction problem components (the target population and outcome phenotypes and the time-at-risk) in addition to the above model-specific settings (<italic>e.g.</italic>, candidate predictor settings and model development settings).<list list-type="simple" id="celist0017"><list-item id="celistitem0034"><label>(i)</label><p id="para0069"><italic>Developing the ‘Model Development’ R package.</italic></p></list-item></list>
</p>
      <p id="para0070">Once the settings have been specified, ATLAS generates a study-specific open-source <italic>R</italic> package called the ‘Model Development’ <italic>R</italic> package. This is a wrapper of the PatientLevelPrediction <italic>R</italic> package <xref rid="bib0037" ref-type="bibr">[37]</xref> and can be run on any OMOP CDM database to develop and internally validate the models specified in the study protocol.<list list-type="simple" id="celist0018"><list-item id="celistitem0035"><label>(ii)</label><p id="para0071"><italic>Executing the ‘Model Development’ R package.</italic></p></list-item></list>
</p>
      <p id="para0072">The ‘Model Development’ <italic>R</italic> package can be implemented by providing the connection details to the CDM, the CDM database name, a database schema with read/write access that is used to create temporary tables, and the location where the log/data/model will be saved to. The output is a directory containing the extracted data, the developed models, all the settings required to replicate the study and summary information about the internal validation of the models. In addition, an <italic>R</italic> Shiny app is generated that displays the results interactively to the user.<list list-type="simple" id="celist0019"><list-item id="celistitem0036"><label>(c)</label><p id="para0073"><italic>External validation</italic></p></list-item></list>
</p>
      <p id="para0074">After developing the models, the ‘Model Development’ <italic>R</italic> package can automatically generate a ‘Model Validation’ <italic>R</italic> package for externally validating the models. This package contains the data extraction source code for the various settings (phenotypes, time-at-risk, and predictors) and the developed models that need to be validated. The ‘Model Validation’ <italic>R</italic> package is another wrapper of the PatientLevelPrediction <italic>R</italic> package that uses the stored settings to call functions to extract the data, apply the models and assess the performance using the standard evaluation metrics. Therefore, the automatically generated ‘Model Validation’ <italic>R</italic> package is able to fully replicate the data extraction process used to develop the models across any database mapped to the OMOP CDM and then applies and validates the models. Once installed, the user just points the ‘Model Validation’ <italic>R</italic> package to their OMOP CDM data, and the <italic>R</italic> package will execute the external validation. The output is a collection of .csv files containing evaluation metrics such as information on the discrimination and calibration of each model.<list list-type="simple" id="celist0020"><list-item id="celistitem0037"><label>(d)</label><p id="para0075"><italic>Open Science and Evidence Sharing</italic></p></list-item></list>
</p>
      <p id="para0076">All study documentation, including the study protocol and automatically generated <italic>R</italic> packages, are shared publicly. The ‘Model Development’ and ‘Model Validation’ <italic>R</italic> packages can be uploaded to the ohdsi-studies GitHub (<ext-link ext-link-type="uri" xlink:href="https://www.github.com/ohdsi-studies" id="interref0002">https://github.com/ohdsi-studies</ext-link>) to enable any researcher to run the model development and external validation analysis on their data mapped to the OMOP CDM. Results for each of the databases participating in the study can be combined in an <italic>R</italic> Shiny application and then uploaded to the publicly available OHDSI Viewer Dashboard.</p>
      <p id="para0077">The open-source OHDSI software tools involved in the prediction pipeline are regularly updated and revised versions are maintained on GitHub. This allows researchers in the field to implement additional settings or methods into our proposed pipeline. The PatientLevelPrediction <italic>R</italic> package has a flexible model integration, making it easy for researchers to add custom machine learning models. The OHDSI Forum is open for all to join, to contribute to the development and use of software tools, and to co-create scientific questions.</p>
    </sec>
    <sec id="sec0005">
      <label>2.3</label>
      <title>COVID-19 demonstration</title>
      <p id="para0078">In this section, we demonstrate using the prediction pipeline to develop and validate a COVID-19 prediction model. We were interested in predicting a patient's risk of death within 30 days from the point they are hospitalized with COVID-19. We demonstrate how this was done using the stages of the prediction pipeline described in <xref rid="sec0004" ref-type="sec">Section 2.2</xref>.<list list-type="simple" id="celist0021"><list-item id="celistitem0038"><label>(a)</label><p id="para0079">Study Protocol Development.<list list-type="simple" id="celist0022"><list-item id="celistitem0039"><label>(1)</label><p id="para0080"><italic>Specifying the prediction problem.</italic></p></list-item></list>
</p></list-item></list>
</p>
      <p id="para0081">We studied the following prediction problem: “Within patients hospitalized with COVID-19, predict the risk of death on the hospitalization date and up to 30 days after using data recorded up to 1 day prior to hospitalization”, defined in <xref rid="tbl0001" ref-type="table">Table 1</xref>
.<list list-type="simple" id="celist0023"><list-item id="celistitem0040"><p id="para0082"><list list-type="simple" id="celist0024"><list-item id="celistitem0041"><label>(2)</label><p id="para0083"><italic>Generating and assessing phenotypes.</italic></p></list-item></list></p></list-item></list>
<table-wrap position="float" id="tbl0001"><label>Table 1</label><caption><p>Prediction problem specification.</p></caption><alt-text id="alt0011">Table 1</alt-text><table frame="hsides" rules="groups"><thead><tr><th valign="top">Component</th><th valign="top">Specification</th></tr></thead><tbody><tr><td valign="top"><bold>Target</bold></td><td valign="top">Patients hospitalized with COVID-19</td></tr><tr><td valign="top"><bold>Outcome</bold></td><td valign="top">Death</td></tr><tr><td valign="top"><bold>Time-at-risk</bold></td><td valign="top">0 days to 30 days after the hospital visit</td></tr></tbody></table></table-wrap></p>
      <p id="para0084">The phenotypes used to identify ‘patients hospitalized with COVID-19’ and ‘death’ are defined in <xref rid="tbl0002" ref-type="table">Table 2</xref>
. The phenotype for ‘death’ was defined as any record of death in the database. The phenotype for ‘patients hospitalized with COVID-19’ was previously developed in a large-scale COVID-19 characteristic study detailed in <ext-link ext-link-type="uri" xlink:href="https://github.com/ohdsi-studies/Covid19CharacterizationCharybdis" id="interref0003">https://github.com/ohdsi-studies/Covid19CharacterizationCharybdis</ext-link>. The CohortDiagnostics results are available at <ext-link ext-link-type="uri" xlink:href="https://data.ohdsi.org/Covid19CharacterizationCharybdis/" id="interref0004">https://data.ohdsi.org/Covid19CharacterizationCharybdis/</ext-link> for the cohort ‘Persons hospitalized with a COVID-19 diagnosis record or a SARS-CoV-2 positive test with at least 365 d prior observation’. This phenotype was investigated across 16 OMOP CDM databases to ensure transportability (<xref rid="fig0005" ref-type="fig">Fig. 5</xref>
).<list list-type="simple" id="celist0025"><list-item id="celistitem0042"><p id="para0085"><list list-type="simple" id="celist0026"><list-item id="celistitem0043"><label>(3)</label><p id="para0086"><italic>Assessing suitability of source databases.</italic></p></list-item></list></p></list-item></list>
<table-wrap position="float" id="tbl0002"><label>Table 2</label><caption><p>Phenotype definitions.</p></caption><alt-text id="alt0012">Table 2</alt-text><table frame="hsides" rules="groups"><thead><tr><th valign="top">Component</th><th valign="top">Phenotype definition</th></tr></thead><tbody><tr><td valign="top"><bold>Target</bold></td><td valign="top">Patients with an inpatient visit on or after December 2019 with a COVID-19 positive test or COVID-19 diagnosis within 21 days before the visit or during the visit and &gt;=365 days prior observation.</td></tr><tr><td valign="top"><bold>Outcome</bold></td><td valign="top">Death record in database</td></tr></tbody></table></table-wrap><fig id="fig0005"><label>Fig. 5</label><caption><p>A snapshot of the CohortDiagnostics tool for assessing phenotypes. Here, Optum SES refers to the Optum Claims database.</p></caption><alt-text id="alt0005">Fig 5</alt-text><graphic xlink:href="gr5_lrg"/></fig></p>
      <p id="para0087">Across the OHDSI network, four OMOP CDM databases capturing death and containing inpatient visit data were identified as suitable, as per the database suitability checks (described in <xref rid="sec0004" ref-type="sec">Section 2.2</xref>) performed using the CohortDiagnostics tool. <xref rid="tbl0003" ref-type="table">Table 3</xref>
describes the four databases. The largest one, Optum claims, was used to develop the models and Optum EHR, HIRA-COVID, and SIDIAP were used for external validation.<list list-type="simple" id="celist0027"><list-item id="celistitem0044"><label>(4)</label><p id="para0089"><italic>Model Development settings.</italic></p></list-item></list>
<table-wrap position="float" id="tbl0003"><label>Table 3</label><caption><p>The databases used in this research.</p></caption><alt-text id="alt0013">Table 3</alt-text><table frame="hsides" rules="groups"><thead><tr><th valign="top">Database full name</th><th valign="top">Database short name</th><th valign="top">Country</th><th valign="top">Data type</th><th valign="top">Time period</th></tr></thead><tbody><tr><td valign="top">Optum© De-Identified Clinformatics® Data Mart Database</td><td valign="top">Optum Claims</td><td valign="top">USA</td><td valign="top">Claims</td><td valign="top">January 2020 - June 2020</td></tr><tr><td valign="top">Optum© De-identified Electronic Health Record Dataset</td><td valign="top">Optum EHR</td><td valign="top">USA</td><td valign="top">EHR</td><td valign="top">January 2020 – October 2020</td></tr><tr><td valign="top">The Information System for Research in Primary Care</td><td valign="top">SIDIAP</td><td valign="top">Spain</td><td valign="top">Primary care EHR linked to hospital admissions</td><td valign="top">January 2020 – May 2020</td></tr><tr><td valign="top">Health Insurance and Review Assessment – COVID-19 database</td><td valign="top">HIRA-COVID</td><td valign="top">South Korea</td><td valign="top">Claims</td><td valign="top">January 2020 – May 2020</td></tr></tbody></table></table-wrap></p>
      <p id="para0090">Two sets of candidate predictors were used.<list list-type="simple" id="celist0029"><list-item id="celistitem0046"><label>•</label><p id="para0091">Age and gender: this set included gender and binary indicators of age in 5-year groups (40–45, 45–50, …, 95 +). We used this set of candidate predictors to create a benchmark model.</p></list-item><list-item id="celistitem0047"><label>•</label><p id="para0092">All: the second set included 57,627 candidate predictors including binary ones indicating the occurrences of various conditions, drugs, observations procedures or measurements, that were recorded any time prior, as well as in the year prior, to the index visit (not including day of the visit date), in addition to age and gender.</p></list-item></list>
</p>
      <p id="para0093">We chose a random (stratified by outcome) 75/25 train/test split with 3-fold cross-validation on the train set to select the optimal hyper-parameter settings per classifier. We trained an L1-regularized logistic regression model as the reference model, using cross-validation to select the strength of regularization. As a sensitivity analysis, we also trained Gradient Boosting Machine, decision tree, random forest, multi-layer perceptron (MLP) neural network, and AdaBoost models. The pipeline supports binary classification and survival analysis. In this demonstration we chose to use binary classification instead of survival analysis due to the short 30-day period. When predicting outcomes over longer periods of time we recommend using the Cox regression (or alternative survival models) rather than binary classification.<list list-type="simple" id="celist0030"><list-item id="celistitem0048"><label>(b)</label><p id="para0094"><italic>Model Development and internal validation.</italic></p></list-item></list>
</p>
      <p id="para0095">We developed the ‘Model Development’ <italic>R</italic> package in ATLAS (<ext-link ext-link-type="uri" xlink:href="http://www.atlas-covid19.ohdsi.org/#/prediction/39" id="interref0005">http://atlas-covid19.ohdsi.org/#/prediction/39</ext-link>). Within ATLAS, the phenotype definitions specified in <xref rid="tbl0002" ref-type="table">Table 2</xref> were created using the “Cohort Definitions” tab (<xref rid="fig0006" ref-type="fig">Fig. 6</xref>
). Next, the model settings were created using the “Prediction” tab. Once the prediction study was designed, the ‘Model Development’ <italic>R</italic> package was automatically generated by clicking on “Download Study Package”. The ‘Model Development’ <italic>R</italic> package contains all the functionality to develop and internally validate the prediction model using OMOP CDM data.<list list-type="simple" id="celist0031"><list-item id="celistitem0049"><label>(c)</label><p id="para0096"><italic>External validation.</italic></p></list-item></list>
<fig id="fig0006"><label>Fig. 6</label><caption><p>A snapshot of the ATLAS tool for prediction model development.</p></caption><alt-text id="alt0006">Fig 6</alt-text><graphic xlink:href="gr6_lrg"/></fig></p>
      <p id="para0097">The ‘Model Validation’ <italic>R</italic> package was automatically generated using the ‘Model Development’ <italic>R</italic> package.<list list-type="simple" id="celist0032"><list-item id="celistitem0050"><label>(d)</label><p id="para0098"><italic>Open science and evidence sharing.</italic></p></list-item></list>
</p>
      <p id="para0099">The protocol is available at <ext-link ext-link-type="uri" xlink:href="https://github.com/ohdsi-studies/CovidDeath/blob/master/inst/doc/protocol.docx" id="interref0006">https://github.com/ohdsi-studies/CovidDeath/blob/master/inst/doc/protocol.docx</ext-link>.</p>
      <p id="para0100">The ‘Model Development’ <italic>R</italic> package is available at <ext-link ext-link-type="uri" xlink:href="https://github.com/ohdsi-studies/CovidDeath/tree/master/CovidDeathDev" id="interref0007">https://github.com/ohdsi-studies/CovidDeath/tree/master/CovidDeathDev</ext-link> and the ‘Model Validation’ <italic>R</italic> package is available at <ext-link ext-link-type="uri" xlink:href="https://github.com/ohdsi-studies/CovidDeath" id="interref0008">https://github.com/ohdsi-studies/CovidDeath</ext-link>.</p>
    </sec>
  </sec>
  <sec id="sec0006">
    <label>3</label>
    <title>Results</title>
    <p id="para0101"><xref rid="tbl0004" ref-type="table">Table 4</xref> presents the discriminative performance of the models. Using L1-regularized logistic regression, the model including the set of all variables resulted in an internal validation AUC of 0.74 (0.72–0.76) for Optum Claims and external validation AUCs of 0.76 (0.75–0.78) for Optum EHR, 0.78 (0.77–0.78) for SIDIAP, and 0.90 (0.87–0.93) for HIRA-COVID. In comparison, the L1-regularized logistic regression model including only age and gender predictors resulted in an internal validation AUC of 0.70 (0.69–0.72) for Optum Claims, and external validation AUCs of 0.75 (0.74–0.77) for Optum EHR, 0.79 (0.78–0.80) for SIDIAP, and 0.93 (0.91–0.94) for HIRA-COVID. For both sets of candidate predictors (age and gender only, and all variables), AdaBoost, random forest, gradient boosting machine, and decision tree yielded similar or lower internal and external validation AUCs compared to L1-regularized logistic regression, whereas the MLP neural network consistently resulted in lower AUCs.<table-wrap position="float" id="tbl0004"><label>Table 4</label><caption><p>Discriminative performance (measured using the area under the receiver operating characteristic curve (AUC) with a 95% confidence interval (CI)) of the different classifiers in predicting 30-day death outcome in patients hospitalized with COVID-19 (Optum claims is the internal discrimination estimated using the test set; the other databases are the external validation discrimination estimates).</p></caption><alt-text id="alt0014">Table 4</alt-text><table frame="hsides" rules="groups"><thead><tr><th align="left" valign="top">Development data sample size (Outcome %)</th><th align="left" valign="top">Candidate predictors</th><th valign="top">Validation Database</th><th valign="top">Validation data sample size (Outcome %)</th><th valign="top">AUC (95% CI) L1-regularized logistic regression</th><th valign="top">AUC (95% CI) AdaBoost</th><th valign="top">AUC (95% CI) Random Forest</th><th valign="top">AUC (95% CI) Gradient Boosting Machine</th><th valign="top">AUC (95% CI) MLP Neural Network</th><th valign="top">AUC (95% CI) Decision Tree</th></tr></thead><tbody><tr><td align="left" rowspan="8" valign="top">16,991 (15.6%)</td><td align="left" rowspan="4" valign="top">Age and gender</td><td valign="top">HIRA-COVID</td><td valign="top">6,445 (2.1)</td><td valign="top"><bold>0.93 (0.91–0.94)</bold></td><td valign="top"><bold>0.93 (0.91–0.94)</bold></td><td valign="top">0.80 (0.75–0.84)</td><td valign="top">0.91 (0.88–0.93)</td><td valign="top">0.57 (0.52–0.62)</td><td valign="top">0.85 (0.81–0.89)</td></tr><tr><td valign="top">Optum Claims</td><td valign="top">5,663 (15.6)</td><td valign="top"><bold>0.70 (0.69–0.72)</bold></td><td valign="top"><bold>0.70 (0.69–0.72)</bold></td><td valign="top">0.68 (0.66–0.70)</td><td valign="top"><bold>0.70 (0.69–0.72)</bold></td><td valign="top">0.55 (0.53–0.57)</td><td valign="top"><bold>0.70 (0.68-0.71)</bold></td></tr><tr><td valign="top">Optum EHR</td><td valign="top">22,023 (4.3)</td><td valign="top"><bold>0.75 (0.74–0.77)</bold></td><td valign="top"><bold>0.75 (0.74–0.77)</bold></td><td valign="top">0.68 (0.66–0.70)</td><td valign="top">0.74 (0.73–0.76)</td><td valign="top">0.52 (0.50–0.54)</td><td valign="top">0.72 (0.70–0.73)</td></tr><tr><td valign="top">SIDIAP</td><td valign="top">18,201 (12.3)</td><td valign="top"><bold>0.79 (0.78–0.80)</bold></td><td valign="top"><bold>0.79 (0.78–0.80)</bold></td><td valign="top">0.74 (0.73–0.75)</td><td valign="top"><bold>0.79 (0.78–0.80)</bold></td><td valign="top">0.57 (0.56–0.58)</td><td valign="top">0.78 (0.77–0.79)</td></tr><tr><td align="left" rowspan="4" valign="top">All</td><td valign="top">HIRA-COVID</td><td valign="top">6445 (2.1)</td><td valign="top"><bold>0.90 (0.87–0.93)</bold></td><td valign="top">0.87 (0.83–0.91)</td><td valign="top">0.88 (0.85–0.91)</td><td valign="top">0.76 (0.72–0.80)</td><td valign="top">0.59 (0.54–0.64)</td><td valign="top">0.82 (0.78–0.86)</td></tr><tr><td valign="top">Optum Claims</td><td valign="top">5663 (15.6)</td><td valign="top"><bold>0.74 (0.72–0.76)</bold></td><td valign="top">0.73 (0.72–0.75)</td><td valign="top">0.72 (0.71–0.74)</td><td valign="top">0.69 (0.67–0.71)</td><td valign="top">0.69 (0.67–0.70)</td><td valign="top">0.70 (0.68–0.72)</td></tr><tr><td valign="top">Optum EHR</td><td valign="top">22,023 (4.3)</td><td valign="top"><bold>0.76 (0.75–0.78)</bold></td><td valign="top">0.74 (0.72–0.75)</td><td valign="top">0.72 (0.70–0.74)</td><td valign="top">0.65 (0.63–0.67)</td><td valign="top">0.65 (0.63–0.67)</td><td valign="top">0.69 (0.67–0.70)</td></tr><tr><td valign="top">SIDIAP</td><td valign="top">18,201 (12.3)</td><td valign="top"><bold>0.78 (0.77–0.78)</bold></td><td valign="top">0.77 (0.76–0.78)</td><td valign="top">0.77 (0.76–0.78)</td><td valign="top">0.68 (0.67–0.69)</td><td valign="top">0.55 (0.54–0.57)</td><td valign="top">0.73 (0.72–0.74)</td></tr></tbody></table></table-wrap></p>
    <p id="para0102">The models were well calibrated with respect to age and gender (<xref rid="fig0007" ref-type="fig">Fig. 7</xref>, <xref rid="fig0008" ref-type="fig">Fig. 8</xref>
).<fig id="fig0007"><label>Fig. 7</label><caption><p>Calibration performance for internal validation of the L1-regularized logistic regression model for predicting 30-day death outcome in patients hospitalized with COVID-19 on Optum Claims data, overall (left panels) and by age and gender (right panels).</p></caption><alt-text id="alt0007">Fig 7</alt-text><graphic xlink:href="gr7_lrg"/></fig><fig id="fig0008"><label>Fig. 8</label><caption><p>Calibration performance for external validation of the L1-regularized logistic regression model for predicting 30-day death outcome in patients hospitalized with COVID-19 on SIDIAP data, overall (left panels) and by age and gender (right panels).</p></caption><alt-text id="alt0008">Fig 8</alt-text><graphic xlink:href="gr8_lrg"/></fig></p>
    <p id="para0103">The internal and external validation results were made publicly available in the OHDSI Viewer Dashboard at: <ext-link ext-link-type="uri" xlink:href="https://data.ohdsi.org/CovidDeathPrediction/" id="interref0009">https://data.ohdsi.org/CovidDeathPrediction/</ext-link>, which shows the <italic>model summary</italic> (including model coefficients or variable importance for non-generalized linear models), <italic>model performance</italic> (including discrimination (AUC, F1 Score, Precision (also known as Positive predictive value), Recall (also known as Sensitivity), and more) and calibration (observed vs predicted risk, overall and by age and gender)), and <italic>all model settings</italic> (<xref rid="fig0009" ref-type="fig">Fig. 9</xref>
). For instance, the hyperparameter values for all models used in this study are available in the “Settings” tab and <xref rid="fig0010" ref-type="fig">Fig. 10</xref>
shows the intercept term and coefficients for the final age and gender L1-regularized logistic regression model in the “Model” tab. The complete model can also be downloaded from this tab.<fig id="fig0009"><label>Fig. 9</label><caption><p>A snapshot of the viewer dashboard. It contains the model summary, model performance, and all model settings.</p></caption><alt-text id="alt0009">Fig 9</alt-text><graphic xlink:href="gr9_lrg"/></fig><fig id="fig0010"><label>Fig. 10</label><caption><p>A snapshot of a Model Table in the Viewer Dashboard. It contains the complete model specification including intercept term and coefficient values for each covariate included in the final model.</p></caption><alt-text id="alt0010">Fig 10</alt-text><graphic xlink:href="gr10_lrg"/></fig></p>
  </sec>
  <sec id="sec0007">
    <label>4</label>
    <title>Discussion</title>
    <p id="para0104">As an open science initiative, researchers from anywhere in the world can join the OHDSI collaborative, and any data custodian can become a data partner by mapping their data to the OMOP CDM. The fast-growing OHDSI distributed data network enables performance assessment at a scale that can be highly valuable to develop prediction models that may impact patient care and outcome. The proposed pipeline is an expansion of existing machine learning software. It includes software tools and methods for extracting suitable data for a given prediction problem from big observational healthcare data and provides an easy process for sharing prediction models. The pipeline is transparent, and the software tools are open source. Due to the constant progress in the machine learning community, the machine learning part of the pipeline was developed to be flexible and different machine learning software can be readily integrated. For example, the caret <italic>R</italic> package <xref rid="bib0038" ref-type="bibr">[38]</xref> or new state-of-the-art machine learning methods <xref rid="bib0039" ref-type="bibr">[39]</xref> could be readily integrated into the pipeline. In addition, the types of prediction problems supported by the pipeline is expanding, with current support available for both binary classification and survival analysis.</p>
    <p id="para0105">Once a prediction problem is specified, having suitable phenotypes and data is essential. Our prediction pipeline includes the important step of validating phenotypes across a network of databases prior to implementing any model development. This step aims to ensure phenotypes are transportable and aims to improve the reliability of the model. External validation across diverse datasets is made possible due to the OHDSI standardizations and collaborative network <xref rid="bib0037" ref-type="bibr">[37]</xref>. This is a key strength of our prediction pipeline and in this paper, we demonstrated how it was possible to perform external validation of prediction models across multiple countries. The majority of published COVID-19 prediction models were unable to provide such an extensive set of external validation results. Finally, our prediction pipeline enforces best practices for transparent reporting of prediction models as described in the TRIPOD statement <xref rid="bib0002" ref-type="bibr">[2]</xref>.</p>
    <p id="para0106">Age and gender were found to be the main predictors of death within 30-days of hospitalization with COVID-19, which suggests our findings are consistent with the literature <xref rid="bib0005" ref-type="bibr">[5]</xref>. Adding more variables improved the model performance in Optum Claims and Optum EHR, with the best performing model being L1-regularized logistic regression. Interestingly, the L1-regularized logistic regression, AdaBoost, and gradient boosting machine models that only used age and gender predictors performed the best in the SIDIAP data.</p>
    <p id="para0107">In HIRA-COVID, we also found that the L1-regularized logistic regression models that only used age and gender predictors had the highest AUC of all models. This suggests that this model may be more transportable across countries and healthcare settings. However, although the Korean COVID-19 patient population itself is young, almost all deaths were in elderly patients over 65 years of age <xref rid="bib0008" ref-type="bibr">[8]</xref>, and age being a dominant predictor is a possible reason for the better performance of the models using only age and gender. Further, a single measure cannot fully evaluate the model's performance and other measures may provide a different interpretation. For instance, the AUPRC scores (in the Viewer Dashboard) for HIRA are lower than for the other databases, possibly due to a relatively low death rate in South Korea.</p>
    <p id="para0108">As with studies based on distributed data networks, a limitation of the approach presented in this paper is that it relies on data partners to map their data to the OMOP CDM. This initial mapping can be time-consuming. However, once done, a database can rapidly be integrated into a network study. Despite including data from three different continents, there are many regions of the world that are not represented in this paper. As more databases actively join the OHDSI data network (including from South Asia and Latin America), we can rapidly extend the external validation to them in the near future.</p>
    <p id="para0109">Using four databases from across the world, we developed and externally validated prediction models for 30-day risk of death in patients hospitalized with COVID-19. This study demonstrating the proposed pipeline, focusing on COVID-19 mortality, was initiated on November 1, 2020, and the results were publicly shared in an <italic>R</italic> Shiny app on December 15, 2020, which means it took only weeks to complete the study. The speed of the study did not compromise the quality of the study due to using the proposed reliable pipeline. We demonstrated the quality of the developed models <italic>via</italic> extensive external validation of phenotypes and prediction models. The model performances were generally consistent across diverse datasets, with AUCs ranging from 0.75 to 0.93, suggesting there was minimal bias in model development. The complete analytical source code used for the study is publicly shared for transparency and reproducibility. We hence demonstrated how the OHDSI analytics pipeline for patient-level prediction modeling offers a standardized approach for rapid yet reliable development and validation of prediction models, one that allows researchers to address various sources of bias. This work is a step towards obtaining prediction models that can provide reliable evidence-based guidance for use in clinical practice.</p>
  </sec>
  <sec id="sec0008">
    <title>Funding</title>
    <p id="para0110">This work was supported by the European Health Data &amp; Evidence Network (EHDEN). EHDEN has received funding from the Innovative Medicines Initiative 2 Joint Undertaking (JU) under Grant agreement No 806968. The JU receives support from the European Union's Horizon 2020 research and innovation programme and EFPIA. This work was also supported by the Fundació Institut Universitari per a la recerca a l'Atenció Primària de Salut Jordi Gol i Gurina (IDIAPJGol). The IDIAPJGol received funding from the Health Department from the Generalitat de Catalunya with a grant for research projects on SARS-CoV-2 and COVID-19 disease organized by the Direcció General de Recerca i Innovació en Salut. This work was also supported by the Bio Industrial Strategic Technology Development Program (20003883) funded by the Ministry of Trade, Industry &amp; Energy (MOTIE, Korea) and a grant from the Korea Health Technology R&amp;D Project through the Korea Health Industry Development Institute (KHIDI), funded by the Ministry of Health &amp; Welfare, Republic of Korea [Grant number: HI16C0992]. The investigators acknowledge the philanthropic support of the donors to the University of Oxford’s COVID-19 Research Response Fund. Study sponsors had no involvement in the study design, in the collection, analysis, and interpretation of data, in the writing of the manuscript, nor in the decision to submit the manuscript for publication.</p>
  </sec>
  <sec sec-type="COI-statement">
    <title>Declaration of Competing Interest</title>
    <p id="para0111">CB, MJS, AGS, JMR are employees of Janssen Research &amp; Development and shareholders of Johnson &amp; Johnson.</p>
  </sec>
</body>
<back>
  <ref-list id="cebibl1">
    <title>References</title>
    <ref id="bib0001">
      <label>1</label>
      <element-citation publication-type="book" id="sbref0001">
        <person-group person-group-type="author">
          <name>
            <surname>World Health Organization</surname>
          </name>
        </person-group>
        <source>COVID-19 weekly epidemiological update, edition 45, 22 June 2021.</source>
        <year>2021</year>
        <publisher-name>World Health Organization [Online]</publisher-name>
        <comment>[Online]. Available:</comment>
        <ext-link ext-link-type="uri" xlink:href="https://apps.who.int/iris/handle/10665/342009" id="interref0010">https://apps.who.int/iris/handle/10665/342009</ext-link>
      </element-citation>
    </ref>
    <ref id="bib0002">
      <label>2</label>
      <element-citation publication-type="journal" id="sbref0002">
        <person-group person-group-type="author">
          <name>
            <surname>Collins</surname>
            <given-names>G.S.</given-names>
          </name>
          <name>
            <surname>Reitsma</surname>
            <given-names>J.B.</given-names>
          </name>
          <name>
            <surname>Altman</surname>
            <given-names>D.G.</given-names>
          </name>
          <name>
            <surname>Moons</surname>
            <given-names>K.G.</given-names>
          </name>
        </person-group>
        <article-title>Transparent reporting of a multivariable prediction model for individual prognosis or diagnosis (TRIPOD): the TRIPOD statement</article-title>
        <source>Circulation</source>
        <volume>131</volume>
        <issue>2</issue>
        <year>2015</year>
        <fpage>211</fpage>
        <lpage>219</lpage>
        <pub-id pub-id-type="doi">10.1186/s12916-014-0241-z</pub-id>
        <pub-id pub-id-type="pmid">25561516</pub-id>
      </element-citation>
    </ref>
    <ref id="bib0003">
      <label>3</label>
      <element-citation publication-type="journal" id="sbref0003">
        <person-group person-group-type="author">
          <name>
            <surname>Al-Najjar</surname>
            <given-names>H.</given-names>
          </name>
          <name>
            <surname>Al-Rousan</surname>
            <given-names>N.</given-names>
          </name>
        </person-group>
        <article-title>A classifier prediction model to predict the status of coronavirus COVID-19 patients in South Korea</article-title>
        <source>Eur. Rev. Med. Pharmacol. Sci.</source>
        <volume>24</volume>
        <issue>6</issue>
        <year>2020</year>
        <fpage>3400</fpage>
        <lpage>3403</lpage>
        <pub-id pub-id-type="doi">10.26355/eurrev_202003_20709</pub-id>
        <pub-id pub-id-type="pmid">32271458</pub-id>
      </element-citation>
    </ref>
    <ref id="bib0004">
      <label>4</label>
      <element-citation publication-type="journal" id="sbref0004">
        <person-group person-group-type="author">
          <name>
            <surname>Shi</surname>
            <given-names>Y.</given-names>
          </name>
          <name>
            <surname>Yu</surname>
            <given-names>X.</given-names>
          </name>
          <name>
            <surname>Zhao</surname>
            <given-names>H.</given-names>
          </name>
          <name>
            <surname>Wang</surname>
            <given-names>H.</given-names>
          </name>
          <name>
            <surname>Zhao</surname>
            <given-names>R.</given-names>
          </name>
          <name>
            <surname>Sheng</surname>
            <given-names>J.</given-names>
          </name>
        </person-group>
        <article-title>Host susceptibility to severe COVID-19 and establishment of a host risk score: findings of 487 cases outside Wuhan</article-title>
        <source>Crit. Care</source>
        <volume>24</volume>
        <issue>1</issue>
        <year>2020</year>
        <fpage>108</fpage>
        <pub-id pub-id-type="doi">10.1186/s13054-020-2833-7</pub-id>
        <comment>Mar 18</comment>
        <pub-id pub-id-type="pmid">32188484</pub-id>
      </element-citation>
    </ref>
    <ref id="bib0005">
      <label>5</label>
      <element-citation publication-type="journal" id="sbref0005">
        <person-group person-group-type="author">
          <name>
            <surname>Wynants</surname>
            <given-names>L.</given-names>
          </name>
          <etal/>
        </person-group>
        <article-title>Prediction models for diagnosis and prognosis of COVID-19 infection: systematic review and critical appraisal</article-title>
        <source>BMJ</source>
        <volume>369</volume>
        <year>2020</year>
        <fpage>m1328</fpage>
        <pub-id pub-id-type="doi">10.1136/bmj.m1328</pub-id>
        <comment>Apr.</comment>
        <pub-id pub-id-type="pmid">32265220</pub-id>
      </element-citation>
    </ref>
    <ref id="bib0006">
      <label>6</label>
      <element-citation publication-type="journal" id="sbref0006">
        <person-group person-group-type="author">
          <name>
            <surname>Yuan</surname>
            <given-names>M.</given-names>
          </name>
          <name>
            <surname>Yin</surname>
            <given-names>W.</given-names>
          </name>
          <name>
            <surname>Tao</surname>
            <given-names>Z.</given-names>
          </name>
          <name>
            <surname>Tan</surname>
            <given-names>W.</given-names>
          </name>
          <name>
            <surname>Hu</surname>
            <given-names>Y.</given-names>
          </name>
        </person-group>
        <article-title>Association of radiologic findings with mortality of patients infected with 2019 novel coronavirus in Wuhan, China</article-title>
        <source>PLoS One</source>
        <volume>15</volume>
        <issue>3</issue>
        <year>2020</year>
        <object-id pub-id-type="publisher-id">e0230548</object-id>
        <pub-id pub-id-type="doi">10.1371/journal.pone.0230548</pub-id>
      </element-citation>
    </ref>
    <ref id="bib0007">
      <label>7</label>
      <element-citation publication-type="book" id="sbref0007">
        <person-group person-group-type="author">
          <name>
            <surname>Observational Health Data Sciences and Informatics</surname>
          </name>
        </person-group>
        <source>The Book of OHDSI</source>
        <year>2020</year>
        <publisher-name>Observational Health Data Sciences and Informatics [Online]</publisher-name>
        <comment>Available:</comment>
        <ext-link ext-link-type="uri" xlink:href="https://ohdsi.github.io/TheBookOfOhdsi/" id="interref0011">https://ohdsi.github.io/TheBookOfOhdsi/</ext-link>
      </element-citation>
    </ref>
    <ref id="bib0008">
      <label>8</label>
      <element-citation publication-type="journal" id="sbref0008">
        <person-group person-group-type="author">
          <name>
            <surname>Burn</surname>
            <given-names>E.</given-names>
          </name>
          <etal/>
        </person-group>
        <article-title>Deep phenotyping of 34,128 adult patients hospitalised with COVID-19 in an international network study</article-title>
        <source>Nat. Commun.</source>
        <volume>11</volume>
        <issue>1</issue>
        <year>2020</year>
        <fpage>5009</fpage>
        <pub-id pub-id-type="doi">10.1038/s41467-020-18849-z</pub-id>
        <comment>Oct.</comment>
        <pub-id pub-id-type="pmid">33024121</pub-id>
      </element-citation>
    </ref>
    <ref id="bib0009">
      <label>9</label>
      <element-citation publication-type="journal" id="sbref0009">
        <person-group person-group-type="author">
          <name>
            <surname>Duarte-Salles</surname>
            <given-names>T.</given-names>
          </name>
          <name>
            <surname>Vizcaya</surname>
            <given-names>D.</given-names>
          </name>
          <name>
            <surname>Pistillo</surname>
            <given-names>A.</given-names>
          </name>
        </person-group>
        <article-title>30-day outcomes of children and adolescents with COVID-19: an international experience</article-title>
        <source>Pediatrics</source>
        <year>2021</year>
      </element-citation>
    </ref>
    <ref id="bib0010">
      <label>10</label>
      <element-citation publication-type="book" id="sbref0010">
        <part-title>COVID-19: Reminder of Risk of Serious Side Effects with Chloroquine and Hydroxychloroquine</part-title>
        <year>2020</year>
        <publisher-name>European Medicines Agency</publisher-name>
        <publisher-loc>Amsterdam, The Netherlands</publisher-loc>
        <comment>Apr. 23, [Online]. Available:</comment>
        <ext-link ext-link-type="uri" xlink:href="https://www.ema.europa.eu/en/news/covid-19-reminder-risk-serious-side-effects-chloroquine-hydroxychloroquine" id="interref0012">https://www.ema.europa.eu/en/news/covid-19-reminder-risk-serious-side-effects-chloroquine-hydroxychloroquine</ext-link>
      </element-citation>
    </ref>
    <ref id="bib0011">
      <label>11</label>
      <element-citation publication-type="journal" id="sbref0011">
        <person-group person-group-type="author">
          <name>
            <surname>Golozar</surname>
            <given-names>A.</given-names>
          </name>
          <etal/>
        </person-group>
        <article-title>Baseline phenotype and 30-day outcomes of people tested for COVID-19: an international network cohort including &gt;3.32 million people tested with real-time PCR and &gt;219,000 tested positive for SARS-CoV-2 in South Korea, Spain and the United States</article-title>
        <source>medRxiv [Preprint]</source>
        <year>2020</year>
        <pub-id pub-id-type="doi">10.1101/2020.10.25.20218875</pub-id>
      </element-citation>
    </ref>
    <ref id="bib0012">
      <label>12</label>
      <element-citation publication-type="journal" id="sbref0012">
        <person-group person-group-type="author">
          <name>
            <surname>Lai</surname>
            <given-names>L.Y.H.</given-names>
          </name>
          <etal/>
        </person-group>
        <article-title>Clinical characteristics, symptoms, management and health outcomes in 8598 pregnant women diagnosed with COVID-19 compared to 27,510 with seasonal influenza in France, Spain and the US: a network cohort analysis</article-title>
        <source>medRxiv [Preprint]</source>
        <year>2020</year>
        <pub-id pub-id-type="doi">10.1101/2020.10.13.20211821</pub-id>
      </element-citation>
    </ref>
    <ref id="bib0013">
      <label>13</label>
      <mixed-citation publication-type="other" id="tboref0001">J.C.E. Lane et al., Risk of depression, suicide and psychosis with hydroxychloroquine treatment for rheumatoid arthritis: a multinational network cohort study. Rheumatology. 60 (7) (2021) 3222-3234, doi:<pub-id pub-id-type="doi">10.1093/rheumatology/keaa771</pub-id>.</mixed-citation>
    </ref>
    <ref id="bib0014">
      <label>14</label>
      <element-citation publication-type="journal" id="sbref0014">
        <person-group person-group-type="author">
          <name>
            <surname>Lane</surname>
            <given-names>J.C.E.</given-names>
          </name>
          <etal/>
        </person-group>
        <article-title>Risk of hydroxychloroquine alone and in combination with azithromycin in the treatment of rheumatoid arthritis: a multinational, retrospective study</article-title>
        <source>Lancet Rheumatol.</source>
        <volume>2</volume>
        <issue>11</issue>
        <year>2020</year>
        <fpage>e698</fpage>
        <lpage>e711</lpage>
        <pub-id pub-id-type="doi">10.1016/S2665-9913(20)30276-9</pub-id>
        <comment>Nov.</comment>
        <pub-id pub-id-type="pmid">32864627</pub-id>
      </element-citation>
    </ref>
    <ref id="bib0015">
      <label>15</label>
      <element-citation publication-type="journal" id="sbref0015">
        <person-group person-group-type="author">
          <name>
            <surname>Li</surname>
            <given-names>X.</given-names>
          </name>
          <etal/>
        </person-group>
        <article-title>Characterising the background incidence rates of adverse events of special interest for COVID-19 vaccines in eight countries: multinational network cohort study</article-title>
        <source>BMJ</source>
        <volume>373</volume>
        <year>2021</year>
        <fpage>n1435</fpage>
        <pub-id pub-id-type="doi">10.1136/bmj.n1435</pub-id>
        <pub-id pub-id-type="pmid">35727911</pub-id>
      </element-citation>
    </ref>
    <ref id="bib0016">
      <label>16</label>
      <element-citation publication-type="journal" id="sbref0016">
        <person-group person-group-type="author">
          <name>
            <surname>Morales</surname>
            <given-names>D.R.</given-names>
          </name>
          <etal/>
        </person-group>
        <article-title>Renin-angiotensin system blockers and susceptibility to COVID-19: an international, open science, cohort analysis</article-title>
        <source>Lancet Digit. Health</source>
        <year>2020</year>
        <pub-id pub-id-type="doi">10.1016/S2589-7500(20)30289-2</pub-id>
        <comment>Dec.</comment>
      </element-citation>
    </ref>
    <ref id="bib0017">
      <label>17</label>
      <element-citation publication-type="journal" id="sbref0017">
        <person-group person-group-type="author">
          <name>
            <surname>Prats-Uribe</surname>
            <given-names>A.</given-names>
          </name>
          <etal/>
        </person-group>
        <article-title>Use of repurposed and adjuvant drugs in hospital patients with COVID-19: multinational network cohort study</article-title>
        <source>BMJ</source>
        <volume>373</volume>
        <year>2021</year>
        <fpage>n1038</fpage>
        <pub-id pub-id-type="doi">10.1136/bmj.n1038</pub-id>
        <pub-id pub-id-type="pmid">33975825</pub-id>
      </element-citation>
    </ref>
    <ref id="bib0018">
      <label>18</label>
      <element-citation publication-type="journal" id="sbref0018">
        <person-group person-group-type="author">
          <name>
            <surname>Recalde</surname>
            <given-names>M.</given-names>
          </name>
          <etal/>
        </person-group>
        <article-title>Characteristics and outcomes of 627 044 COVID-19 patients living with and without obesity in the United States, Spain, and the United Kingdom</article-title>
        <source>Int. J. Obes.</source>
        <year>2021</year>
        <fpage>1</fpage>
        <lpage>11</lpage>
        <pub-id pub-id-type="doi">10.1038/s41366-021-00893-4</pub-id>
      </element-citation>
    </ref>
    <ref id="bib0019">
      <label>19</label>
      <element-citation publication-type="journal" id="sbref0019">
        <person-group person-group-type="author">
          <name>
            <surname>Reps</surname>
            <given-names>J.M.</given-names>
          </name>
          <etal/>
        </person-group>
        <article-title>Implementation of the COVID-19 vulnerability index across an international network of health care data sets: collaborative external validation study</article-title>
        <comment>(in eng)</comment>
        <source>JMIR Med. Inform.</source>
        <volume>9</volume>
        <issue>4</issue>
        <year>2021</year>
        <fpage>e21547</fpage>
        <pub-id pub-id-type="doi">10.2196/21547</pub-id>
        <comment>Apr 5</comment>
        <pub-id pub-id-type="pmid">33661754</pub-id>
      </element-citation>
    </ref>
    <ref id="bib0020">
      <label>20</label>
      <element-citation publication-type="journal" id="sbref0020">
        <person-group person-group-type="author">
          <name>
            <surname>Shoaibi</surname>
            <given-names>A.</given-names>
          </name>
          <name>
            <surname>Fortin</surname>
            <given-names>S.P.</given-names>
          </name>
          <name>
            <surname>Weinstein</surname>
            <given-names>R.</given-names>
          </name>
          <name>
            <surname>Berlin</surname>
            <given-names>J.A.</given-names>
          </name>
          <name>
            <surname>Ryan</surname>
            <given-names>P.</given-names>
          </name>
        </person-group>
        <article-title>Comparative effectiveness of famotidine in hospitalized COVID-19 patients</article-title>
        <source>Off. J. Am. Coll. Gastroenterol.| ACG</source>
        <volume>116</volume>
        <issue>4</issue>
        <year>2021</year>
        <fpage>692</fpage>
        <lpage>699</lpage>
      </element-citation>
    </ref>
    <ref id="bib0021">
      <label>21</label>
      <element-citation publication-type="journal" id="sbref0021">
        <person-group person-group-type="author">
          <name>
            <surname>Tan</surname>
            <given-names>E.H.</given-names>
          </name>
          <etal/>
        </person-group>
        <article-title>COVID-19 in patients with autoimmune diseases: characteristics and outcomes in a multinational network of cohorts across three countries</article-title>
        <source>Rheumatology</source>
        <year>2021</year>
        <pub-id pub-id-type="doi">10.1093/rheumatology/keab250</pub-id>
      </element-citation>
    </ref>
    <ref id="bib0022">
      <label>22</label>
      <element-citation publication-type="journal" id="sbref0022">
        <person-group person-group-type="author">
          <name>
            <surname>Williams</surname>
            <given-names>R.D.</given-names>
          </name>
          <etal/>
        </person-group>
        <article-title>Seek COVER: development and validation of a personalized risk calculator for COVID-19 outcomes in an international network</article-title>
        <source>medRxiv [Preprint]</source>
        <year>2020</year>
        <pub-id pub-id-type="doi">10.1101/2020.05.26.20112649</pub-id>
      </element-citation>
    </ref>
    <ref id="bib0023">
      <label>23</label>
      <element-citation publication-type="journal" id="sbref0023">
        <person-group person-group-type="author">
          <name>
            <surname>Platt</surname>
            <given-names>R.W.</given-names>
          </name>
          <name>
            <surname>Platt</surname>
            <given-names>R.</given-names>
          </name>
          <name>
            <surname>Brown</surname>
            <given-names>J.S.</given-names>
          </name>
          <name>
            <surname>Henry</surname>
            <given-names>D.A.</given-names>
          </name>
          <name>
            <surname>Klungel</surname>
            <given-names>O.H.</given-names>
          </name>
          <name>
            <surname>Suissa</surname>
            <given-names>S.</given-names>
          </name>
        </person-group>
        <article-title>How pharmacoepidemiology networks can manage distributed analyses to improve replicability and transparency and minimize bias</article-title>
        <source>Pharmacoepidemiol. Drug Saf.</source>
        <year>2019</year>
        <pub-id pub-id-type="doi">10.1002/pds.4722</pub-id>
        <comment>Jan.</comment>
      </element-citation>
    </ref>
    <ref id="bib0024">
      <label>24</label>
      <element-citation publication-type="journal" id="sbref0024">
        <person-group person-group-type="author">
          <name>
            <surname>Burn</surname>
            <given-names>E.</given-names>
          </name>
          <etal/>
        </person-group>
        <article-title>Opioid use, postoperative complications, and implant survival after unicompartmental versus total knee replacement: a population-based network study</article-title>
        <source>Lancet Rheumatol.</source>
        <volume>1</volume>
        <issue>4</issue>
        <year>2019</year>
        <fpage>e229</fpage>
        <lpage>e236</lpage>
        <pub-id pub-id-type="doi">10.1016/S2665-9913(19)30075-X</pub-id>
        <comment>Dec.</comment>
      </element-citation>
    </ref>
    <ref id="bib0025">
      <label>25</label>
      <element-citation publication-type="journal" id="sbref0025">
        <person-group person-group-type="author">
          <name>
            <surname>Burn</surname>
            <given-names>E.</given-names>
          </name>
          <etal/>
        </person-group>
        <article-title>Deep phenotyping of 34,128 adult patients hospitalised with COVID-19 in an international network study.</article-title>
        <source>Nature communications</source>
        <volume>11</volume>
        <issue>1</issue>
        <year>2020</year>
        <fpage>1</fpage>
        <lpage>11</lpage>
        <pub-id pub-id-type="doi">10.1038/s41467-020-18849-z</pub-id>
      </element-citation>
    </ref>
    <ref id="bib0026">
      <label>26</label>
      <element-citation publication-type="journal" id="sbref0026">
        <person-group person-group-type="author">
          <name>
            <surname>Observational Health Data Sciences and Informatics</surname>
          </name>
        </person-group>
        <article-title>OMOP Common Data Model</article-title>
        <source>GitHub repository [Online]</source>
        <year>2020</year>
        <ext-link ext-link-type="uri" xlink:href="http://ohdsi.github.io/CommonDataModel/" id="interref0013">http://ohdsi.github.io/CommonDataModel/</ext-link>
        <comment>(Accessed 7 December 2020)</comment>
      </element-citation>
    </ref>
    <ref id="bib0027">
      <label>27</label>
      <element-citation publication-type="journal" id="sbref0027">
        <person-group person-group-type="author">
          <name>
            <surname>Observational Health Data Sciences and Informatics</surname>
          </name>
        </person-group>
        <article-title>WhiteRabbit</article-title>
        <source>GitHub repository [Online]</source>
        <year>2020</year>
        <ext-link ext-link-type="uri" xlink:href="https://ohdsi.github.io/WhiteRabbit/WhiteRabbit.html" id="interref0014">https://ohdsi.github.io/WhiteRabbit/WhiteRabbit.html</ext-link>
        <comment>(Accessed 7 December 2020)</comment>
      </element-citation>
    </ref>
    <ref id="bib0028">
      <label>28</label>
      <element-citation publication-type="journal" id="sbref0028">
        <person-group person-group-type="author">
          <name>
            <surname>Observational Health Data Sciences and Informatics</surname>
          </name>
        </person-group>
        <article-title>Rabbit in a Hat</article-title>
        <source>GitHub repository [Online]</source>
        <year>2020</year>
        <ext-link ext-link-type="uri" xlink:href="https://ohdsi.github.io/WhiteRabbit/RabbitInAHat.html" id="interref0015">https://ohdsi.github.io/WhiteRabbit/RabbitInAHat.html</ext-link>
        <comment>(Accessed 7 December 2020)</comment>
      </element-citation>
    </ref>
    <ref id="bib0029">
      <label>29</label>
      <element-citation publication-type="journal" id="sbref0029">
        <person-group person-group-type="author">
          <name>
            <surname>Observational Health Data Sciences and Informatics</surname>
          </name>
        </person-group>
        <article-title>Usagi</article-title>
        <source>GitHub repository [Online]</source>
        <year>2020</year>
        <ext-link ext-link-type="uri" xlink:href="https://github.com/ohdsi/usagi" id="interref0016">https://github.com/ohdsi/usagi</ext-link>
        <comment>(Accessed 7 December 2020)</comment>
      </element-citation>
    </ref>
    <ref id="bib0030">
      <label>30</label>
      <element-citation publication-type="journal" id="sbref0030">
        <person-group person-group-type="author">
          <name>
            <surname>Observational Health Data Sciences and Informatics</surname>
          </name>
        </person-group>
        <article-title>DataQualityDashboard</article-title>
        <source>GitHub repository [Online]</source>
        <year>2020</year>
        <ext-link ext-link-type="uri" xlink:href="https://ohdsi.github.io/DataQualityDashboard/" id="interref0017">https://ohdsi.github.io/DataQualityDashboard/</ext-link>
        <comment>(Accessed 7 December 2020)</comment>
      </element-citation>
    </ref>
    <ref id="bib0031">
      <label>31</label>
      <element-citation publication-type="journal" id="sbref0031">
        <person-group person-group-type="author">
          <name>
            <surname>Huser</surname>
            <given-names>V.</given-names>
          </name>
          <etal/>
        </person-group>
        <article-title>Multisite evaluation of a data quality tool for patient-level clinical data sets</article-title>
        <source>EGEMS</source>
        <volume>4</volume>
        <issue>1</issue>
        <year>2016</year>
        <fpage>1239</fpage>
        <pub-id pub-id-type="doi">10.13063/2327-9214.1239</pub-id>
        <comment>(Wash DC)Nov.</comment>
        <pub-id pub-id-type="pmid">28154833</pub-id>
      </element-citation>
    </ref>
    <ref id="bib0032">
      <label>32</label>
      <element-citation publication-type="journal" id="sbref0032">
        <person-group person-group-type="author">
          <name>
            <surname>Reps</surname>
            <given-names>J.M.</given-names>
          </name>
          <name>
            <surname>Schuemie</surname>
            <given-names>M.J.</given-names>
          </name>
          <name>
            <surname>Suchard</surname>
            <given-names>M.A.</given-names>
          </name>
          <name>
            <surname>Ryan</surname>
            <given-names>P.B.</given-names>
          </name>
          <name>
            <surname>Rijnbeek</surname>
            <given-names>P.R.</given-names>
          </name>
        </person-group>
        <article-title>Design and implementation of a standardized framework to generate and evaluate patient-level prediction models using observational healthcare data</article-title>
        <source>J. Am. Med. Inform. Assoc.</source>
        <volume>25</volume>
        <issue>8</issue>
        <year>2018</year>
        <fpage>969</fpage>
        <lpage>975</lpage>
        <pub-id pub-id-type="doi">10.1093/jamia/ocy032</pub-id>
        <pub-id pub-id-type="pmid">29718407</pub-id>
      </element-citation>
    </ref>
    <ref id="bib0033">
      <label>33</label>
      <element-citation publication-type="journal" id="sbref0033">
        <person-group person-group-type="author">
          <name>
            <surname>Observational Health Data Sciences and Informatics</surname>
          </name>
        </person-group>
        <article-title>CohortDiagnostics</article-title>
        <source>GitHub repository [Online]</source>
        <year>2020</year>
        <ext-link ext-link-type="uri" xlink:href="https://ohdsi.github.io/CohortDiagnostics/" id="interref0018">https://ohdsi.github.io/CohortDiagnostics/</ext-link>
        <comment>(Accessed 7 December 2020)</comment>
      </element-citation>
    </ref>
    <ref id="bib0034">
      <label>34</label>
      <mixed-citation publication-type="other" id="tboref0002">L.H. John, J.A. Kors, J.M. Reps, P.B. Ryan, and P.R. Rijnbeek, How little data do we need for patient-level prediction?, arXiv [Preprint] (2020), doi: <ext-link ext-link-type="uri" xlink:href="arxiv:/2008.07361" id="interref8">arXiv:2008.07361</ext-link>.</mixed-citation>
    </ref>
    <ref id="bib0035">
      <label>35</label>
      <element-citation publication-type="journal" id="sbref0035">
        <person-group person-group-type="author">
          <name>
            <surname>Collins</surname>
            <given-names>G.S.</given-names>
          </name>
          <name>
            <surname>Ogundimu</surname>
            <given-names>E.O.</given-names>
          </name>
          <name>
            <surname>Altman</surname>
            <given-names>D.G.</given-names>
          </name>
        </person-group>
        <article-title>Sample size considerations for the external validation of a multivariable prognostic model: a resampling study</article-title>
        <source>Stat. Med.</source>
        <volume>35</volume>
        <issue>2</issue>
        <year>2016</year>
        <fpage>214</fpage>
        <lpage>226</lpage>
        <pub-id pub-id-type="doi">10.1002/sim.6787</pub-id>
        <comment>Jan.</comment>
        <pub-id pub-id-type="pmid">26553135</pub-id>
      </element-citation>
    </ref>
    <ref id="bib0036">
      <label>36</label>
      <element-citation publication-type="journal" id="sbref0036">
        <person-group person-group-type="author">
          <name>
            <surname>Suchard</surname>
            <given-names>M.A.</given-names>
          </name>
          <name>
            <surname>Simpson</surname>
            <given-names>S.E.</given-names>
          </name>
          <name>
            <surname>Zorych</surname>
            <given-names>I.</given-names>
          </name>
          <name>
            <surname>Ryan</surname>
            <given-names>P.</given-names>
          </name>
          <name>
            <surname>Madigan</surname>
            <given-names>D.</given-names>
          </name>
        </person-group>
        <article-title>Massive parallelization of serial inference algorithms for a complex generalized linear model</article-title>
        <source>ACM Trans. Model. Comput. Simul.</source>
        <volume>23</volume>
        <issue>1</issue>
        <year>2013</year>
        <pub-id pub-id-type="doi">10.1145/2414416.2414791</pub-id>
      </element-citation>
    </ref>
    <ref id="bib0037">
      <label>37</label>
      <element-citation publication-type="journal" id="sbref0037">
        <person-group person-group-type="author">
          <name>
            <surname>Reps</surname>
            <given-names>J.M.</given-names>
          </name>
          <etal/>
        </person-group>
        <article-title>Feasibility and evaluation of a large-scale external validation approach for patient-level prediction in an international data network: validation of models predicting stroke in female patients newly diagnosed with atrial fibrillation</article-title>
        <source>BMC Med. Res. Methodol.</source>
        <volume>20</volume>
        <issue>1</issue>
        <year>2020</year>
        <fpage>102</fpage>
        <pub-id pub-id-type="doi">10.1186/s12874-020-00991-3</pub-id>
        <comment>May</comment>
        <pub-id pub-id-type="pmid">32375693</pub-id>
      </element-citation>
    </ref>
    <ref id="bib0038">
      <label>38</label>
      <element-citation publication-type="journal" id="sbref0038">
        <person-group person-group-type="author">
          <name>
            <surname>Kuhn</surname>
            <given-names>M.</given-names>
          </name>
          <etal/>
        </person-group>
        <article-title>Building predictive models in R using the caret package</article-title>
        <source>J. Stat. Softw.</source>
        <volume>28</volume>
        <issue>1</issue>
        <year>2008</year>
        <fpage>1</fpage>
        <lpage>26</lpage>
        <pub-id pub-id-type="pmid">27774042</pub-id>
      </element-citation>
    </ref>
    <ref id="bib0039">
      <label>39</label>
      <element-citation publication-type="book" id="sbref0039">
        <person-group person-group-type="author">
          <name>
            <surname>Patel</surname>
            <given-names>D.</given-names>
          </name>
          <name>
            <surname>Zhou</surname>
            <given-names>N.</given-names>
          </name>
          <name>
            <surname>Shrivastava</surname>
            <given-names>S.</given-names>
          </name>
          <name>
            <surname>Kalagnanam</surname>
            <given-names>J.</given-names>
          </name>
        </person-group>
        <part-title>Doctor for machines: a failure pattern analysis solution for industry 4.0</part-title>
        <comment>2020</comment>
        <source>Proceedings of the IEEE International Conference on Big Data</source>
        <year>2020</year>
        <publisher-name>IEEE</publisher-name>
        <fpage>1614</fpage>
        <lpage>1623</lpage>
        <comment>(Big Data)</comment>
      </element-citation>
    </ref>
  </ref-list>
  <ack id="ack0001">
    <title>Acknowledgments</title>
    <p id="para0112">Statements of ethical approval</p>
    <p id="para0113">All databases obtained IRB approval or used deidentified data that was considered exempt from IRB approval. Informed consent was not necessary at any site.</p>
  </ack>
</back>
