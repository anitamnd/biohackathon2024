<?properties open_access?>
<?DTDIdentifier.IdentifierValue -//NLM//DTD JATS (Z39.96) Journal Publishing DTD v1.2 20190208//EN?>
<?DTDIdentifier.IdentifierType public?>
<?SourceDTD.DTDName JATS-journalpublishing1.dtd?>
<?SourceDTD.Version 1.2?>
<?ConverterInfo.XSLTName jats2jats3.xsl?>
<?ConverterInfo.Version 1?>
<front>
  <journal-meta>
    <journal-id journal-id-type="nlm-ta">Sensors (Basel)</journal-id>
    <journal-id journal-id-type="iso-abbrev">Sensors (Basel)</journal-id>
    <journal-id journal-id-type="publisher-id">sensors</journal-id>
    <journal-title-group>
      <journal-title>Sensors (Basel, Switzerland)</journal-title>
    </journal-title-group>
    <issn pub-type="epub">1424-8220</issn>
    <publisher>
      <publisher-name>MDPI</publisher-name>
    </publisher>
  </journal-meta>
  <article-meta>
    <article-id pub-id-type="pmcid">8402265</article-id>
    <article-id pub-id-type="doi">10.3390/s21165504</article-id>
    <article-id pub-id-type="publisher-id">sensors-21-05504</article-id>
    <article-categories>
      <subj-group subj-group-type="heading">
        <subject>Article</subject>
      </subj-group>
    </article-categories>
    <title-group>
      <article-title>BNS: A Framework for Wireless Body Area Network Realistic Simulations</article-title>
    </title-group>
    <contrib-group>
      <contrib contrib-type="author">
        <contrib-id contrib-id-type="orcid" authenticated="true">https://orcid.org/0000-0003-1606-9283</contrib-id>
        <name>
          <surname>Caballero</surname>
          <given-names>Egberto</given-names>
        </name>
        <xref rid="c1-sensors-21-05504" ref-type="corresp">*</xref>
      </contrib>
      <contrib contrib-type="author">
        <contrib-id contrib-id-type="orcid" authenticated="true">https://orcid.org/0000-0003-0708-3446</contrib-id>
        <name>
          <surname>Ferreira</surname>
          <given-names>Vinicius</given-names>
        </name>
      </contrib>
      <contrib contrib-type="author">
        <contrib-id contrib-id-type="orcid" authenticated="true">https://orcid.org/0000-0002-1037-5928</contrib-id>
        <name>
          <surname>Lima</surname>
          <given-names>Robson Araújo</given-names>
        </name>
      </contrib>
      <contrib contrib-type="author">
        <contrib-id contrib-id-type="orcid" authenticated="true">https://orcid.org/0000-0003-1439-762X</contrib-id>
        <name>
          <surname>Soto</surname>
          <given-names>Julio César Huarachi</given-names>
        </name>
      </contrib>
      <contrib contrib-type="author">
        <contrib-id contrib-id-type="orcid" authenticated="true">https://orcid.org/0000-0002-1233-9736</contrib-id>
        <name>
          <surname>Muchaluat-Saade</surname>
          <given-names>Débora</given-names>
        </name>
      </contrib>
      <contrib contrib-type="author">
        <contrib-id contrib-id-type="orcid" authenticated="true">https://orcid.org/0000-0002-7959-6569</contrib-id>
        <name>
          <surname>Albuquerque</surname>
          <given-names>Célio</given-names>
        </name>
      </contrib>
    </contrib-group>
    <contrib-group>
      <contrib contrib-type="editor">
        <name>
          <surname>Kondoz</surname>
          <given-names>Ahmet</given-names>
        </name>
        <role>Academic Editor</role>
      </contrib>
      <contrib contrib-type="editor">
        <name>
          <surname>Kolodziej</surname>
          <given-names>Joanna</given-names>
        </name>
        <role>Academic Editor</role>
      </contrib>
    </contrib-group>
    <aff id="af1-sensors-21-05504">MídiaCom Lab, Institute of Computing, Fluminense Federal University, Niterói 24210-346, Brazil; <email>vinicius@midiacom.uff.br</email> (V.F.); <email>robsonal@midiacom.uff.br</email> (R.A.L.); <email>jsoto@id.uff.br</email> (J.C.H.S.); <email>debora@midiacom.uff.br</email> (D.M.-S.); <email>celio@midiacom.uff.br</email> (C.A.)</aff>
    <author-notes>
      <corresp id="c1-sensors-21-05504"><label>*</label>Correspondence: <email>egbertocr@midiacom.uff.br</email></corresp>
    </author-notes>
    <pub-date pub-type="epub">
      <day>16</day>
      <month>8</month>
      <year>2021</year>
    </pub-date>
    <pub-date pub-type="collection">
      <month>8</month>
      <year>2021</year>
    </pub-date>
    <volume>21</volume>
    <issue>16</issue>
    <elocation-id>5504</elocation-id>
    <history>
      <date date-type="received">
        <day>10</day>
        <month>6</month>
        <year>2021</year>
      </date>
      <date date-type="accepted">
        <day>09</day>
        <month>8</month>
        <year>2021</year>
      </date>
    </history>
    <permissions>
      <copyright-statement>© 2021 by the authors.</copyright-statement>
      <copyright-year>2021</copyright-year>
      <license>
        <ali:license_ref xmlns:ali="http://www.niso.org/schemas/ali/1.0/" specific-use="textmining" content-type="ccbylicense">https://creativecommons.org/licenses/by/4.0/</ali:license_ref>
        <license-p>Licensee MDPI, Basel, Switzerland. This article is an open access article distributed under the terms and conditions of the Creative Commons Attribution (CC BY) license (<ext-link ext-link-type="uri" xlink:href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</ext-link>).</license-p>
      </license>
    </permissions>
    <abstract>
      <p>Simulation is a useful and common technique to evaluate the performance of networks when the implementation of a real scenario is not available. Specifically for Wireless Body Area Networks (WBAN), it is crucial to perform evaluations in environments as close as possible to the real conditions of use. To achieve that, simulations must include different protocol layers involved in WBAN and models close to reality to create realistic simulation environments for e-health applications. To satisfy these needs, this work presents the BNS framework, a flexible tool for WBAN simulations. The proposal is an extension of the Castalia framework, which includes: (1) a new wireless channel model considering real radio-propagation over the human body; (2) an updated implementation of the WBAN MAC protocol in Castalia, with functionalities and requirements in accordance with the IEEE 802.15.6 standard; (3) a new comprehensive and configurable mobility model for simulating intra-WBAN communication; (4) a temperature module based on the Pennes bioheat transfer equation, to model the temperature of a WBAN node based on the activity of the node; and (5) a Healthcare Application Layer that implements data representation and a communication protocol between Personal Health Devices (PHD) following the ISO/IEEE 11073 standard. Three use cases are presented, where WBAN scenarios are simulated and evaluated using the proposed BNS framework. Results show that BNS is a valid and flexible tool to evaluate WBAN solutions through simulation.</p>
    </abstract>
    <kwd-group>
      <kwd>WBAN</kwd>
      <kwd>personal health devices</kwd>
      <kwd>ISO/IEEE 11073</kwd>
      <kwd>IEEE 802.15.6</kwd>
      <kwd>e-health</kwd>
    </kwd-group>
  </article-meta>
</front>
<body>
  <sec sec-type="intro" id="sec1-sensors-21-05504">
    <title>1. Introduction</title>
    <p>The miniaturization of devices that can be used as wearables or attached to the human body has made possible the emergence of new communication networks. Thus, Wireless Body Area Networks (WBAN) are networks made up of small devices with low energy consumption and wireless communication capabilities. The main function of this type of network is to monitor and act on human bodies and the environment [<xref rid="B1-sensors-21-05504" ref-type="bibr">1</xref>]. The composition of a WBAN network is made by sensor and actuator nodes that interact with a coordinator node. The coordinator node is responsible for collecting and sending the required information to the sensor/actuator nodes, in turn, the coordinator node offers communication with other types of networks. The nodes of a WBAN can collect data of vital and physiological signals, monitoring, processing, and communicating those data in real time without causing discomfort to patients.</p>
    <p>The increase in older adults and patients with congenital, degenerative and other diseases, together with the medical expenses that they cause, resulted in the appearance of new technologies. Thus, WBAN was created to be applied to healthcare (e-health) for monitoring patients at a low cost and thus alleviating medical and economical expenses. However, the use of WBAN is not restricted to the health area and can be applied to other fields such as entertainment, sports, military services and others [<xref rid="B2-sensors-21-05504" ref-type="bibr">2</xref>].</p>
    <p>IEEE 802.15.6 [<xref rid="B3-sensors-21-05504" ref-type="bibr">3</xref>] published in 2012 is the standard that best defines WBAN, which specifies wireless communications on and around the human body. The standard defines an architecture with three levels: Intra-WBAN, Inter-WBAN and Beyond-WBAN. IEEE 802.15.6 defines the functionalities of the Physical (PHY) and Medium Access Control (MAC) layers. In addition, it shows its main characteristics related to low energy consumption, reliability and transmission rate. We also find definitions of network topology, such as star topology, extended star and security levels with different security and protection properties [<xref rid="B4-sensors-21-05504" ref-type="bibr">4</xref>]. After the IEEE 802.15.6 standard publication, research work focused on layers not defined in the standard. However, more recent studies propose modifications to the WBAN standard. For example, in [<xref rid="B5-sensors-21-05504" ref-type="bibr">5</xref>], modifications to the MAC layer is proposed. The results of that work show that the proposed protocol works better than the WBAN standard in terms of throughput, energy consumption and packet delivery delay.</p>
    <p>Together with the advances of WBANs, new social and technical challenges arise. Ease of use, data security and privacy, interoperability, cost, physical security, and user well-being are social challenges to be overcome. Technically the wireless channel dynamics, the computational power limitations, the energy efficiency and the operation of the transceiver are the main challenges. Other challenges such as device overheating, heterogeneous environment, Quality of Service (QoS) provision must be evaluated in WBAN to allow practical adoption [<xref rid="B6-sensors-21-05504" ref-type="bibr">6</xref>,<xref rid="B7-sensors-21-05504" ref-type="bibr">7</xref>].</p>
    <p>Another interesting point of WBANs is the heterogeneity of their components, i.e., for monitoring vital and physiological signals, different types of sensor nodes are needed that clearly differ in computational resources, storage capacity, energy consumption and sampling rates. In addition, wireless communication between sensor nodes is carried out through the human body, which leads to its degradation, causing in many cases the fading of the communication channel, loss of trajectory, and high latency. Additionally, the movement of the human body, such as the movement of arms and legs can cause the breakdown of the network topology. Thus, we say that the environment where WBAN communication takes place is highly dynamic and unstable, where a specific communication channel must be considered that guarantees the good performance of communication in highly dynamic and unstable environments [<xref rid="B4-sensors-21-05504" ref-type="bibr">4</xref>].</p>
    <p>The increase in temperature is one of the most relevant challenges for WBAN. For implanted nodes, a dramatic increase in temperature heats the tissue around the node and can cause tissue damage and infection. For example, in [<xref rid="B8-sensors-21-05504" ref-type="bibr">8</xref>], it is exposed that a temperature increase of 0.1 °C is sufficient to activate thermoregulatory responses of the human body that can be harmful in the long-term. In WBAN scenarios, two sources of a node’s temperature rise are: the transceiver radiation and energy consumption of the node’s circuits. Using low transmission power, the radiation absorption is reduced, and avoiding long periods of node operation, the increase in node temperature may be controlled [<xref rid="B9-sensors-21-05504" ref-type="bibr">9</xref>].</p>
    <p>Specific protocols for WBAN have been proposed to overcome these technical challenges. Whenever a new technological proposal emerges, it is important to carry out performance evaluations in environments in which they will be used. However, it is not always feasible to create the infrastructure for a real test scenario; whether for economic reasons or other human factors. In such cases, evaluating a new solution using simulation is the preferred option. Therefore, it is necessary to have models as close to reality as possible to create realistic simulation environments to evaluate the performance of new WBAN proposals.</p>
    <p>In the literature, several simulation tools are used to evaluate WBAN proposals, such as OMNET++, Castalia [<xref rid="B10-sensors-21-05504" ref-type="bibr">10</xref>,<xref rid="B11-sensors-21-05504" ref-type="bibr">11</xref>,<xref rid="B12-sensors-21-05504" ref-type="bibr">12</xref>], MiXiM [<xref rid="B13-sensors-21-05504" ref-type="bibr">13</xref>], NS-2 [<xref rid="B14-sensors-21-05504" ref-type="bibr">14</xref>,<xref rid="B15-sensors-21-05504" ref-type="bibr">15</xref>], NS-3 [<xref rid="B16-sensors-21-05504" ref-type="bibr">16</xref>] and MatLab [<xref rid="B17-sensors-21-05504" ref-type="bibr">17</xref>,<xref rid="B18-sensors-21-05504" ref-type="bibr">18</xref>,<xref rid="B19-sensors-21-05504" ref-type="bibr">19</xref>,<xref rid="B20-sensors-21-05504" ref-type="bibr">20</xref>,<xref rid="B21-sensors-21-05504" ref-type="bibr">21</xref>]. In addition to simulation tools, there are test-bench-based studies such as [<xref rid="B22-sensors-21-05504" ref-type="bibr">22</xref>,<xref rid="B23-sensors-21-05504" ref-type="bibr">23</xref>]. Most simulation tools focus on a single network layer evaluation. For example, most MatLab simulations aim at modeling the PHY and MAC layers. However, studies like [<xref rid="B20-sensors-21-05504" ref-type="bibr">20</xref>] also use MatLab to evaluate the performance of routing proposals. On the other hand, network simulators such as NS-2 and OMNET++ are often used to evaluate proposals for routing protocols. This dissociation between layers reduces the realistic likelihood of the simulated scenario.</p>
    <p>Therefore, there is a need for a simulation tool that integrates all network layers and at the same time satisfies the demands of WBAN. Specifically, Castalia [<xref rid="B10-sensors-21-05504" ref-type="bibr">10</xref>] is a framework that addresses this need for integration of layers. Castalia became the most widely accepted proposal in studies focusing on WBAN, mainly because it offers an experimental channel model and an implementation of the IEEE 802.15.6 <italic>draft</italic> version. However, to simulate WBAN in realistic environments, Castalia still needs to incorporate new modules, such as the effect of node transmissions on body temperature, human body mobility models, specific routing protocols, and a healthcare standard for the application layer. The WBAN standard defines an architecture with three levels: Intra-WBAN, Inter-WBAN and Beyond-WBAN [<xref rid="B3-sensors-21-05504" ref-type="bibr">3</xref>]. In the application layer, the current version of Castalia only considers configurations for generic Wireless Sensor Network (WSN) devices without considering the particularities of healthcare sensors. Additionally, the data representation and the communication mechanisms between the sensor nodes and the coordinator node for e-health applications, specified in the IEEE-11073 standard, are not considered.</p>
    <p>To fill in those gaps, this work presents the Body Network Simulator (BNS) framework, an extension of the Castalia framework for intra-WBAN communication, which includes:<list list-type="bullet"><list-item><p>Wireless Channel Model:The wireless channel model Goswami et al. [<xref rid="B24-sensors-21-05504" ref-type="bibr">24</xref>], created specifically for WBAN is implemented and available in the BNS framework.</p></list-item><list-item><p>IEEE 802.15.6: The draft version of the MAC protocol provided by Castalia is updated with functionalities and requirements of the IEEE 802.15.6 standard published in 2012.</p></list-item><list-item><p>Mobility Model: A mobility model based on MoBAN [<xref rid="B25-sensors-21-05504" ref-type="bibr">25</xref>] is also provided in the BNS framework. The model enables the use of a set of postures and node’s movements based on the current posture and node placement.</p></list-item><list-item><p>Temperature Model: A temperature model based on the Pennes bioheat transfer equation [<xref rid="B26-sensors-21-05504" ref-type="bibr">26</xref>] is incorporated. This model calculates the temperature variation based on the activity of the node. Moreover, the SAR generated by the transceiver radiation and the power dissipated by the nodes’ electronic components are considered heat sources.</p></list-item><list-item><p>Healthcare Application Layer: This proposal implements the data representation and the communication protocol among the application layers of Personal Health Device (PHD) according to the ISO/IEEE 11073 standard  [<xref rid="B27-sensors-21-05504" ref-type="bibr">27</xref>]. This application layer provides five different types of PHD to act as real ISO/IEEE 11073 devices (X73-PHD) in WBAN simulations: pulse oximeter, glucose meter, thermometer, blood pressure monitor and a basic Electrocardiogram (ECG) sensor. The Antidote Library [<xref rid="B28-sensors-21-05504" ref-type="bibr">28</xref>] was used to assist in the development of this application layer. The Antidote Library was developed to be used in real medical devices as part of the SigHealth Platform [<xref rid="B28-sensors-21-05504" ref-type="bibr">28</xref>], a platform for remote patient monitoring and data management using personal wireless devices for health. A plug-in that allows communication between the Antidote Library and the BNS framework was developed.</p></list-item></list></p>
    <p>The remainder of this paper is organized as follows. <xref ref-type="sec" rid="sec2-sensors-21-05504">Section 2</xref> presents a review of tools for WBAN simulation used in the literature. <xref ref-type="sec" rid="sec3-sensors-21-05504">Section 3</xref> presents the proposed BNS framework and the implementation of the contributions presented in this work. <xref ref-type="sec" rid="sec4-sensors-21-05504">Section 4</xref> discusses the results of some use cases of the proposed BNS framework in WBAN research and <xref ref-type="sec" rid="sec5-sensors-21-05504">Section 5</xref> summarizes the conclusions and future work.</p>
  </sec>
  <sec id="sec2-sensors-21-05504">
    <title>2. Related Work</title>
    <p>Several simulations tools are used to evaluate WBAN proposals, such as OMNET++, Castalia, MiXiM, NS-2, NS-3 and MatLab. In addition to simulation tools, there are test-bench-based studies [<xref rid="B22-sensors-21-05504" ref-type="bibr">22</xref>,<xref rid="B23-sensors-21-05504" ref-type="bibr">23</xref>], and others where authors developed their own simulators [<xref rid="B29-sensors-21-05504" ref-type="bibr">29</xref>].</p>
    <p>OMNET++ [<xref rid="B30-sensors-21-05504" ref-type="bibr">30</xref>] is a discrete-event simulator commonly used to build network simulators. It has an object-oriented modular structure and is developed in C++. Its module-based architecture allows it to be easily used in new network simulator proposals. Among the frameworks for network simulation developed on top of OMNET++ are MiXiM [<xref rid="B13-sensors-21-05504" ref-type="bibr">13</xref>] and Castalia [<xref rid="B10-sensors-21-05504" ref-type="bibr">10</xref>]. MiXiM is an OMNET++ modeling framework created for mobile and fixed wireless networks as WSN, WBAN, and others. It offers detailed models of radio wave propagation, interference estimation, radio transceiver power consumption and wireless MAC protocols. However, the implementation of the WBAN standard is not available.</p>
    <p>Castalia framework [<xref rid="B31-sensors-21-05504" ref-type="bibr">31</xref>] is more specific for simulating WBAN protocols. It was developed for low-power device networks. Specifically, to simulate WBAN, Castalia offers an advanced channel model based on empirically measured data for the human body as the propagation medium as well as a radio model based on real radios for low-power communication. Additionally, the radio model is highly flexible. It estimates the reception probability based on Signal-to-Interference-plus-Noise Ratio (SINR), packet size and modulation type. It allows several levels of transmission power, being able to identify variations for individual nodes. Castalia performs a realistic modeling of the Received Signal Strength Indicator (RSSI) and carrier detection, it defines states with different energy consumption and delays in switching between states and considers the node’s clock deviation [<xref rid="B10-sensors-21-05504" ref-type="bibr">10</xref>]. Moreover, Castalia has an implementation of the IEEE 802.15.6 <italic>draft</italic> version. Because of that, Castalia became the most widely accepted proposal in studies focusing on WBAN [<xref rid="B12-sensors-21-05504" ref-type="bibr">12</xref>,<xref rid="B32-sensors-21-05504" ref-type="bibr">32</xref>,<xref rid="B33-sensors-21-05504" ref-type="bibr">33</xref>,<xref rid="B34-sensors-21-05504" ref-type="bibr">34</xref>,<xref rid="B35-sensors-21-05504" ref-type="bibr">35</xref>,<xref rid="B36-sensors-21-05504" ref-type="bibr">36</xref>,<xref rid="B37-sensors-21-05504" ref-type="bibr">37</xref>].</p>
    <p>For example, in [<xref rid="B37-sensors-21-05504" ref-type="bibr">37</xref>] Castalia is used to evaluate the performance of the PHY, MAC and Network layers of WBAN. In [<xref rid="B36-sensors-21-05504" ref-type="bibr">36</xref>] a comparative analysis of the IEEE 802.15.4 [<xref rid="B38-sensors-21-05504" ref-type="bibr">38</xref>] and IEEE 802.15.6 standards over a WBAN healthcare monitoring system is performed using Castalia, to evaluate QoS parameters of the two standards under the same conditions. However, Castalia does not provide necessary modules for realistic simulations, such as: body temperature model, WBAN specific routing protocols, and a Healthcare Application Layer.</p>
    <p>NS-2 is an open source, discrete-event network simulator. It was built in C++ and is capable of simulating wired as well as wireless networks. Some researchers, focusing on routing algorithms for WBAN, have used NS-2 to simulate and evaluate their proposals. In [<xref rid="B15-sensors-21-05504" ref-type="bibr">15</xref>] a stable, reliable and energy efficient routing protocol for WBAN is proposed. In that work, the authors evaluated two performance metrics, energy consumption and routing overhead. Their proposal was implemented and evaluated using NS-2. In [<xref rid="B14-sensors-21-05504" ref-type="bibr">14</xref>] the authors propose DMQoS protocol. In this work, the performance of the DMQoS is compared with DARA [<xref rid="B39-sensors-21-05504" ref-type="bibr">39</xref>] and LOCALMOR [<xref rid="B40-sensors-21-05504" ref-type="bibr">40</xref>] protocols, other routing protocols developed in NS-2. In those studies, simulations were focused on evaluating the performance of the proposed protocol and the IEEE 802.15.4 standard was used in the MAC layer. In the literature, no work has been identified with the implementation in NS-2 of the IEEE 802.15.6 standard MAC layer.</p>
    <p>The NS-3 project [<xref rid="B41-sensors-21-05504" ref-type="bibr">41</xref>] was initiated in 2006. Like NS-2, is an open source, discrete-event network simulator. This simulator is considered to be a replacement of NS-2 and not an extension. It is written in C++ language and python. Some studies have implemented models to simulate realistic WBAN scenarios using NS-3. For example, in [<xref rid="B42-sensors-21-05504" ref-type="bibr">42</xref>,<xref rid="B43-sensors-21-05504" ref-type="bibr">43</xref>], implementations of the IEEE 802.15.6 standard are proposed for NS-3. Additionally, in [<xref rid="B16-sensors-21-05504" ref-type="bibr">16</xref>] a comprehensive review of the main components of the IEEE 802.15.6 standard is conducted and modeling strategies are presented to implement IEEE 802.15.6 MAC in the NS-3 simulator. In that work, the authors also modeled the necessary components in NS-3 to provide a realistic simulation environment and to reliably evaluate health monitoring systems. Among these components, we find models for PHY, MAC, error rate, propagation loss, on-body channel, energy, and human mobility. However, a temperature model that allows monitoring the heating of the WBAN sensor nodes and an application layer that implements the communication protocols between personal health devices in correspondence with the ISO/IEEE 11073 standard are not provided for NS-3. Additionally, there is no freely available WBAN mobility model for simulating WBAN in any of those simulation tools [<xref rid="B25-sensors-21-05504" ref-type="bibr">25</xref>].</p>
    <p>MatLab is a powerful simulation tool, and is also used in several studies focused on WBAN [<xref rid="B17-sensors-21-05504" ref-type="bibr">17</xref>,<xref rid="B18-sensors-21-05504" ref-type="bibr">18</xref>,<xref rid="B19-sensors-21-05504" ref-type="bibr">19</xref>,<xref rid="B20-sensors-21-05504" ref-type="bibr">20</xref>,<xref rid="B21-sensors-21-05504" ref-type="bibr">21</xref>]. However, it does not allow simulations to be performed considering all network layers. Matlab is most used in studies focused on modeling the PHY and MAC layers. However, proposals like [<xref rid="B17-sensors-21-05504" ref-type="bibr">17</xref>,<xref rid="B20-sensors-21-05504" ref-type="bibr">20</xref>] also use MatLab to evaluate the performance of routing protocols. In [<xref rid="B17-sensors-21-05504" ref-type="bibr">17</xref>] a thermal-aware routing protocol that avoids high temperature areas (hot spots) is proposed. In their work, a temperature model is implemented; however, in the study only the performance of the proposed routing protocol is evaluated without considering other layers. It is important to note that MatLab is not a network simulator itself. It allows implementation, simulation and evaluation of the behavior of models. However, for network simulation there are better tools such as OMNET++.</p>
    <p>In other studies, prototypes of WBAN nodes are used to evaluate communication protocols and the wireless channel. For example, in [<xref rid="B22-sensors-21-05504" ref-type="bibr">22</xref>] they explore on-body packet routing issues in the presence of topological partitioning caused due to ultra-short wireless range and postural body movements. In that work, a probabilistic packet routing protocol is then developed using a stochastic link cost, reflecting the body postural trends. The performance of the proposed protocol is evaluated experimentally. For that, authors developed a prototype of WBAN. In [<xref rid="B23-sensors-21-05504" ref-type="bibr">23</xref>] the behavior of the wireless channel is estimated in correspondence with a real scenario. As a main result of that work, a loss map and a temporal variation model of the wireless channel are proposed, which were generated based on real measurements. For that, experiments were carried out using transmitting and receiving antennas on the body of people, simulating the transceivers of the WBAN nodes. In those work, WBAN prototypes do not consider a protocol architecture with all layers of a WBAN network. However, implementing a WBAN for testing can prove costly and in addition, testing real-world scenarios that consider nodes implanted in the body remains a challenge.</p>
    <p>In [<xref rid="B29-sensors-21-05504" ref-type="bibr">29</xref>], a thermal-aware routing protocol is proposed. The objective of that work is to reduce overheating of sensors implanted in human bodies. The authors evaluated the temperature increase and the energetic efficiency. For that, the authors developed a specific simulation program in Java using discrete-event simulation. However, the simulator does not comply with the definitions of the WBAN standard.</p>
    <p>In the literature review, the need for simulation tools that provide an application layer with communication protocols for real personal health devices was identified. In addition, the different simulation tools have some dissociation between the different layers of the proposed network architecture for WBAN, which reduces the likelihood of simulating a real scenario and makes comparison difficult. To overcome these issues, this work presents the BNS framework as an extension of Castalia. Details of the implementation modules are presented in <xref ref-type="sec" rid="sec3-sensors-21-05504">Section 3</xref>. <xref rid="sensors-21-05504-t001" ref-type="table">Table 1</xref> shows a comparative summary of the simulation capacity of WBAN networks for the different simulation tools referenced in the literature and the BNS framework proposed in this work.</p>
  </sec>
  <sec id="sec3-sensors-21-05504">
    <title>3. Proposed BNS Framework</title>
    <p>Our proposed BNS framework for WBAN simulations (Available online: <uri xlink:href="https://github.com/midiacom/BNS-Framework">https://github.com/midiacom/BNS-Framework</uri> (accessed on 10 August 2021)) has a hierarchical structure based on modules. The BNS framework structure is shown in <xref ref-type="fig" rid="sensors-21-05504-f001">Figure 1</xref>. There are three main interconnected modules: the node, the wireless channel and the physical process. In the BNS framework, the nodes are not directly connected to each other, but through the wireless channel module. When a node has a packet to send, it goes to the wireless channel, which decides which nodes should receive the packet. Additionally, nodes are linked to the physical process, from which they obtain information about some physical magnitude collected by the sensor.</p>
    <p>The BNS framework represents each WBAN node as a composite module, which is formed by several sub-modules that represent the different layers of the WBAN network, and others auxiliary sub-modules that model important features of WBAN. As it can be seen in <xref ref-type="fig" rid="sensors-21-05504-f001">Figure 1</xref>, each node module contains: Temperature Manager, Resource Manager, Mobility Manager, Sensor Manager, Application and Communication sub-modules. In addition, Communication sub-module contains Routing, MAC and Radio sub-modules. In this figure, the solid arrows represent the exchange of messages between the different sub-modules and the dashed arrows represent simple function calls. For example, most modules call a resource manager function to indicate that the energy has been consumed.</p>
    <p>The BNS framework is an extension of Castalia and, in this proposal, new available modules are represented in <xref ref-type="fig" rid="sensors-21-05504-f001">Figure 1</xref> with grey boxes. A model of channel behavior for WBAN proposed by Goswami et al. [<xref rid="B24-sensors-21-05504" ref-type="bibr">24</xref>] is implemented. The Mobility Model for Wireless Body Area Networks (MoBAN) proposed by Nabi et al. [<xref rid="B25-sensors-21-05504" ref-type="bibr">25</xref>] is implemented as a new Mobility Manager sub-module. A new temperature module is implemented. This allows estimation of the temperature of the nodes based on their activity. The Temperature Manager module makes function calls to the resource manager and radio modules to have the activity information of the node and to be able to calculate the temperature of the node. In addition, sub-modules of the Communication module can consult the node temperature.</p>
    <p>The MAC layer sub-module corresponding to the draft WBAN standard is updated with features and requirements of the IEEE 802.15.6 standard published in 2012. In the routing sub-module, the Link-Quality Aware and Thermal Aware On-Demand Routing (LATOR) protocol proposed in [<xref rid="B9-sensors-21-05504" ref-type="bibr">9</xref>] is added. This protocol uses the temperature calculated by the Temperature Manager module to avoid overheating the nodes. In the Application module, a Healthcare Application sub-module is added. This one implements data representation and a communication protocol of PHD recommended in the ISO/IEEE 11073 standard. Details of these implementations will be presented in the following sections. The BNS framework uses an infrastructure of abstract classes and interfaces. This infrastructure is extensible, new modules, sub-modules and functionalities can be implemented and added to the existing framework.</p>
    <sec id="sec3dot1-sensors-21-05504">
      <title>3.1. Wireless Channel</title>
      <p>Ultra-wideband Physical Layer (UWB-PHY) allows low-power transmission, low-power consumption, high data rate, and robustness against multi-path fading. That makes it a suitable air interface for WBAN systems. The IEEE 802.15.6 standard includes UWB-PHY. There are many attempts to model the WBAN wireless channel [<xref rid="B24-sensors-21-05504" ref-type="bibr">24</xref>,<xref rid="B44-sensors-21-05504" ref-type="bibr">44</xref>,<xref rid="B45-sensors-21-05504" ref-type="bibr">45</xref>,<xref rid="B46-sensors-21-05504" ref-type="bibr">46</xref>]. In [<xref rid="B24-sensors-21-05504" ref-type="bibr">24</xref>], Gowami et al. experimentally determined a model for the path loss of on-body Ultra-wideband (UWB) channel. That model was statistically determined from measurement data and has parameters for link obstruction (Line-of-Sight (LOS) and Non-Line-of-Sight (NLOS)), different body shapes (underweight, normal, and overweight), and each UWB high band channel of the IEEE 802.15.6 standard. Therefore, we chose to implement the Gowami et al. channel modeling [<xref rid="B24-sensors-21-05504" ref-type="bibr">24</xref>] to provide flexibility and different simulations scenarios.</p>
      <p>The Goswami channel model [<xref rid="B24-sensors-21-05504" ref-type="bibr">24</xref>] provides a description of the channel behavior around the human body, since they used a considered number of receiving antennas spread over the body with a separation of 5 cm between two consecutive nodes. This model considers the LOS and NLOS channel conditions over the human body. It also considers the influence of people’s physiques on the loss of path. For this, people with different weights and classified as ‘thin’, ‘normal’ and ‘fat’ participated in the experiment. With MatLab software, the frequency response and the average path loss for each sub-band defined in the WBAN standard were obtained. The path loss is modeled as a log-normal distribution, and the distance dependent path loss is expressed as in Equation (<xref ref-type="disp-formula" rid="FD1-sensors-21-05504">1</xref>). The reference distance (<inline-formula><mml:math id="mm1"><mml:mrow><mml:msub><mml:mi>d</mml:mi><mml:mn>0</mml:mn></mml:msub></mml:mrow></mml:math></inline-formula>) is 5 cm, the path loss for that reference distance (<inline-formula><mml:math id="mm2"><mml:mrow><mml:mrow><mml:mi>P</mml:mi><mml:mi>l</mml:mi><mml:mo>(</mml:mo><mml:msub><mml:mi>d</mml:mi><mml:mn>0</mml:mn></mml:msub><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula>), the path loss exponent (<italic>n</italic>), and the shadow fading (<inline-formula><mml:math id="mm3"><mml:mrow><mml:mi>χ</mml:mi></mml:mrow></mml:math></inline-formula>) are given for different scenarios.
<disp-formula id="FD1-sensors-21-05504"><label>(1)</label><mml:math id="mm4"><mml:mrow><mml:mrow><mml:mi>P</mml:mi><mml:msub><mml:mi>l</mml:mi><mml:mrow><mml:mi>d</mml:mi><mml:mi>B</mml:mi></mml:mrow></mml:msub><mml:mfenced open="(" close=")"><mml:mi>d</mml:mi></mml:mfenced><mml:mo>=</mml:mo><mml:mi>P</mml:mi><mml:msub><mml:mi>l</mml:mi><mml:mrow><mml:mi>d</mml:mi><mml:mi>B</mml:mi></mml:mrow></mml:msub><mml:mfenced separators="" open="(" close=")"><mml:msub><mml:mi>d</mml:mi><mml:mn>0</mml:mn></mml:msub></mml:mfenced><mml:mo>+</mml:mo><mml:mn>10</mml:mn><mml:mo>·</mml:mo><mml:mi>n</mml:mi><mml:mo>·</mml:mo><mml:mi>l</mml:mi><mml:mi>o</mml:mi><mml:msub><mml:mi>g</mml:mi><mml:mn>10</mml:mn></mml:msub><mml:mfenced separators="" open="(" close=")"><mml:mfrac><mml:mi>d</mml:mi><mml:msub><mml:mi>d</mml:mi><mml:mn>0</mml:mn></mml:msub></mml:mfrac></mml:mfenced><mml:mo>+</mml:mo><mml:mi>χ</mml:mi></mml:mrow></mml:mrow></mml:math></disp-formula></p>
      <p>As part of our work, the Goswami channel model is implemented and now provided in the BNS framework. <xref ref-type="fig" rid="sensors-21-05504-f002">Figure 2</xref> shows the Goswami channel class implemented. The attributes are the size of the network, the dimensions of the simulated area, a list of node positions, the channel used, the body size, a map of channel/body size to path loss parameters, a structure of path loss parameters for LOS and NLOS scenarios, the radio sensitivity, the transmission power, and the hub identifier. The <italic>Pathloss_type</italic> structure stores parameters of the log-normal channel, which contains the loss exponent, the reception power at a given reference distance, the reference distance, and the standard deviation value to generate the random variable, for both LOS and NLOS channels.</p>
      <p>There are three main methods: the initialization method, which is responsible for reading the parameters from the configuration file and initializing the variables; the <inline-formula><mml:math id="mm5"><mml:mrow><mml:mrow><mml:mi>h</mml:mi><mml:mi>a</mml:mi><mml:mi>n</mml:mi><mml:mi>d</mml:mi><mml:mi>l</mml:mi><mml:mi>e</mml:mi><mml:mi>M</mml:mi><mml:mi>e</mml:mi><mml:mi>s</mml:mi><mml:mi>s</mml:mi><mml:mi>a</mml:mi><mml:mi>g</mml:mi><mml:mi>e</mml:mi></mml:mrow></mml:mrow></mml:math></inline-formula> method that receives node movement messages from the mobility module, and messages of start and end of a wireless transmission; and the method that calculates the path loss between two nodes. In the implemented model, the hub is a position reference on the Cartesian axis and each node in front of it in the direction of the walking movement (<inline-formula><mml:math id="mm6"><mml:mrow><mml:mrow><mml:mo>+</mml:mo><mml:mi>z</mml:mi></mml:mrow></mml:mrow></mml:math></inline-formula>) is considered to be in its LOS. When the node is behind the hub, the body is considered to be an obstruction and the channel model with NLOS is used for the path loss calculation.</p>
      <p>Previous studies only consider the Narrow Band Physical Layer (NB-PHY), using a David channel model [<xref rid="B23-sensors-21-05504" ref-type="bibr">23</xref>] available in Castalia. David channel model is an advanced model based on empirically obtained data. This model defines a map of path losses, instead of simple connections between nodes. It consists of a model for temporary variation of path loss and supports node mobility. This model is the result of the work presented in [<xref rid="B23-sensors-21-05504" ref-type="bibr">23</xref>], where experiments were carried out using transmitting and receiving antennas on the bodies of eight adults, simulating the transceiver of a WBAN node. Six transceivers were considered and allocated in the following positions: one on the right side of the waist, one on each wrist, one on each foot and one on the chest.</p>
      <p>This study just consider a NB-PHY. Our BNS framework, also provides a David channel model. Therefore, the user can choose the desired physical layer for the scenario to simulate, NB-PHY or UWB-PHY. Another important aspect is that David channel model is limited to the number of nodes and the positions used in the experiment. On the other hand, the Goswami wireless channel considers a larger number of nodes allocated on the body. Since the BNS framework provides both models, BNS offers more flexibility to simulate WBAN scenarios.</p>
    </sec>
    <sec id="sec3dot2-sensors-21-05504">
      <title>3.2. Mac Layer</title>
      <p>The BNS framework MAC Layer implementation extends the draft version available in Castalia to meet the requirements of the frame format of the IEEE 802.15.6 standard published in 2012. In the BNS framework MAC Layer, we added features such as: storing the list of neighboring nodes and some metrics of communication between neighbors; the possibility of encapsulating frames and using nodes as relay; prioritization of traffic when using Carrier Sense Multiple Access with Collision Avoidance (CSMA/CA) medium access method; and the adjustment of allocation times, channel assessment and other temporal parameters to follow those recommended by IEEE 802.15.6 NB-PHY. The changes in the frame header fields were as follows:<list list-type="bullet"><list-item><p>Changing the structure of source and destination fields. The draft version of the standard did not provide the possibility of communication between network nodes, and was restricted to the node/hub communication. Therefore, in the implementation provided in the simulator there were only two markers, one for the address of the hub (<italic>Hub ID</italic>) and one for the address of the <italic>Node ID</italic> node, which were used to identify the hub and node in the communication indiscriminately whether source or destination. To enable the communication between different nodes, those two fields were replaced by the three used in the standard header: <italic>Recipient ID</italic>, <italic>Sender ID</italic> and <italic>BAN ID</italic>. In this way, it is possible to identify the message source and destination in a BAN, and permits node/node communication.</p></list-item><list-item><p>Inclusion of the <italic>BAN Security/Relay</italic> field. The <italic>BAN Security/Relay</italic> field is a flag that, if used by the hub, defines whether the BAN accepts only secure connections or also accepts insecure ones, features that are not implemented in the simulator. However, when used by network nodes, the field is interpreted as a relay flag, marking an extended topology frame. Within the scope of this work, other implementations were made that allow the use of the field as relay flag.</p></list-item><list-item><p>Inclusion of other fields. For the header to have the size and all fields specified in the standard, the fields <italic>Last Frame/Access Mode/B2</italic> and <italic>Non-final Fragment/Cancel/Scale/ Inactive</italic> were also inserted, but without the implementation of its functionalities.</p></list-item></list></p>
      <p>To enable the use of the relay functionality, in addition to the <italic>BAN Security/Relay</italic> field, the framework subtypes <italic>Relay Request</italic>, <italic>Relay Accept</italic> and <italic>Relay Refuse</italic> were also implemented, and methods for encapsulating and decapsulating frames. Thus, it is possible to investigate the use of the extended topology in future work. To enable the monitoring of neighboring nodes, a class structure was created to store their information. The created classes are represented in the diagram of <xref ref-type="fig" rid="sensors-21-05504-f003">Figure 3</xref>.</p>
      <p>With this new class structure, it is possible to store information about neighboring nodes, such as their address, whether they can be used as relay, if the node is a hub and in addition to two vectors of <italic>size</italic> store the instant of the last contacts and the RSSI of the received frames. In addition to this node information, a neighborhood structure makes it possible to verify this stored information through a map that uses the address as a key and for the functions of relay an attribute called <italic>selector</italic>, which makes it possible to use different criteria for selecting a relay node, which can be done by a neighbor with a better RSSI or with the most recent contact. In addition to those modifications, the random-access priority level was implemented and available in the BNS framework. The IEEE 802.1p classes of services are used, and each class has a contention window interval, defined by the IEEE 802.15.6 standard. Other small corrections were also made, such as:<list list-type="bullet"><list-item><p>The addressing scheme: A range of addresses exclusive to nodes connected is used, making it possible to distinguish whether the frames are from nodes connected to the network or not, and the possibility of using 256 connected nodes, as indicated by the standard.</p></list-item><list-item><p>The use of carrier sensing intervals and allocation slot lengths defined by the IEEE 802.15.6 NB-PHY standard.</p></list-item></list></p>
    </sec>
    <sec id="sec3dot3-sensors-21-05504">
      <title>3.3. Mobility Model</title>
      <p>In WBAN, network topology can often vary due to the human body mobility. Furthermore, the quality of the channel between nodes varies according to the relative position of the sensor nodes. That is why accurate body mobility models are important for WBAN. The BNS framework provides a comprehensive and configurable mobility model for individual mobility, simulating intra-WBAN communication. This mobility model is MoBAN [<xref rid="B25-sensors-21-05504" ref-type="bibr">25</xref>]. It determines the node positions at any instance of simulation time and so influences the network topology and link properties. MoBAN is built by two basic control units, which are the posture selector and movement module. The posture selector process determines the current posture at any instance of time; and then, according to the selected posture the individual movement of the node is determined.</p>
      <p>In [<xref rid="B25-sensors-21-05504" ref-type="bibr">25</xref>], authors used an abstraction based on a Markov model to decide about the posture at any time considering the current posture and a transition probability matrix. Then, when a mobile posture is selected, a target position is chosen to start the movement of the whole WBAN. Additionally, spatial correlation was taken into account in MoBAN through the possibility of specifying location-dependent distributions for the posture pattern (Markov chain), and WBAN target position selection. Our implementation in the BNS framework follows the same principles.</p>
      <p>After selecting the posture, each node performs movements relative to its position in the body, in addition to individual random movements in the implementation of the proposed mobility model, focused on the individual movements for different postures. To this end, a marker was created for the position of the nodes in the body, with the following markings: head, left arm, left hand, chest, right arm, right hand, center of the waist, right of the waist, left leg, left foot, right leg, right foot. The positioning marks of the nodes follow the positions proposed in the channel model of Van Roy et al. [<xref rid="B44-sensors-21-05504" ref-type="bibr">44</xref>]. Thus, there is the possibility of using this channel model in conjunction with the mobility model. These markings are used as a reference for performing periodic movements for nodes in the legs, arms, hands and feet when the selected posture is walking or running. In other positions and postures, only random movement occurs.</p>
      <p>The class diagram in <xref ref-type="fig" rid="sensors-21-05504-f004">Figure 4</xref> describes our implemented classes available in the BNS framework. The <italic>VirtualMobilityManager</italic> is the virtual class with basic features to develop a mobility model. It has a structure for the location of the node, which stores the Cartesian coordinates and allows the use of spherical coordinates. It also has a node identifier and the methods for initializing and reading the parameters of the simulation configuration file, sending messages to the wireless channel module to notify changes in node position.</p>
      <p>For the implementation of MoBAN in the BNS framework, a body position identifier <italic>bodyPlacement</italic> was added and a map was created to associate this position <italic>string</italic> with a node location, so when the model is initialized, the <italic>initPosition</italic> method places the node. There is also a queue of postures and the respective time for the posture to be adopted. We also defined the speed of the node, to differentiate if it is walking or running, the range of motion in the case of pendulum movement, the random movement area, the simulation area thresholds and the interval for updating the position of the node.</p>
      <p>Therefore, two timers are used, one scheduled at each <italic>updateInterval</italic> to update the node position, which when triggered calls the method <italic>moveNode()</italic>, notifies the wireless channel, schedules the next update; while the other timer is used for posture update, responsible for changing the posture string, updating the node speed and scheduling a new timer for the next posture change. The <italic>moveNode()</italic> procedure checks the posture and position of the nodes and calls the specific movement functions for it. The implementation in the BNS framework follows Algorithm 1. In this way, each node performs only the movements necessary for its position in the given posture. <italic>PendularMovement</italic> makes pendular movements around the node’s initial location in a range defined by <italic>movementRange()</italic>, <italic>randomMovement()</italic> performs random movement within a radius defined by <italic>randomArea</italic> in around the current location of the node and <italic>checkBoundaries</italic> checks whether, after the movements, the nodes have exceeded the simulation area, limiting the movement to the threshold of the simulation area.
<array orientation="portrait"><tbody><tr><td align="left" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1" colspan="1"><bold>Algorithm 1</bold> moveNode().</td></tr><tr><td align="left" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1"><list list-type="simple"><list-item><label>1:</label><p><bold>if</bold><inline-formula><mml:math id="mm7"><mml:mrow><mml:mrow><mml:mi>p</mml:mi><mml:mi>o</mml:mi><mml:mi>s</mml:mi><mml:mi>t</mml:mi><mml:mi>u</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mo>=</mml:mo><mml:mo> </mml:mo><mml:mi>w</mml:mi><mml:mi>a</mml:mi><mml:mi>l</mml:mi><mml:mi>k</mml:mi><mml:mi>i</mml:mi><mml:mi>n</mml:mi><mml:mi>g</mml:mi><mml:mo> </mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula><bold>ou</bold><inline-formula><mml:math id="mm8"><mml:mrow><mml:mrow><mml:mo> </mml:mo><mml:mi>r</mml:mi><mml:mi>u</mml:mi><mml:mi>n</mml:mi><mml:mi>n</mml:mi><mml:mi>i</mml:mi><mml:mi>n</mml:mi><mml:mi>g</mml:mi><mml:mo> </mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula><bold>then</bold></p></list-item><list-item><label>2:</label><p> <bold>if</bold>
<inline-formula><mml:math id="mm9"><mml:mrow><mml:mrow><mml:mo> </mml:mo><mml:mi>b</mml:mi><mml:mi>o</mml:mi><mml:mi>d</mml:mi><mml:mi>y</mml:mi><mml:mi>P</mml:mi><mml:mi>l</mml:mi><mml:mi>a</mml:mi><mml:mi>c</mml:mi><mml:mi>e</mml:mi><mml:mi>m</mml:mi><mml:mi>e</mml:mi><mml:mi>n</mml:mi><mml:mi>t</mml:mi><mml:mo> </mml:mo><mml:mo>=</mml:mo><mml:mo> </mml:mo><mml:mi>r</mml:mi><mml:mi>i</mml:mi><mml:mi>g</mml:mi><mml:mi>h</mml:mi><mml:mi>t</mml:mi><mml:mi>A</mml:mi><mml:mi>r</mml:mi><mml:mi>m</mml:mi><mml:mo> </mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula>
<bold>or</bold>
<inline-formula><mml:math id="mm10"><mml:mrow><mml:mrow><mml:mo> </mml:mo><mml:mi>r</mml:mi><mml:mi>i</mml:mi><mml:mi>g</mml:mi><mml:mi>h</mml:mi><mml:mi>t</mml:mi><mml:mi>H</mml:mi><mml:mi>a</mml:mi><mml:mi>n</mml:mi><mml:mi>d</mml:mi><mml:mo> </mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula>
<bold>or</bold>
<inline-formula><mml:math id="mm11"><mml:mrow><mml:mrow><mml:mo> </mml:mo><mml:mi>l</mml:mi><mml:mi>e</mml:mi><mml:mi>f</mml:mi><mml:mi>t</mml:mi><mml:mi>A</mml:mi><mml:mi>r</mml:mi><mml:mi>m</mml:mi><mml:mo> </mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula>
<bold>or</bold>
<inline-formula><mml:math id="mm12"><mml:mrow><mml:mrow><mml:mo> </mml:mo><mml:mi>l</mml:mi><mml:mi>e</mml:mi><mml:mi>f</mml:mi><mml:mi>t</mml:mi><mml:mi>H</mml:mi><mml:mi>a</mml:mi><mml:mi>n</mml:mi><mml:mi>d</mml:mi><mml:mo> </mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula>
<bold>or</bold>
<inline-formula><mml:math id="mm13"><mml:mrow><mml:mrow><mml:mo> </mml:mo><mml:mi>r</mml:mi><mml:mi>i</mml:mi><mml:mi>g</mml:mi><mml:mi>h</mml:mi><mml:mi>t</mml:mi><mml:mi>L</mml:mi><mml:mi>e</mml:mi><mml:mi>g</mml:mi></mml:mrow></mml:mrow></mml:math></inline-formula>
<bold>or</bold>
<inline-formula><mml:math id="mm14"><mml:mrow><mml:mrow><mml:mo> </mml:mo><mml:mi>r</mml:mi><mml:mi>i</mml:mi><mml:mi>g</mml:mi><mml:mi>h</mml:mi><mml:mi>t</mml:mi><mml:mi>F</mml:mi><mml:mi>o</mml:mi><mml:mi>o</mml:mi><mml:mi>t</mml:mi><mml:mo> </mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula>
<bold>or</bold>
<inline-formula><mml:math id="mm15"><mml:mrow><mml:mrow><mml:mo> </mml:mo><mml:mi>l</mml:mi><mml:mi>e</mml:mi><mml:mi>f</mml:mi><mml:mi>t</mml:mi><mml:mi>L</mml:mi><mml:mi>e</mml:mi><mml:mi>g</mml:mi><mml:mo> </mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula>
<bold>or</bold>
<inline-formula><mml:math id="mm16"><mml:mrow><mml:mrow><mml:mo> </mml:mo><mml:mi>l</mml:mi><mml:mi>e</mml:mi><mml:mi>f</mml:mi><mml:mi>t</mml:mi><mml:mi>F</mml:mi><mml:mi>o</mml:mi><mml:mi>o</mml:mi><mml:mi>t</mml:mi><mml:mo> </mml:mo></mml:mrow></mml:mrow></mml:math></inline-formula>
<bold>then</bold></p></list-item><list-item><label>3:</label><p>  pendularMovement()</p></list-item><list-item><label>4:</label><p> <bold>end if</bold></p></list-item><list-item><label>5:</label><p><bold>end if</bold></p></list-item><list-item><label>6:</label><p>randomMovement()</p></list-item><list-item><label>7:</label><p>checkBoundaries()</p></list-item></list></td></tr></tbody></array></p>
    </sec>
    <sec id="sec3dot4-sensors-21-05504">
      <title>3.4. Temperature Manager</title>
      <p>The BNS framework provides a Temperature Manager Module to model the temperature variation. This module implements the Pennes Bioheat Transfer Equation (BHTE) [<xref rid="B17-sensors-21-05504" ref-type="bibr">17</xref>], which describes heat transfer in living tissue. With BHTE, it is possible to estimate the temperature (in <inline-formula><mml:math id="mm17"><mml:mrow><mml:msup><mml:mrow/><mml:mo>∘</mml:mo></mml:msup></mml:mrow></mml:math></inline-formula>C) every instant of time at any point in the tissue around an implanted node. BHTE is presented in Equation (<xref ref-type="disp-formula" rid="FD2-sensors-21-05504">2</xref>): <inline-formula><mml:math id="mm18"><mml:mrow><mml:mi>ρ</mml:mi></mml:mrow></mml:math></inline-formula> (kg/m<sup>3</sup>) is the tissue density, <inline-formula><mml:math id="mm19"><mml:mrow><mml:msub><mml:mi>C</mml:mi><mml:mi>p</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula> (J/(kg <inline-formula><mml:math id="mm20"><mml:mrow><mml:msup><mml:mrow/><mml:mo>∘</mml:mo></mml:msup></mml:mrow></mml:math></inline-formula>C) is the specific heat of the tissue, <italic>K</italic> (J/m s <inline-formula><mml:math id="mm21"><mml:mrow><mml:msup><mml:mrow/><mml:mo>∘</mml:mo></mml:msup></mml:mrow></mml:math></inline-formula>C) is the thermal conductivity of the tissue, <italic>b</italic> (J/m<sup>3</sup> s <inline-formula><mml:math id="mm22"><mml:mrow><mml:msup><mml:mrow/><mml:mo>∘</mml:mo></mml:msup></mml:mrow></mml:math></inline-formula>C) is the blood perfusion constant and <inline-formula><mml:math id="mm23"><mml:mrow><mml:msub><mml:mi>T</mml:mi><mml:mi>b</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula> (<inline-formula><mml:math id="mm24"><mml:mrow><mml:msup><mml:mrow/><mml:mo>∘</mml:mo></mml:msup></mml:mrow></mml:math></inline-formula>C) is the blood temperature.</p>
      <p>Specific heat is defined as the amount of heat that must be supplied to a unit of mass (1 kg) of a tissue to raise its temperature in 1 <inline-formula><mml:math id="mm25"><mml:mrow><mml:msup><mml:mrow/><mml:mo>∘</mml:mo></mml:msup></mml:mrow></mml:math></inline-formula>C. It can be measured calorimetrically. However, determining the specific heat for each type of tissue in the human body is not a trivial task. Many studies have been developed for this purpose, making this data available in the literature. In [<xref rid="B47-sensors-21-05504" ref-type="bibr">47</xref>] a specific heat of different human and animal tissues is given.</p>
      <p>In Equation (<xref ref-type="disp-formula" rid="FD2-sensors-21-05504">2</xref>), the term <inline-formula><mml:math id="mm26"><mml:mrow><mml:mfrac><mml:mrow><mml:mo>∂</mml:mo><mml:mi>T</mml:mi></mml:mrow><mml:mrow><mml:mo>∂</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:mfrac></mml:mrow></mml:math></inline-formula> indicates the temperature increase in the control volume, <inline-formula><mml:math id="mm27"><mml:mrow><mml:mrow><mml:mi>K</mml:mi><mml:msup><mml:mo>▽</mml:mo><mml:mn>2</mml:mn></mml:msup><mml:mi>T</mml:mi></mml:mrow></mml:mrow></mml:math></inline-formula> indicates the heat accumulated by the tissue, <inline-formula><mml:math id="mm28"><mml:mrow><mml:mrow><mml:mi>b</mml:mi><mml:mfenced separators="" open="(" close=")"><mml:mi>T</mml:mi><mml:mo>−</mml:mo><mml:msub><mml:mi>T</mml:mi><mml:mi>b</mml:mi></mml:msub></mml:mfenced></mml:mrow></mml:mrow></mml:math></inline-formula> represents the heat transmitted due to the conduction and perfusion of the blood, <inline-formula><mml:math id="mm29"><mml:mrow><mml:msub><mml:mi>Q</mml:mi><mml:mi>m</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula> (W/m<inline-formula><mml:math id="mm30"><mml:mrow><mml:msup><mml:mrow/><mml:mn>2</mml:mn></mml:msup></mml:mrow></mml:math></inline-formula>) the heat generated by metabolism, <italic>Q</italic> the heat generated by external sources. As shown in Equation (<xref ref-type="disp-formula" rid="FD3-sensors-21-05504">3</xref>) for WBAN, two sources are considered: <inline-formula><mml:math id="mm31"><mml:mrow><mml:mrow><mml:mi>ρ</mml:mi><mml:mi>S</mml:mi><mml:mi>A</mml:mi><mml:mi>R</mml:mi></mml:mrow></mml:mrow></mml:math></inline-formula> is the heat generated by the antenna radiation, where SAR (W/kg) is the Specific Absorption Rate; <inline-formula><mml:math id="mm32"><mml:mrow><mml:msub><mml:mi>P</mml:mi><mml:mi>c</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula> (mW) indicates the heat due to the node’s power dissipation. In BNS, we implemented the discrete form of BHTE according to [<xref rid="B9-sensors-21-05504" ref-type="bibr">9</xref>].
<disp-formula id="FD2-sensors-21-05504"><label>(2)</label><mml:math id="mm33"><mml:mrow><mml:mrow><mml:mi>ρ</mml:mi><mml:msub><mml:mi>C</mml:mi><mml:mi>p</mml:mi></mml:msub><mml:mfrac><mml:mrow><mml:mo>∂</mml:mo><mml:mi>T</mml:mi></mml:mrow><mml:mrow><mml:mo>∂</mml:mo><mml:mi>t</mml:mi></mml:mrow></mml:mfrac><mml:mo>=</mml:mo><mml:mi>K</mml:mi><mml:msup><mml:mo>▽</mml:mo><mml:mn>2</mml:mn></mml:msup><mml:mi>T</mml:mi><mml:mo>−</mml:mo><mml:mi>b</mml:mi><mml:mfenced separators="" open="(" close=")"><mml:mi>T</mml:mi><mml:mo>−</mml:mo><mml:msub><mml:mi>T</mml:mi><mml:mi>b</mml:mi></mml:msub></mml:mfenced><mml:mo>+</mml:mo><mml:mi>Q</mml:mi><mml:mo>+</mml:mo><mml:msub><mml:mi>Q</mml:mi><mml:mi>m</mml:mi></mml:msub></mml:mrow></mml:mrow></mml:math></disp-formula>
<disp-formula id="FD3-sensors-21-05504"><label>(3)</label><mml:math id="mm34"><mml:mrow><mml:mrow><mml:mi>Q</mml:mi><mml:mo>=</mml:mo><mml:mi>ρ</mml:mi><mml:mi>S</mml:mi><mml:mi>A</mml:mi><mml:mi>R</mml:mi><mml:mo>+</mml:mo><mml:msub><mml:mi>P</mml:mi><mml:mi>c</mml:mi></mml:msub></mml:mrow></mml:mrow></mml:math></disp-formula></p>
      <p>In the proposed temperature model available in the BNS framework, it is necessary to know, for each time interval (<inline-formula><mml:math id="mm35"><mml:mrow><mml:msub><mml:mi>δ</mml:mi><mml:mi>t</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula>), the energy consumed by the node and the radio transmission time. To ensure data collection and temperature update in the <inline-formula><mml:math id="mm36"><mml:mrow><mml:msub><mml:mi>δ</mml:mi><mml:mi>t</mml:mi></mml:msub></mml:mrow></mml:math></inline-formula> interval, a timer is used. To obtain the consumed energy, the <italic>getSpentEnergy()</italic> method is used in the resource manager module and the <italic>getTxTimeInLastSlotTime()</italic> method in the radio module is used to obtain the radio transmission time. Both methods were implemented in the corresponding modules.</p>
      <p>As it can be seen in <xref ref-type="fig" rid="sensors-21-05504-f005">Figure 5</xref>, the <italic>TemperatureManager</italic> class implemented in the BNS framework has a set of attributes that correspond to the thermal and radio-electric parameters of the body tissue, in which the node will be implanted. It also provides the <italic>getSensorTemperature()</italic> method, which can be used by the other modules to know the temperature of the node. The <italic>exportTempHistory()</italic> method allows you to export the temperature history of the nodes to be processed after simulation.</p>
      <p>The BNS temperature module, in addition to specifically providing the node temperature, also allows one to know the heating state of the node. For this, a maximum allowed temperature value (<italic>tempMaxThreshold</italic>) is defined, from which the node is considered to be HEATED. In the model, a hysteresis interval is also considered for the node to return to the NOT HEATED state again after reaching heating. The hysteresis value of the temperature is defined as a function of <italic>hysteresisFactor</italic> percent of the maximum allowed temperature. The model also allows the possibility of knowing the heating state of the node considering or not the hysteresis interval.</p>
    </sec>
    <sec id="sec3dot5-sensors-21-05504">
      <title>3.5. Healthcare Application Layer</title>
      <p>In this work a Healthcare Application Layer for the BNS framework is implemented. It implements data representation and a communication protocol between the application layers of PHD in correspondence with the ISO/IEEE 11073 standard [<xref rid="B27-sensors-21-05504" ref-type="bibr">27</xref>]. Therefore, real traffic ISO/IEEE 11073 Personal Health Devices (X73-PHD) for WBAN are implemented. This standard defines two types of PHD: agents and managers. The agent devices are sensors or actuators and the manager device corresponds to the network coordinator. Additionally, BNS has different specifications for each PHD, called specializations. Specializations define a set of standards for each of the PHD. Each specialization has its own Domain Information Model (DIM), i.e., which attributes and objects a device must have. It is important to define a DIM separately for each device, since an electrocardiogram has different technical needs than a pulse oximeter. All specializations follow a unique service and communication model, defined in the Optimized Exchange Protocol (OEP). The OEP protocol is the heart of the ISO/IEEE 11073 standard and is where the DIMs common to all devices are defined, as well as the service model and the communication model [<xref rid="B1-sensors-21-05504" ref-type="bibr">1</xref>].</p>
      <p>The BNS Healthcare Application Layer provides five different X73-PHD agents for WBAN simulations: pulse oximeter, glucose meter, thermometer, blood pressure monitor and a basic ECG. Their implementation in BNS follows the specifications for transmission rate and sample generation as described in [<xref rid="B1-sensors-21-05504" ref-type="bibr">1</xref>].</p>
      <p>Following the ISO/IEEE 11073 standard, the BNS Healthcare Application Layer is agent and manager-initiated, providing the <italic>confirmed</italic> and <italic>unconfirmed events</italic>, and defining three modes of manager-initiated measurement data transmission: <italic>Single Response</italic>, <italic>Time Period</italic> and <italic>No Time Limit Mode</italic>. All these modes defined in the standard are covered in [<xref rid="B1-sensors-21-05504" ref-type="bibr">1</xref>] and implemented in the Healthcare Application Layer provided in the BNS framework.</p>
      <p>The BNS framework also provides the <italic>Retransmission Mode</italic> proposed in [<xref rid="B1-sensors-21-05504" ref-type="bibr">1</xref>]. This mode is a new proposal, not present in the ISO/IEEE 11073 standard. <italic>Retransmission Mode</italic> consists of a stop-and-wait system as a sub-application-layer to retransmit agent packets whose Acknowledgments (ACKs) have not been received. This interesting solution covered in [<xref rid="B1-sensors-21-05504" ref-type="bibr">1</xref>] reduces the unnecessary exchange of several control packets made in association procedures. In addition, it is an alternative to fill the lack of a reliable transport layer in the ISO/IEEE 11073 standard.</p>
      <p>In the Healthcare Application Layer proposed in the BNS framework, the user can set several simulation parameters, such as the medical device type, operation mode and the number of transmission retries. <xref rid="sensors-21-05504-t002" ref-type="table">Table 2</xref> summarizes all parameters and their possible values are shown.</p>
      <sec>
        <title>Implementation of the Application Layer</title>
        <p>Antidote [<xref rid="B28-sensors-21-05504" ref-type="bibr">28</xref>] is an IEEE 11073 protocol stack library developed to work with real medical and health devices. To provide communication between Antidote and other systems, communication plug-ins are required, because it has a plug-in-based architecture. For that, a BNS plug-in was developed to support communication between Antidote and the BNS framework modules. In addition, some necessary modifications to the communication, encoders, agent and manager modules of the Antidote, covered in [<xref rid="B1-sensors-21-05504" ref-type="bibr">1</xref>], are implemented in the BNS framework.</p>
        <p>The proposed BNS plug-in allows the BNS framework and Antidote to talk with each other. Inside the BNS framework, we can call any function from the Antidote Library and retrieve any information from it, but transmitting data from the BNS framework to the Antidote Library is not a simple task. To solve this, we first use external variables to make the data exchange between the BNS framework and the BNS plug-in module. Then, to obtain the data from the BNS plug-in, Antidote uses pointers to the plug-in functions that we call <italic>callback functions</italic>. That is why a plug-in to mediate the communication is needed.</p>
        <p><xref ref-type="fig" rid="sensors-21-05504-f006">Figure 6</xref> depicts how Antidote receives messages from the BNS framework. The arriving messages are copied to an external variable in the BNS framework. The external variable is visible to both BNS framework and BNS plug-in. Since the Communication module in Antidote owns pointers to the BNS plug-in functions, it can retrieve the messages using callback functions.</p>
        <p>In the simulation environment, the Communication Module needs to deal with all nodes to control their transmissions. To ensure the proper operation of the Communication Module, the <italic>node id</italic> is required in each function call. This change in the Communication module is performed in our proposal. This way we know which node we are working with and apply the action for that node, without affecting other nodes. For example, if a node transits from disassociated state to associating state, without the proposed modification, this action would affect all nodes even those that should not change their state machines. <xref ref-type="fig" rid="sensors-21-05504-f007">Figure 7</xref> illustrates the system modification. In this figure each arrow represents a function being called from the Communication Module. In every function in the Communication module, the <italic>node id</italic> new parameter is inserted. This way the Communication module always knows the corresponding node.</p>
        <p>Other modules such as Agent, Manager and Encoders were modified to smooth operation of Antidote functions in the BNS framework. We can highlight the function created in the encoder module to convert absolute values (measurements) into scaled non-negative values as recommended by [<xref rid="B48-sensors-21-05504" ref-type="bibr">48</xref>]. It is useful when we need to send absolute values such as <inline-formula><mml:math id="mm37"><mml:mrow><mml:mrow><mml:mo>−</mml:mo><mml:mn>0.060</mml:mn></mml:mrow></mml:mrow></mml:math></inline-formula> which would require at least 4 bytes in X73-PHD floating point format. When converted, the number <inline-formula><mml:math id="mm38"><mml:mrow><mml:mrow><mml:mo>−</mml:mo><mml:mn>0.060</mml:mn></mml:mrow></mml:mrow></mml:math></inline-formula> becomes 388, which requires just two bytes. Within the Manager, the conversion from scaled to absolute values is made [<xref rid="B1-sensors-21-05504" ref-type="bibr">1</xref>].</p>
      </sec>
    </sec>
  </sec>
  <sec id="sec4-sensors-21-05504">
    <title>4. Use Cases</title>
    <p>In this section, three examples of use cases are presented, in which WBAN simulations are performed using the proposed BNS framework. In <xref ref-type="sec" rid="sec4dot1-sensors-21-05504">Section 4.1</xref>, a remote healthcare monitoring scenario is simulated using: a healthcare standard application, a WBAN MAC, a David wireless channel, body mobility and routing modules. In this example, we compare scenarios using the agent-initiated operation modes of ISO/IEEE 11073 standard and the Packet Delivery Rate (PDR) and latency are observed. <xref ref-type="sec" rid="sec4dot2-sensors-21-05504">Section 4.2</xref> presents a comparison of the temperature behavior of the nodes of a WBAN using different routing protocols. This simulation uses a generic application, a WBAN MAC, a David wireless channel, body mobility and routing modules. <xref ref-type="sec" rid="sec4dot3-sensors-21-05504">Section 4.3</xref> presents a simulation using a healthcare standard application, a WBAN MAC, a Goswami wireless channel and MoBAN proposed modules. In this use case, two channel access mechanisms defined in the WBAN standard for MAC layer are evaluated.</p>
    <sec id="sec4dot1-sensors-21-05504">
      <title>4.1. Remote Monitoring Using X73-Phd</title>
      <p>A possible use case considered in this paper is a remote monitoring WBAN scenario, in which a patient’s vital signs are monitored using blood pressure monitor, thermometer, glucose meter, pulse oximeter and basic ECG. The network topology is formed by a coordinator node located in the waist and five PHD agents located in the body as shown in <xref ref-type="fig" rid="sensors-21-05504-f008">Figure 8</xref>. To model the channel behavior and consider body mobility, the loss map and the temporal variation model proposed in [<xref rid="B23-sensors-21-05504" ref-type="bibr">23</xref>] are used. We used Direct Route Routing (DRR) recommended in the IEEE 802.15.6 standard. The PHY and MAC layers configurations used were those described in the WBAN standard and the MAC layer version used is the one provided in the BNS framework.</p>
      <p>In this use case, we simulated three agent-initiated scenarios considering operating modes available in the application layer proposal. The three agent-initiated scenarios are: Unconfirmed Mode, Confirmed Mode, and a Retransmission Mode proposed in [<xref rid="B1-sensors-21-05504" ref-type="bibr">1</xref>]. The node coordinator (hub) uses the <italic>Manager</italic> application. The blood pressure monitor transmits one measurement every 15 min. The oximeter sends a reading every 15 s. The glucose meter transmits one measurement every 5 min. The thermometer sends the temperature every 3 min. The ECG sensor considered is a device that receives signals of electrodes deployed in the body, and transmits these signals to the manager; so, it transmits 80 millivolt samples per <inline-formula><mml:math id="mm39"><mml:mrow><mml:mrow><mml:mn>0.8</mml:mn></mml:mrow></mml:mrow></mml:math></inline-formula> s. The total simulation time was 12 h.</p>
      <p>The results available in the application are the total control packets exchanged per node, the measurement packets received by the manager per node, the measurement packets sent by each node, and the total associations made per agent [<xref rid="B1-sensors-21-05504" ref-type="bibr">1</xref>]. In this use case, we analyzed the total successful vital sign measurements delivered to the manager. <xref ref-type="fig" rid="sensors-21-05504-f009">Figure 9</xref> depicts the results for these scenarios. As it can be seen in the figure, the proposed retransmission mode increases the number of packets delivered to all agents, delivering almost 100% of all messages. Additionally, it avoids the waiting time for a new association handshake, and by retransmitting the messages. For the oximeter, using the unconfirmed mode, almost all packets were delivered, even without guaranteeing reliability. However, the confirmed mode improves reliability, but it needs reassociations frequently. Results show that with the retransmission mode, the PDR in the WBAN network increases, offering better network performance for remote monitoring applications.</p>
      <p>An important network parameter to be considered when analyzing the performance of a WBAN is latency. <xref ref-type="fig" rid="sensors-21-05504-f010">Figure 10</xref> depicts the number of packets with a given latency, for all measurements transmitted by agents in the simulations. The latency is calculated from the moment of packet creation, at the application layer of the agent, until the moment it is received at the application layer of the manager. The figure shows that most packets have an average latency of 180 ms in the retransmission mode and confirmed mode and 30 ms in no confirmed mode. Results show that the latency is maintained at acceptable values for remote monitoring applications.</p>
      <p>This simulation scenario allows us to evaluate the performance regarding PDR and latency, using different modes of operation in the application layer, taking into consideration the effect of the wireless channel and the mobility of the human body. This comparative study is possible due to the resources made available in the proposed WBAN framework.</p>
    </sec>
    <sec id="sec4dot2-sensors-21-05504">
      <title>4.2. Analysis of Temperature Behavior</title>
      <p>In WBAN, preventing nodes from overheating is a challenge that requires special attention. In [<xref rid="B9-sensors-21-05504" ref-type="bibr">9</xref>], the Link-Quality Aware and Thermal-Aware On-Demand Routing (LATOR) protocol for routing in WBAN is proposed. LATOR is projected to avoid overheating and improve performance in sensing. For that, in [<xref rid="B9-sensors-21-05504" ref-type="bibr">9</xref>] the authors propose a mechanism that chooses routes without heated nodes and when an intermediate node reaches the heated state, the choice of a new relay node is activated. That mechanism of overheating prevention is based on controlling the node’s activity, where a heated node does not carry out any transmission and enters a low consumption mode. On the other hand, Link Quality Information (LQI) is collected during the route discovery phase. Then, sensor nodes will use LQI-based metrics to forward DATA packets [<xref rid="B9-sensors-21-05504" ref-type="bibr">9</xref>].</p>
      <p>In this use case, a simulation is carried out to analyze the temperature behavior of the network nodes. The WBAN topology used is the same used in <xref ref-type="sec" rid="sec4dot1-sensors-21-05504">Section 4.1</xref>. The mobility of the body is considered, and the channel behavior used is the David channel model proposed in [<xref rid="B23-sensors-21-05504" ref-type="bibr">23</xref>]. A generic sensor node was used in the application layer, with settings valid for medical sensors with low transmission rates. The PHY and MAC layer configurations used were those described in the WBAN standard and available in the BNS framework. Settings of the thermal parameters of the tissues of the human body are the same used in [<xref rid="B9-sensors-21-05504" ref-type="bibr">9</xref>].</p>
      <p>Similar to the work presented in [<xref rid="B9-sensors-21-05504" ref-type="bibr">9</xref>], for comparison purposes in this use case, DRR, First Route Available Routing (FRAR), Link-Quality Aware On-Demand Routing (LAOR) and LATOR protocols were considered. These protocols are covered in [<xref rid="B9-sensors-21-05504" ref-type="bibr">9</xref>], and in this paper we follow the same settings. To analyze the performance of the proposed overheating prevention method, a temperature increase limit of 0.0017 °C was defined for sensor nodes. The simulation time was ten thousand seconds. The metric observed was temperature increase.</p>
      <p>For the purpose of this use case, the behavior of the temperature of the network nodes is analyzed when the node located in the left arm (node 1) is the transmitting node. <xref ref-type="fig" rid="sensors-21-05504-f011">Figure 11</xref> shows the behavior of the temperature using different routing protocols. As it can be seen in <xref ref-type="fig" rid="sensors-21-05504-f011">Figure 11</xref>a, using the first available route, route 1-0 was used 100% of the time. Therefore, no intermediate node showed an increase in temperature. However, it can be seen in <xref ref-type="fig" rid="sensors-21-05504-f011">Figure 11</xref>b that for the LAOR protocol, node 2 experiences a greater increase in its temperature in the first 3800 s, because most of the time it acts as a relay node for node 1 on route 1-2-0. When the LATOR protocol is used, as shown in <xref ref-type="fig" rid="sensors-21-05504-f011">Figure 11</xref>c, the temperature of node 2 begins to increase until reaching the defined limit. This increase is due to the fact that node 2 is used more times as a relay, because route 1-2-0 has the best quality for forwarding the data transmitted by node 1. As a result, the temperature of node 2 begins to increase until it reaches the defined limit value. This value is reached for the first time at 3180 s.</p>
      <p>At that moment, node 2 sends its heating notification to the transmitting node. Node 1, when it receives the notification, switches routes, and starts using the direct path. At that moment, node 2 starts to cool. Immediately thereafter, there are two more peaks at which node 2 again reaches the defined temperature limit. Between the first and the third peaks in the temperature of node 2, there were exchanges of routes, where the use of node 2 was resumed as a relay. In these cases, the change of route was not generated by heating, but by breaks in the link while using routes 1-0, 1-3-0 and 1-4-0. After the third temperature peak of node 2, route 1-3-0 begins to be used, until node 3 reaches the maximum allowed temperature. In this case, it is node 3 that activates a new route discovery to avoid overheating.</p>
      <p>In this use case, we presented an example where the routing layer of a WBAN network uses the temperature module available in the proposed BNS framework to perform temperature control and prevent overheating. This temperature module can be used by other modules in other proposals. This simulation scenario shows the temperature variation of the nodes due to the activity of the node, the link breaks due to body mobility and the influence of the wireless channel on the quality of the links. All these features are covered by the application, routing, mobility and wireless channel modules, available in the proposed WBAN framework. The results show the correct functioning of the proposed temperature module and allows considering temperature as a parameter in the performance analysis of WBAN solutions.</p>
    </sec>
    <sec id="sec4dot3-sensors-21-05504">
      <title>4.3. Analysis of Channel Access Mechanisms</title>
      <p>In the MAC layer of the WBAN standard, the use of the TDMA and CSMA/CA mechanisms are accepted, for data transmission at the scheduled intervals and random access, respectively. In this use case, a comparison of the performance of a WBAN using Time Division Multiple Access (TDMA) and CSMA/CA techniques is presented. For this comparison, a WBAN scenario with 12 health devices distributed in the human body was simulated. The positions of the nodes are represented in <xref ref-type="fig" rid="sensors-21-05504-f012">Figure 12</xref> and in <xref rid="sensors-21-05504-t003" ref-type="table">Table 3</xref> the health devices and their data transmission rates are described.</p>
      <p>The application QoS requirements used in this scenario are of intelligent health applications [<xref rid="B49-sensors-21-05504" ref-type="bibr">49</xref>,<xref rid="B50-sensors-21-05504" ref-type="bibr">50</xref>] and the dynamics of the application’s data flow is based on the unconfirmed mode of the ISO/IEEE 11073 standard available in the Healthcare Application Layer of the proposed BNS framework.</p>
      <p>The nodes were in walking motion for 10 min of simulation. To simulate the mobility of the human body, the MoBAN proposed module was used, and the behavior of the channel was modeled using the Goswami wireless channel. In the PHY layer, the radios have a transmission power of −15 dBm and the transmission rate used is the maximum allowed for a radio compatible with the standard NB-PHY, 1024 kb/s. In the MAC layer, the slot allocation time is used as a minimum value for IEEE 802.15.6 NB-PHY, which is 1 ms. Each node when joining the network requests 4 slots for transmission. As for the size of the superframe, 32 allocation slots were made available. Therefore, the time between beacons, i.e., the expected duration of a superframe is 92 ms. The metrics observed are the PDR of the application and the energy used to transmit a bit from the application (<inline-formula><mml:math id="mm40"><mml:mrow><mml:mi mathvariant="sans-serif">μ</mml:mi></mml:mrow></mml:math></inline-formula>J/bit). The results shown have a 95% confidence interval for ten simulation rounds.</p>
      <p>The results of the application PDR per node are represented in <xref ref-type="fig" rid="sensors-21-05504-f013">Figure 13</xref>. <xref ref-type="fig" rid="sensors-21-05504-f013">Figure 13</xref>a contains the results for the nodes positioned on the head, chest and upper limbs, whereas the results of <xref ref-type="fig" rid="sensors-21-05504-f013">Figure 13</xref>b are of the nodes in the waist and lower limbs. The PDR of lower limbs are inferior to those of the upper limbs, given the distance and the pendulum movement of the legs during walking, which increases the path loss when there is no line-of-sight to the hub. Another interesting fact is the synchronization of movements between the right arm/left leg and left arm/right leg, natural during the walking motion. This synchronized movement plays an important role in the wireless channel response, with nodes in the left leg having a better reception rate than the nodes in the right one, given the interference of nodes near the hub. Additionally, the TDMA scheduling and the pendulum movement cycle can influence the PDR, and proper transmission scheduling can take advantage of that periodic behavior [<xref rid="B4-sensors-21-05504" ref-type="bibr">4</xref>]. The smaller interference of nodes in the right arm and a better transmission scheduling can be observed in Node 8, even though it is placed in an inferior limb, it has a high PDR. In this scenario we can highlight that the average PDR using TDMA is superior to using CSMA/CA, and considering the error margin, they have similar results. Another interesting fact is that for node 6, which is closer to the hub, CSMA/CA results are superior, therefore under good channel conditions CSMA/CA can improve the network throughput. The overall network PDR results were <inline-formula><mml:math id="mm41"><mml:mrow><mml:mrow><mml:mn>86.54</mml:mn><mml:mo>±</mml:mo><mml:mn>2.58</mml:mn></mml:mrow></mml:mrow></mml:math></inline-formula>% for TDMA, and <inline-formula><mml:math id="mm42"><mml:mrow><mml:mrow><mml:mn>83.86</mml:mn><mml:mo>±</mml:mo><mml:mn>3.43</mml:mn></mml:mrow></mml:mrow></mml:math></inline-formula> for CSMA/CA.</p>
      <p>The results for energy spent per transmitted application bit are represented in <xref ref-type="fig" rid="sensors-21-05504-f014">Figure 14</xref>. As in the results of the application PDR, the nodes were divided between nodes positioned on the head, chest and upper limbs in <xref ref-type="fig" rid="sensors-21-05504-f014">Figure 14</xref>a, and nodes in the waist and lower limbs in <xref ref-type="fig" rid="sensors-21-05504-f014">Figure 14</xref>b. The low PDR of lower limbs incurs in retransmissions and increases the energy spent to transmit a bit. In addition, smaller packets also increase the energy spent to transmit an application bit. Those influences can be observed in Node 10, with a low PDR and low transmission rate, but a high energy spent to transmit an application bit. The results are consistent with the PDR analysis, and the results of both MAC methods are similar. It is important to highlight the application influence on energy consumption. The result of energy spent per transmitted application bit for the network was <inline-formula><mml:math id="mm43"><mml:mrow><mml:mrow><mml:mn>180.17</mml:mn><mml:mo>±</mml:mo><mml:mn>19.14</mml:mn></mml:mrow></mml:mrow></mml:math></inline-formula> <inline-formula><mml:math id="mm44"><mml:mrow><mml:mi mathvariant="sans-serif">μ</mml:mi></mml:mrow></mml:math></inline-formula>J/bit for TDMA and <inline-formula><mml:math id="mm45"><mml:mrow><mml:mrow><mml:mn>170.48</mml:mn><mml:mo>±</mml:mo><mml:mn>21.75</mml:mn></mml:mrow></mml:mrow></mml:math></inline-formula><inline-formula><mml:math id="mm46"><mml:mrow><mml:mi mathvariant="sans-serif">μ</mml:mi></mml:mrow></mml:math></inline-formula>J/bit for CSMA/CA.</p>
      <p>This simulation scenario shows that energy consumption and network PDR heavily rely on node deployment, mobility, wireless channel and the application itself. All those features are covered by the MoBAN, Goswami channel, and IEEE 11073 modules, respectively. Therefore, to design a communication protocol for WBANs, those characteristics particular to the WBAN scenario should be considered.</p>
    </sec>
  </sec>
  <sec sec-type="conclusions" id="sec5-sensors-21-05504">
    <title>5. Conclusions</title>
    <p>Performing evaluations in environments as close as possible to real scenarios is necessary for WBAN. To provide a realistic WBAN simulation system, this work proposes the BNS framework for developing WBAN realistic simulations. In contrast to the existing WBAN simulation systems, additional modules were implemented to provide greater flexibility in the construction of WBAN scenarios. The BNS framework includes a wireless channel model considering radio-propagation on human body; an updated WBAN MAC layer with functionalities of the IEEE 802.15.6 standard; a mobility model for simulating intra-WBAN communication; a temperature module to model node temperature variation; and a Healthcare Application Layer according to the ISO/IEEE 11073 standard.</p>
    <p>We presented three WBAN simulations using the BNS framework: a remote healthcare monitoring scenario using the application layer based on the ISO/IEEE 11073 standard, a generic scenario to analyze the temperature behavior of the nodes of a WBAN using different routing protocols and a comparison of the performance of a WBAN using TDMA and CSMA/CA techniques. These simulations are examples that show the use of the proposed BNS framework and show the flexibility to build different realistic scenarios, concluding that our framework is a valid alternative for the evaluation of WBAN through simulation.</p>
    <p>The BNS framework is focused on communication between sensors/actuators nodes and the sink node (intra-WBAN communication). Technologies such as 3G/4G/5G/6G are alternatives to use in Inter-WBAN and Beyond-WBAN communications. Thus, the sink node with the corresponding radio interface acts as an aggregator of the information collected by the sensor nodes, performing its role as a gateway. To perform simulations considering the different levels of the WBAN architecture defined in the standard (including Inter-WBAN and Beyond-WBAN), it is necessary to continue improving the proposed framework, which would be an interesting future work. As future work, we also intend to increase the support for other types of personal health devices in the BNS framework application layer; support other body mobility patterns; additional WBAN channel models and provide the IEEE 802.15.6 security support. With that, the framework could support a greater number of configurations and increase the diversity of WBAN scenarios. Moreover, we intend to develop a real testbed with real personal health devices, which would allow the performance of realistic emulations, in addition to creating new models to be implemented in the BNS framework.</p>
  </sec>
</body>
<back>
  <fn-group>
    <fn>
      <p><bold>Publisher’s Note:</bold> MDPI stays neutral with regard to jurisdictional claims in published maps and institutional affiliations.</p>
    </fn>
  </fn-group>
  <notes>
    <title>Author Contributions</title>
    <p>Conceptualization, E.C., V.F., R.A.L., D.M.-S. and C.A.; methodology, E.C., V.F., R.A.L., J.C.H.S., D.M.-S. and C.A.; software, E.C., V.F. and R.A.L.; validation, E.C., V.F. and R.A.L.; investigation, E.C., V.F. and R.A.L.; resources, D.M.-S. and C.A.; data curation, E.C., V.F. and R.A.L.; writing-original draft, E.C., V.F., R.A.L. and J.C.H.S.; writing-review and editing, D.M.-S. and C.A.; supervision, D.M.-S. and C.A.; funding acquisition, D.M.-S. and C.A. All authors have read and agreed to the published version of the manuscript.</p>
  </notes>
  <notes>
    <title>Funding</title>
    <p>This research was funded in part by the Coordination for the Improvement of Higher Education Personnel (CAPES), CAPES PRINT, the Brazilian National Council for Scientific and Technological Development (CNPq), the Foundation to Research Support in the State of Rio de Janeiro (FAPERJ), Foundation to Research Support in the State of São Paulo (FAPESP) grant 2015/24144-7 and The National Institute of Science and Technology for Medicine Assisted by Scientific Computing (INCT-MACC).</p>
  </notes>
  <notes notes-type="COI-statement">
    <title>Conflicts of Interest</title>
    <p>The authors declare no conflict of interest.</p>
  </notes>
  <glossary>
    <title>Abbreviations</title>
    <p>The following abbreviations are used in this manuscript:
<array orientation="portrait"><tbody><tr><td align="left" valign="middle" rowspan="1" colspan="1">ACK</td><td align="left" valign="middle" rowspan="1" colspan="1">Acknowledgment</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">BHTE</td><td align="left" valign="middle" rowspan="1" colspan="1">Bioheat Transfer Equation</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">BMI</td><td align="left" valign="middle" rowspan="1" colspan="1">Body Mass Index</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">BNS</td><td align="left" valign="middle" rowspan="1" colspan="1">Body Network Simulator</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">CSMA/CA</td><td align="left" valign="middle" rowspan="1" colspan="1">Carrier Sense Multiple Access with Collision Avoidance</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">DIM</td><td align="left" valign="middle" rowspan="1" colspan="1">Domain Information Model</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">DMQoS</td><td align="left" valign="middle" rowspan="1" colspan="1">Data-Centric Multiobjective QoS-Aware Routing</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">DRR</td><td align="left" valign="middle" rowspan="1" colspan="1">Direct Route Routing</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">ECG</td><td align="left" valign="middle" rowspan="1" colspan="1">Electrocardiogram</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">FRAR</td><td align="left" valign="middle" rowspan="1" colspan="1">First Route Available Routing</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">LAOR</td><td align="left" valign="middle" rowspan="1" colspan="1">Link-Quality Aware On-Demand Routing</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">LATOR</td><td align="left" valign="middle" rowspan="1" colspan="1">Link-Quality Aware and Thermal-Aware On-Demand Routing</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">LOS</td><td align="left" valign="middle" rowspan="1" colspan="1">Line-of-Sight</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">LQI</td><td align="left" valign="middle" rowspan="1" colspan="1">Link-Quality Information</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">MAC</td><td align="left" valign="middle" rowspan="1" colspan="1">Medium Access Control</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">MoBAN</td><td align="left" valign="middle" rowspan="1" colspan="1">Mobility Model for Wireless Body Area Networks</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">NB-PHY</td><td align="left" valign="middle" rowspan="1" colspan="1">Narrow Band Physical Layer</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">NLOS</td><td align="left" valign="middle" rowspan="1" colspan="1">Non-Line-of-Sight</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">NS-2</td><td align="left" valign="middle" rowspan="1" colspan="1">Network Simulator 2</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">NS-3</td><td align="left" valign="middle" rowspan="1" colspan="1">Network Simulator 3</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">OEP</td><td align="left" valign="middle" rowspan="1" colspan="1">Optimized Exchange Protocol</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">OMNET++</td><td align="left" valign="middle" rowspan="1" colspan="1">Objective Modular Network Testbed in C++</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">PDF</td><td align="left" valign="middle" rowspan="1" colspan="1">Probability Density Function</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">PDR</td><td align="left" valign="middle" rowspan="1" colspan="1">Packet Delivery Rate</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">PHD</td><td align="left" valign="middle" rowspan="1" colspan="1">Personal Health Device</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">PHY</td><td align="left" valign="middle" rowspan="1" colspan="1">Physical Layer</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">PPS</td><td align="left" valign="middle" rowspan="1" colspan="1">Packets Per Second</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">QoS</td><td align="left" valign="middle" rowspan="1" colspan="1">Quality of Service</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">RERR</td><td align="left" valign="middle" rowspan="1" colspan="1">Route Error</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">RREQ</td><td align="left" valign="middle" rowspan="1" colspan="1">Route Request</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">RSSI</td><td align="left" valign="middle" rowspan="1" colspan="1">Received Signal Strength Indicator</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">RT</td><td align="left" valign="middle" rowspan="1" colspan="1">Routing Table</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">Rx</td><td align="left" valign="middle" rowspan="1" colspan="1">Receiver</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">SAR</td><td align="left" valign="middle" rowspan="1" colspan="1">Specific Absorption Rate</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">SINR</td><td align="left" valign="middle" rowspan="1" colspan="1">Signal-to-Interference-plus-Noise Ratio</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">TDMA</td><td align="left" valign="middle" rowspan="1" colspan="1">Time Division Multiple Access</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">Tx</td><td align="left" valign="middle" rowspan="1" colspan="1">Transmitter</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">UWB</td><td align="left" valign="middle" rowspan="1" colspan="1">Ultra-wideband</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">UWB-PHY</td><td align="left" valign="middle" rowspan="1" colspan="1">Ultra-wideband Physical Layer</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">X73-PHD</td><td align="left" valign="middle" rowspan="1" colspan="1">ISO/IEEE 11073 Personal Health Devices</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">WBAN</td><td align="left" valign="middle" rowspan="1" colspan="1">Wireless Body Area Networks</td></tr><tr><td align="left" valign="middle" rowspan="1" colspan="1">WSN</td><td align="left" valign="middle" rowspan="1" colspan="1">Wireless Sensor Network</td></tr></tbody></array></p>
  </glossary>
  <ref-list>
    <title>References</title>
    <ref id="B1-sensors-21-05504">
      <label>1.</label>
      <element-citation publication-type="confproc">
        <person-group person-group-type="author">
          <name>
            <surname>Lima</surname>
            <given-names>R.A.</given-names>
          </name>
          <name>
            <surname>Ferreira</surname>
            <given-names>V.C.</given-names>
          </name>
          <name>
            <surname>Caballero</surname>
            <given-names>E.</given-names>
          </name>
          <name>
            <surname>Albuquerque</surname>
            <given-names>C.V.</given-names>
          </name>
          <name>
            <surname>Muchaluat Saade</surname>
            <given-names>D.C.</given-names>
          </name>
        </person-group>
        <article-title>Simulation of ISO/IEEE 11073 Personal Health Devices in WBANs</article-title>
        <source>Proceedings of the 22nd International ACM Conference on Modeling, Analysis and Simulation of Wireless and Mobile Systems</source>
        <conf-loc>Miami Beach, FL, USA</conf-loc>
        <conf-date>25–29 November 2019</conf-date>
        <fpage>221</fpage>
        <lpage>224</lpage>
      </element-citation>
    </ref>
    <ref id="B2-sensors-21-05504">
      <label>2.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Patel</surname>
            <given-names>M.</given-names>
          </name>
          <name>
            <surname>Wang</surname>
            <given-names>J.</given-names>
          </name>
        </person-group>
        <article-title>Applications, challenges, and prospective in emerging body area networking technologies</article-title>
        <source>IEEE Wirel. Commun.</source>
        <year>2010</year>
        <volume>17</volume>
        <fpage>80</fpage>
        <lpage>88</lpage>
        <pub-id pub-id-type="doi">10.1109/MWC.2010.5416354</pub-id>
      </element-citation>
    </ref>
    <ref id="B3-sensors-21-05504">
      <label>3.</label>
      <element-citation publication-type="book">
        <person-group person-group-type="author">
          <name>
            <surname>Group</surname>
            <given-names>I.W.</given-names>
          </name>
        </person-group>
        <source>IEEE Standard for Local and Metropolitan Area Networks—Part 15.6: Wireless Body Area Networks</source>
        <publisher-name>Standard, Institute of Electrical and Electronic Engineers</publisher-name>
        <publisher-loc>New York, NY, USA</publisher-loc>
        <year>2012</year>
      </element-citation>
    </ref>
    <ref id="B4-sensors-21-05504">
      <label>4.</label>
      <element-citation publication-type="confproc">
        <person-group person-group-type="author">
          <name>
            <surname>Ferreira</surname>
            <given-names>V.</given-names>
          </name>
          <name>
            <surname>Muchaluat-Saade</surname>
            <given-names>D.</given-names>
          </name>
          <name>
            <surname>Albuquerque</surname>
            <given-names>C.</given-names>
          </name>
        </person-group>
        <article-title>B-Move: A transmission scheduler based on human body movements for WBANs</article-title>
        <source>Proceedings of the 2020 IEEE 33rd International Symposium on Computer-Based Medical Systems (CBMS)</source>
        <conf-loc>Rochester, MN, USA</conf-loc>
        <conf-date>28–30 July 2020</conf-date>
        <fpage>315</fpage>
        <lpage>320</lpage>
      </element-citation>
    </ref>
    <ref id="B5-sensors-21-05504">
      <label>5.</label>
      <element-citation publication-type="book">
        <person-group person-group-type="author">
          <name>
            <surname>Samal</surname>
            <given-names>T.</given-names>
          </name>
          <name>
            <surname>Kabat</surname>
            <given-names>M.R.</given-names>
          </name>
          <name>
            <surname>Priyadarshini</surname>
            <given-names>S.B.B.</given-names>
          </name>
        </person-group>
        <article-title>Energy Saving Delay Constraint MAC Protocol in Wireless Body Area Network</article-title>
        <source>Intelligent and Cloud Computing</source>
        <publisher-name>Springer</publisher-name>
        <publisher-loc>Singapore</publisher-loc>
        <year>2021</year>
        <fpage>623</fpage>
        <lpage>630</lpage>
      </element-citation>
    </ref>
    <ref id="B6-sensors-21-05504">
      <label>6.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Cavallari</surname>
            <given-names>R.</given-names>
          </name>
          <name>
            <surname>Martelli</surname>
            <given-names>F.</given-names>
          </name>
        </person-group>
        <article-title>A survey on wireless body area networks: Technologies and design challenges</article-title>
        <source>IEEE Commun. Surv. Tutor.</source>
        <year>2014</year>
        <volume>16</volume>
        <fpage>1635</fpage>
        <lpage>1657</lpage>
        <pub-id pub-id-type="doi">10.1109/SURV.2014.012214.00007</pub-id>
      </element-citation>
    </ref>
    <ref id="B7-sensors-21-05504">
      <label>7.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Movassaghi</surname>
            <given-names>S.</given-names>
          </name>
          <name>
            <surname>Abolhasan</surname>
            <given-names>M.</given-names>
          </name>
          <name>
            <surname>Lipman</surname>
            <given-names>J.</given-names>
          </name>
          <name>
            <surname>Smith</surname>
            <given-names>D.</given-names>
          </name>
          <name>
            <surname>Jamalipour</surname>
            <given-names>A.</given-names>
          </name>
        </person-group>
        <article-title>Wireless body area networks: A survey</article-title>
        <source>IEEE Commun. Surv. Tutor.</source>
        <year>2014</year>
        <volume>16</volume>
        <fpage>1658</fpage>
        <lpage>1686</lpage>
        <pub-id pub-id-type="doi">10.1109/SURV.2013.121313.00064</pub-id>
      </element-citation>
    </ref>
    <ref id="B8-sensors-21-05504">
      <label>8.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Havenith</surname>
            <given-names>G.</given-names>
          </name>
        </person-group>
        <article-title>Individualized model of human thermoregulation for the simulation of heat stress response</article-title>
        <source>J. Appl. Physiol.</source>
        <year>2001</year>
        <volume>90</volume>
        <fpage>1943</fpage>
        <lpage>1954</lpage>
        <pub-id pub-id-type="doi">10.1152/jappl.2001.90.5.1943</pub-id>
        <pub-id pub-id-type="pmid">11299289</pub-id>
      </element-citation>
    </ref>
    <ref id="B9-sensors-21-05504">
      <label>9.</label>
      <element-citation publication-type="confproc">
        <person-group person-group-type="author">
          <name>
            <surname>Caballero</surname>
            <given-names>E.</given-names>
          </name>
          <name>
            <surname>Ferreira</surname>
            <given-names>V.C.</given-names>
          </name>
          <name>
            <surname>Lima</surname>
            <given-names>R.A.</given-names>
          </name>
          <name>
            <surname>Albuquerque</surname>
            <given-names>C.</given-names>
          </name>
          <name>
            <surname>Muchaluat-Saade</surname>
            <given-names>D.C.</given-names>
          </name>
        </person-group>
        <article-title>LATOR: Link-Quality Aware and Thermal Aware On-Demand Routing Protocol for WBAN</article-title>
        <source>Proceedings of the 2020 International Conference on Systems, Signals and Image Processing (IWSSIP)</source>
        <conf-loc>Niteroi, Brazil</conf-loc>
        <conf-date>1–3 July 2020</conf-date>
        <fpage>337</fpage>
        <lpage>342</lpage>
      </element-citation>
    </ref>
    <ref id="B10-sensors-21-05504">
      <label>10.</label>
      <element-citation publication-type="book">
        <person-group person-group-type="author">
          <name>
            <surname>Boulis</surname>
            <given-names>A.</given-names>
          </name>
        </person-group>
        <source>A Simulator for Wireless Sensor Networks and Body Area Network</source>
        <publisher-name>NICTA, National ICT Australia</publisher-name>
        <publisher-loc>Sydney, Australia</publisher-loc>
        <year>2011</year>
        <comment>Available online: <ext-link ext-link-type="uri" xlink:href="https://github.com/boulis/Castalia">https://github.com/boulis/Castalia</ext-link></comment>
        <date-in-citation content-type="access-date" iso-8601-date="2021-08-10">(accessed on 10 August 2021)</date-in-citation>
      </element-citation>
    </ref>
    <ref id="B11-sensors-21-05504">
      <label>11.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Khan</surname>
            <given-names>Z.</given-names>
          </name>
          <name>
            <surname>Aslam</surname>
            <given-names>N.</given-names>
          </name>
          <name>
            <surname>Sivakumar</surname>
            <given-names>S.</given-names>
          </name>
          <name>
            <surname>Phillips</surname>
            <given-names>W.</given-names>
          </name>
        </person-group>
        <article-title>Energy-aware peering routing protocol for indoor hospital body area network communication</article-title>
        <source>Procedia Comput. Sci.</source>
        <year>2012</year>
        <volume>10</volume>
        <fpage>188</fpage>
        <lpage>196</lpage>
        <pub-id pub-id-type="doi">10.1016/j.procs.2012.06.027</pub-id>
      </element-citation>
    </ref>
    <ref id="B12-sensors-21-05504">
      <label>12.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Jamil</surname>
            <given-names>F.</given-names>
          </name>
          <name>
            <surname>Iqbal</surname>
            <given-names>M.A.</given-names>
          </name>
          <name>
            <surname>Amin</surname>
            <given-names>R.</given-names>
          </name>
          <name>
            <surname>Kim</surname>
            <given-names>D.</given-names>
          </name>
        </person-group>
        <article-title>Adaptive thermal-aware routing protocol for wireless body area network</article-title>
        <source>Electronics</source>
        <year>2019</year>
        <volume>8</volume>
        <elocation-id>47</elocation-id>
        <pub-id pub-id-type="doi">10.3390/electronics8010047</pub-id>
      </element-citation>
    </ref>
    <ref id="B13-sensors-21-05504">
      <label>13.</label>
      <element-citation publication-type="confproc">
        <person-group person-group-type="author">
          <name>
            <surname>Köpke</surname>
            <given-names>A.</given-names>
          </name>
          <name>
            <surname>Swigulski</surname>
            <given-names>M.</given-names>
          </name>
          <name>
            <surname>Wessel</surname>
            <given-names>K.</given-names>
          </name>
          <name>
            <surname>Willkomm</surname>
            <given-names>D.</given-names>
          </name>
          <name>
            <surname>Haneveld</surname>
            <given-names>P.K.</given-names>
          </name>
          <name>
            <surname>Parker</surname>
            <given-names>T.E.</given-names>
          </name>
          <name>
            <surname>Visser</surname>
            <given-names>O.W.</given-names>
          </name>
          <name>
            <surname>Lichte</surname>
            <given-names>H.S.</given-names>
          </name>
          <name>
            <surname>Valentin</surname>
            <given-names>S.</given-names>
          </name>
        </person-group>
        <article-title>Simulating wireless and mobile networks in OMNeT++ the MiXiM vision</article-title>
        <source>Proceedings of the 1st International conference on Simulation Tools and Techniques for Communications, Networks and Systems &amp; Workshops</source>
        <conf-loc>Marseille, France</conf-loc>
        <conf-date>3–7 March 2008</conf-date>
        <fpage>1</fpage>
        <lpage>8</lpage>
      </element-citation>
    </ref>
    <ref id="B14-sensors-21-05504">
      <label>14.</label>
      <element-citation publication-type="confproc">
        <person-group person-group-type="author">
          <name>
            <surname>Smail</surname>
            <given-names>O.</given-names>
          </name>
          <name>
            <surname>Kerrar</surname>
            <given-names>A.</given-names>
          </name>
          <name>
            <surname>Zetili</surname>
            <given-names>Y.</given-names>
          </name>
          <name>
            <surname>Cousin</surname>
            <given-names>B.</given-names>
          </name>
        </person-group>
        <article-title>ESR: Energy aware and Stable Routing protocol for WBAN networks</article-title>
        <source>Proceedings of the 2016 International Wireless Communications and Mobile Computing Conference (IWCMC)</source>
        <conf-loc>Paphos, Cyprus</conf-loc>
        <conf-date>5–9 September 2016</conf-date>
        <fpage>452</fpage>
        <lpage>457</lpage>
      </element-citation>
    </ref>
    <ref id="B15-sensors-21-05504">
      <label>15.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Razzaque</surname>
            <given-names>M.</given-names>
          </name>
          <name>
            <surname>Hong</surname>
            <given-names>C.S.</given-names>
          </name>
          <name>
            <surname>Lee</surname>
            <given-names>S.</given-names>
          </name>
        </person-group>
        <article-title>Data-centric multiobjective QoS-aware routing protocol for body sensor networks</article-title>
        <source>Sensors</source>
        <year>2011</year>
        <volume>11</volume>
        <fpage>917</fpage>
        <lpage>937</lpage>
        <pub-id pub-id-type="doi">10.3390/s110100917</pub-id>
        <pub-id pub-id-type="pmid">22346611</pub-id>
      </element-citation>
    </ref>
    <ref id="B16-sensors-21-05504">
      <label>16.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Kim</surname>
            <given-names>B.S.</given-names>
          </name>
          <name>
            <surname>Sung</surname>
            <given-names>T.E.</given-names>
          </name>
          <name>
            <surname>Kim</surname>
            <given-names>K.I.</given-names>
          </name>
        </person-group>
        <article-title>An ns-3 implementation and experimental performance analysis of ieee 802.15.6 standard under different deployment scenarios</article-title>
        <source>Int. J. Environ. Res. Public Health</source>
        <year>2020</year>
        <volume>17</volume>
        <elocation-id>4007</elocation-id>
        <pub-id pub-id-type="doi">10.3390/ijerph17114007</pub-id>
      </element-citation>
    </ref>
    <ref id="B17-sensors-21-05504">
      <label>17.</label>
      <element-citation publication-type="book">
        <person-group person-group-type="author">
          <name>
            <surname>Tang</surname>
            <given-names>Q.</given-names>
          </name>
          <name>
            <surname>Tummala</surname>
            <given-names>N.</given-names>
          </name>
        </person-group>
        <article-title>TARA: Thermal-aware routing algorithm for implanted sensor networks</article-title>
        <source>International Conference on Distributed Computing in Sensor Systems</source>
        <publisher-name>Springer</publisher-name>
        <publisher-loc>Berlin/Heidelberg, Germany</publisher-loc>
        <year>2005</year>
        <fpage>206</fpage>
        <lpage>217</lpage>
      </element-citation>
    </ref>
    <ref id="B18-sensors-21-05504">
      <label>18.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Javaid</surname>
            <given-names>N.</given-names>
          </name>
          <name>
            <surname>Hayat</surname>
            <given-names>S.</given-names>
          </name>
          <name>
            <surname>Shakir</surname>
            <given-names>M.</given-names>
          </name>
          <name>
            <surname>Khan</surname>
            <given-names>M.A.</given-names>
          </name>
          <name>
            <surname>Bouk</surname>
            <given-names>S.H.</given-names>
          </name>
          <name>
            <surname>Khan</surname>
            <given-names>Z.A.</given-names>
          </name>
        </person-group>
        <article-title>Energy efficient mac protocols in wireless body area sensor networks-a survey</article-title>
        <source>arXiv</source>
        <year>2013</year>
        <pub-id pub-id-type="arxiv">1303.2072</pub-id>
      </element-citation>
    </ref>
    <ref id="B19-sensors-21-05504">
      <label>19.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Javaid</surname>
            <given-names>N.</given-names>
          </name>
          <name>
            <surname>Abbas</surname>
            <given-names>Z.</given-names>
          </name>
          <name>
            <surname>Fareed</surname>
            <given-names>M.</given-names>
          </name>
          <name>
            <surname>Khan</surname>
            <given-names>Z.A.</given-names>
          </name>
          <name>
            <surname>Alrajeh</surname>
            <given-names>N.</given-names>
          </name>
        </person-group>
        <article-title>M-ATTEMPT: A new energy-efficient routing protocol for wireless body area sensor networks</article-title>
        <source>Procedia Comput. Sci.</source>
        <year>2013</year>
        <volume>19</volume>
        <fpage>224</fpage>
        <lpage>231</lpage>
        <pub-id pub-id-type="doi">10.1016/j.procs.2013.06.033</pub-id>
      </element-citation>
    </ref>
    <ref id="B20-sensors-21-05504">
      <label>20.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Rafatkhah</surname>
            <given-names>O.</given-names>
          </name>
          <name>
            <surname>Lighvan</surname>
            <given-names>M.Z.</given-names>
          </name>
        </person-group>
        <article-title>M2E2: A novel multi-hop routing protocol for wireless body sensor networks</article-title>
        <source>Int. J. Comput. Netw. Commun. Secur.</source>
        <year>2014</year>
        <volume>2</volume>
        <fpage>260</fpage>
        <lpage>267</lpage>
      </element-citation>
    </ref>
    <ref id="B21-sensors-21-05504">
      <label>21.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Kaburcuk</surname>
            <given-names>F.</given-names>
          </name>
          <name>
            <surname>Elsherbeni</surname>
            <given-names>A.Z.</given-names>
          </name>
        </person-group>
        <article-title>Temperature Rise and SAR Distribution at Wide Range of Frequencies in a Human Head due to an Antenna Radiation</article-title>
        <source>Appl. Comput. Electromagn. Soc. J.</source>
        <year>2018</year>
        <volume>33</volume>
        <fpage>367</fpage>
        <lpage>372</lpage>
      </element-citation>
    </ref>
    <ref id="B22-sensors-21-05504">
      <label>22.</label>
      <element-citation publication-type="confproc">
        <person-group person-group-type="author">
          <name>
            <surname>Quwaider</surname>
            <given-names>M.</given-names>
          </name>
          <name>
            <surname>Biswas</surname>
            <given-names>S.</given-names>
          </name>
        </person-group>
        <article-title>Probabilistic routing in on-body sensor networks with postural disconnections</article-title>
        <source>Proceedings of the 7th ACM international symposium on Mobility Management and Wireless Access</source>
        <conf-loc>Canary Islands, Spain</conf-loc>
        <conf-date>26–27 October 2009</conf-date>
        <fpage>149</fpage>
        <lpage>158</lpage>
      </element-citation>
    </ref>
    <ref id="B23-sensors-21-05504">
      <label>23.</label>
      <element-citation publication-type="confproc">
        <person-group person-group-type="author">
          <name>
            <surname>Smith</surname>
            <given-names>D.</given-names>
          </name>
          <name>
            <surname>Miniutti</surname>
            <given-names>D.</given-names>
          </name>
          <name>
            <surname>Hanlen</surname>
            <given-names>L.</given-names>
          </name>
          <name>
            <surname>Rodda</surname>
            <given-names>D.</given-names>
          </name>
          <name>
            <surname>Gilbert</surname>
            <given-names>B.</given-names>
          </name>
        </person-group>
        <article-title>Dynamic Narrowband Body Area Communications: Link-Margin Based Performance Analysis and Second-Order Temporal Statistics</article-title>
        <source>Proceedings of the IEEE Wireless Communication and Networking Conference</source>
        <conf-loc>Sydney, Australia</conf-loc>
        <conf-date>18–21 April 2010</conf-date>
      </element-citation>
    </ref>
    <ref id="B24-sensors-21-05504">
      <label>24.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Goswami</surname>
            <given-names>D.</given-names>
          </name>
          <name>
            <surname>Sarma</surname>
            <given-names>K.C.</given-names>
          </name>
          <name>
            <surname>Mahanta</surname>
            <given-names>A.</given-names>
          </name>
        </person-group>
        <article-title>Path loss variation of on-body UWB channel in the frequency bands of IEEE 802.15.6 standard</article-title>
        <source>Healthc. Technol. Lett.</source>
        <year>2016</year>
        <volume>3</volume>
        <fpage>129</fpage>
        <lpage>135</lpage>
        <pub-id pub-id-type="doi">10.1049/htl.2016.0005</pub-id>
        <?supplied-pmid 27382482?>
        <pub-id pub-id-type="pmid">27382482</pub-id>
      </element-citation>
    </ref>
    <ref id="B25-sensors-21-05504">
      <label>25.</label>
      <element-citation publication-type="confproc">
        <person-group person-group-type="author">
          <name>
            <surname>Nabi</surname>
            <given-names>M.</given-names>
          </name>
          <name>
            <surname>Geilen</surname>
            <given-names>M.</given-names>
          </name>
          <name>
            <surname>Basten</surname>
            <given-names>T.</given-names>
          </name>
        </person-group>
        <article-title>MoBAN: A configurable mobility model for wireless body area networks</article-title>
        <source>Proceedings of the 4th International ICST Conference on Simulation Tools and Techniques</source>
        <conf-loc>Barcelona, Spain</conf-loc>
        <conf-date>21–25 March 2011</conf-date>
        <fpage>168</fpage>
        <lpage>177</lpage>
      </element-citation>
    </ref>
    <ref id="B26-sensors-21-05504">
      <label>26.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Pennes</surname>
            <given-names>H.H.</given-names>
          </name>
        </person-group>
        <article-title>Analysis of tissue and arterial blood temperatures in the resting human forearm</article-title>
        <source>J. Appl. Physiol.</source>
        <year>1948</year>
        <volume>1</volume>
        <fpage>93</fpage>
        <lpage>122</lpage>
        <pub-id pub-id-type="doi">10.1152/jappl.1948.1.2.93</pub-id>
        <pub-id pub-id-type="pmid">18887578</pub-id>
      </element-citation>
    </ref>
    <ref id="B27-sensors-21-05504">
      <label>27.</label>
      <element-citation publication-type="book">
        <person-group person-group-type="author">
          <collab>ISO/IEEE</collab>
        </person-group>
        <article-title>Health informatics—Personal health device communication Part 00103: Overview</article-title>
        <source>IEEE Std 11073-00103-2012</source>
        <publisher-name>IEEE</publisher-name>
        <publisher-loc>Piscataway, NJ, USA</publisher-loc>
        <year>2012</year>
        <fpage>1</fpage>
        <lpage>80</lpage>
      </element-citation>
    </ref>
    <ref id="B28-sensors-21-05504">
      <label>28.</label>
      <element-citation publication-type="web">
        <person-group person-group-type="author">
          <collab>Signove</collab>
        </person-group>
        <article-title>Antidote: Program Guide, Documentation for Developers of Applications Based on Antidote IEEE 11073 Library</article-title>
        <year>2011</year>
        <comment>Available online: <ext-link ext-link-type="uri" xlink:href="http://oss.signove.com/images/c/c7/AntidoteProgramGuide.pdf">http://oss.signove.com/images/c/c7/AntidoteProgramGuide.pdf</ext-link></comment>
        <date-in-citation content-type="access-date" iso-8601-date="2021-01-07">(accessed on 7 January 2021)</date-in-citation>
      </element-citation>
    </ref>
    <ref id="B29-sensors-21-05504">
      <label>29.</label>
      <element-citation publication-type="confproc">
        <person-group person-group-type="author">
          <name>
            <surname>Takahashi</surname>
            <given-names>D.</given-names>
          </name>
          <name>
            <surname>Xiao</surname>
            <given-names>Y.</given-names>
          </name>
          <name>
            <surname>Hu</surname>
            <given-names>F.</given-names>
          </name>
        </person-group>
        <article-title>LTRT: Least total-route temperature routing for embedded biomedical sensor networks</article-title>
        <source>Proceedings of the IEEE GLOBECOM 2007—IEEE Global Telecommunications Conference</source>
        <conf-loc>Washington, DC, USA</conf-loc>
        <conf-date>26–30 November 2007</conf-date>
        <fpage>641</fpage>
        <lpage>645</lpage>
      </element-citation>
    </ref>
    <ref id="B30-sensors-21-05504">
      <label>30.</label>
      <element-citation publication-type="confproc">
        <person-group person-group-type="author">
          <name>
            <surname>Varga</surname>
            <given-names>A.</given-names>
          </name>
          <name>
            <surname>Hornig</surname>
            <given-names>R.</given-names>
          </name>
        </person-group>
        <article-title>An overview of the OMNeT++ simulation environment</article-title>
        <source>Proceedings of the 1st International Conference on Simulation Tools and Techniques for Communications, Networks and Systems &amp; Workshops</source>
        <conf-loc>Marseille, France</conf-loc>
        <conf-date>3–7 March 2008</conf-date>
        <fpage>1</fpage>
        <lpage>10</lpage>
      </element-citation>
    </ref>
    <ref id="B31-sensors-21-05504">
      <label>31.</label>
      <element-citation publication-type="confproc">
        <person-group person-group-type="author">
          <name>
            <surname>Boulis</surname>
            <given-names>A.</given-names>
          </name>
        </person-group>
        <article-title>Castalia: Revealing pitfalls in designing distributed algorithms in WSN</article-title>
        <source>Proceedings of the 5th International Conference on Embedded Networked Sensor Systems</source>
        <conf-loc>Sydney, Australia</conf-loc>
        <conf-date>6–9 November 2007</conf-date>
        <fpage>407</fpage>
        <lpage>408</lpage>
      </element-citation>
    </ref>
    <ref id="B32-sensors-21-05504">
      <label>32.</label>
      <element-citation publication-type="confproc">
        <person-group person-group-type="author">
          <name>
            <surname>Braem</surname>
            <given-names>B.</given-names>
          </name>
          <name>
            <surname>Blondia</surname>
            <given-names>C.</given-names>
          </name>
        </person-group>
        <article-title>An analysis of requirements to supporting mobility in body area networks</article-title>
        <source>Proceedings of the 2012 International Conference on Computing, Networking and Communications (ICNC)</source>
        <conf-loc>Maui, HI, USA</conf-loc>
        <conf-date>30 January–2 February 2012</conf-date>
        <fpage>89</fpage>
        <lpage>93</lpage>
      </element-citation>
    </ref>
    <ref id="B33-sensors-21-05504">
      <label>33.</label>
      <element-citation publication-type="confproc">
        <person-group person-group-type="author">
          <name>
            <surname>Khan</surname>
            <given-names>Z.</given-names>
          </name>
          <name>
            <surname>Sivakumar</surname>
            <given-names>S.</given-names>
          </name>
          <name>
            <surname>Phillips</surname>
            <given-names>W.</given-names>
          </name>
          <name>
            <surname>Robertson</surname>
            <given-names>B.</given-names>
          </name>
        </person-group>
        <article-title>QPRD: QoS-aware peering routing protocol for delay sensitive data in hospital body area network communication</article-title>
        <source>Proceedings of the 2012 Seventh International Conference on Broadband, Wireless Computing, Communication and Applications</source>
        <conf-loc>Victoria, BC, Canada</conf-loc>
        <conf-date>12–14 November 2012</conf-date>
        <fpage>178</fpage>
        <lpage>185</lpage>
      </element-citation>
    </ref>
    <ref id="B34-sensors-21-05504">
      <label>34.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Bouayad</surname>
            <given-names>A.</given-names>
          </name>
          <name>
            <surname>Chaoui</surname>
            <given-names>N.E.H.</given-names>
          </name>
          <name>
            <surname>El Ghazi</surname>
            <given-names>M.</given-names>
          </name>
        </person-group>
        <article-title>Modeling and simulation of a wireless body area network for monitoring sick patient remotely</article-title>
        <source>Int. J. Comput. Sci. Inf. Technol.</source>
        <year>2015</year>
        <volume>6</volume>
        <fpage>580</fpage>
        <lpage>585</lpage>
      </element-citation>
    </ref>
    <ref id="B35-sensors-21-05504">
      <label>35.</label>
      <element-citation publication-type="confproc">
        <person-group person-group-type="author">
          <name>
            <surname>Hegde</surname>
            <given-names>A.</given-names>
          </name>
          <name>
            <surname>Prasad</surname>
            <given-names>D.</given-names>
          </name>
        </person-group>
        <article-title>Evaluation of PHY and MAC layer in WBAN using Castalia: Lower layer parameters of WBAN in Castalia</article-title>
        <source>Proceedings of the 2017 International Conference on Intelligent Sustainable Systems (ICISS)</source>
        <conf-loc>Palladam, India</conf-loc>
        <conf-date>7–8 December 2017</conf-date>
        <fpage>395</fpage>
        <lpage>399</lpage>
      </element-citation>
    </ref>
    <ref id="B36-sensors-21-05504">
      <label>36.</label>
      <element-citation publication-type="confproc">
        <person-group person-group-type="author">
          <name>
            <surname>Waheed</surname>
            <given-names>T.</given-names>
          </name>
          <name>
            <surname>Shaikh</surname>
            <given-names>F.K.</given-names>
          </name>
          <name>
            <surname>Khan</surname>
            <given-names>I.U.</given-names>
          </name>
        </person-group>
        <article-title>WBAN Performance Evaluation at PHY/MAC/Network Layer using Castalia Simulator</article-title>
        <source>Proceedings of the 2019 13th International Conference on Mathematics, Actuarial Science, Computer Science and Statistics (MACS)</source>
        <conf-loc>Karachi, Pakistan</conf-loc>
        <conf-date>14–15 December 2019</conf-date>
        <fpage>1</fpage>
        <lpage>6</lpage>
      </element-citation>
    </ref>
    <ref id="B37-sensors-21-05504">
      <label>37.</label>
      <element-citation publication-type="confproc">
        <person-group person-group-type="author">
          <name>
            <surname>Nabila</surname>
            <given-names>A.</given-names>
          </name>
        </person-group>
        <article-title>A QoS based comparative analysis of the IEEE standards 802.15. 4 &amp; 802.15. 6 in WBAN-based healthcare monitoring systems</article-title>
        <source>Proceedings of the 2019 International Conference on Wireless Technologies, Embedded and Intelligent Systems (WITS)</source>
        <conf-loc>Fez, Morocco</conf-loc>
        <conf-date>3–4 April 2019</conf-date>
        <fpage>1</fpage>
        <lpage>5</lpage>
      </element-citation>
    </ref>
    <ref id="B38-sensors-21-05504">
      <label>38.</label>
      <element-citation publication-type="book">
        <person-group person-group-type="author">
          <name>
            <surname>Group</surname>
            <given-names>I.W.</given-names>
          </name>
        </person-group>
        <source>IEEE Standard for Local and Metropolitan Area Networks—Part 15.4: Wireless Medium Access Control (MAC) and Physical Layer (PHY) Specifications for Low Rate Wireless Personal Area Networks (WPANs)</source>
        <publisher-name>IEEE</publisher-name>
        <publisher-loc>Piscataway, NJ, USA</publisher-loc>
        <year>2006</year>
      </element-citation>
    </ref>
    <ref id="B39-sensors-21-05504">
      <label>39.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Razzaque</surname>
            <given-names>M.A.</given-names>
          </name>
          <name>
            <surname>Alam</surname>
            <given-names>M.M.</given-names>
          </name>
          <name>
            <surname>Mamun-Or-Rashid</surname>
            <given-names>M.</given-names>
          </name>
          <name>
            <surname>Hong</surname>
            <given-names>C.S.</given-names>
          </name>
        </person-group>
        <article-title>Multi-constrained QoS geographic routing for heterogeneous traffic in sensor networks</article-title>
        <source>IEICE Trans. Commun.</source>
        <year>2008</year>
        <volume>91</volume>
        <fpage>2589</fpage>
        <lpage>2601</lpage>
        <pub-id pub-id-type="doi">10.1093/ietcom/e91-b.8.2589</pub-id>
      </element-citation>
    </ref>
    <ref id="B40-sensors-21-05504">
      <label>40.</label>
      <element-citation publication-type="confproc">
        <person-group person-group-type="author">
          <name>
            <surname>Djenouri</surname>
            <given-names>D.</given-names>
          </name>
          <name>
            <surname>Balasingham</surname>
            <given-names>I.</given-names>
          </name>
        </person-group>
        <article-title>New QoS and geographical routing in wireless biomedical sensor networks</article-title>
        <source>Proceedings of the 2009 Sixth International Conference on Broadband Communications, Networks, and Systems</source>
        <conf-loc>Madrid, Spain</conf-loc>
        <conf-date>14–16 September 2009</conf-date>
        <fpage>1</fpage>
        <lpage>8</lpage>
      </element-citation>
    </ref>
    <ref id="B41-sensors-21-05504">
      <label>41.</label>
      <element-citation publication-type="confproc">
        <person-group person-group-type="author">
          <name>
            <surname>Henderson</surname>
            <given-names>T.R.</given-names>
          </name>
          <name>
            <surname>Roy</surname>
            <given-names>S.</given-names>
          </name>
          <name>
            <surname>Floyd</surname>
            <given-names>S.</given-names>
          </name>
          <name>
            <surname>Riley</surname>
            <given-names>G.F.</given-names>
          </name>
        </person-group>
        <article-title>ns-3 project goals</article-title>
        <source>Proceedings of the 2006 Workshop on ns-2: The IP Network Simulator</source>
        <conf-loc>Pisa, Italy</conf-loc>
        <conf-date>10 October 2006</conf-date>
        <fpage>13</fpage>
      </element-citation>
    </ref>
    <ref id="B42-sensors-21-05504">
      <label>42.</label>
      <element-citation publication-type="confproc">
        <person-group person-group-type="author">
          <name>
            <surname>Yue</surname>
            <given-names>W.</given-names>
          </name>
          <name>
            <surname>Li</surname>
            <given-names>C.</given-names>
          </name>
          <name>
            <surname>Song</surname>
            <given-names>Y.</given-names>
          </name>
          <name>
            <surname>Yang</surname>
            <given-names>L.</given-names>
          </name>
          <name>
            <surname>Yuan</surname>
            <given-names>X.</given-names>
          </name>
        </person-group>
        <article-title>WBAN on NS-3: Novel implementation with high performance of IEEE 802.15.6</article-title>
        <source>Proceedings of the 2016 IEEE Wireless Communications and Networking Conference</source>
        <conf-loc>Doha, Qatar</conf-loc>
        <conf-date>3–6 April 2016</conf-date>
        <fpage>1</fpage>
        <lpage>6</lpage>
      </element-citation>
    </ref>
    <ref id="B43-sensors-21-05504">
      <label>43.</label>
      <element-citation publication-type="confproc">
        <person-group person-group-type="author">
          <name>
            <surname>Su</surname>
            <given-names>X.</given-names>
          </name>
          <name>
            <surname>Li</surname>
            <given-names>C.</given-names>
          </name>
          <name>
            <surname>Song</surname>
            <given-names>Y.</given-names>
          </name>
          <name>
            <surname>Yuan</surname>
            <given-names>X.</given-names>
          </name>
        </person-group>
        <article-title>WBAN on hardware: Implementation and optimization based on IEEE 802.15.6</article-title>
        <source>Proceedings of the 2017 International Conference on Computer, Information and Telecommunication Systems (CITS)</source>
        <conf-loc>Dalian, China</conf-loc>
        <conf-date>21–23 July 2017</conf-date>
        <fpage>147</fpage>
        <lpage>151</lpage>
      </element-citation>
    </ref>
    <ref id="B44-sensors-21-05504">
      <label>44.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Van Roy</surname>
            <given-names>S.</given-names>
          </name>
          <name>
            <surname>Quitin</surname>
            <given-names>F.</given-names>
          </name>
          <name>
            <surname>Liu</surname>
            <given-names>L.</given-names>
          </name>
          <name>
            <surname>Oestges</surname>
            <given-names>C.</given-names>
          </name>
          <name>
            <surname>Horlin</surname>
            <given-names>F.</given-names>
          </name>
          <name>
            <surname>Dricot</surname>
            <given-names>J.M.</given-names>
          </name>
          <name>
            <surname>De Doncker</surname>
            <given-names>P.</given-names>
          </name>
        </person-group>
        <article-title>Dynamic channel modeling for multi-sensor body area networks</article-title>
        <source>IEEE Trans. Antennas Propag.</source>
        <year>2012</year>
        <volume>61</volume>
        <fpage>2200</fpage>
        <lpage>2208</lpage>
        <pub-id pub-id-type="doi">10.1109/TAP.2012.2231917</pub-id>
      </element-citation>
    </ref>
    <ref id="B45-sensors-21-05504">
      <label>45.</label>
      <element-citation publication-type="book">
        <person-group person-group-type="author">
          <name>
            <surname>Smith</surname>
            <given-names>D.B.</given-names>
          </name>
          <name>
            <surname>Hanlen</surname>
            <given-names>L.W.</given-names>
          </name>
        </person-group>
        <article-title>Channel modeling for wireless body area networks</article-title>
        <source>Ultra-Low-Power Short-Range Radios</source>
        <publisher-name>Springer</publisher-name>
        <publisher-loc>Berlin/Heidelberg, Germany</publisher-loc>
        <year>2015</year>
        <fpage>25</fpage>
        <lpage>55</lpage>
      </element-citation>
    </ref>
    <ref id="B46-sensors-21-05504">
      <label>46.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Mohamed</surname>
            <given-names>M.</given-names>
          </name>
          <name>
            <surname>Joseph</surname>
            <given-names>W.</given-names>
          </name>
          <name>
            <surname>Vermeeren</surname>
            <given-names>G.</given-names>
          </name>
          <name>
            <surname>Tanghe</surname>
            <given-names>E.</given-names>
          </name>
          <name>
            <surname>Cheffena</surname>
            <given-names>M.</given-names>
          </name>
        </person-group>
        <article-title>Characterization of dynamic wireless body area network channels during walking</article-title>
        <source>EURASIP J. Wirel. Commun. Netw.</source>
        <year>2019</year>
        <volume>2019</volume>
        <fpage>104</fpage>
        <pub-id pub-id-type="doi">10.1186/s13638-019-1415-3</pub-id>
      </element-citation>
    </ref>
    <ref id="B47-sensors-21-05504">
      <label>47.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Giering</surname>
            <given-names>K.</given-names>
          </name>
          <name>
            <surname>Lamprecht</surname>
            <given-names>I.</given-names>
          </name>
          <name>
            <surname>Minet</surname>
            <given-names>O.</given-names>
          </name>
        </person-group>
        <article-title>Specific heat capacities of human and animal tissues. Laser-Tissue Interaction and Tissue Optics</article-title>
        <source>Int. Soc. Opt. Photonics</source>
        <year>1996</year>
        <volume>2624</volume>
        <fpage>188</fpage>
        <lpage>197</lpage>
      </element-citation>
    </ref>
    <ref id="B48-sensors-21-05504">
      <label>48.</label>
      <element-citation publication-type="book">
        <person-group person-group-type="author">
          <collab>ISO/IEEE</collab>
        </person-group>
        <article-title>IEEE Health informatics–Personal health device communication Part 20601: Application profile–Optimized Exchange Protocol—Corrigendum 1</article-title>
        <source>Std 11073-20601-2014/Cor 1-2015 (Corrigendum to IEEE Std 11073-20601-2014)</source>
        <publisher-name>IEEE</publisher-name>
        <publisher-loc>Piscataway, NJ, USA</publisher-loc>
        <year>2015</year>
        <fpage>1</fpage>
        <lpage>24</lpage>
      </element-citation>
    </ref>
    <ref id="B49-sensors-21-05504">
      <label>49.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Nikoukar</surname>
            <given-names>A.</given-names>
          </name>
          <name>
            <surname>Raza</surname>
            <given-names>S.</given-names>
          </name>
          <name>
            <surname>Poole</surname>
            <given-names>A.</given-names>
          </name>
          <name>
            <surname>Güneş</surname>
            <given-names>M.</given-names>
          </name>
          <name>
            <surname>Dezfouli</surname>
            <given-names>B.</given-names>
          </name>
        </person-group>
        <article-title>Low-power wireless for the Internet of Things: Standards and applications</article-title>
        <source>IEEE Access</source>
        <year>2018</year>
        <volume>6</volume>
        <fpage>67893</fpage>
        <lpage>67926</lpage>
        <pub-id pub-id-type="doi">10.1109/ACCESS.2018.2879189</pub-id>
      </element-citation>
    </ref>
    <ref id="B50-sensors-21-05504">
      <label>50.</label>
      <element-citation publication-type="journal">
        <person-group person-group-type="author">
          <name>
            <surname>Alam</surname>
            <given-names>M.M.</given-names>
          </name>
          <name>
            <surname>Hamida</surname>
            <given-names>E.B.</given-names>
          </name>
        </person-group>
        <article-title>Surveying wearable human assistive technology for life and safety critical applications: Standards, challenges and opportunities</article-title>
        <source>Sensors</source>
        <year>2014</year>
        <volume>14</volume>
        <fpage>9153</fpage>
        <lpage>9209</lpage>
        <pub-id pub-id-type="doi">10.3390/s140509153</pub-id>
        <?supplied-pmid 24859024?>
        <pub-id pub-id-type="pmid">24859024</pub-id>
      </element-citation>
    </ref>
  </ref-list>
</back>
<floats-group>
  <fig id="sensors-21-05504-f001" orientation="portrait" position="float">
    <label>Figure 1</label>
    <caption>
      <p>The BNS framework structure.</p>
    </caption>
    <graphic xlink:href="sensors-21-05504-g001"/>
  </fig>
  <fig id="sensors-21-05504-f002" orientation="portrait" position="float">
    <label>Figure 2</label>
    <caption>
      <p>Goswami channel class implemented in the BNS framework. The character “*” refers to pointer-type variable.</p>
    </caption>
    <graphic xlink:href="sensors-21-05504-g002"/>
  </fig>
  <fig id="sensors-21-05504-f003" orientation="portrait" position="float">
    <label>Figure 3</label>
    <caption>
      <p>Class diagram for the IEEE 802.15.6 MAC module implemented in the BNS framework.</p>
    </caption>
    <graphic xlink:href="sensors-21-05504-g003"/>
  </fig>
  <fig id="sensors-21-05504-f004" orientation="portrait" position="float">
    <label>Figure 4</label>
    <caption>
      <p>Class diagram of the mobility model implemented in the BNS framework.</p>
    </caption>
    <graphic xlink:href="sensors-21-05504-g004"/>
  </fig>
  <fig id="sensors-21-05504-f005" orientation="portrait" position="float">
    <label>Figure 5</label>
    <caption>
      <p>Class diagram of the BNS temperature model. The character “*” refers to pointer-type variables.</p>
    </caption>
    <graphic xlink:href="sensors-21-05504-g005"/>
  </fig>
  <fig id="sensors-21-05504-f006" orientation="portrait" position="float">
    <label>Figure 6</label>
    <caption>
      <p>How Antidote Library receives messages from the BNS Framework.</p>
    </caption>
    <graphic xlink:href="sensors-21-05504-g006"/>
  </fig>
  <fig id="sensors-21-05504-f007" orientation="portrait" position="float">
    <label>Figure 7</label>
    <caption>
      <p>Communication module handling several nodes.</p>
    </caption>
    <graphic xlink:href="sensors-21-05504-g007"/>
  </fig>
  <fig id="sensors-21-05504-f008" orientation="portrait" position="float">
    <label>Figure 8</label>
    <caption>
      <p>Network topology used in remote monitoring scenario.</p>
    </caption>
    <graphic xlink:href="sensors-21-05504-g008"/>
  </fig>
  <fig id="sensors-21-05504-f009" orientation="portrait" position="float">
    <label>Figure 9</label>
    <caption>
      <p>Measurement packets successfully delivered to the manager per node.</p>
    </caption>
    <graphic xlink:href="sensors-21-05504-g009"/>
  </fig>
  <fig id="sensors-21-05504-f010" orientation="portrait" position="float">
    <label>Figure 10</label>
    <caption>
      <p>Distribution of packet’s latency in application layer.</p>
    </caption>
    <graphic xlink:href="sensors-21-05504-g010"/>
  </fig>
  <fig id="sensors-21-05504-f011" orientation="portrait" position="float">
    <label>Figure 11</label>
    <caption>
      <p>Temperature variation of the nodes. Node 1 acting as transmitter. (<bold>a</bold>) Using FRAR protocol; (<bold>b</bold>) using LAOR protocol; (<bold>c</bold>) using LATOR protocol.</p>
    </caption>
    <graphic xlink:href="sensors-21-05504-g011"/>
  </fig>
  <fig id="sensors-21-05504-f012" orientation="portrait" position="float">
    <label>Figure 12</label>
    <caption>
      <p>WBAN topology with 12 nodes.</p>
    </caption>
    <graphic xlink:href="sensors-21-05504-g012"/>
  </fig>
  <fig id="sensors-21-05504-f013" orientation="portrait" position="float">
    <label>Figure 13</label>
    <caption>
      <p>Application PDR for the 12 nodes topology.</p>
    </caption>
    <graphic xlink:href="sensors-21-05504-g013"/>
  </fig>
  <fig id="sensors-21-05504-f014" orientation="portrait" position="float">
    <label>Figure 14</label>
    <caption>
      <p>Energy spent per transmitted application bit in 12 nodes topology.</p>
    </caption>
    <graphic xlink:href="sensors-21-05504-g014"/>
  </fig>
  <table-wrap id="sensors-21-05504-t001" orientation="portrait" position="float">
    <object-id pub-id-type="pii">sensors-21-05504-t001_Table 1</object-id>
    <label>Table 1</label>
    <caption>
      <p>Comparison of WBAN simulation platforms.</p>
    </caption>
    <table frame="hsides" rules="groups">
      <thead>
        <tr>
          <th align="center" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">Simulation<break/>Platform</th>
          <th align="center" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">Body<break/>
Mobility</th>
          <th align="center" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">Wireless<break/>
Channel</th>
          <th align="center" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">Temperature <break/>
Model</th>
          <th align="center" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">IEEE 802.15.6<break/>
MAC Layer</th>
          <th align="center" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">IEEE 802.15.6<break/>
PHY Layer</th>
          <th align="center" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">Health Devices<break/>
(X73-PHD)</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td align="center" valign="middle" rowspan="1" colspan="1">OMNET++ [<xref rid="B25-sensors-21-05504" ref-type="bibr">25</xref>]</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">Yes</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
        </tr>
        <tr>
          <td align="center" valign="middle" rowspan="1" colspan="1">Castalia [<xref rid="B12-sensors-21-05504" ref-type="bibr">12</xref>,<xref rid="B32-sensors-21-05504" ref-type="bibr">32</xref>,<xref rid="B33-sensors-21-05504" ref-type="bibr">33</xref>,<xref rid="B34-sensors-21-05504" ref-type="bibr">34</xref>,<xref rid="B35-sensors-21-05504" ref-type="bibr">35</xref>]</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">Yes</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">Yes (partially)</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">Yes</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
        </tr>
        <tr>
          <td align="center" valign="middle" rowspan="1" colspan="1">MiXiM [<xref rid="B13-sensors-21-05504" ref-type="bibr">13</xref>]</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">Yes</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
        </tr>
        <tr>
          <td align="center" valign="middle" rowspan="1" colspan="1">NS-2 [<xref rid="B14-sensors-21-05504" ref-type="bibr">14</xref>,<xref rid="B15-sensors-21-05504" ref-type="bibr">15</xref>,<xref rid="B39-sensors-21-05504" ref-type="bibr">39</xref>,<xref rid="B40-sensors-21-05504" ref-type="bibr">40</xref>]</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
        </tr>
        <tr>
          <td align="center" valign="middle" rowspan="1" colspan="1">NS-3 [<xref rid="B16-sensors-21-05504" ref-type="bibr">16</xref>,<xref rid="B42-sensors-21-05504" ref-type="bibr">42</xref>,<xref rid="B43-sensors-21-05504" ref-type="bibr">43</xref>]</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">Yes</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
        </tr>
        <tr>
          <td align="center" valign="middle" rowspan="1" colspan="1">Matlab [<xref rid="B17-sensors-21-05504" ref-type="bibr">17</xref>,<xref rid="B18-sensors-21-05504" ref-type="bibr">18</xref>,<xref rid="B19-sensors-21-05504" ref-type="bibr">19</xref>,<xref rid="B20-sensors-21-05504" ref-type="bibr">20</xref>,<xref rid="B21-sensors-21-05504" ref-type="bibr">21</xref>]</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">Yes</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">Yes</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
          <td align="center" valign="middle" rowspan="1" colspan="1">No</td>
        </tr>
        <tr>
          <td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">BNS Framework</td>
          <td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Yes</td>
          <td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Yes</td>
          <td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Yes</td>
          <td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Yes</td>
          <td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Yes</td>
          <td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Yes</td>
        </tr>
      </tbody>
    </table>
  </table-wrap>
  <table-wrap id="sensors-21-05504-t002" orientation="portrait" position="float">
    <object-id pub-id-type="pii">sensors-21-05504-t002_Table 2</object-id>
    <label>Table 2</label>
    <caption>
      <p>BNS Healthcare Application Layer Configurable Simulation Parameters.</p>
    </caption>
    <table frame="hsides" rules="groups">
      <thead>
        <tr>
          <th align="left" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">Parameter Name</th>
          <th align="left" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">Value</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td align="left" valign="middle" rowspan="1" colspan="1">ApplicationName</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">“Manager”, “Agent”</td>
        </tr>
        <tr>
          <td align="left" valign="middle" rowspan="1" colspan="1">hubNode</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">double value</td>
        </tr>
        <tr>
          <td align="left" valign="middle" rowspan="1" colspan="1">application_type</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">“pulseoximeter”, “thermometer”, “bloodpressure”,<break/>
“basicECG”, “glucometer”</td>
        </tr>
        <tr>
          <td align="left" valign="middle" rowspan="1" colspan="1">measurements_per_second</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">double value</td>
        </tr>
        <tr>
          <td align="left" valign="middle" rowspan="1" colspan="1">confirmed_event</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">true, false</td>
        </tr>
        <tr>
          <td align="left" valign="middle" rowspan="1" colspan="1">retransmitPacket</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">true, false</td>
        </tr>
        <tr>
          <td align="left" valign="middle" rowspan="1" colspan="1">maxNumOfRetransmission</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">integer value</td>
        </tr>
        <tr>
          <td align="left" valign="middle" rowspan="1" colspan="1">timeOutToRetransmitPacket</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">double value</td>
        </tr>
        <tr>
          <td align="left" valign="middle" rowspan="1" colspan="1">managerInitiated</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">true, false</td>
        </tr>
        <tr>
          <td align="left" valign="middle" rowspan="1" colspan="1">managerInitiateMode</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">“singleMode”, “timePeriodMode”, “noTimePeriodMode”</td>
        </tr>
        <tr>
          <td align="left" valign="middle" rowspan="1" colspan="1">managerInitiatedTime</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">double value. Used in “timePeriodMode”</td>
        </tr>
        <tr>
          <td align="left" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">numberOfReceived,<break/>
MeasurementsToSendStop</td>
          <td align="left" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">integer value. Used in “noTimePeriodMode”</td>
        </tr>
      </tbody>
    </table>
  </table-wrap>
  <table-wrap id="sensors-21-05504-t003" orientation="portrait" position="float">
    <object-id pub-id-type="pii">sensors-21-05504-t003_Table 3</object-id>
    <label>Table 3</label>
    <caption>
      <p>WBAN sensors nodes, their positions and transmission rates.</p>
    </caption>
    <table frame="hsides" rules="groups">
      <thead>
        <tr>
          <th align="left" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">Node</th>
          <th align="left" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">Position</th>
          <th align="left" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">Node Type</th>
          <th align="left" valign="middle" style="border-bottom:solid thin;border-top:solid thin" rowspan="1" colspan="1">Transmission Rate</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td align="left" valign="middle" rowspan="1" colspan="1">0</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">Right waist</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">
Hub
</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">-</td>
        </tr>
        <tr>
          <td align="left" valign="middle" rowspan="1" colspan="1">1</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">Head</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">EEG</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">86.5 Kb/s</td>
        </tr>
        <tr>
          <td align="left" valign="middle" rowspan="1" colspan="1">2</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">Left arm</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">Blood pressure</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">1.2 Kb/s</td>
        </tr>
        <tr>
          <td align="left" valign="middle" rowspan="1" colspan="1">3</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">Left hand</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">Glucose Monitor</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">1 Kb/s</td>
        </tr>
        <tr>
          <td align="left" valign="middle" rowspan="1" colspan="1">4</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">Chest</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">ECG</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">192 Kb/s</td>
        </tr>
        <tr>
          <td align="left" valign="middle" rowspan="1" colspan="1">5</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">Right arm</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">Blood flow</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">480 b/s</td>
        </tr>
        <tr>
          <td align="left" valign="middle" rowspan="1" colspan="1">6</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">Right hand</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">Heart rate meter</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">48 b/s</td>
        </tr>
        <tr>
          <td align="left" valign="middle" rowspan="1" colspan="1">7</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">Center of waist</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">Medication injector</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">16 Kb/s</td>
        </tr>
        <tr>
          <td align="left" valign="middle" rowspan="1" colspan="1">8</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">Left leg</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">blood pH</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">48 b/s</td>
        </tr>
        <tr>
          <td align="left" valign="middle" rowspan="1" colspan="1">9</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">Left foot</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">Motion sensor</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">35 Kb/s</td>
        </tr>
        <tr>
          <td align="left" valign="middle" rowspan="1" colspan="1">10</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">Right leg</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">Temperature sensor</td>
          <td align="left" valign="middle" rowspan="1" colspan="1">2.4 b/s</td>
        </tr>
        <tr>
          <td align="left" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">11</td>
          <td align="left" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Right foot</td>
          <td align="left" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">GPS</td>
          <td align="left" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">96 b/s</td>
        </tr>
      </tbody>
    </table>
  </table-wrap>
</floats-group>
