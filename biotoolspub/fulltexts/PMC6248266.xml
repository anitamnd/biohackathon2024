<?properties open_access?>
<?subarticle report42779?>
<?DTDIdentifier.IdentifierValue -//NLM//DTD Journal Publishing DTD v3.0 20080202//EN?>
<?DTDIdentifier.IdentifierType public?>
<?SourceDTD.DTDName journalpublishing3.dtd?>
<?SourceDTD.Version 3.0?>
<?ConverterInfo.XSLTName jp2nlmx2.xsl?>
<?ConverterInfo.Version 1?>
<front>
  <journal-meta>
    <journal-id journal-id-type="nlm-ta">F1000Res</journal-id>
    <journal-id journal-id-type="iso-abbrev">F1000Res</journal-id>
    <journal-id journal-id-type="pmc">F1000Research</journal-id>
    <journal-title-group>
      <journal-title>F1000Research</journal-title>
    </journal-title-group>
    <issn pub-type="epub">2046-1402</issn>
    <publisher>
      <publisher-name>F1000 Research Limited</publisher-name>
      <publisher-loc>London, UK</publisher-loc>
    </publisher>
  </journal-meta>
  <article-meta>
    <article-id pub-id-type="pmcid">6248266</article-id>
    <article-id pub-id-type="doi">10.12688/f1000research.16450.2</article-id>
    <article-categories>
      <subj-group subj-group-type="heading">
        <subject>Software Tool Article</subject>
      </subj-group>
      <subj-group>
        <subject>Articles</subject>
      </subj-group>
    </article-categories>
    <title-group>
      <article-title>Improve your Galaxy text life: The Query Tabular Tool</article-title>
      <fn-group content-type="pub-status">
        <fn>
          <p>[version 2; referees: 3 approved]</p>
        </fn>
      </fn-group>
    </title-group>
    <contrib-group>
      <contrib contrib-type="author">
        <name>
          <surname>Johnson</surname>
          <given-names>James E.</given-names>
        </name>
        <role content-type="http://credit.casrai.org/">Conceptualization</role>
        <role content-type="http://credit.casrai.org/">Methodology</role>
        <role content-type="http://credit.casrai.org/">Software</role>
        <role content-type="http://credit.casrai.org/">Writing – Original Draft Preparation</role>
        <role content-type="http://credit.casrai.org/">Writing – Review &amp; Editing</role>
        <xref ref-type="corresp" rid="c1">a</xref>
        <xref ref-type="aff" rid="a1">1</xref>
      </contrib>
      <contrib contrib-type="author">
        <name>
          <surname>Kumar</surname>
          <given-names>Praveen</given-names>
        </name>
        <role content-type="http://credit.casrai.org/">Methodology</role>
        <role content-type="http://credit.casrai.org/">Software</role>
        <role content-type="http://credit.casrai.org/">Validation</role>
        <role content-type="http://credit.casrai.org/">Writing – Original Draft Preparation</role>
        <role content-type="http://credit.casrai.org/">Writing – Review &amp; Editing</role>
        <xref ref-type="aff" rid="a2">2</xref>
        <xref ref-type="aff" rid="a3">3</xref>
      </contrib>
      <contrib contrib-type="author">
        <name>
          <surname>Easterly</surname>
          <given-names>Caleb</given-names>
        </name>
        <role content-type="http://credit.casrai.org/">Methodology</role>
        <role content-type="http://credit.casrai.org/">Software</role>
        <role content-type="http://credit.casrai.org/">Validation</role>
        <role content-type="http://credit.casrai.org/">Writing – Original Draft Preparation</role>
        <role content-type="http://credit.casrai.org/">Writing – Review &amp; Editing</role>
        <contrib-id contrib-id-type="orcid">https://orcid.org/0000-0001-7853-377X</contrib-id>
        <xref ref-type="aff" rid="a2">2</xref>
      </contrib>
      <contrib contrib-type="author">
        <name>
          <surname>Esler</surname>
          <given-names>Mark</given-names>
        </name>
        <role content-type="http://credit.casrai.org/">Methodology</role>
        <role content-type="http://credit.casrai.org/">Validation</role>
        <role content-type="http://credit.casrai.org/">Writing – Original Draft Preparation</role>
        <role content-type="http://credit.casrai.org/">Writing – Review &amp; Editing</role>
        <xref ref-type="aff" rid="a4">4</xref>
      </contrib>
      <contrib contrib-type="author">
        <name>
          <surname>Mehta</surname>
          <given-names>Subina</given-names>
        </name>
        <role content-type="http://credit.casrai.org/">Software</role>
        <role content-type="http://credit.casrai.org/">Validation</role>
        <role content-type="http://credit.casrai.org/">Writing – Original Draft Preparation</role>
        <role content-type="http://credit.casrai.org/">Writing – Review &amp; Editing</role>
        <xref ref-type="aff" rid="a2">2</xref>
      </contrib>
      <contrib contrib-type="author">
        <name>
          <surname>Eschenlauer</surname>
          <given-names>Arthur C.</given-names>
        </name>
        <role content-type="http://credit.casrai.org/">Methodology</role>
        <role content-type="http://credit.casrai.org/">Software</role>
        <role content-type="http://credit.casrai.org/">Validation</role>
        <role content-type="http://credit.casrai.org/">Writing – Original Draft Preparation</role>
        <role content-type="http://credit.casrai.org/">Writing – Review &amp; Editing</role>
        <contrib-id contrib-id-type="orcid">https://orcid.org/0000-0002-2882-0508</contrib-id>
        <xref ref-type="aff" rid="a2">2</xref>
        <xref ref-type="aff" rid="a4">4</xref>
      </contrib>
      <contrib contrib-type="author">
        <name>
          <surname>Hegeman</surname>
          <given-names>Adrian D.</given-names>
        </name>
        <role content-type="http://credit.casrai.org/">Funding Acquisition</role>
        <role content-type="http://credit.casrai.org/">Supervision</role>
        <role content-type="http://credit.casrai.org/">Writing – Review &amp; Editing</role>
        <contrib-id contrib-id-type="orcid">https://orcid.org/0000-0003-1008-6066</contrib-id>
        <xref ref-type="aff" rid="a4">4</xref>
      </contrib>
      <contrib contrib-type="author">
        <name>
          <surname>Jagtap</surname>
          <given-names>Pratik D.</given-names>
        </name>
        <role content-type="http://credit.casrai.org/">Methodology</role>
        <role content-type="http://credit.casrai.org/">Project Administration</role>
        <role content-type="http://credit.casrai.org/">Software</role>
        <role content-type="http://credit.casrai.org/">Visualization</role>
        <role content-type="http://credit.casrai.org/">Writing – Original Draft Preparation</role>
        <role content-type="http://credit.casrai.org/">Writing – Review &amp; Editing</role>
        <contrib-id contrib-id-type="orcid">https://orcid.org/0000-0003-0984-0973</contrib-id>
        <xref ref-type="aff" rid="a2">2</xref>
      </contrib>
      <contrib contrib-type="author">
        <name>
          <surname>Griffin</surname>
          <given-names>Timothy J.</given-names>
        </name>
        <role content-type="http://credit.casrai.org/">Funding Acquisition</role>
        <role content-type="http://credit.casrai.org/">Project Administration</role>
        <role content-type="http://credit.casrai.org/">Supervision</role>
        <role content-type="http://credit.casrai.org/">Writing – Original Draft Preparation</role>
        <role content-type="http://credit.casrai.org/">Writing – Review &amp; Editing</role>
        <contrib-id contrib-id-type="orcid">https://orcid.org/0000-0001-6801-2559</contrib-id>
        <xref ref-type="corresp" rid="c2">b</xref>
        <xref ref-type="aff" rid="a2">2</xref>
      </contrib>
      <aff id="a1"><label>1</label>Minnesota Supercomputing Institute, University of Minnesota, Minneapolis, MN, 55455, USA</aff>
      <aff id="a2"><label>2</label>Department of Biochemistry, Molecular Biology and Biophysics, University of Minnesota, Minneapolis, Minnesota, 55455, USA</aff>
      <aff id="a3"><label>3</label>Bioinformatics and Computational Biology Program, University of Minnesota-Rochester, Rochester, MN, 55904, USA</aff>
      <aff id="a4"><label>4</label>Department of Horticulture, University of Minnesota, St. Paul, MN, 55108, USA</aff>
    </contrib-group>
    <author-notes>
      <corresp id="c1">
        <label>a</label>
        <email xlink:href="mailto:johns198@umn.edu">johns198@umn.edu</email>
      </corresp>
      <corresp id="c2">
        <label>b</label>
        <email xlink:href="mailto:tgriffin@umn.edu">tgriffin@umn.edu</email>
      </corresp>
      <fn fn-type="COI-statement">
        <p>No competing interests were disclosed.</p>
      </fn>
    </author-notes>
    <pub-date pub-type="epub">
      <day>9</day>
      <month>1</month>
      <year>2019</year>
    </pub-date>
    <pub-date pub-type="collection">
      <year>2018</year>
    </pub-date>
    <volume>7</volume>
    <elocation-id>1604</elocation-id>
    <history>
      <date date-type="accepted">
        <day>2</day>
        <month>1</month>
        <year>2019</year>
      </date>
    </history>
    <permissions>
      <copyright-statement>Copyright: © 2019 Johnson JE et al.</copyright-statement>
      <copyright-year>2019</copyright-year>
      <license xlink:href="http://creativecommons.org/licenses/by/4.0/">
        <license-p>This is an open access article distributed under the terms of the Creative Commons Attribution Licence, which permits unrestricted use, distribution, and reproduction in any medium, provided the original work is properly cited.</license-p>
      </license>
    </permissions>
    <self-uri content-type="pdf" xlink:type="simple" xlink:href="f1000research-7-19264.pdf"/>
    <abstract>
      <p>Galaxy provides an accessible platform where multi-step data analysis workflows integrating disparate software can be run, even by researchers with limited programming expertise. Applications of such sophisticated workflows are many, including those which integrate software from different ‘omic domains (e.g. genomics, proteomics, metabolomics). In these complex workflows, intermediate outputs are often generated as tabular text files, which must be transformed into customized formats which are compatible with the next software tools in the pipeline. Consequently, many text manipulation steps are added to an already complex workflow, overly complicating the process. In some cases, limitations to existing text manipulation are such that desired analyses can only be carried out using highly sophisticated processing steps beyond the reach of even advanced users and developers. For users with some SQL knowledge, these text operations could be combined into single, concise query on a relational database. As a solution, we have developed the Query Tabular Galaxy tool, which leverages a SQLite database generated from tabular input data. This database can be queried and manipulated to produce transformed and customized tabular outputs compatible with downstream processing steps. Regular expressions can also be utilized for even more sophisticated manipulations, such as find and replace and other filtering actions. Using several Galaxy-based multi-omic workflows as an example, we demonstrate how the Query Tabular tool dramatically streamlines and simplifies the creation of multi-step analyses, efficiently enabling complicated textual manipulations and processing. This tool should find broad utility for users of the Galaxy platform seeking to develop and use sophisticated workflows involving text manipulation on tabular outputs.</p>
    </abstract>
    <kwd-group kwd-group-type="author">
      <kwd>Galaxy</kwd>
      <kwd>Workflows</kwd>
      <kwd>SQLite</kwd>
      <kwd>Multi-omics</kwd>
      <kwd>Genomics</kwd>
      <kwd>Proteomics</kwd>
      <kwd>Metaproteomics</kwd>
      <kwd>Proteogenomics</kwd>
      <kwd>Metabolomics</kwd>
    </kwd-group>
    <funding-group>
      <award-group id="fund-1">
        <funding-source>National Science Foundation</funding-source>
        <award-id>1458524</award-id>
      </award-group>
      <award-group id="fund-2" xlink:href="http://dx.doi.org/10.13039/100000002">
        <funding-source>National Institutes of Health</funding-source>
        <award-id>U24CA199347</award-id>
      </award-group>
      <funding-statement>This work was supported in part by NSF award 1458524 and NIH award U24CA199347 to T.J. Griffin and the Galaxy for proteomics (Galaxy-P) research team.</funding-statement>
      <funding-statement>
        <italic>The funders had no role in study design, data collection and analysis, decision to publish, or preparation of the manuscript.</italic>
      </funding-statement>
    </funding-group>
  </article-meta>
  <notes notes-type="version-changes">
    <sec sec-type="version-changes">
      <label>Revised</label>
      <title>Amendments from Version 1</title>
      <p>In response to reviewer comments and suggestions the following revisions have been made:
<list list-type="bullet"><list-item><p>We have emphasized the main beneficiaries of this tool being those who are more advanced Galaxy developers  </p></list-item><list-item><p>We have made available the workflows and example data via a Github site for direct download  </p></list-item><list-item><p>We have expanded availability of training resources to make the tool more usable, including pointing to more examples of cases where Query Tabular has enabled complex Galaxy workflows  </p></list-item><list-item><p>Figure 1 has been expanded to show different user interface menus available when utilizing the Galaxy Query Tabular tool  </p></list-item><list-item><p>Figures 2 and 3 have been expanded to show small examples of the input and output data from the Query Tabular workflow, as well as the SQL queries used in these workflows  </p></list-item><list-item><p>Small changes have been made to the text to improve clarity</p></list-item></list>
</p>
    </sec>
  </notes>
</front>
<body>
  <sec sec-type="intro">
    <title>Introduction</title>
    <p>The Galaxy platform
<sup><xref rid="ref-1" ref-type="bibr">1</xref></sup> offers a highly flexible bioinformatics workbench in which disparate software tools can be deployed and integrated into sophisticated workflows. Frequently, these workflows contain many steps and different software tools, with many different types of outputs. Each output can then act as the input for a subsequent software tool. Often, the results outputted from a software tool are in the form of a tabular file, which serve as input to a subsequent tool in the workflow. To make these workflows functional, usually the tabular output(s) must be manipulated, extracting and re-formatting the original file and creating a new tabular file with a data structure which can be read by a downstream software tool. In some cases, the final tabular results file from the workflow must be further processed and manipulated to obtain desired information for interpretation by the user.</p>
    <p>There are many examples of multi-step workflows requiring manipulations of tabular text files employed across the diverse analysis applications facilitated by Galaxy. One example is emerging “multi-omic” analyses, which integrate software from different ‘omic domains and are well suited to the strengths of Galaxy
<sup><xref rid="ref-2" ref-type="bibr">2</xref></sup>. For example, proteogenomics integrates tools for RNA-Seq assembly and analysis, software for matching tandem mass spectrometry (MS/MS) data to peptide and protein sequences, and other customized tools to characterize novel, variant protein sequences expressed within a sample
<sup><xref rid="ref-3" ref-type="bibr">3</xref>,
<xref rid="ref-4" ref-type="bibr">4</xref></sup>. To enable compatibility between the software tools composing a proteogenomics workflow, tabular files often must be manipulated into appropriate formats recognized by specific tools. Another example is Galaxy workflows for metaproteomics
<sup><xref rid="ref-5" ref-type="bibr">5</xref>,
<xref rid="ref-6" ref-type="bibr">6</xref></sup>, a multi-omics analysis which requires text manipulations in workflows integrating metagenomic, MS-based proteomics and other functional and taxonomic software tools. Finally, Galaxy-based metabolomics data analysis solutions are also emerging
<sup><xref rid="ref-7" ref-type="bibr">7</xref>–
<xref rid="ref-9" ref-type="bibr">9</xref></sup>, which utilize tabular inputs and outputs within multiple step workflows.</p>
    <p>Under the category of “Text Manipulation”, the Galaxy Tool Shed has long offered many tools for extracting and transforming information within tabular files produced in workflows. However, sophisticated workflows (e.g. multi-omics, metabolomics), can require numerous manipulations to tabular files in order to build fully integrated and automated pipelines. Consequently, workflows can grow to hundreds of steps, dominated by sequential text manipulation steps. This situation makes the building and optimizing of such workflows highly time-consuming and prone to errors, requiring much effort even by experienced Galaxy users and developers. It also hampers efforts to further customize or modify workflows by other users, if these change formats of the tabular files, necessitating another round of optimization of many text manipulations.</p>
    <p>To improve the available options for text manipulation in Galaxy, we have developed the Query Tabular tool. Query Tabular leverages the power of SQLite, automatically creating a database directly from desired tabular outputs within a workflow using the Query Tabular tool. The SQLite database can be saved to the Galaxy history, and acted upon by the companion SQLite_to_Tabular tool, generating additional tabular outputs containing desired information and formatting. As such, Query Tabular streamlines complicated text manipulations, greatly simplifying the creation and customization of Galaxy workflows, and in some cases enabling new analyses. Here, we show the use of Query Tabular in several example Galaxy-based workflows, demonstrating its value. Query Tabular is available through the Galaxy Tool Shed and should prove highly useful to a broad community of Galaxy users.</p>
  </sec>
  <sec sec-type="methods">
    <title>Methods</title>
    <sec>
      <title>Implementation</title>
      <p>Although described as a single tool, Query Tabular is comprised of several modules which carry out different functions. These modules use Python applications to read and filter tabular files, and the Python package sqlite to create and query a SQLite database. There are 3 main functions performed within the tool:</p>
      <list list-type="simple">
        <list-item>
          <label>1. </label>
          <p>Line filtering. For a tabular file, a sequence of line filters can be used to transform each line as it is read. A line filter takes one TAB-separated line and produces 0 or more TAB-separated lines. For example, a line filter that filters out comment lines only produces an output line when an input line does not begin with a comment character. The normalization line filter splits a line that has a comma-separated value in one (or more) specified fields into one output row per list item.</p>
        </list-item>
        <list-item>
          <label>2. </label>
          <p>Loading a SQLite table. The filtered tabular file is inspected for number of TAB-separated fields and the SQLite type of the values in each field - Real, Integer, or Text - followed by generation of a database table for that file. Each line from the filtered tabular file is then loaded as a row in that table.</p>
        </list-item>
        <list-item>
          <label>3. </label>
          <p>Querying the database. A SQL query is executed on the database. The results are written out as a new tabular-formatted text file.</p>
        </list-item>
      </list>
      <p>The query_tabular.py application can perform all three of the steps above. However, the query can be omitted when the SQLite database is the only desired output. The sqlite_to_tabular.py application only performs the query function given an existing SQLite database as input. This can be useful when one needs to perform several queries on the same database. The filter_tabular.py application performs the line filtering function to directly produce a tabular file. This can be sufficient for simple selection of rows and columns from a single file. </p>
      <p>The main Query Tabular tool has been developed in Galaxy under the name “Query Tabular”, which carries out the three functions described above. The other modules within Query Tabular are also available as standalone Galaxy tools, called“SQLite to Tabular”, and “Filter Tabular”,running the sqlite_to_tabular.py and filter_tabular.py applications, respectively. The Query Tabular Galaxy tool provides aweb form for a user to specify input files and settings for line filters, table and column names, and a SQL query. The Galaxy framework makes it easy to link these tools with other software and processing steps, creating multi-step workflows.</p>
    </sec>
    <sec>
      <title>Operation</title>
      <p><xref ref-type="fig" rid="f1">Figure 1</xref> shows a screenshot of the Galaxy-based Query Tabular tool, including an expanded view of the Filtering and Table options within the Galaxy interface. The Query Tabular Galaxy tool loads any number of tabular datasets into a new or existing SQLite database allowing the full power of a SQL query to produce a new tabular output. Long, complicated workflows of Galaxy text manipulation tools can be replaced by Query Tabular in a single step.</p>
      <fig fig-type="figure" id="f1" orientation="portrait" position="anchor">
        <label>Figure 1. </label>
        <caption>
          <title>The Galaxy user interface for the Query Tabular tool.</title>
          <p><bold>A</bold>) The main interface for the Query Tabular tool. The user can select the tabular data which acts as input to be converted to a SQLite database table. The interface also provides a field to define the query for the SQLite database that will be carried out, along with options for displaying results from the query in the tabular output.
<bold>B</bold>) Expanded view of the the input filtering function. Any number of line filters can be sequentially applied as the tabular data is being read. Line filters can remove comment lines. They can add columns, either incrementing index, or text. Line filters can also “normalize” list columns within a tabular input line, producing one output line for each item in the list of the selected columns. The Query Tabular tool help section provides examples of using line filters for common situations. In this example, the input tabular data is passed through one line filter: “select columns”, and the user chose to keep data columns 3 and 2 in that order.
<bold>C</bold>) Expanded view of the table options function. In this example, the user named the table: “psm”, and the columns: “Sequence” and “Proteins”. This can make the SQL query much more readable, especially when loading in multiple tabular files and joining the resulting database tables.</p>
        </caption>
        <graphic xlink:href="f1000research-7-19264-g0000"/>
      </fig>
      <p>The Query Tabular tool provides default names for tables - t1, t2, etc. - and columns - c1, c2, etc. - but a user can specify more specific and meaningful names for tables and columns. We have successfully utilized Query Tabular on large datasets containing millions of rows and columns, where annotating rows and columns becomes important. When column names are specified in the first row of the tabular file, the user has the option to use those names when selecting the columns to be loaded into the SQLite database.</p>
      <p>Regex functions, which apply regular expressions, are added to sqlite connections so that re.search, re.match, and re.replace functions are available for use in the SQL query. Line filters can apply regular expressions while reading tabular input files to include, exclude, or modify lines before entering the values as rows in the database table. A column replace line filter can use a regex function to change, for example, a date value to the SQLite recognized format. A normalize filter can convert list fields in the input to first normal form with an individual list item per row; when several fields are specified in a normalization filter, an input line having lists of length n in the specified columns results in n output row, each with one respective pair of values from the specified fields.</p>
    </sec>
  </sec>
  <sec>
    <title>Use cases</title>
    <p>Below we provide examples of use cases for Query Tabular, focusing on Galaxy-based workflows for proteogenomics, metaproteomics and metabolomics. For those seeking to understand the use of SQL for manipulating tabular files within Galaxy workflows, we have provided a help section within the Galaxy wrapper for the tool (
<ext-link ext-link-type="uri" xlink:href="https://toolshed.g2.bx.psu.edu/view/iuc/query_tabular/1ea4e668bf73">https://toolshed.g2.bx.psu.edu/view/iuc/query_tabular/1ea4e668bf73</ext-link>). We also point users to other examples of Query Tabular on complex data, housed in the Galaxy Training Network resource, including: 1) A proteogenomics tutorial (
<ext-link ext-link-type="uri" xlink:href="https://galaxyproject.github.io/training-material/topics/proteomics/tutorials/proteogenomics-novel-peptide-analysis/tutorial.html">https://galaxyproject.github.io/training-material/topics/proteomics/tutorials/proteogenomics-novel-peptide-analysis/tutorial.html</ext-link>); and 2) a metaproteomics tutorial (
<ext-link ext-link-type="uri" xlink:href="https://galaxyproject.github.io/training-material/topics/proteomics/tutorials/metaproteomics/tutorial.html">https://galaxyproject.github.io/training-material/topics/proteomics/tutorials/metaproteomics/tutorial.html</ext-link>)</p>
    <sec>
      <title>Proteogenomics</title>
      <p>A common task in a proteogenomics data analysis is to match MS/MS fragmentation spectra to variant peptide sequences, which derive from genomic mutations, expression from genomic regions thought to be non-coding or silenced, or unexpected RNA splicing events
<sup><xref rid="ref-10" ref-type="bibr">10</xref></sup>. The veracity of putative variant sequences matched to MS/MS spectra must be confirmed, which can be accomplished by querying the variant peptide sequences against NCBI’s non-redundant (nr) protein database using the BLASTP tool, which is implemented in Galaxy
<sup><xref rid="ref-4" ref-type="bibr">4</xref></sup>. Those peptides which do not have a 100% alignment and sequence match to known sequences within the database qualify as verified variant sequences, which are then passed on for further analysis
<sup><xref rid="ref-3" ref-type="bibr">3</xref>,
<xref rid="ref-4" ref-type="bibr">4</xref></sup>.</p>
      <p>For the purposes of illustrating the simplification offered by Query Tabular, steps from two different workflows for carrying out this analysis of putative variant peptide sequences is shown in
<xref ref-type="fig" rid="f2">Figure 2</xref>. The purpose of this workflow is to take as input the peptide spectrum matches (PSMs) containing matches to putative variant amino acid sequences, and analyzes these using BLASTP, producing a list of verified PSMs to true variant sequences.
<xref ref-type="fig" rid="f2">Figure 2A</xref> outlines the initial workflow, which contained 9 total steps and required multiple text manipulations with Galaxy tools. The text manipulations format the input tabular file for BLASTP analysis, extracting and re-formatting information from the PSM input. A number of manipulations are also required on the BLASTP alignments: querying the tabular files for peptides with alignment identities less than 100%, those with any gaps in the sequence alignment or those which lacked full-length matching of the known peptides to the putative variant sequence. </p>
      <fig fig-type="figure" id="f2" orientation="portrait" position="anchor">
        <label>Figure 2. </label>
        <caption>
          <title>A proteogenomics workflow using Query Tabular.</title>
          <p>This workflow takes as input peptide spectrum matches (PSMs) of putative variant peptide sequences and further analyzes them using BLASTP to verify sequences which are truly variants compared to the reference proteome.
<bold>A</bold>) The initial workflow comprised of nine total steps, including multiple text manipulation steps in Galaxy;
<bold>B</bold>) The simplified workflow when using Query Tabular, which reduces the number of steps to 4 to obtain the same results. The figure also displays the structure of the tabular input file containing putative variant peptide sequences, and the tabular output file containing verified variant peptide sequences. The inset boxes also show the two SQL queries used in this workflow, made possible by Query Tabular.</p>
        </caption>
        <graphic xlink:href="f1000research-7-19264-g0001"/>
      </fig>
      <p>When Query Tabular is used, the individual text manipulation steps are not needed, and the number of steps is reduced from 9 to 4 (
<xref ref-type="fig" rid="f2">Figure 2B</xref>). We have made this workflow available for demonstration purposes at
<ext-link ext-link-type="uri" xlink:href="http://z.umn.edu/proteogenomicsgateway">z.umn.edu/proteogenomicsgateway</ext-link>.
<xref ref-type="other" rid="SF1">Supplementary File 1</xref> provides instructions on accessing and using this workflow.</p>
    </sec>
    <sec>
      <title>Metaproteomics</title>
      <p>Metaproteomic workflows seek to identify peptide sequences expressed by a community of microorganisms, usually bacteria. These sequences are further analyzed to characterize the taxonomic distributions of the bacteria present in the community; the peptides are also mapped to protein groups which have known biochemical functions, such that the peptides can be indicators of specific functional responses of the community to external perturbations
<sup><xref rid="ref-11" ref-type="bibr">11</xref>,
<xref rid="ref-12" ref-type="bibr">12</xref></sup>.</p>
      <p>In one established metaproteomics Galaxy workflow
<sup><xref rid="ref-6" ref-type="bibr">6</xref></sup>, the microbial peptides must be verified by matching to the NCBI nr database, using the BLASTP tool. A number of text manipulation steps are required to make the file of identified peptide sequences compatible with BLASTP. The BLASTP-aligned sequences are outputted in a tabular file, and this file must be further manipulated via several steps in order to create a tabular file in correct format for downstream functional and taxonomic analysis. For the purposes of showing the simplification offered by Query Tabular,
<xref ref-type="fig" rid="f3">Figure 3</xref> shows the steps comprising two different workflows to generate desired results from input files.
<xref ref-type="fig" rid="f3">Figure 3A</xref> highlights the numerous manipulation steps required when employing standard text manipulation tools available in Galaxy.</p>
      <fig fig-type="figure" id="f3" orientation="portrait" position="anchor">
        <label>Figure 3. </label>
        <caption>
          <title>A metaproteomics workflow using Query Tabular.</title>
          <p>This workflow verifies the presence of detected microbial peptides by matching peptides against the NCBI nr protein sequence database using the BLASTP tool. (
<bold>A</bold>) Using conventional Galaxy text manipulation tools, the workflow requires 17 steps to achieve desired outputs. (
<bold>B</bold>) When utilizing Query Tabular, desired results are obtained in seven steps. The figure also displays the structure of the tabular input file containing peptide sequences putatively from microbes in the sample, and the tabular output file which contains verified microbial peptide sequences. One output contains peptides between 8 and 30 amino acids (a.a.) in length, while the other contains peptides 30 a.a. or greater in length, due to BLASTP requiring separate analysis based on length of peptide sequences. The two inset boxes show the two SQL queries used in this workflow, made possible by Query Tabular.</p>
        </caption>
        <graphic xlink:href="f1000research-7-19264-g0002"/>
      </fig>
      <p>Query Tabular greatly simplifies this metaproteomics workflow. As shown in
<xref ref-type="fig" rid="f3">Figure 3B</xref>, use of Query Tabular eliminates many of the initial steps required to generate a tabular input compatible with BLASTP. It also greatly simplifies the second part of the workflow where the BLASTP outputs are further manipulated to generate a tabular file which is required for further taxonomic and functional analysis. In all, using Query Tabular reduced the length of the workflow from 17 steps to 7. We have made this workflow available for demonstration purposes at z.umn.edu/metaproteomicsgateway.
<xref ref-type="other" rid="SF1">Supplementary File 1</xref> provides instructions on accessing and using this workflow.</p>
    </sec>
    <sec>
      <title>Metabolomics</title>
      <p>A Galaxy-based metabolomics workflow provides an example where Query Tabular was used to enable efficient data correction and analysis that was not possible with other existing Galaxy tools. This workflow utilizes VKMZ, a metabolomics tool under development which predicts and plots metabolites from liquid chromatography (LC)-MS data. Metabolite predictions are made by comparing the neutral mass of observed signals to a dictionary of known mass-formulas. When a signal’s neutral mass is within a given mass error range of a known mass, a prediction is made.</p>
      <p>For the use-case presented here, targeted metabolomics data were collected on a low resolution LC-MS instrument. Low mass standards in the data, used to provide more accurate mass assignments to observed signals, had a systematic mass shift caused by using an instrument calibration method for high mass molecules.
<xref ref-type="fig" rid="f4">Figure 4</xref> shows the two-part SQL query inputted in the Query Tabular tool and used to correct this shift, operating on the tabular data generated from MS data by VKMZ, which assumes charge (z) is 1. The inner-query determines the average relative mass error for molecules with low mass-to-charge (mz) values (molecular mass &lt;250 Daltons) in the data. The outer-query adjusts all detected molecules within this same mz range by the average mass error. Before making mass adjustment with Query Tabular, VKMZ was able to predict 85.7% of the features for the standards. After the mass adjustment, VKMZ was able to correctly predict all features for the standards. This two-step manipulation, with dependency of the outer-query on the result from the inner-query, is concise and would require generation of a nested, multiple step workflow within the larger workflow if using existing text manipulation tools in Galaxy. We have made this workflow available for demonstration purposes at z.umn.edu/metaproteomicsgateway.
<xref ref-type="other" rid="SF1">Supplementary File 1</xref> provides instructions on accessing and using this workflow.</p>
      <fig fig-type="figure" id="f4" orientation="portrait" position="anchor">
        <label>Figure 4. </label>
        <caption>
          <title>Example query utilizing the Query Tabular tool for a metabolomics data analysis workflow.</title>
          <p>The two part SQL query corrects mass errors in low resolution MS-based metabolomics data, using an inner- and outer-query. The inner-query (lines 9–11) determine the average mass error for mz values of detected molecules below 250 Daltons. The outer-query (all other lines) adjusts all mz values in this range based on the determined mass error. Chromatographic retention time (rt) and signal intensities are also assigned values for the molecules detected by LC-MS.</p>
        </caption>
        <graphic xlink:href="f1000research-7-19264-g0003"/>
      </fig>
    </sec>
  </sec>
  <sec sec-type="conclusions">
    <title>Conclusions</title>
    <p>We have described a new Galaxy tool, Query Tabular, which significantly improves the development and application of multi-step workflows in Galaxy. Leveraging a SQLite database, and utilizing regular expressions, the tool can minimize the need for lengthy workflows using conventional Galaxy-based text manipulation tools. For more advanced Galaxy developers, this eases the process of workflow development, producing more efficient workflows which can be utilized. The use of Query Tabular does require knowledge of SQL. Fortunately, ample training material exists for those unfamiliar with this programming language (for example see
<ext-link ext-link-type="uri" xlink:href="https://datacarpentry.org/sql-ecology-lesson/">https://datacarpentry.org/sql-ecology-lesson/</ext-link>). Additionally, our available workflows and training data (
<ext-link ext-link-type="uri" xlink:href="https://github.com/galaxyproteomics/query_tabular_supplementary_material">https://github.com/galaxyproteomics/query_tabular_supplementary_material</ext-link>) also provide an opportunity to see this SQL-based tool in action. We have provided use-case examples in the area of multi-omics (proteogenomics and metaproteomics) demonstrating the value of Query Tabular in this way. Via an example in metabolomics, we also demonstrate how Query Tabular can enable new manipulations and analyses of textual data within a single, simplified workflow, that would otherwise require separate workflow development if attempted using existing Galaxy tools. Although the metabolomics example described here works with a specific tool (VKMZ), Query Tabular should be generally useful for complex metabolomics workflows, as well as other multi-omic workflows generated in Galaxy. The Query Tabular tool has also proven useful and versatile for developing workflows used for multi-omic informatic training workshops (
<ext-link ext-link-type="uri" xlink:href="http://galaxyp.org/workshops/">http://galaxyp.org/workshops/</ext-link>) and online training via the Galaxy Training Network (
<ext-link ext-link-type="uri" xlink:href="http://galaxyproject.github.io/training-material">http://galaxyproject.github.io/training-material</ext-link>
<sup><xref rid="ref-13" ref-type="bibr">13</xref></sup>). A proteogenomic training workflow (
<ext-link ext-link-type="uri" xlink:href="https://galaxyproject.github.io/training-material/topics/proteomics/tutorials/proteogenomics-novel-peptide-analysis/tutorial.html">https://galaxyproject.github.io/training-material/topics/proteomics/tutorials/proteogenomics-novel-peptide-analysis/tutorial.html</ext-link>) and metaproteomics training workflow (
<ext-link ext-link-type="uri" xlink:href="https://galaxyproject.github.io/training-material/topics/proteomics/tutorials/metaproteomics/tutorial.html">https://galaxyproject.github.io/training-material/topics/proteomics/tutorials/metaproteomics/tutorial.html</ext-link>) are now available which utilize Query Tabular. The free and open tool is available to any Galaxy user, and should provide a valuable addition to the Galaxy tool box for developing analysis workflows.</p>
  </sec>
  <sec sec-type="data-availability">
    <title>Data availability</title>
    <p>All data underlying the results are available as part of the article and no additional source data are required.</p>
  </sec>
  <sec>
    <title>Software availability</title>
    <p><bold>The Query Tabular suite of tools can be added to a Galaxy server from the Galaxy Tool Shed:</bold><ext-link ext-link-type="uri" xlink:href="https://toolshed.g2.bx.psu.edu/view/iuc/query_tabular/1ea4e668bf73">https://toolshed.g2.bx.psu.edu/view/iuc/query_tabular/1ea4e668bf73</ext-link>.</p>
    <p><bold>Source code available from:</bold><ext-link ext-link-type="uri" xlink:href="https://github.com/galaxyproject/tools-iuc/tree/master/tools/query_tabular">https://github.com/galaxyproject/tools-iuc/tree/master/tools/query_tabular</ext-link>.</p>
    <p><bold>Archived source code at time of publication:</bold><ext-link ext-link-type="uri" xlink:href="https://dx.doi.org/10.5281/zenodo.1439296">https://doi.org/10.5281/zenodo.1439296</ext-link><sup><xref rid="ref-14" ref-type="bibr">14</xref></sup>.</p>
    <p><bold>License:</bold><ext-link ext-link-type="uri" xlink:href="https://opensource.org/licenses/MIT">MIT license</ext-link>.</p>
    <p>Adding tools from the Tool Shed is an administrative function of a Galaxy server, and as a security precaution is restricted to users designated as admins for the server. From the Galaxy server, an admin simply searches for the tool in the toolshed and clicks the install button. The tool can be run on a locally installed Galaxy instance, it also available on publicly available, hosted Galaxy instances such as usegalaxy.eu. As we described above, we have also made available example workflows for demonstration purposes using Query Tabular on outputs from proteogenomics data (
<ext-link ext-link-type="uri" xlink:href="http://z.umn.edu/proteogenomicsgateway">z.umn.edu/proteogenomicsgateway</ext-link>) and metaproteomics &amp; metabolomics data (
<ext-link ext-link-type="uri" xlink:href="http://z.umn.edu/metaproteomicsgateway">z.umn.edu/metaproteomicsgateway</ext-link>).
<xref ref-type="other" rid="SF1">Supplementary File 1</xref> contains instructions on how to access these example workflows. We have also deposited the Galaxy workflows for the three use-cases, along with example input data, in a Github repository for direct download at
<ext-link ext-link-type="uri" xlink:href="https://github.com/galaxyproteomics/query_tabular_supplementary_material">https://github.com/galaxyproteomics/query_tabular_supplementary_material</ext-link>.</p>
  </sec>
</body>
<back>
  <ack>
    <title>Acknowledgements</title>
    <p>We thank the Supercomputing Institute at the University of Minnesota for support and maintenance of software and hardware infrastructure used in the development of this tool. We also thank the Jetstream team at the University of Indiana for support and maintenance of software and hardware infrastructure used for hosting publicly accessible Galaxy instances described in this manuscript. Additionally, we would like to thank Kevin Murray from the Department of Veterinary Population Medicine at the University of Minnesota for contributing the metabolomics data set.</p>
  </ack>
  <sec sec-type="supplementary-material">
    <title>Supplementary material</title>
    <p id="SF1">
      <bold>Supplementary File 1. Detailed instructions on accessing and operating the demonstration workflows which utilize Query Tabular.</bold>
    </p>
    <p>
      <supplementary-material content-type="local-data" id="S0">
        <media xlink:href="f1000research-7-19264-s0000.tgz">
          <caption>
            <p>Click here for additional data file.</p>
          </caption>
        </media>
      </supplementary-material>
    </p>
  </sec>
  <ref-list>
    <ref id="ref-1">
      <label>1</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Afgan</surname><given-names>E</given-names></name><name><surname>Baker</surname><given-names>D</given-names></name><name><surname>Batut</surname><given-names>B</given-names></name><etal/></person-group>:
<article-title>The Galaxy platform for accessible, reproducible and collaborative biomedical analyses: 2018 update.</article-title><source><italic>Nucleic Acids Res.</italic></source><year>2018</year>;<volume>46</volume>(<issue>W1</issue>):<fpage>W537</fpage>–<lpage>W44</lpage>.
<pub-id pub-id-type="doi">10.1093/nar/gky379</pub-id><!--<pub-id pub-id-type="pmcid">6030816</pub-id>--><?supplied-pmid 29790989?><pub-id pub-id-type="pmid">29790989</pub-id></mixed-citation>
    </ref>
    <ref id="ref-2">
      <label>2</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Boekel</surname><given-names>J</given-names></name><name><surname>Chilton</surname><given-names>JM</given-names></name><name><surname>Cooke</surname><given-names>IR</given-names></name><etal/></person-group>:
<article-title>Multi-omic data analysis using Galaxy.</article-title><source><italic>Nat Biotechnol.</italic></source><year>2015</year>;<volume>33</volume>(<issue>2</issue>):<fpage>137</fpage>–<lpage>9</lpage>.
<pub-id pub-id-type="doi">10.1038/nbt.3134</pub-id><?supplied-pmid 25658277?><pub-id pub-id-type="pmid">25658277</pub-id></mixed-citation>
    </ref>
    <ref id="ref-3">
      <label>3</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Chambers</surname><given-names>MC</given-names></name><name><surname>Jagtap</surname><given-names>PD</given-names></name><name><surname>Johnson</surname><given-names>JE</given-names></name><etal/></person-group>:
<article-title>An Accessible Proteogenomics Informatics Resource for Cancer Researchers.</article-title><source><italic>Cancer Res.</italic></source><year>2017</year>;<volume>77</volume>(<issue>21</issue>):<fpage>e43</fpage>–<lpage>e46</lpage>.
<pub-id pub-id-type="doi">10.1158/0008-5472.CAN-17-0331</pub-id><!--<pub-id pub-id-type="pmcid">5675041</pub-id>--><?supplied-pmid 29092937?><pub-id pub-id-type="pmid">29092937</pub-id></mixed-citation>
    </ref>
    <ref id="ref-4">
      <label>4</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Jagtap</surname><given-names>PD</given-names></name><name><surname>Johnson</surname><given-names>JE</given-names></name><name><surname>Onsongo</surname><given-names>G</given-names></name><etal/></person-group>:
<article-title>Flexible and accessible workflows for improved proteogenomic analysis using the Galaxy framework.</article-title><source><italic>J Proteome Res.</italic></source><year>2014</year>;<volume>13</volume>(<issue>12</issue>):<fpage>5898</fpage>–<lpage>908</lpage>.
<pub-id pub-id-type="doi">10.1021/pr500812t</pub-id><!--<pub-id pub-id-type="pmcid">4261978</pub-id>--><?supplied-pmid 25301683?><pub-id pub-id-type="pmid">25301683</pub-id></mixed-citation>
    </ref>
    <ref id="ref-5">
      <label>5</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Blank</surname><given-names>C</given-names></name><name><surname>Easterly</surname><given-names>C</given-names></name><name><surname>Gruening</surname><given-names>B</given-names></name><etal/></person-group>:
<article-title>Disseminating Metaproteomic Informatics Capabilities and Knowledge Using the Galaxy-P Framework.</article-title><source><italic>Proteomes.</italic></source><year>2018</year>;<volume>6</volume>(<issue>1</issue>): pii: E7.
<pub-id pub-id-type="doi">10.3390/proteomes6010007</pub-id><!--<pub-id pub-id-type="pmcid">5874766</pub-id>--><?supplied-pmid 29385081?><pub-id pub-id-type="pmid">29385081</pub-id></mixed-citation>
    </ref>
    <ref id="ref-6">
      <label>6</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Jagtap</surname><given-names>PD</given-names></name><name><surname>Blakely</surname><given-names>A</given-names></name><name><surname>Murray</surname><given-names>K</given-names></name><etal/></person-group>:
<article-title>Metaproteomic analysis using the Galaxy framework.</article-title><source><italic>Proteomics.</italic></source><year>2015</year>;<volume>15</volume>(<issue>20</issue>):<fpage>3553</fpage>–<lpage>65</lpage>.
<pub-id pub-id-type="doi">10.1002/pmic.201500074</pub-id><?supplied-pmid 26058579?><pub-id pub-id-type="pmid">26058579</pub-id></mixed-citation>
    </ref>
    <ref id="ref-7">
      <label>7</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Davidson</surname><given-names>RL</given-names></name><name><surname>Weber</surname><given-names>RJ</given-names></name><name><surname>Liu</surname><given-names>H</given-names></name><etal/></person-group>:
<article-title>Galaxy-M: a Galaxy workflow for processing and analyzing direct infusion and liquid chromatography mass spectrometry-based metabolomics data.</article-title><source><italic>GigaScience.</italic></source><year>2016</year>;<volume>5</volume>:<fpage>10</fpage>.
<pub-id pub-id-type="doi">10.1186/s13742-016-0115-8</pub-id><!--<pub-id pub-id-type="pmcid">4765054</pub-id>--><?supplied-pmid 26913198?><pub-id pub-id-type="pmid">26913198</pub-id></mixed-citation>
    </ref>
    <ref id="ref-8">
      <label>8</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Guitton</surname><given-names>Y</given-names></name><name><surname>Tremblay-Franco</surname><given-names>M</given-names></name><name><surname>Le Corguillé</surname><given-names>G</given-names></name><etal/></person-group>:
<article-title>Create, run, share, publish, and reference your LC-MS, FIA-MS, GC-MS, and NMR data analysis workflows with the Workflow4Metabolomics 3.0 Galaxy online infrastructure for metabolomics.</article-title><source><italic>Int J Biochem Cell Biol.</italic></source><year>2017</year>;<volume>93</volume>:<fpage>89</fpage>–<lpage>101</lpage>.
<pub-id pub-id-type="doi">10.1016/j.biocel.2017.07.002</pub-id><?supplied-pmid 28710041?><pub-id pub-id-type="pmid">28710041</pub-id></mixed-citation>
    </ref>
    <ref id="ref-9">
      <label>9</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Weber</surname><given-names>RJM</given-names></name><name><surname>Lawson</surname><given-names>TN</given-names></name><name><surname>Salek</surname><given-names>RM</given-names></name><etal/></person-group>:
<article-title>Computational tools and workflows in metabolomics: An international survey highlights the opportunity for harmonisation through Galaxy.</article-title><source><italic>Metabolomics.</italic></source><year>2017</year>;<volume>13</volume>(<issue>2</issue>):<fpage>12</fpage>.
<pub-id pub-id-type="doi">10.1007/s11306-016-1147-x</pub-id><!--<pub-id pub-id-type="pmcid">5192046</pub-id>--><?supplied-pmid 28090198?><pub-id pub-id-type="pmid">28090198</pub-id></mixed-citation>
    </ref>
    <ref id="ref-10">
      <label>10</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Nesvizhskii</surname><given-names>AI</given-names></name></person-group>:
<article-title>Proteogenomics: concepts, applications and computational strategies.</article-title><source><italic>Nat Methods.</italic></source><year>2014</year>;<volume>11</volume>(<issue>11</issue>):<fpage>1114</fpage>–<lpage>25</lpage>.
<pub-id pub-id-type="doi">10.1038/nmeth.3144</pub-id><!--<pub-id pub-id-type="pmcid">4392723</pub-id>--><?supplied-pmid 25357241?><pub-id pub-id-type="pmid">25357241</pub-id></mixed-citation>
    </ref>
    <ref id="ref-11">
      <label>11</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Hettich</surname><given-names>RL</given-names></name><name><surname>Pan</surname><given-names>C</given-names></name><name><surname>Chourey</surname><given-names>K</given-names></name><etal/></person-group>:
<article-title><italic>Metaproteomics</italic>: harnessing the power of high performance mass spectrometry to identify the suite of proteins that control metabolic activities in microbial communities.</article-title><source><italic>Anal Chem.</italic></source><year>2013</year>;<volume>85</volume>(<issue>9</issue>):<fpage>4203</fpage>–<lpage>14</lpage>.
<pub-id pub-id-type="doi">10.1021/ac303053e</pub-id><!--<pub-id pub-id-type="pmcid">3696428</pub-id>--><?supplied-pmid 23469896?><pub-id pub-id-type="pmid">23469896</pub-id></mixed-citation>
    </ref>
    <ref id="ref-12">
      <label>12</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Rudney</surname><given-names>JD</given-names></name><name><surname>Jagtap</surname><given-names>PD</given-names></name><name><surname>Reilly</surname><given-names>CS</given-names></name><etal/></person-group>:
<article-title>Protein relative abundance patterns associated with sucrose-induced dysbiosis are conserved across taxonomically diverse oral microcosm biofilm models of dental caries.</article-title><source><italic>Microbiome.</italic></source><year>2015</year>;<volume>3</volume>:<fpage>69</fpage>.
<pub-id pub-id-type="doi">10.1186/s40168-015-0136-z</pub-id><!--<pub-id pub-id-type="pmcid">4684605</pub-id>--><?supplied-pmid 26684897?><pub-id pub-id-type="pmid">26684897</pub-id></mixed-citation>
    </ref>
    <ref id="ref-13">
      <label>13</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Batut</surname><given-names>B</given-names></name><name><surname>Hiltemann</surname><given-names>S</given-names></name><name><surname>Bagnacani</surname><given-names>A</given-names></name><etal/></person-group>:
<article-title>Community-Driven Data Analysis Training for Biology.</article-title><source><italic>Cell Syst.</italic></source><year>2018</year>;<volume>6</volume>(<issue>6</issue>):<fpage>752</fpage>–<lpage>758.e1</lpage>.
<pub-id pub-id-type="doi">10.1016/j.cels.2018.05.012</pub-id><!--<pub-id pub-id-type="pmcid">6296361</pub-id>--><?supplied-pmid 29953864?><pub-id pub-id-type="pmid">29953864</pub-id></mixed-citation>
    </ref>
    <ref id="ref-14">
      <label>14</label>
      <mixed-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Johnson</surname><given-names>JE</given-names></name></person-group>:
<article-title>query_tabular (Version 3.0.0).</article-title><source><italic>Zenodo.</italic></source><year>2018</year><pub-id pub-id-type="doi">10.5281/zenodo.1439296</pub-id></mixed-citation>
    </ref>
  </ref-list>
</back>
<sub-article id="report42779" article-type="peer-review">
  <front-stub>
    <article-id pub-id-type="doi">10.5256/f1000research.19264.r42779</article-id>
    <title-group>
      <article-title>Referee response for version 2</article-title>
    </title-group>
    <contrib-group>
      <contrib contrib-type="author">
        <name>
          <surname>Blankenberg</surname>
          <given-names>Daniel</given-names>
        </name>
        <xref ref-type="aff" rid="r42779a1">1</xref>
        <role>Referee</role>
        <contrib-id contrib-id-type="orcid">https://orcid.org/0000-0002-6833-9049</contrib-id>
      </contrib>
      <aff id="r42779a1"><label>1</label>Genomic Medicine Institute, Lerner Research Institute, Cleveland Clinic, Cleveland, OH, USA</aff>
    </contrib-group>
    <author-notes>
      <fn fn-type="COI-statement">
        <p><bold>Competing interests: </bold>No competing interests were disclosed.</p>
      </fn>
    </author-notes>
    <pub-date pub-type="epub">
      <day>21</day>
      <month>1</month>
      <year>2019</year>
    </pub-date>
    <related-article id="d35e1420" related-article-type="peer-reviewed-article" ext-link-type="doi" xlink:href="10.12688/f1000research.16450.2">Version 2</related-article>
    <custom-meta-group>
      <custom-meta>
        <meta-name>recommendation</meta-name>
        <meta-value>approve</meta-value>
      </custom-meta>
    </custom-meta-group>
  </front-stub>
  <body>
    <p>The authors have addressed all of my comments. In addition to being a great tool, the provided workflows, training materials, etc. are valuable resources for the community.</p>
    <p>I have read this submission. I believe that I have an appropriate level of expertise to confirm that it is of an acceptable scientific standard.</p>
  </body>
</sub-article>
<sub-article id="report42778" article-type="peer-review">
  <front-stub>
    <article-id pub-id-type="doi">10.5256/f1000research.19264.r42778</article-id>
    <title-group>
      <article-title>Referee response for version 2</article-title>
    </title-group>
    <contrib-group>
      <contrib contrib-type="author">
        <name>
          <surname>Staton</surname>
          <given-names>Margaret E.</given-names>
        </name>
        <xref ref-type="aff" rid="r42778a1">1</xref>
        <role>Referee</role>
        <contrib-id contrib-id-type="orcid">https://orcid.org/0000-0003-2971-9353</contrib-id>
      </contrib>
      <aff id="r42778a1"><label>1</label>Department of Entomology and Plant Pathology, Institute of Agriculture, University of Tennessee , Knoxville, TN, USA</aff>
    </contrib-group>
    <author-notes>
      <fn fn-type="COI-statement">
        <p><bold>Competing interests: </bold>No competing interests were disclosed.</p>
      </fn>
    </author-notes>
    <pub-date pub-type="epub">
      <day>9</day>
      <month>1</month>
      <year>2019</year>
    </pub-date>
    <related-article id="d35e1471" related-article-type="peer-reviewed-article" ext-link-type="doi" xlink:href="10.12688/f1000research.16450.2">Version 2</related-article>
    <custom-meta-group>
      <custom-meta>
        <meta-name>recommendation</meta-name>
        <meta-value>approve</meta-value>
      </custom-meta>
    </custom-meta-group>
  </front-stub>
  <body>
    <p>The authors responded to all my concerns. This tool is a nice addition for Galaxy workflows.</p>
    <p>I have read this submission. I believe that I have an appropriate level of expertise to confirm that it is of an acceptable scientific standard.</p>
  </body>
</sub-article>
<sub-article id="report39108" article-type="peer-review">
  <front-stub>
    <article-id pub-id-type="doi">10.5256/f1000research.17980.r39108</article-id>
    <title-group>
      <article-title>Referee response for version 1</article-title>
    </title-group>
    <contrib-group>
      <contrib contrib-type="author">
        <name>
          <surname>Staton</surname>
          <given-names>Margaret E.</given-names>
        </name>
        <xref ref-type="aff" rid="r39108a1">1</xref>
        <role>Referee</role>
        <contrib-id contrib-id-type="orcid">https://orcid.org/0000-0003-2971-9353</contrib-id>
      </contrib>
      <aff id="r39108a1"><label>1</label>Department of Entomology and Plant Pathology, Institute of Agriculture, University of Tennessee , Knoxville, TN, USA</aff>
    </contrib-group>
    <author-notes>
      <fn fn-type="COI-statement">
        <p><bold>Competing interests: </bold>No competing interests were disclosed.</p>
      </fn>
    </author-notes>
    <pub-date pub-type="epub">
      <day>19</day>
      <month>11</month>
      <year>2018</year>
    </pub-date>
    <related-article id="d35e1522" related-article-type="peer-reviewed-article" ext-link-type="doi" xlink:href="10.12688/f1000research.16450.1">Version 1</related-article>
    <custom-meta-group>
      <custom-meta>
        <meta-name>recommendation</meta-name>
        <meta-value>approve-with-reservations</meta-value>
      </custom-meta>
    </custom-meta-group>
  </front-stub>
  <body>
    <p>Johnson
<italic>et al. </italic>present a new Galaxy tool, Query Tabular, that enables a Galaxy user to load a tab-separated value (tsv) file and then make SQL-based manipulations of that data. The tool leverages a sqlite database and is publicly available.</p>
    <p>
      <italic>Is the rationale for developing the new software tool clearly explained?</italic>
    </p>
    <p> Yes. The authors created this tool to make sophisticated text manipulations possible within Galaxy, enabling workflows with many fewer steps than previously possible. However, the rationale that this will be used by the “non-expert bench researcher” is weak - SQL is a computational language that is not a common skill among bench researchers. Galaxy itself was built to help researchers who do not have in depth computational skills to still be able to run sophisticated informatics analysis.</p>
    <p> However, I think the tool may be used by a slightly different group of Galaxy users - Galaxy server administrators or informaticians who build and maintain workflows for others, or the tool developers that are interested in embedding their own or others' tools into useful workflows. This is a slightly different user group than the average user, but very important for making Galaxy powerful. Pointing this out in the manuscript would provide a more compelling reason for the tool and is more in line with the use cases.</p>
    <p>
      <italic>Is the description of the software tool technically sound?</italic>
      <list list-type="order">
        <list-item>
          <p>The implementation section is short but covers the three basic functions.</p>
        </list-item>
        <list-item>
          <p>In the methods, the original list of functions is in the order line filtering, loading the table, then querying. The next paragraphs discuss the functions in the reverse order, making it confusing.</p>
        </list-item>
        <list-item>
          <p>Details on filtering the input file are scant; it would be nice to have a figure that illustrates the user interface for that part of the tool. This function appears as an unexpanded box in Figure 1.</p>
        </list-item>
      </list>
    </p>
    <p>
      <italic>Are sufficient details of the code, methods and analysis (if applicable) provided to allow replication of the software development and its use by others?</italic>
      <list list-type="order">
        <list-item>
          <p>The tool is publicly available through the Galaxy tool shed, which is the central place for Galaxy tools.</p>
        </list-item>
        <list-item>
          <p>The instructions for the tools inside Galaxy are good and helpful for figuring out how to use them. I was able to use the provided Jetstream instance to test “Query Tabular”, “SQLite to Tabular”, and “Filter Tabular”, all worked with my very simple tests. I do not think it’s feasible for the jetstream instance to persist indefinitely - could the workflows be shared via the main public Galaxy instance instead to help future readers?</p>
        </list-item>
        <list-item>
          <p>A README for the github repo would be helpful for other developers.</p>
        </list-item>
      </list>
    </p>
    <p>
      <italic>Is sufficient information provided to allow interpretation of the expected output datasets and any results generated using the tool?</italic>
    </p>
    <p> Is there any way for a user to see what database tables are in their history and how they are structured (i.e. column names and data types in each column?). It would be difficult to debug why an SQL query is not working if it’s impossible to see the table and its data somehow (I ran into this problem trying the tool out). For example, someone who works with an SQL database from the command line would use sqlcmd, or through a web server, something like PhpLiteAdmin. Something like that would be very helpful inside the Galaxy interface.</p>
    <p>
      <italic>Are the conclusions about the tool and its performance adequately supported by the findings presented in the article?</italic>
    </p>
    <p> Yes.</p>
    <p>I have read this submission. I believe that I have an appropriate level of expertise to confirm that it is of an acceptable scientific standard, however I have significant reservations, as outlined above.</p>
  </body>
  <sub-article id="comment4320" article-type="response">
    <front-stub>
      <contrib-group>
        <contrib contrib-type="author">
          <name>
            <surname>Griffin</surname>
            <given-names>Tim</given-names>
          </name>
          <aff>University of Minnesota, USA</aff>
        </contrib>
      </contrib-group>
      <author-notes>
        <fn fn-type="COI-statement">
          <p><bold>Competing interests: </bold>No competing interests</p>
        </fn>
      </author-notes>
      <pub-date pub-type="epub">
        <day>19</day>
        <month>12</month>
        <year>2018</year>
      </pub-date>
    </front-stub>
    <body>
      <p>
        <bold>We thank the reviewer for the comments. Below in bold text we provide responses to these comments and revisions we have made in the updated version.</bold>
      </p>
      <p>Johnson et al. present a new Galaxy tool, Query Tabular, that enables a Galaxy user to load a tab-separated value (tsv) file and then make SQL-based manipulations of that data. The tool leverages a sqlite database and is publicly available.</p>
      <p>Is the rationale for developing the new software tool clearly explained?</p>
      <p>Yes. The authors created this tool to make sophisticated text manipulations possible within Galaxy, enabling workflows with many fewer steps than previously possible. However, the rationale that this will be used by the “non-expert bench researcher” is weak - SQL is a computational language that is not a common skill among bench researchers. Galaxy itself was built to help researchers who do not have in depth computational skills to still be able to run sophisticated informatics analysis.</p>
      <p>However, I think the tool may be used by a slightly different group of Galaxy users - Galaxy server administrators or informaticians who build and maintain workflows for others, or the tool developers that are interested in embedding their own or others' tools into useful workflows. This is a slightly different user group than the average user, but very important for making Galaxy powerful. Pointing this out in the manuscript would provide a more compelling reason for the tool and is more in line with the use cases.</p>
      <p>
        <bold>
          <italic>&gt;We agree with this comment, and we have modified our description of the target audience as those who are more advanced Galaxy users and developers, with knowledge of SQL (see comments for reviewers above). We have removed the mention of “non-expert bench researchers” as being the main beneficiaries of this tool from the Conclusions section.</italic>
        </bold>
      </p>
      <p>Is the description of the software tool technically sound?</p>
      <p>The implementation section is short but covers the three basic functions.</p>
      <p>In the methods, the original list of functions is in the order line filtering, loading the table, then querying. The next paragraphs discuss the functions in the reverse order, making it confusing.</p>
      <p>Details on filtering the input file are scant; it would be nice to have a figure that illustrates the user interface for that part of the tool. This function appears as an unexpanded box in Figure 1.</p>
      <p>
        <bold>
          <italic>&gt;We have expanded Figure 1 to show the view of the interface when a user selects functions in the main tool (Table options and Filtering options).</italic>
        </bold>
      </p>
      <p>Are sufficient details of the code, methods and analysis (if applicable) provided to allow replication of the software development and its use by others?</p>
      <p>The tool is publicly available through the Galaxy tool shed, which is the central place for Galaxy tools.</p>
      <p>The instructions for the tools inside Galaxy are good and helpful for figuring out how to use them. I was able to use the provided Jetstream instance to test “Query Tabular”, “SQLite to Tabular”, and “Filter Tabular”, all worked with my very simple tests. I do not think it’s feasible for the jetstream instance to persist indefinitely - could the workflows be shared via the main public Galaxy instance instead to help future readers?</p>
      <p>A README for the github repo would be helpful for other developers.</p>
      <p>
        <bold>
          <italic>&gt;As we have mentioned for the reviewer comments above, we have now deposited the workflows and input data in a Github repository:
<underline><ext-link ext-link-type="uri" xlink:href="https://github.com/galaxyproteomics/query_tabular_supplementary_material" xlink:type="simple">https://github.com/galaxyproteomics/query_tabular_supplementary_material</ext-link></underline></italic>
        </bold>
      </p>
      <p>
        <bold>
          <italic>This repository also contains a README file as suggested.</italic>
        </bold>
      </p>
      <p>Is sufficient information provided to allow interpretation of the expected output datasets and any results generated using the tool?</p>
      <p>Is there any way for a user to see what database tables are in their history and how they are structured (i.e. column names and data types in each column?). It would be difficult to debug why an SQL query is not working if it’s impossible to see the table and its data somehow (I ran into this problem trying the tool out). For example, someone who works with an SQL database from the command line would use sqlcmd, or through a web server, something like PhpLiteAdmin. Something like that would be very helpful inside the Galaxy interface.</p>
      <p>
        <bold>
          <italic>&gt;This is an excellent suggestion, although beyond the scope of our Query Tabular tool which is the focus of this paper. This would most likely require the development of a new Galaxy tool to make this possible, which is something that we will consider pursuing in future developments.</italic>
        </bold>
      </p>
    </body>
  </sub-article>
</sub-article>
<sub-article id="report39107" article-type="peer-review">
  <front-stub>
    <article-id pub-id-type="doi">10.5256/f1000research.17980.r39107</article-id>
    <title-group>
      <article-title>Referee response for version 1</article-title>
    </title-group>
    <contrib-group>
      <contrib contrib-type="author">
        <name>
          <surname>Doyle</surname>
          <given-names>Maria A.</given-names>
        </name>
        <xref ref-type="aff" rid="r39107a1">1</xref>
        <role>Referee</role>
      </contrib>
      <aff id="r39107a1"><label>1</label>Research Computing Facility, Peter MacCallum Cancer Centre, Melbourne, VIC, Australia</aff>
    </contrib-group>
    <author-notes>
      <fn fn-type="COI-statement">
        <p><bold>Competing interests: </bold>No competing interests were disclosed.</p>
      </fn>
    </author-notes>
    <pub-date pub-type="epub">
      <day>13</day>
      <month>11</month>
      <year>2018</year>
    </pub-date>
    <related-article id="d35e1741" related-article-type="peer-reviewed-article" ext-link-type="doi" xlink:href="10.12688/f1000research.16450.1">Version 1</related-article>
    <custom-meta-group>
      <custom-meta>
        <meta-name>recommendation</meta-name>
        <meta-value>approve</meta-value>
      </custom-meta>
    </custom-meta-group>
  </front-stub>
  <body>
    <p>Johnson et al’s paper describes Query Tabular, a tool for simplifying text manipulation in the Galaxy platform. The paper describes the tool and shows example use cases for proteogenomics, metaproteomics and metabolomics. The Query Tabular tool can create an SQLite database that can then be queried, saving on multiple text manipulation steps. Example workflows are provided for the use cases.</p>
    <p> I really like that the tool enables a user to create a database easily from text files. The instructions in the Supplementary Material for running the example workflows were easy to follow and all the workflows ran without issue. The tool also installed easily from the toolshed and ran without error using a example provided in the tool help section.</p>
    <p> Minor suggestions for future revisions:</p>
    <p>  
<list list-type="bullet"><list-item><p>Part of the text is a bit confusing, Query Tabular is referred to as a single tool in most of the text, but then it is also described as “the Query Tabular tools” in the Implementation section.</p></list-item><list-item><p>The user needs to know some SQL to use the tool which could be highlighted more. It could perhaps be noted that this tool might provide a way to introduce/teach SQL to Galaxy users, as it enables them to create a database easily without the need to install anything, so they could just focus on learning SQL queries, like the examples provided by Data Carpentry:
<ext-link ext-link-type="uri" xlink:href="https://datacarpentry.org/sql-ecology-lesson/">https://datacarpentry.org/sql-ecology-lesson/</ext-link>
</p></list-item><list-item><p>The SQL query is shown for workflow 3 (Figure 4) but not for workflows 1 and 2. While the queries are available within the example workflows, it could be helpful to show them all in the text, especially for users not familiar with SQL.</p></list-item><list-item><p>In the workflows described, it’s not always obvious what some of the steps are for (e.g. the Compute step in Figure 2, why there are two Filter sequences by length steps in Figure 3.) Perhaps the generically-named steps in the workflow figure could be changed to have more descriptive names, similar to what some of the steps already have (e.g. “Deduplicate peptides”) And/or perhaps a table could be provided describing what the individual steps are for.</p></list-item><list-item><p>For the workflows, while the inputs and outputs are available in the example workflows provided, it could be helpful to provide screenshots in the text showing what the input and outputs for the use cases look like.</p></list-item><list-item><p>The metabolomics workflow utilizes a tool called VKMZ that’s described as a tool under development. Would be good to note if the workflow is very specific to this tool or also relevant for other metabolomics analyses.</p></list-item><list-item><p>Are there known limits on how big tables can be e.g. are tables with tens/ hundreds of thousands/ millions of rows possible.</p></list-item><list-item><p>The workflows are available in the authors’ Galaxy but it could be noted that the tool is available in other public Galaxies (e.g usegalaxy.eu) for people running analyses there. And perhaps the example workflows could be added to the workflows tested there:
<ext-link ext-link-type="uri" xlink:href="https://github.com/usegalaxy-eu/workflow-testing">https://github.com/usegalaxy-eu/workflow-testing</ext-link>
</p></list-item><list-item><p>Would be good to provide a link to the training material that shows further examples and details on how Query Tabular can be used e.g.
<ext-link ext-link-type="uri" xlink:href="https://galaxyproject.github.io/training-material/topics/proteomics/tutorials/metaproteomics/tutorial.html">https://galaxyproject.github.io/training-material/topics/proteomics/tutorials/metaproteomics/tutorial.html</ext-link>
</p></list-item></list>
</p>
    <p>I have read this submission. I believe that I have an appropriate level of expertise to confirm that it is of an acceptable scientific standard.</p>
  </body>
  <sub-article id="comment4321" article-type="response">
    <front-stub>
      <contrib-group>
        <contrib contrib-type="author">
          <name>
            <surname>Griffin</surname>
            <given-names>Tim</given-names>
          </name>
          <aff>University of Minnesota, USA</aff>
        </contrib>
      </contrib-group>
      <author-notes>
        <fn fn-type="COI-statement">
          <p><bold>Competing interests: </bold>No competing interests</p>
        </fn>
      </author-notes>
      <pub-date pub-type="epub">
        <day>19</day>
        <month>12</month>
        <year>2018</year>
      </pub-date>
    </front-stub>
    <body>
      <p>
        <bold>We thank the reviewer for the comments. Below in bold text we provide responses to these comments and revisions we have made in the updated version.</bold>
      </p>
      <p>Johnson et al’s paper describes Query Tabular, a tool for simplifying text manipulation in the Galaxy platform. The paper describes the tool and shows example use cases for proteogenomics, metaproteomics and metabolomics. The Query Tabular tool can create an SQLite database that can then be queried, saving on multiple text manipulation steps. Example workflows are provided for the use cases.</p>
      <p>I really like that the tool enables a user to create a database easily from text files. The instructions in the Supplementary Material for running the example workflows were easy to follow and all the workflows ran without issue. The tool also installed easily from the toolshed and ran without error using a example provided in the tool help section.</p>
      <p>
        <italic>
          <bold>&gt;We thank the reviewer for the kind comments and positive impressions of the Query Tabular tool.</bold>
        </italic>
      </p>
      <p>
        <bold>Minor suggestions for future revisions:</bold>
      </p>
      <p>--Part of the text is a bit confusing, Query Tabular is referred to as a single tool in most of the text, but then it is also described as “the Query Tabular tools” in the Implementation section.</p>
      <p>
        <italic>
          <bold>&gt;We have clarified this in the Methods section under “Implementation”. We now clarify that Query Tabular is a single tool, but contains three different modules, in the form of python scripts, which carry out different functions. We describe these three functions, and also clarify that Query Tabular is the main Galaxy tool that provides all of this functionality and is the focus of the description manuscript.</bold>
        </italic>
      </p>
      <p>-- The user needs to know some SQL to use the tool which could be highlighted more. It could perhaps be noted that this tool might provide a way to introduce/teach SQL to Galaxy users, as it enables them to create a database easily without the need to install anything, so they could just focus on learning SQL queries, like the examples provided by Data Carpentry:
<underline><ext-link ext-link-type="uri" xlink:href="https://datacarpentry.org/sql-ecology-lesson/" xlink:type="simple">https://datacarpentry.org/sql-ecology-lesson/</ext-link></underline>
</p>
      <p>
        <italic>
          <bold>&gt;We appreciate the suggestion to include this link to help in learning SQL queries, which we have now included in the text in the Conclusions section. We have also clarified in the text that Query Tabular does require some SQL knowledge, and its use is targeted towards more advanced Galaxy users with SQL knowledge. For those readers without SQL knowledge, this link will provide a useful resource for training.</bold>
        </italic>
      </p>
      <p>-- The SQL query is shown for workflow 3 (Figure 4) but not for workflows 1 and 2. While the queries are available within the example workflows, it could be helpful to show them all in the text, especially for users not familiar with SQL.</p>
      <p>
        <italic>
          <bold>&gt;We have now expanded Figures 2 and 3 and show the queries utilized in these workflows within the inset boxes. The figure legends have been updated to reflect these additions to the figures.</bold>
        </italic>
      </p>
      <p>-- In the workflows described, it’s not always obvious what some of the steps are for (e.g. the Compute step in Figure 2, why there are two Filter sequences by length steps in Figure 3.) Perhaps the generically-named steps in the workflow figure could be changed to have more descriptive names, similar to what some of the steps already have (e.g. “Deduplicate peptides”) And/or perhaps a table could be provided describing what the individual steps are for.</p>
      <p>
        <italic>
          <bold>&gt;We have clarified in the text description of the figures that Figures 2 and 3 are meant to show the steps involved in these workflows with or without using Query Tabular, offering a visual depiction of how Query Tabular simplifies these complex workflows. Given this purpose to the figure, we decided not to go into detail on each specific step shown in the workflows.</bold>
        </italic>
      </p>
      <p>-- For the workflows, while the inputs and outputs are available in the example workflows provided, it could be helpful to provide screenshots in the text showing what the input and outputs for the use cases look like.</p>
      <p>
        <italic>
          <bold>&gt;We have revised Figures 2 and 3 and now show small snippets of the tabular input and output data formats for these workflows.</bold>
        </italic>
      </p>
      <p>-- The metabolomics workflow utilizes a tool called VKMZ that’s described as a tool under development. Would be good to note if the workflow is very specific to this tool or also relevant for other metabolomics analyses.</p>
      <p>
        <italic>
          <bold>&gt;The workflow shown is specific to data manipulations necessary for the VKMZ tool.  Query Tabular however is generally useful for any other data manipulations that may be required for a metabolomics workflow. We have added a statement about the general applicability of Query Tabular in the Conclusions section.</bold>
        </italic>
      </p>
      <p>--  Are there known limits on how big tables can be e.g. are tables with tens/ hundreds of thousands/ millions of rows possible.</p>
      <p>
        <italic>
          <bold>&gt;We have yet to encounter limits in terms of table size – we have used on data with millions of rows successfully. We would note that it is important to create indices on tables when dealing with a large number of rows or columns. We state this in the Operation section of the methods.</bold>
        </italic>
      </p>
      <p>-- The workflows are available in the authors’ Galaxy but it could be noted that the tool is available in other public Galaxies (e.g usegalaxy.eu) for people running analyses there. And perhaps the example workflows could be added to the workflows tested there:
<underline><ext-link ext-link-type="uri" xlink:href="https://github.com/usegalaxy-eu/workflow-testing" xlink:type="simple">https://github.com/usegalaxy-eu/workflow-testing</ext-link></underline>
</p>
      <p>
        <bold>
          <italic>&gt;We have added the workflows and input data for each to a Github repository, where these can now be accessed and downloaded (
<underline><ext-link ext-link-type="uri" xlink:href="https://github.com/galaxyproteomics/query_tabular_supplementary_material" xlink:type="simple">https://github.com/galaxyproteomics/query_tabular_supplementary_material</ext-link></underline>). We also mention in the Software Availability section that the Query Tabular tool is available in the Tool Shed, and can be used on local instances or instances such as usegalaxy.eu.</italic>
        </bold>
      </p>
      <p>
        <italic>
          <bold>We are also in process of adding the three demonstration workflows to the Github site established for testing workflows (https://github.com/usegalaxy-eu/workflow-testing). These are listed under names “F1000_Metaproteomics_QueryTabular”, “F1000_Proteogenomics_QueryTabular”, etc.</bold>
        </italic>
      </p>
      <p>-- Would be good to provide a link to the training material that shows further examples and details on how Query Tabular can be used e.g.
<underline><ext-link ext-link-type="uri" xlink:href="https://galaxyproject.github.io/training-material/topics/proteomics/tutorials/metaproteomics/tutorial.html" xlink:type="simple">https://galaxyproject.github.io/training-material/topics/proteomics/tutorials/metaproteomics/tutorial.html</ext-link></underline>
</p>
      <p>
        <bold>
          <italic>&gt;In the future, we will pursue adding Query Tabular to the Galaxy Training Network in the future, under the category of Text Manipulation. We now do point out in the text that the Galaxy Training Network material does contain a metaproteomics tutorial that utilizes Query Tabular, and provides a detailed description of using this tool within this workflow. This provides readers another example of using Query Tabular on complex data, in addition to our Use Cases described in this manuscript.</italic>
        </bold>
      </p>
    </body>
  </sub-article>
</sub-article>
<sub-article id="report39106" article-type="peer-review">
  <front-stub>
    <article-id pub-id-type="doi">10.5256/f1000research.17980.r39106</article-id>
    <title-group>
      <article-title>Referee response for version 1</article-title>
    </title-group>
    <contrib-group>
      <contrib contrib-type="author">
        <name>
          <surname>Blankenberg</surname>
          <given-names>Daniel</given-names>
        </name>
        <xref ref-type="aff" rid="r39106a1">1</xref>
        <role>Referee</role>
        <contrib-id contrib-id-type="orcid">https://orcid.org/0000-0002-6833-9049</contrib-id>
      </contrib>
      <aff id="r39106a1"><label>1</label>Genomic Medicine Institute, Lerner Research Institute, Cleveland Clinic, Cleveland, OH, USA</aff>
    </contrib-group>
    <author-notes>
      <fn fn-type="COI-statement">
        <p><bold>Competing interests: </bold>No competing interests were disclosed.</p>
      </fn>
    </author-notes>
    <pub-date pub-type="epub">
      <day>5</day>
      <month>11</month>
      <year>2018</year>
    </pub-date>
    <related-article id="d35e1978" related-article-type="peer-reviewed-article" ext-link-type="doi" xlink:href="10.12688/f1000research.16450.1">Version 1</related-article>
    <custom-meta-group>
      <custom-meta>
        <meta-name>recommendation</meta-name>
        <meta-value>approve-with-reservations</meta-value>
      </custom-meta>
    </custom-meta-group>
  </front-stub>
  <body>
    <p>
      <bold>Summary: </bold>
    </p>
    <p> The authors describe a set of Galaxy tools collectively referred to as “Query Tabular” (but composed of 3 individual tools “Query Tabular”, “SQLite to Tabular”, and “Filter Tabular”). This tool allows user-defined database operations to be performed on tabular files within Galaxy through the use of generated sqlite intermediate files. Tabular files are very common outputs of bioinformatics tools, and a significant number of Galaxy tools exist for manipulating these types of files. By enabling the the use of SQL statements to transform tabular files, a great deal of effort that currently requires several tools from the ‘standard’ Galaxy text manipulation toolbox can be performed in far fewer steps.</p>
    <p>
      <bold>General comments:</bold>
    </p>
    <p> Query Tabular does enable powerful manipulations to be performed, and it can simplify a workflow which may otherwise have many simple text manipulation tools connected together to achieve a similar result. A significant caveat is that the most powerful functions require the user to have working knowledge of SQL (‘simple’ things like filtering do not). For pre-canned workflows, this is not a problem, but for a typical ‘bench scientist’ attempting to use Query Tabular this may prove to be a formidable barrier to usage when developing their own analysis pipelines. This isn’t necessarily a problem with the tool, just a fact of the intended tool design, but it does place it into more of the power-user category. This does enable someone with SQL knowledge to easily do a bunch of neat things inside of Galaxy, and it might be beneficial to include a link to a resource with general help on writing SQL and perhaps provide an additional resource that provides examples of some typical operations relevant to common Galaxy tools.</p>
    <p>
      <bold>Essential changes:</bold>
      <list list-type="order">
        <list-item>
          <p>Figure 1: Have “Table Options” section expanded to show that table name is being set and that header line is being used for column names. It would also be helpful to provide a small snippet (~5 lines or so) of the input tabular file that is selected in an additional panel.</p>
        </list-item>
        <list-item>
          <p>Provide direct downloads for each example input file and exported workflow (perhaps at Zenodo or a Github repository, etc). Currently a reader needs to visit and register an account at two separate Galaxy servers to gain access to these examples.</p>
        </list-item>
      </list>
    </p>
    <p>
      <bold>Minor suggestions:</bold>
      <list list-type="order">
        <list-item>
          <p>It might be useful to provide a link to, or list by name, the specific Galaxy Training material tutorial that currently makes use of Query Tabular (
<ext-link ext-link-type="uri" xlink:href="https://galaxyproject.github.io/training-material/topics/proteomics/tutorials/metaproteomics/tutorial.html">https://galaxyproject.github.io/training-material/topics/proteomics/tutorials/metaproteomics/tutorial.html</ext-link>) when mentioning the online training available.</p>
        </list-item>
        <list-item>
          <p>More examples of ‘real-world’ usage could be helpful, especially to users that are less experienced with SQL. Perhaps as a linked external Github page, or similar.</p>
        </list-item>
      </list>
    </p>
    <p>I have read this submission. I believe that I have an appropriate level of expertise to confirm that it is of an acceptable scientific standard, however I have significant reservations, as outlined above.</p>
  </body>
  <sub-article id="comment4322" article-type="response">
    <front-stub>
      <contrib-group>
        <contrib contrib-type="author">
          <name>
            <surname>Griffin</surname>
            <given-names>Tim</given-names>
          </name>
          <aff>University of Minnesota, USA</aff>
        </contrib>
      </contrib-group>
      <author-notes>
        <fn fn-type="COI-statement">
          <p><bold>Competing interests: </bold>No competing interests</p>
        </fn>
      </author-notes>
      <pub-date pub-type="epub">
        <day>19</day>
        <month>12</month>
        <year>2018</year>
      </pub-date>
    </front-stub>
    <body>
      <p>
        <bold>We thank the reviewer for the comments. Below in bold text we provide responses to these comments and revisions we have made in the updated version.</bold>
      </p>
      <p>
        <bold>General comments:</bold>
      </p>
      <p>Query Tabular does enable powerful manipulations to be performed, and it can simplify a workflow which may otherwise have many simple text manipulation tools connected together to achieve a similar result. A significant caveat is that the most powerful functions require the user to have working knowledge of SQL (‘simple’ things like filtering do not). For pre-canned workflows, this is not a problem, but
<italic>for a typical ‘bench scientist’ attempting to use Query Tabular this may prove to be a formidable barrier to usage when developing their own analysis pipelines.</italic> This isn’t necessarily a problem with the tool, just a fact of the intended tool design, but it does place it into more of the power-user category. This does enable someone with SQL knowledge to easily do a bunch of neat things inside of Galaxy, and it might be beneficial to include a link to a resource with general help on writing SQL and perhaps provide an additional resource that provides examples of some typical operations relevant to common Galaxy tools.</p>
      <p>
        <italic>
          <bold>&gt;The suggestion about clarifying the target user audience for this tool is well-taken. It is true that Query Tabular does require working knowledge of SQL, and as such higher level users and developers of Galaxy benefit most directly from this tool. We have acknowledged this in the Conclusions section, and also we point readers to training material for those unfamiliar with SQL. </bold>
        </italic>
      </p>
      <p>
        <bold>Essential changes:</bold>
      </p>
      <p>1) Figure 1: Have “Table Options” section expanded to show that table name is being set and that header line is being used for column names. It would also be helpful to provide a small snippet (~5 lines or so) of the input tabular file that is selected in an additional panel.</p>
      <p>
        <italic>
          <bold>&gt;We have expanded Figure 1 to show the “collapsed” view of the Query Tabular tool, as well as expanded views of the Table options and Filtering menus which open when selected in the tool. We have also provided a view of snippets of the tabular data that comprise input and output for the use case workflows shown in Figure 2 (proteogenomics) and Figure 3 (metaproteomics). The figure legends have also been updated reflecting these changes.</bold>
        </italic>
      </p>
      <p>2) Provide direct downloads for each example input file and exported workflow (perhaps at Zenodo or a Github repository, etc). Currently a reader needs to visit and register an account at two separate Galaxy servers to gain access to these examples.</p>
      <p>
        <bold>
          <italic>&gt;We have deposited workflow files (.ga format) for the 3 use cases and also the example input data for these into an accessible Github repository at:
<underline><ext-link ext-link-type="uri" xlink:href="https://github.com/galaxyproteomics/query_tabular_supplementary_material" xlink:type="simple">https://github.com/galaxyproteomics/query_tabular_supplementary_material</ext-link></underline></italic>
        </bold>
      </p>
      <p>
        <bold>
          <italic>We describe access to the workflow files and data in this Github repository in the Software Availability section. This repository also contains a README file describing the use case workflows and input data.</italic>
        </bold>
      </p>
      <p>
        <bold>Minor suggestions:</bold>
      </p>
      <p>1. It might be useful to provide a link to, or list by name, the specific Galaxy Training material tutorial that currently makes use of Query Tabular (https://galaxyproject.github.io/training-material/topics/proteomics/tutorials/metaproteomics/tutorial.html) when mentioning the online training available.</p>
      <p>
        <italic>
          <bold>&gt;We have added a link to a newly created training tutorial on proteogenomics that is part of the GTN (
<ext-link ext-link-type="uri" xlink:href="https://galaxyproject.github.io/training-material/topics/proteomics/tutorials/proteogenomics-novel-peptide-analysis/tutorial.html">https://galaxyproject.github.io/training-material/topics/proteomics/tutorials/proteogenomics-novel-peptide-analysis/tutorial.html</ext-link>). We have added this link to the Conclusions section and we also mention this link as another example of application of Query Tabular for complex data manipulations in the introductory text of the Use Case section.</bold>
        </italic>
      </p>
      <p>2. More examples of ‘real-world’ usage could be helpful, especially to users that are less experienced with SQL. Perhaps as a linked external Github page, or similar.</p>
      <p>
        <bold>
          <italic>&gt;We have emphasized in the text the Galaxy wrapper which provides some simplified explanation of how the Query Tabular tool operates (see second line of text in Use Cases section). For those wanting more exposure to more complex data workflows which mimic those encountered by many researchers, we point them to the three use case workflows which were designed as representative, more complex examples where this tool has value and are now available for direct download and install from a Github repository (
<ext-link ext-link-type="uri" xlink:href="https://github.com/galaxyproteomics/query_tabular_supplementary_material">https://github.com/galaxyproteomics/query_tabular_supplementary_material</ext-link>).  Additionally, at the start of the Use Case section, we now point the readers to the proteogenomics workflow on the Galaxy Training Network which provides another “real-world” application of Query Tabular (
<ext-link ext-link-type="uri" xlink:href="https://galaxyproject.github.io/training-material/topics/proteomics/tutorials/proteogenomics-novel-peptide-analysis/tutorial.html">https://galaxyproject.github.io/training-material/topics/proteomics/tutorials/proteogenomics-novel-peptide-analysis/tutorial.html</ext-link>).  We also point readers to Galaxy Training Network material focused on metaproteomics (https://galaxyproject.github.io/training-material/topics/proteomics/tutorials/metaproteomics/tutorial.html) which also utilizes Query Tabular and provides a detailed explanation of the tool and its use within this complex, real-world workflow.</italic>
        </bold>
      </p>
    </body>
  </sub-article>
</sub-article>
